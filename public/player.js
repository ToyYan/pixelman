(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define([], factory);
	else if(typeof exports === 'object')
		exports["epicgames-frontend"] = factory();
	else
		root["epicgames-frontend"] = factory();
})(this, () => {
return /******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./node_modules/@epicgames-ps/lib-pixelstreamingfrontend-ue5.2/dist/lib-pixelstreamingfrontend.esm.js":
/*!************************************************************************************************************!*\
  !*** ./node_modules/@epicgames-ps/lib-pixelstreamingfrontend-ue5.2/dist/lib-pixelstreamingfrontend.esm.js ***!
  \************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AfkLogic": () => (/* binding */ Ct),
/* harmony export */   "AfkTimedOutEvent": () => (/* binding */ ft),
/* harmony export */   "AfkWarningActivateEvent": () => (/* binding */ Tt),
/* harmony export */   "AfkWarningDeactivateEvent": () => (/* binding */ Et),
/* harmony export */   "AfkWarningUpdateEvent": () => (/* binding */ yt),
/* harmony export */   "AggregatedStats": () => (/* binding */ bt),
/* harmony export */   "CandidatePairStats": () => (/* binding */ Mt),
/* harmony export */   "CandidateStat": () => (/* binding */ wt),
/* harmony export */   "Config": () => (/* binding */ Pt),
/* harmony export */   "ControlSchemeType": () => (/* binding */ Rt),
/* harmony export */   "DataChannelCloseEvent": () => (/* binding */ kt),
/* harmony export */   "DataChannelErrorEvent": () => (/* binding */ Lt),
/* harmony export */   "DataChannelOpenEvent": () => (/* binding */ xt),
/* harmony export */   "DataChannelStats": () => (/* binding */ At),
/* harmony export */   "EncoderSettings": () => (/* binding */ Ft),
/* harmony export */   "EventEmitter": () => (/* binding */ Dt),
/* harmony export */   "Flags": () => (/* binding */ Ot),
/* harmony export */   "HideFreezeFrameEvent": () => (/* binding */ Ut),
/* harmony export */   "InboundAudioStats": () => (/* binding */ It),
/* harmony export */   "InboundVideoStats": () => (/* binding */ Gt),
/* harmony export */   "InitialSettings": () => (/* binding */ zt),
/* harmony export */   "InitialSettingsEvent": () => (/* binding */ Bt),
/* harmony export */   "LatencyTestResultEvent": () => (/* binding */ _t),
/* harmony export */   "LatencyTestResults": () => (/* binding */ Wt),
/* harmony export */   "LoadFreezeFrameEvent": () => (/* binding */ Ht),
/* harmony export */   "Logger": () => (/* binding */ Vt),
/* harmony export */   "MessageRecv": () => (/* binding */ Nt),
/* harmony export */   "MessageSend": () => (/* binding */ Kt),
/* harmony export */   "MessageStreamerList": () => (/* binding */ Qt),
/* harmony export */   "NumericParameters": () => (/* binding */ $t),
/* harmony export */   "OptionParameters": () => (/* binding */ qt),
/* harmony export */   "OutBoundVideoStats": () => (/* binding */ Xt),
/* harmony export */   "PixelStreaming": () => (/* binding */ jt),
/* harmony export */   "PlayStreamErrorEvent": () => (/* binding */ Yt),
/* harmony export */   "PlayStreamEvent": () => (/* binding */ Jt),
/* harmony export */   "PlayStreamRejectedEvent": () => (/* binding */ Zt),
/* harmony export */   "SettingBase": () => (/* binding */ es),
/* harmony export */   "SettingFlag": () => (/* binding */ ts),
/* harmony export */   "SettingNumber": () => (/* binding */ ss),
/* harmony export */   "SettingOption": () => (/* binding */ ns),
/* harmony export */   "SettingText": () => (/* binding */ rs),
/* harmony export */   "SettingsChangedEvent": () => (/* binding */ is),
/* harmony export */   "SignallingProtocol": () => (/* binding */ os),
/* harmony export */   "StatsReceivedEvent": () => (/* binding */ as),
/* harmony export */   "StreamLoadingEvent": () => (/* binding */ ls),
/* harmony export */   "StreamerListMessageEvent": () => (/* binding */ ds),
/* harmony export */   "TextParameters": () => (/* binding */ cs),
/* harmony export */   "UnquantizedAndDenormalizeUnsigned": () => (/* binding */ hs),
/* harmony export */   "VideoEncoderAvgQPEvent": () => (/* binding */ gs),
/* harmony export */   "VideoInitializedEvent": () => (/* binding */ us),
/* harmony export */   "WebRTCSettings": () => (/* binding */ ms),
/* harmony export */   "WebRtcAutoConnectEvent": () => (/* binding */ Ss),
/* harmony export */   "WebRtcConnectedEvent": () => (/* binding */ ps),
/* harmony export */   "WebRtcConnectingEvent": () => (/* binding */ vs),
/* harmony export */   "WebRtcDisconnectedEvent": () => (/* binding */ Cs),
/* harmony export */   "WebRtcFailedEvent": () => (/* binding */ fs),
/* harmony export */   "WebRtcPlayerController": () => (/* binding */ Ts),
/* harmony export */   "WebRtcSdpEvent": () => (/* binding */ Es),
/* harmony export */   "WebSocketController": () => (/* binding */ ys),
/* harmony export */   "WebXRController": () => (/* binding */ bs),
/* harmony export */   "XrFrameEvent": () => (/* binding */ Ms),
/* harmony export */   "XrSessionEndedEvent": () => (/* binding */ ws),
/* harmony export */   "XrSessionStartedEvent": () => (/* binding */ Ps)
/* harmony export */ });
/* harmony import */ var sdp__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! sdp */ "./node_modules/sdp/sdp.js");
/* harmony import */ var sdp__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(sdp__WEBPACK_IMPORTED_MODULE_0__);
var t,s,n={d:(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},r={};n.d(r,{Dz:()=>me,g$:()=>A,Lt:()=>k,Q9:()=>x,qf:()=>L,hV:()=>Me,z$:()=>Te,J0:()=>fe,De:()=>ge,$C:()=>ue,al:()=>_,_W:()=>W,tz:()=>B,Nu:()=>Ce,zg:()=>Oe,vp:()=>ne,vU:()=>re,wF:()=>q,rv:()=>pe,Nh:()=>ve,ss:()=>Fe,qW:()=>J,QL:()=>Y,cf:()=>Ie,eM:()=>$,Yd:()=>i,iM:()=>p,qy:()=>o,ce:()=>v,sK:()=>oe,Ok:()=>ce,q5:()=>Ee,g:()=>vt,xl:()=>N,I:()=>K,bx:()=>Q,Ib:()=>b,Az:()=>M,Iw:()=>w,qY:()=>R,db:()=>P,mR:()=>Z,Tn:()=>C,rV:()=>X,gh:()=>V,i5:()=>j,x_:()=>le,Am:()=>dt,eR:()=>F,r8:()=>H,u3:()=>Ue,vd:()=>O,iV:()=>I,jZ:()=>U,SW:()=>z,ZH:()=>G,Ni:()=>ht,lh:()=>D,bq:()=>f,$f:()=>St,eu:()=>se,Ax:()=>te,Mc:()=>ee});class i{static GetStackTrace(){const e=new Error;let t="No Stack Available for this browser";return e.stack&&(t=e.stack.toString().replace(/Error/g,"")),t}static SetLoggerVerbosity(e){null!=this.verboseLogLevel&&(this.verboseLogLevel=e)}static Log(e,t,s){if(s>this.verboseLogLevel)return;const n=`Level: Log\nMsg: ${t}\nCaller: ${e}`;console.log(n)}static Info(e,t,s){if(s>this.verboseLogLevel)return;const n=`Level: Info\nMsg: ${t}`;console.info(n)}static Error(e,t){const s=`Level: Error\nMsg: ${t}\nCaller: ${e}`;console.error(s)}static Warning(e,t){const s=`Level: Warning\nCaller: ${e}\nMsg: ${t}`;console.warn(s)}}i.verboseLogLevel=5,function(e){e.LIST_STREAMERS="listStreamers",e.SUBSCRIBE="subscribe",e.UNSUBSCRIBE="unsubscribe",e.ICE_CANDIDATE="iceCandidate",e.OFFER="offer",e.ANSWER="answer",e.DATACHANNELREQUEST="dataChannelRequest",e.SFURECVDATACHANNELREADY="peerDataChannelsReady",e.PONG="pong"}(t||(t={}));class o{payload(){return i.Log(i.GetStackTrace(),"Sending => \n"+JSON.stringify(this,void 0,4),6),JSON.stringify(this)}}class a extends o{constructor(){super(),this.type=t.LIST_STREAMERS}}class l extends o{constructor(e){super(),this.type=t.SUBSCRIBE,this.streamerId=e}}class d extends o{constructor(){super(),this.type=t.UNSUBSCRIBE}}class c extends o{constructor(e){super(),this.type=t.PONG,this.time=e}}class h extends o{constructor(e){super(),this.type=t.OFFER,e&&(this.type=e.type,this.sdp=e.sdp)}}class g extends o{constructor(e){super(),this.type=t.ANSWER,e&&(this.type=e.type,this.sdp=e.sdp)}}class u extends o{constructor(){super(),this.type=t.DATACHANNELREQUEST}}class m extends o{constructor(){super(),this.type=t.SFURECVDATACHANNELREADY}}class S{constructor(e){this.type=t.ICE_CANDIDATE,this.candidate=e}payload(){return i.Log(i.GetStackTrace(),"Sending => \n"+JSON.stringify(this,void 0,4),6),JSON.stringify(this)}}!function(e){e.CONFIG="config",e.STREAMER_LIST="streamerList",e.PLAYER_COUNT="playerCount",e.OFFER="offer",e.ANSWER="answer",e.ICE_CANDIDATE="iceCandidate",e.PEER_DATA_CHANNELS="peerDataChannels",e.PING="ping",e.WARNING="warning"}(s||(s={}));class p{}class v extends p{}class C{constructor(){this.FromUEMessageHandlers=new Map}addMessageHandler(e,t){this.FromUEMessageHandlers.set(e,t)}handleMessage(e,t){this.FromUEMessageHandlers.has(e)?this.FromUEMessageHandlers.get(e)(t):i.Error(i.GetStackTrace(),`Message type of ${e} does not have a message handler registered on the frontend - ignoring message.`)}static setupDefaultHandlers(e){e.signallingProtocol.addMessageHandler(s.PING,(t=>{const n=new c((new Date).getTime()).payload();i.Log(i.GetStackTrace(),s.PING+": "+t,6),e.webSocket.send(n)})),e.signallingProtocol.addMessageHandler(s.CONFIG,(t=>{i.Log(i.GetStackTrace(),s.CONFIG,6);const n=JSON.parse(t);e.onConfig(n)})),e.signallingProtocol.addMessageHandler(s.STREAMER_LIST,(t=>{i.Log(i.GetStackTrace(),s.STREAMER_LIST,6);const n=JSON.parse(t);e.onStreamerList(n)})),e.signallingProtocol.addMessageHandler(s.PLAYER_COUNT,(e=>{i.Log(i.GetStackTrace(),s.PLAYER_COUNT,6);const t=JSON.parse(e);i.Log(i.GetStackTrace(),"Player Count: "+t.count,6)})),e.signallingProtocol.addMessageHandler(s.ANSWER,(t=>{i.Log(i.GetStackTrace(),s.ANSWER,6);const n=JSON.parse(t);e.onWebRtcAnswer(n)})),e.signallingProtocol.addMessageHandler(s.OFFER,(t=>{i.Log(i.GetStackTrace(),s.OFFER,6);const n=JSON.parse(t);e.onWebRtcOffer(n)})),e.signallingProtocol.addMessageHandler(s.ICE_CANDIDATE,(t=>{i.Log(i.GetStackTrace(),s.ICE_CANDIDATE,6);const n=JSON.parse(t);e.onIceCandidate(n.candidate)})),e.signallingProtocol.addMessageHandler(s.WARNING,(e=>{i.Warning(i.GetStackTrace(),`Warning received: ${e}`)})),e.signallingProtocol.addMessageHandler(s.PEER_DATA_CHANNELS,(t=>{i.Log(i.GetStackTrace(),s.PEER_DATA_CHANNELS,6);const n=JSON.parse(t);e.onWebRtcPeerDataChannels(n)}))}}class f{constructor(){this.WS_OPEN_STATE=1,this.onOpen=new EventTarget,this.onClose=new EventTarget,this.signallingProtocol=new C,C.setupDefaultHandlers(this)}connect(e){i.Log(i.GetStackTrace(),e,6);try{return this.webSocket=new WebSocket(e),this.webSocket.onopen=e=>this.handleOnOpen(e),this.webSocket.onerror=()=>this.handleOnError(),this.webSocket.onclose=e=>this.handleOnClose(e),this.webSocket.onmessage=e=>this.handleOnMessage(e),this.webSocket.onmessagebinary=e=>this.handleOnMessageBinary(e),!0}catch(e){return i.Error(e,e),!1}}handleOnMessageBinary(e){e&&e.data&&e.data.text().then((e=>{const t=new MessageEvent("messageFromBinary",{data:e});this.handleOnMessage(t)})).catch((e=>{i.Error(i.GetStackTrace(),`Failed to parse binary blob from websocket, reason: ${e}`)}))}handleOnMessage(e){if(e.data&&e.data instanceof Blob)return void this.handleOnMessageBinary(e);const t=JSON.parse(e.data);i.Log(i.GetStackTrace(),"received => \n"+JSON.stringify(JSON.parse(e.data),void 0,4),6),this.signallingProtocol.handleMessage(t.type,e.data)}handleOnOpen(e){i.Log(i.GetStackTrace(),"Connected to the signalling server via WebSocket",6),this.onOpen.dispatchEvent(new Event("open"))}handleOnError(){i.Error(i.GetStackTrace(),"WebSocket error")}handleOnClose(e){this.onWebSocketOncloseOverlayMessage(e),i.Log(i.GetStackTrace(),"Disconnected to the signalling server via WebSocket: "+JSON.stringify(e.code)+" - "+e.reason),this.onClose.dispatchEvent(new Event("close"))}requestStreamerList(){const e=new a;this.webSocket.send(e.payload())}sendSubscribe(e){const t=new l(e);this.webSocket.send(t.payload())}sendUnsubscribe(){const e=new d;this.webSocket.send(e.payload())}sendWebRtcOffer(e){const t=new h(e);this.webSocket.send(t.payload())}sendWebRtcAnswer(e){const t=new g(e);this.webSocket.send(t.payload())}sendWebRtcDatachannelRequest(){const e=new u;this.webSocket.send(e.payload())}sendSFURecvDataChannelReady(){const e=new m;this.webSocket.send(e.payload())}sendIceCandidate(e){if(i.Log(i.GetStackTrace(),"Sending Ice Candidate"),this.webSocket&&this.webSocket.readyState===this.WS_OPEN_STATE){const t=new S(e);this.webSocket.send(t.payload())}}close(){var e;null===(e=this.webSocket)||void 0===e||e.close()}onWebSocketOncloseOverlayMessage(e){}onConfig(e){}onStreamerList(e){}onIceCandidate(e){}onWebRtcAnswer(e){}onWebRtcOffer(e){}onWebRtcPeerDataChannels(e){}}class T{constructor(e){this.videoElementProvider=e,this.audioElement=document.createElement("Audio")}handleOnTrack(e){i.Log(i.GetStackTrace(),"handleOnTrack "+JSON.stringify(e.streams),6);const t=this.videoElementProvider.getVideoElement();if(e.track&&i.Log(i.GetStackTrace(),"Got track - "+e.track.kind+" id="+e.track.id+" readyState="+e.track.readyState,6),"audio"!=e.track.kind)return"video"==e.track.kind&&t.srcObject!==e.streams[0]?(t.srcObject=e.streams[0],void i.Log(i.GetStackTrace(),"Set video source from video track ontrack.")):void 0;this.CreateAudioTrack(e.streams[0])}CreateAudioTrack(e){const t=this.videoElementProvider.getVideoElement();t.srcObject!=e&&t.srcObject&&t.srcObject!==e&&(this.audioElement.srcObject=e,i.Log(i.GetStackTrace(),"Created new audio element to play separate audio stream."))}}class E{constructor(e){this.freezeFrameHeight=0,this.freezeFrameWidth=0,this.rootDiv=e,this.rootElement=document.createElement("div"),this.rootElement.id="freezeFrame",this.rootElement.style.display="none",this.rootElement.style.pointerEvents="none",this.rootElement.style.position="absolute",this.rootElement.style.zIndex="20",this.imageElement=document.createElement("img"),this.imageElement.style.position="absolute",this.rootElement.appendChild(this.imageElement),this.rootDiv.appendChild(this.rootElement)}setElementForShow(){this.rootElement.style.display="block"}setElementForHide(){this.rootElement.style.display="none"}updateImageElementSource(e){const t=btoa(e.reduce(((e,t)=>e+String.fromCharCode(t)),""));this.imageElement.src="data:image/jpeg;base64,"+t}setDimensionsFromElementAndResize(){this.freezeFrameHeight=this.imageElement.naturalHeight,this.freezeFrameWidth=this.imageElement.naturalWidth,this.resize()}resize(){if(0!==this.freezeFrameWidth&&0!==this.freezeFrameHeight){let e=0,t=0,s=0,n=0;const r=this.rootDiv.clientWidth/this.rootDiv.clientHeight,i=this.freezeFrameWidth/this.freezeFrameHeight;r<i?(e=this.rootDiv.clientWidth,t=Math.floor(this.rootDiv.clientWidth/i),s=Math.floor(.5*(this.rootDiv.clientHeight-t)),n=0):(e=Math.floor(this.rootDiv.clientHeight*i),t=this.rootDiv.clientHeight,s=0,n=Math.floor(.5*(this.rootDiv.clientWidth-e))),this.rootElement.style.width=this.rootDiv.offsetWidth+"px",this.rootElement.style.height=this.rootDiv.offsetHeight+"px",this.rootElement.style.left="0px",this.rootElement.style.top="0px",this.imageElement.style.width=e+"px",this.imageElement.style.height=t+"px",this.imageElement.style.left=n+"px",this.imageElement.style.top=s+"px"}}}class y{constructor(e){this.receiving=!1,this.size=0,this.jpeg=void 0,this.valid=!1,this.freezeFrameDelay=50,this.freezeFrame=new E(e)}showFreezeFrame(){this.valid&&this.freezeFrame.setElementForShow()}hideFreezeFrame(){this.valid=!1,this.freezeFrame.setElementForHide()}updateFreezeFrameAndShow(e,t){this.freezeFrame.updateImageElementSource(e),this.freezeFrame.imageElement.onload=()=>{this.freezeFrame.setDimensionsFromElementAndResize(),t()}}processFreezeFrameMessage(e,t){this.receiving||(this.receiving=!0,this.valid=!1,this.size=0,this.jpeg=void 0),this.size=new DataView(e.slice(1,5).buffer).getInt32(0,!0);const s=e.slice(5);if(this.jpeg){const e=new Uint8Array(this.jpeg.length+s.length);e.set(this.jpeg,0),e.set(s,this.jpeg.length),this.jpeg=e}else this.jpeg=s,this.receiving=!0,i.Log(i.GetStackTrace(),`received first chunk of freeze frame: ${this.jpeg.length}/${this.size}`,6);this.jpeg.length===this.size?(this.receiving=!1,this.valid=!0,i.Log(i.GetStackTrace(),`received complete freeze frame ${this.size}`,6),this.updateFreezeFrameAndShow(this.jpeg,t)):this.jpeg.length>this.size&&(i.Error(i.GetStackTrace(),`received bigger freeze frame than advertised: ${this.jpeg.length}/${this.size}`),this.jpeg=void 0,this.receiving=!1)}}class b{constructor(e,t,s,n,r=(()=>{})){this.onChange=r,this.onChangeEmit=()=>{},this.id=e,this.description=s,this.label=t,this.value=n}set label(e){this._label=e,this.onChangeEmit(this._value)}get label(){return this._label}get value(){return this._value}set value(e){this._value=e,this.onChange(this._value,this),this.onChangeEmit(this._value)}}class M extends b{constructor(e,t,s,n,r,i=(()=>{})){super(e,t,s,n,i);const o=new URLSearchParams(window.location.search);if(r&&o.has(this.id)){const e=this.getUrlParamFlag();this.flag=e}else this.flag=n;this.useUrlParams=r}getUrlParamFlag(){const e=new URLSearchParams(window.location.search);return!!e.has(this.id)&&"false"!==e.get(this.id)&&"False"!==e.get(this.id)}updateURLParams(){if(this.useUrlParams){const e=new URLSearchParams(window.location.search);!0===this.flag?e.set(this.id,"true"):e.set(this.id,"false"),window.history.replaceState({},"",""!==e.toString()?`${location.pathname}?${e}`:`${location.pathname}`)}}enable(){this.flag=!0}get flag(){return!!this.value}set flag(e){this.value=e}}class w extends b{constructor(e,t,s,n,r,i,o,a=(()=>{})){super(e,t,s,i,a),this._min=n,this._max=r;const l=new URLSearchParams(window.location.search);if(o&&l.has(this.id)){const e=Number.parseInt(l.get(this.id));this.number=Number.isNaN(e)?i:e}else this.number=i;this.useUrlParams=o}updateURLParams(){if(this.useUrlParams){const e=new URLSearchParams(window.location.search);e.set(this.id,this.number.toString()),window.history.replaceState({},"",""!==e.toString()?`${location.pathname}?${e}`:`${location.pathname}`)}}set number(e){this.value=this.clamp(e)}get number(){return this.value}clamp(e){return Math.max(Math.min(this._max,e),this._min)}get min(){return this._min}get max(){return this._max}addOnChangedListener(e){this.onChange=e}}class P extends b{constructor(e,t,s,n,r,i=(()=>{})){super(e,t,s,n,i);const o=new URLSearchParams(window.location.search);if(r&&o.has(this.id)){const e=this.getUrlParamText();this.text=e}else this.text=n;this.useUrlParams=r}getUrlParamText(){var e;const t=new URLSearchParams(window.location.search);return t.has(this.id)&&null!==(e=t.get(this.id))&&void 0!==e?e:""}updateURLParams(){if(this.useUrlParams){const e=new URLSearchParams(window.location.search);e.set(this.id,this.text),window.history.replaceState({},"",""!==e.toString()?`${location.pathname}?${e}`:`${location.pathname}`)}}get text(){return this.value}set text(e){this.value=e}}class R extends b{constructor(e,t,s,n,r,i,o=(()=>{})){super(e,t,s,[n,n],o),this.options=r;const a=new URLSearchParams(window.location.search),l=i&&a.has(this.id)?this.getUrlParamText():n;this.selected=l,this.useUrlParams=i}getUrlParamText(){var e;const t=new URLSearchParams(window.location.search);return t.has(this.id)&&null!==(e=t.get(this.id))&&void 0!==e?e:""}updateURLParams(){if(this.useUrlParams){const e=new URLSearchParams(window.location.search);e.set(this.id,this.selected),window.history.replaceState({},"",""!==e.toString()?`${location.pathname}?${e}`:`${location.pathname}`)}}addOnChangedListener(e){this.onChange=e}get options(){return this._options}set options(e){this._options=e,this.onChangeEmit(this.selected)}get selected(){return this.value}set selected(e){const t=this.options.filter((t=>-1!==t.indexOf(e)));t.length&&(this.value=t[0])}}class k extends Event{constructor(e){super("afkWarningActivate"),this.data=e}}class L extends Event{constructor(e){super("afkWarningUpdate"),this.data=e}}class x extends Event{constructor(){super("afkWarningDeactivate")}}class A extends Event{constructor(){super("afkTimedOut")}}class F extends Event{constructor(e){super("videoEncoderAvgQP"),this.data=e}}class D extends Event{constructor(){super("webRtcSdp")}}class O extends Event{constructor(){super("webRtcAutoConnect")}}class U extends Event{constructor(){super("webRtcConnecting")}}class I extends Event{constructor(){super("webRtcConnected")}}class G extends Event{constructor(){super("webRtcFailed")}}class z extends Event{constructor(e){super("webRtcDisconnected"),this.data=e}}class B extends Event{constructor(e){super("dataChannelOpen"),this.data=e}}class _ extends Event{constructor(e){super("dataChannelClose"),this.data=e}}class W extends Event{constructor(e){super("dataChannelError"),this.data=e}}class H extends Event{constructor(){super("videoInitialized")}}class V extends Event{constructor(){super("streamLoading")}}class N extends Event{constructor(e){super("playStreamError"),this.data=e}}class K extends Event{constructor(){super("playStream")}}class Q extends Event{constructor(e){super("playStreamRejected"),this.data=e}}class $ extends Event{constructor(e){super("loadFreezeFrame"),this.data=e}}class q extends Event{constructor(){super("hideFreezeFrame")}}class X extends Event{constructor(e){super("statsReceived"),this.data=e}}class j extends Event{constructor(e){super("streamerListMessage"),this.data=e}}class Y extends Event{constructor(e){super("latencyTestResult"),this.data=e}}class J extends Event{constructor(e){super("initialSettings"),this.data=e}}class Z extends Event{constructor(e){super("settingsChanged"),this.data=e}}class ee extends Event{constructor(){super("xrSessionStarted")}}class te extends Event{constructor(){super("xrSessionEnded")}}class se extends Event{constructor(e){super("xrFrame"),this.data=e}}class ne extends EventTarget{dispatchEvent(e){return super.dispatchEvent(e)}addEventListener(e,t){super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}}class re{}re.AutoConnect="AutoConnect",re.AutoPlayVideo="AutoPlayVideo",re.AFKDetection="TimeoutIfIdle",re.BrowserSendOffer="OfferToReceive",re.HoveringMouseMode="HoveringMouse",re.ForceMonoAudio="ForceMonoAudio",re.ForceTURN="ForceTURN",re.FakeMouseWithTouches="FakeMouseWithTouches",re.IsQualityController="ControlsQuality",re.MatchViewportResolution="MatchViewportRes",re.PreferSFU="preferSFU",re.StartVideoMuted="StartVideoMuted",re.SuppressBrowserKeys="SuppressBrowserKeys",re.UseMic="UseMic",re.KeyboardInput="KeyboardInput",re.MouseInput="MouseInput",re.TouchInput="TouchInput",re.GamepadInput="GamepadInput",re.XRControllerInput="XRControllerInput";const ie=e=>Object.getOwnPropertyNames(re).some((t=>re[t]===e));class oe{}oe.AFKTimeoutSecs="AFKTimeout",oe.MinQP="MinQP",oe.MaxQP="MaxQP",oe.WebRTCFPS="WebRTCFPS",oe.WebRTCMinBitrate="WebRTCMinBitrate",oe.WebRTCMaxBitrate="WebRTCMaxBitrate",oe.MaxReconnectAttempts="MaxReconnectAttempts";const ae=e=>Object.getOwnPropertyNames(oe).some((t=>oe[t]===e));class le{}le.SignallingServerUrl="ss";const de=e=>Object.getOwnPropertyNames(le).some((t=>le[t]===e));class ce{}ce.PreferredCodec="PreferredCodec",ce.StreamerId="StreamerId";const he=e=>Object.getOwnPropertyNames(ce).some((t=>ce[t]===e));class ge{constructor(e={}){this.flags=new Map,this.numericParameters=new Map,this.textParameters=new Map,this.optionParameters=new Map;const{initialSettings:t,useUrlParams:s}=e;this._useUrlParams=!!s,this.populateDefaultSettings(this._useUrlParams),t&&this.setSettings(t)}get useUrlParams(){return this._useUrlParams}populateDefaultSettings(e){this.textParameters.set(le.SignallingServerUrl,new P(le.SignallingServerUrl,"Signalling url","Url of the signalling server",("https:"===location.protocol?"wss://":"ws://")+window.location.hostname+("80"===window.location.port||""===window.location.port?"":`:${window.location.port}`),e)),this.optionParameters.set(ce.StreamerId,new R(ce.StreamerId,"Streamer ID","The ID of the streamer to stream.","",[],e)),this.optionParameters.set(ce.PreferredCodec,new R(ce.PreferredCodec,"Preferred Codec","The preferred codec to be used during codec negotiation","H264 level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=42e01f",function(){const e=[];if(!RTCRtpReceiver.getCapabilities)return e.push("Only available on Chrome"),e;const t=/(VP\d|H26\d|AV1).*/;return RTCRtpReceiver.getCapabilities("video").codecs.forEach((s=>{const n=s.mimeType.split("/")[1]+" "+(s.sdpFmtpLine||"");null!==t.exec(n)&&e.push(n)})),e}(),e)),this.flags.set(re.AutoConnect,new M(re.AutoConnect,"Auto connect to stream","Whether we should attempt to auto connect to the signalling server or show a click to start prompt.",!1,e)),this.flags.set(re.AutoPlayVideo,new M(re.AutoPlayVideo,"Auto play video","When video is ready automatically start playing it as opposed to showing a play button.",!0,e)),this.flags.set(re.BrowserSendOffer,new M(re.BrowserSendOffer,"Browser send offer","Browser will initiate the WebRTC handshake by sending the offer to the streamer",!1,e)),this.flags.set(re.UseMic,new M(re.UseMic,"Use microphone","Make browser request microphone access and open an input audio track.",!1,e)),this.flags.set(re.StartVideoMuted,new M(re.StartVideoMuted,"Start video muted","Video will start muted if true.",!1,e)),this.flags.set(re.SuppressBrowserKeys,new M(re.SuppressBrowserKeys,"Suppress browser keys","Suppress certain browser keys that we use in UE, for example F5 to show shader complexity instead of refresh the page.",!0,e)),this.flags.set(re.PreferSFU,new M(re.PreferSFU,"Prefer SFU","Try to connect to the SFU instead of P2P.",!1,e)),this.flags.set(re.IsQualityController,new M(re.IsQualityController,"Is quality controller?","True if this peer controls stream quality",!0,e)),this.flags.set(re.ForceMonoAudio,new M(re.ForceMonoAudio,"Force mono audio","Force browser to request mono audio in the SDP",!1,e)),this.flags.set(re.ForceTURN,new M(re.ForceTURN,"Force TURN","Only generate TURN/Relayed ICE candidates.",!1,e)),this.flags.set(re.AFKDetection,new M(re.AFKDetection,"AFK if idle","Timeout the experience if user is AFK for a period.",!1,e)),this.flags.set(re.MatchViewportResolution,new M(re.MatchViewportResolution,"Match viewport resolution","Pixel Streaming will be instructed to dynamically resize the video stream to match the size of the video element.",!1,e)),this.flags.set(re.HoveringMouseMode,new M(re.HoveringMouseMode,"Control Scheme: Locked Mouse","Either locked mouse, where the pointer is consumed by the video and locked to it, or hovering mouse, where the mouse is not consumed.",!1,e,((e,t)=>{t.label=`Control Scheme: ${e?"Hovering":"Locked"} Mouse`}))),this.flags.set(re.FakeMouseWithTouches,new M(re.FakeMouseWithTouches,"Fake mouse with touches","A single finger touch is converted into a mouse event. This allows a non-touch application to be controlled partially via a touch device.",!1,e)),this.flags.set(re.KeyboardInput,new M(re.KeyboardInput,"Keyboard input","If enabled, send keyboard events to streamer",!0,e)),this.flags.set(re.MouseInput,new M(re.MouseInput,"Mouse input","If enabled, send mouse events to streamer",!0,e)),this.flags.set(re.TouchInput,new M(re.TouchInput,"Touch input","If enabled, send touch events to streamer",!0,e)),this.flags.set(re.GamepadInput,new M(re.GamepadInput,"Gamepad input","If enabled, send gamepad events to streamer",!0,e)),this.flags.set(re.XRControllerInput,new M(re.XRControllerInput,"XR controller input","If enabled, send XR controller events to streamer",!0,e)),this.numericParameters.set(oe.AFKTimeoutSecs,new w(oe.AFKTimeoutSecs,"AFK timeout","The time (in seconds) it takes for the application to time out if AFK timeout is enabled.",0,600,120,e)),this.numericParameters.set(oe.MaxReconnectAttempts,new w(oe.MaxReconnectAttempts,"Max Reconnects","Maximum number of reconnects the application will attempt when a streamer disconnects.",0,999,3,e)),this.numericParameters.set(oe.MinQP,new w(oe.MinQP,"Min QP","The lower bound for the quantization parameter (QP) of the encoder. 0 = Best quality, 51 = worst quality.",0,51,0,e)),this.numericParameters.set(oe.MaxQP,new w(oe.MaxQP,"Max QP","The upper bound for the quantization parameter (QP) of the encoder. 0 = Best quality, 51 = worst quality.",0,51,51,e)),this.numericParameters.set(oe.WebRTCFPS,new w(oe.WebRTCFPS,"Max FPS","The maximum FPS that WebRTC will try to transmit frames at.",1,999,60,e)),this.numericParameters.set(oe.WebRTCMinBitrate,new w(oe.WebRTCMinBitrate,"Min Bitrate (kbps)","The minimum bitrate that WebRTC should use.",0,5e5,0,e)),this.numericParameters.set(oe.WebRTCMaxBitrate,new w(oe.WebRTCMaxBitrate,"Max Bitrate (kbps)","The maximum bitrate that WebRTC should use.",0,5e5,0,e))}_addOnNumericSettingChangedListener(e,t){this.numericParameters.has(e)&&this.numericParameters.get(e).addOnChangedListener(t)}_addOnOptionSettingChangedListener(e,t){this.optionParameters.has(e)&&this.optionParameters.get(e).addOnChangedListener(t)}getNumericSettingValue(e){if(this.numericParameters.has(e))return this.numericParameters.get(e).number;throw new Error(`There is no numeric setting with the id of ${e}`)}getTextSettingValue(e){if(this.textParameters.has(e))return this.textParameters.get(e).value;throw new Error(`There is no numeric setting with the id of ${e}`)}setNumericSetting(e,t){if(!this.numericParameters.has(e))throw new Error(`There is no numeric setting with the id of ${e}`);this.numericParameters.get(e).number=t}_addOnSettingChangedListener(e,t){this.flags.has(e)&&(this.flags.get(e).onChange=t)}_addOnTextSettingChangedListener(e,t){this.textParameters.has(e)&&(this.textParameters.get(e).onChange=t)}getSettingOption(e){return this.optionParameters.get(e)}isFlagEnabled(e){return this.flags.get(e).flag}setFlagEnabled(e,t){this.flags.has(e)?this.flags.get(e).flag=t:i.Warning(i.GetStackTrace(),`Cannot toggle flag called ${e} - it does not exist in the Config.flags map.`)}setTextSetting(e,t){this.textParameters.has(e)?this.textParameters.get(e).text=t:i.Warning(i.GetStackTrace(),`Cannot set text setting called ${e} - it does not exist in the Config.textParameters map.`)}setOptionSettingOptions(e,t){this.optionParameters.has(e)?this.optionParameters.get(e).options=t:i.Warning(i.GetStackTrace(),`Cannot set text setting called ${e} - it does not exist in the Config.optionParameters map.`)}setOptionSettingValue(e,t){this.optionParameters.has(e)?this.optionParameters.get(e).selected=t:i.Warning(i.GetStackTrace(),`Cannot set text setting called ${e} - it does not exist in the Config.enumParameters map.`)}setFlagLabel(e,t){this.flags.has(e)?this.flags.get(e).label=t:i.Warning(i.GetStackTrace(),`Cannot set label for flag called ${e} - it does not exist in the Config.flags map.`)}setSettings(e){for(const t of Object.keys(e))ie(t)?this.setFlagEnabled(t,e[t]):ae(t)?this.setNumericSetting(t,e[t]):de(t)?this.setTextSetting(t,e[t]):he(t)&&this.setOptionSettingValue(t,e[t])}getSettings(){const e={};for(const[t,s]of this.flags.entries())e[t]=s.flag;for(const[t,s]of this.numericParameters.entries())e[t]=s.number;for(const[t,s]of this.textParameters.entries())e[t]=s.text;for(const[t,s]of this.optionParameters.entries())e[t]=s.selected;return e}getFlags(){return Array.from(this.flags.values())}getTextSettings(){return Array.from(this.textParameters.values())}getNumericSettings(){return Array.from(this.numericParameters.values())}getOptionSettings(){return Array.from(this.optionParameters.values())}_registerOnChangeEvents(e){for(const t of this.flags.keys()){const s=this.flags.get(t);s&&(s.onChangeEmit=t=>e.dispatchEvent(new Z({id:s.id,type:"flag",value:t,target:s})))}for(const t of this.numericParameters.keys()){const s=this.numericParameters.get(t);s&&(s.onChangeEmit=t=>e.dispatchEvent(new Z({id:s.id,type:"number",value:t,target:s})))}for(const t of this.textParameters.keys()){const s=this.textParameters.get(t);s&&(s.onChangeEmit=t=>e.dispatchEvent(new Z({id:s.id,type:"text",value:t,target:s})))}for(const t of this.optionParameters.keys()){const s=this.optionParameters.get(t);s&&(s.onChangeEmit=t=>e.dispatchEvent(new Z({id:s.id,type:"option",value:t,target:s})))}}}var ue;!function(e){e[e.LockedMouse=0]="LockedMouse",e[e.HoveringMouse=1]="HoveringMouse"}(ue||(ue={}));class me{constructor(e,t,s){this.closeTimeout=10,this.active=!1,this.countdownActive=!1,this.warnTimer=void 0,this.countDown=0,this.countDownTimer=void 0,this.config=e,this.pixelStreaming=t,this.onDismissAfk=s,this.onAFKTimedOutCallback=()=>{console.log("AFK timed out, did you want to override this callback?")}}onAfkClick(){clearInterval(this.countDownTimer),(this.active||this.countdownActive)&&(this.startAfkWarningTimer(),this.pixelStreaming.dispatchEvent(new x))}startAfkWarningTimer(){this.config.getNumericSettingValue(oe.AFKTimeoutSecs)>0&&this.config.isFlagEnabled(re.AFKDetection)?this.active=!0:this.active=!1,this.resetAfkWarningTimer()}stopAfkWarningTimer(){this.active=!1,this.countdownActive=!1,clearTimeout(this.warnTimer),clearInterval(this.countDownTimer)}pauseAfkWarningTimer(){this.active=!1}resetAfkWarningTimer(){this.active&&this.config.isFlagEnabled(re.AFKDetection)&&(clearTimeout(this.warnTimer),this.warnTimer=setTimeout((()=>this.activateAfkEvent()),1e3*this.config.getNumericSettingValue(oe.AFKTimeoutSecs)))}activateAfkEvent(){this.pauseAfkWarningTimer(),this.pixelStreaming.dispatchEvent(new k({countDown:this.countDown,dismissAfk:this.onDismissAfk})),this.countDown=this.closeTimeout,this.countdownActive=!0,this.pixelStreaming.dispatchEvent(new L({countDown:this.countDown})),this.config.isFlagEnabled(re.HoveringMouseMode)||document.exitPointerLock&&document.exitPointerLock(),this.countDownTimer=setInterval((()=>{this.countDown--,0==this.countDown?(this.pixelStreaming.dispatchEvent(new A),this.onAFKTimedOutCallback(),i.Log(i.GetStackTrace(),"You have been disconnected due to inactivity"),this.stopAfkWarningTimer()):this.pixelStreaming.dispatchEvent(new L({countDown:this.countDown}))}),1e3)}}class Se{constructor(){this.isReceivingFreezeFrame=!1}getDataChannelInstance(){return this}createDataChannel(e,t,s){this.peerConnection=e,this.label=t,this.datachannelOptions=s,null==s&&(this.datachannelOptions={},this.datachannelOptions.ordered=!0),this.dataChannel=this.peerConnection.createDataChannel(this.label,this.datachannelOptions),this.setupDataChannel()}setupDataChannel(){this.dataChannel.binaryType="arraybuffer",this.dataChannel.onopen=e=>this.handleOnOpen(e),this.dataChannel.onclose=e=>this.handleOnClose(e),this.dataChannel.onmessage=e=>this.handleOnMessage(e),this.dataChannel.onerror=e=>this.handleOnError(e)}handleOnOpen(e){var t;i.Log(i.GetStackTrace(),`Data Channel (${this.label}) opened.`,7),this.onOpen(null===(t=this.dataChannel)||void 0===t?void 0:t.label,e)}handleOnClose(e){var t;i.Log(i.GetStackTrace(),`Data Channel (${this.label}) closed.`,7),this.onClose(null===(t=this.dataChannel)||void 0===t?void 0:t.label,e)}handleOnMessage(e){i.Log(i.GetStackTrace(),`Data Channel (${this.label}) message: ${e}`,8)}handleOnError(e){var t;i.Log(i.GetStackTrace(),`Data Channel (${this.label}) error: ${e}`,7),this.onError(null===(t=this.dataChannel)||void 0===t?void 0:t.label,e)}onOpen(e,t){}onClose(e,t){}onError(e,t){}}class pe{}class ve{}class Ce{}class fe{}class Te{}class Ee{}class ye{}class be{}class Me{constructor(){this.inboundVideoStats=new ve,this.inboundAudioStats=new pe,this.candidatePair=new Te,this.DataChannelStats=new Ce,this.outBoundVideoStats=new Ee,this.sessionStats=new ye,this.streamStats=new be,this.codecs=new Map}processStats(e){this.localCandidates=new Array,this.remoteCandidates=new Array,e.forEach((e=>{switch(e.type){case"candidate-pair":this.handleCandidatePair(e);break;case"certificate":case"media-source":case"outbound-rtp":case"peer-connection":case"remote-inbound-rtp":case"transport":break;case"codec":this.handleCodec(e);break;case"data-channel":this.handleDataChannel(e);break;case"inbound-rtp":this.handleInBoundRTP(e);break;case"local-candidate":this.handleLocalCandidate(e);break;case"remote-candidate":this.handleRemoteCandidate(e);break;case"remote-outbound-rtp":this.handleRemoteOutBound(e);break;case"track":this.handleTrack(e);break;case"stream":this.handleStream(e);break;default:i.Error(i.GetStackTrace(),"unhandled Stat Type"),i.Log(i.GetStackTrace(),e)}}))}handleStream(e){this.streamStats=e}handleCandidatePair(e){this.candidatePair.bytesReceived=e.bytesReceived,this.candidatePair.bytesSent=e.bytesSent,this.candidatePair.localCandidateId=e.localCandidateId,this.candidatePair.remoteCandidateId=e.remoteCandidateId,this.candidatePair.nominated=e.nominated,this.candidatePair.readable=e.readable,this.candidatePair.selected=e.selected,this.candidatePair.writable=e.writable,this.candidatePair.state=e.state,this.candidatePair.currentRoundTripTime=e.currentRoundTripTime}handleDataChannel(e){this.DataChannelStats.bytesReceived=e.bytesReceived,this.DataChannelStats.bytesSent=e.bytesSent,this.DataChannelStats.dataChannelIdentifier=e.dataChannelIdentifier,this.DataChannelStats.id=e.id,this.DataChannelStats.label=e.label,this.DataChannelStats.messagesReceived=e.messagesReceived,this.DataChannelStats.messagesSent=e.messagesSent,this.DataChannelStats.protocol=e.protocol,this.DataChannelStats.state=e.state,this.DataChannelStats.timestamp=e.timestamp}handleLocalCandidate(e){const t=new fe;t.label="local-candidate",t.address=e.address,t.port=e.port,t.protocol=e.protocol,t.candidateType=e.candidateType,t.id=e.id,this.localCandidates.push(t)}handleRemoteCandidate(e){const t=new fe;t.label="local-candidate",t.address=e.address,t.port=e.port,t.protocol=e.protocol,t.id=e.id,t.candidateType=e.candidateType,this.remoteCandidates.push(t)}handleInBoundRTP(e){switch(e.kind){case"video":this.inboundVideoStats=e,null!=this.lastVideoStats&&(this.inboundVideoStats.bitrate=8*(this.inboundVideoStats.bytesReceived-this.lastVideoStats.bytesReceived)/(this.inboundVideoStats.timestamp-this.lastVideoStats.timestamp),this.inboundVideoStats.bitrate=Math.floor(this.inboundVideoStats.bitrate)),this.lastVideoStats=Object.assign({},this.inboundVideoStats);break;case"audio":this.inboundAudioStats=e,null!=this.lastAudioStats&&(this.inboundAudioStats.bitrate=8*(this.inboundAudioStats.bytesReceived-this.lastAudioStats.bytesReceived)/(this.inboundAudioStats.timestamp-this.lastAudioStats.timestamp),this.inboundAudioStats.bitrate=Math.floor(this.inboundAudioStats.bitrate)),this.lastAudioStats=Object.assign({},this.inboundAudioStats);break;default:i.Log(i.GetStackTrace(),"Kind is not handled")}}handleRemoteOutBound(e){"video"===e.kind&&(this.outBoundVideoStats.bytesSent=e.bytesSent,this.outBoundVideoStats.id=e.id,this.outBoundVideoStats.localId=e.localId,this.outBoundVideoStats.packetsSent=e.packetsSent,this.outBoundVideoStats.remoteTimestamp=e.remoteTimestamp,this.outBoundVideoStats.timestamp=e.timestamp)}handleTrack(e){"track"!==e.type||"video_label"!==e.trackIdentifier&&"video"!==e.kind||(this.inboundVideoStats.framesDropped=e.framesDropped,this.inboundVideoStats.framesReceived=e.framesReceived,this.inboundVideoStats.frameHeight=e.frameHeight,this.inboundVideoStats.frameWidth=e.frameWidth)}handleCodec(e){const t=e.id,s=`${e.mimeType.replace("video/","").replace("audio/","")}${e.sdpFmtpLine?` ${e.sdpFmtpLine}`:""}`;this.codecs.set(t,s)}handleSessionStatistics(e,t,s){const n=Date.now()-e;this.sessionStats.runTime=new Date(n).toISOString().substr(11,8).toString();const r=null===t?"Not sent yet":t?"true":"false";this.sessionStats.controlsStreamInput=r,this.sessionStats.videoEncoderAvgQP=s}isNumber(e){return"number"==typeof e&&isFinite(e)}}const we=(Pe={parseRtpParameters:()=>sdp__WEBPACK_IMPORTED_MODULE_0__.parseRtpParameters,splitSections:()=>sdp__WEBPACK_IMPORTED_MODULE_0__.splitSections},Re={},n.d(Re,Pe),Re);var Pe,Re,ke,Le,xe=function(e,t,s,n){return new(s||(s=Promise))((function(r,i){function o(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};class Ae{constructor(e,t,s){this.config=t,this.createPeerConnection(e,s)}createPeerConnection(e,t){this.config.isFlagEnabled(re.ForceTURN)&&(e.iceTransportPolicy="relay",i.Log(i.GetStackTrace(),"Forcing TURN usage by setting ICE Transport Policy in peer connection config.")),this.peerConnection=new RTCPeerConnection(e),this.peerConnection.onsignalingstatechange=e=>this.handleSignalStateChange(e),this.peerConnection.oniceconnectionstatechange=e=>this.handleIceConnectionStateChange(e),this.peerConnection.onicegatheringstatechange=e=>this.handleIceGatheringStateChange(e),this.peerConnection.ontrack=e=>this.handleOnTrack(e),this.peerConnection.onicecandidate=e=>this.handleIceCandidate(e),this.peerConnection.ondatachannel=e=>this.handleDataChannel(e),this.aggregatedStats=new Me,this.preferredCodec=t,this.updateCodecSelection=!0}createOffer(e,t){return xe(this,void 0,void 0,(function*(){i.Log(i.GetStackTrace(),"Create Offer",6);const s="localhost"===location.hostname||"127.0.0.1"===location.hostname,n="https:"===location.protocol;let r=t.isFlagEnabled(re.UseMic);!r||s||n||(r=!1,i.Error(i.GetStackTrace(),"Microphone access in the browser will not work if you are not on HTTPS or localhost. Disabling mic access."),i.Error(i.GetStackTrace(),"For testing you can enable HTTP microphone access Chrome by visiting chrome://flags/ and enabling 'unsafely-treat-insecure-origin-as-secure'")),this.setupTransceiversAsync(r).finally((()=>{var t;null===(t=this.peerConnection)||void 0===t||t.createOffer(e).then((e=>{var t;this.showTextOverlayConnecting(),e.sdp=this.mungeSDP(e.sdp,r),null===(t=this.peerConnection)||void 0===t||t.setLocalDescription(e),this.onSendWebRTCOffer(e)})).catch((()=>{this.showTextOverlaySetupFailure()}))}))}))}receiveOffer(e,t){var s;return xe(this,void 0,void 0,(function*(){i.Log(i.GetStackTrace(),"Receive Offer",6),null===(s=this.peerConnection)||void 0===s||s.setRemoteDescription(e).then((()=>{const e="localhost"===location.hostname||"127.0.0.1"===location.hostname,s="https:"===location.protocol;let n=t.isFlagEnabled(re.UseMic);!n||e||s||(n=!1,i.Error(i.GetStackTrace(),"Microphone access in the browser will not work if you are not on HTTPS or localhost. Disabling mic access."),i.Error(i.GetStackTrace(),"For testing you can enable HTTP microphone access Chrome by visiting chrome://flags/ and enabling 'unsafely-treat-insecure-origin-as-secure'")),this.setupTransceiversAsync(n).finally((()=>{var e;null===(e=this.peerConnection)||void 0===e||e.createAnswer().then((e=>{var t;return e.sdp=this.mungeSDP(e.sdp,n),null===(t=this.peerConnection)||void 0===t?void 0:t.setLocalDescription(e)})).then((()=>{var e;this.onSendWebRTCAnswer(null===(e=this.peerConnection)||void 0===e?void 0:e.currentLocalDescription)})).catch((()=>{i.Error(i.GetStackTrace(),"createAnswer() failed")}))}))})),this.config.setOptionSettingOptions(ce.PreferredCodec,this.parseAvailableCodecs(e).filter((e=>this.config.getSettingOption(ce.PreferredCodec).options.includes(e))))}))}receiveAnswer(e){var t;null===(t=this.peerConnection)||void 0===t||t.setRemoteDescription(e),this.config.setOptionSettingOptions(ce.PreferredCodec,this.parseAvailableCodecs(e).filter((e=>this.config.getSettingOption(ce.PreferredCodec).options.includes(e))))}generateStats(){var e;null===(e=this.peerConnection)||void 0===e||e.getStats(null).then((e=>{this.aggregatedStats.processStats(e),this.onVideoStats(this.aggregatedStats),this.updateCodecSelection&&this.config.setOptionSettingValue(ce.PreferredCodec,this.aggregatedStats.codecs.get(this.aggregatedStats.inboundVideoStats.codecId))}))}close(){this.peerConnection&&(this.peerConnection.close(),this.peerConnection=null)}mungeSDP(e,t){const s=e;s.replace(/(a=fmtp:\d+ .*level-asymmetry-allowed=.*)\r\n/gm,"$1;x-google-start-bitrate=10000;x-google-max-bitrate=100000\r\n");let n="";return n+="maxaveragebitrate=510000;",t&&(n+="sprop-maxcapturerate=48000;"),n+=this.config.isFlagEnabled(re.ForceMonoAudio)?"stereo=0;":"stereo=1;",n+="useinbandfec=1",s.replace("useinbandfec=1",n),s}handleOnIce(e){var t;i.Log(i.GetStackTrace(),"peerconnection handleOnIce",6),this.config.isFlagEnabled(re.ForceTURN)&&e.candidate.indexOf("relay")<0?i.Info(i.GetStackTrace(),`Dropping candidate because it was not TURN relay. | Type= ${e.type} | Protocol= ${e.protocol} | Address=${e.address} | Port=${e.port} |`,6):null===(t=this.peerConnection)||void 0===t||t.addIceCandidate(e)}handleSignalStateChange(e){i.Log(i.GetStackTrace(),"signaling state change: "+e,6)}handleIceConnectionStateChange(e){i.Log(i.GetStackTrace(),"ice connection state change: "+e,6),this.onIceConnectionStateChange(e)}handleIceGatheringStateChange(e){i.Log(i.GetStackTrace(),"ice gathering state change: "+JSON.stringify(e),6)}handleOnTrack(e){this.onTrack(e)}handleIceCandidate(e){this.onPeerIceCandidate(e)}handleDataChannel(e){this.onDataChannel(e)}onTrack(e){}onIceConnectionStateChange(e){}onPeerIceCandidate(e){}onDataChannel(e){}setupTransceiversAsync(e){var t,s,n,r,i,o,a,l,d;return xe(this,void 0,void 0,(function*(){const c=(null===(t=this.peerConnection)||void 0===t?void 0:t.getTransceivers().length)>0;if(null===(s=this.peerConnection)||void 0===s||s.addTransceiver("video",{direction:"recvonly"}),RTCRtpReceiver.getCapabilities&&""!=this.preferredCodec)for(const e of null!==(r=null===(n=this.peerConnection)||void 0===n?void 0:n.getTransceivers())&&void 0!==r?r:[])if(e&&e.receiver&&e.receiver.track&&"video"===e.receiver.track.kind){const t=this.preferredCodec.split(" "),s=[{mimeType:"video/"+t[0],clockRate:9e4,sdpFmtpLine:t[1]?t[1]:""}];this.config.getSettingOption(ce.PreferredCodec).options.filter((e=>e!=this.preferredCodec)).forEach((e=>{const t=e.split(" ");s.push({mimeType:"video/"+t[0],clockRate:9e4,sdpFmtpLine:t[1]?t[1]:""})}));for(const e of s)""===e.sdpFmtpLine&&delete e.sdpFmtpLine;e.setCodecPreferences(s)}if(e){const t={video:!1,audio:!!e&&{autoGainControl:!1,channelCount:1,echoCancellation:!1,latency:0,noiseSuppression:!1,sampleRate:48e3,sampleSize:16,volume:1}},s=yield navigator.mediaDevices.getUserMedia(t);if(s)if(c){for(const e of null!==(a=null===(o=this.peerConnection)||void 0===o?void 0:o.getTransceivers())&&void 0!==a?a:[])if(e&&e.receiver&&e.receiver.track&&"audio"===e.receiver.track.kind)for(const t of s.getTracks())t.kind&&"audio"==t.kind&&(e.sender.replaceTrack(t),e.direction="sendrecv")}else for(const e of s.getTracks())e.kind&&"audio"==e.kind&&(null===(l=this.peerConnection)||void 0===l||l.addTransceiver(e,{direction:"sendrecv"}));else null===(d=this.peerConnection)||void 0===d||d.addTransceiver("audio",{direction:"recvonly"})}else null===(i=this.peerConnection)||void 0===i||i.addTransceiver("audio",{direction:"recvonly"})}))}onVideoStats(e){}onSendWebRTCOffer(e){}onSendWebRTCAnswer(e){}showTextOverlayConnecting(){}showTextOverlaySetupFailure(){}parseAvailableCodecs(e){if(!RTCRtpReceiver.getCapabilities)return["Only available on Chrome"];const t=[],s=(0,we.splitSections)(e.sdp);return s.shift(),s.forEach((e=>{const{codecs:s}=(0,we.parseRtpParameters)(e),n=/(VP\d|H26\d|AV1).*/;s.forEach((e=>{const s=e.name+" "+Object.keys(e.parameters||{}).map((t=>t+"="+e.parameters[t])).join(";");if(null!==n.exec(s)){"VP9"==e.name&&(e.parameters={"profile-id":"0"});const s=e.name+" "+Object.keys(e.parameters||{}).map((t=>t+"="+e.parameters[t])).join(";");t.push(s)}}))})),t}}class Fe{constructor(){this.PixelStreamingSettings=new De,this.EncoderSettings=new Oe,this.WebRTCSettings=new Ue}ueCompatible(){null!=this.WebRTCSettings.MaxFPS&&(this.WebRTCSettings.FPS=this.WebRTCSettings.MaxFPS)}}class De{}class Oe{}class Ue{}class Ie{constructor(){this.ReceiptTimeMs=null,this.TransmissionTimeMs=null,this.PreCaptureTimeMs=null,this.PostCaptureTimeMs=null,this.PreEncodeTimeMs=null,this.PostEncodeTimeMs=null,this.EncodeMs=null,this.CaptureToSendMs=null,this.testStartTimeMs=0,this.browserReceiptTimeMs=0,this.latencyExcludingDecode=0,this.testDuration=0,this.networkLatency=0,this.browserSendLatency=0,this.frameDisplayDeltaTimeMs=0,this.endToEndLatency=0,this.encodeLatency=0}setFrameDisplayDeltaTime(e){0==this.frameDisplayDeltaTimeMs&&(this.frameDisplayDeltaTimeMs=Math.round(e))}processFields(){null!=this.EncodeMs||null==this.PreEncodeTimeMs&&null==this.PostEncodeTimeMs||(i.Log(i.GetStackTrace(),`Setting Encode Ms \n ${this.PostEncodeTimeMs} \n ${this.PreEncodeTimeMs}`,6),this.EncodeMs=this.PostEncodeTimeMs-this.PreEncodeTimeMs),null!=this.CaptureToSendMs||null==this.PreCaptureTimeMs&&null==this.PostCaptureTimeMs||(i.Log(i.GetStackTrace(),`Setting CaptureToSendMs Ms \n ${this.PostCaptureTimeMs} \n ${this.PreCaptureTimeMs}`,6),this.CaptureToSendMs=this.PostCaptureTimeMs-this.PreCaptureTimeMs)}}class Ge{static setExtensionFromBytes(e,t){t.receiving||(t.mimetype="",t.extension="",t.receiving=!0,t.valid=!1,t.size=0,t.data=[],t.timestampStart=(new Date).getTime(),i.Log(i.GetStackTrace(),"Received first chunk of file",6));const s=new TextDecoder("utf-16").decode(e.slice(1));i.Log(i.GetStackTrace(),s,6),t.extension=s}static setMimeTypeFromBytes(e,t){t.receiving||(t.mimetype="",t.extension="",t.receiving=!0,t.valid=!1,t.size=0,t.data=[],t.timestampStart=(new Date).getTime(),i.Log(i.GetStackTrace(),"Received first chunk of file",6));const s=new TextDecoder("utf-16").decode(e.slice(1));i.Log(i.GetStackTrace(),s,6),t.mimetype=s}static setContentsFromBytes(e,t){if(!t.receiving)return;t.size=Math.ceil(new DataView(e.slice(1,5).buffer).getInt32(0,!0)/16379);const s=e.slice(5);if(t.data.push(s),i.Log(i.GetStackTrace(),`Received file chunk: ${t.data.length}/${t.size}`,6),t.data.length===t.size){t.receiving=!1,t.valid=!0,i.Log(i.GetStackTrace(),"Received complete file",6);const e=(new Date).getTime()-t.timestampStart,s=Math.round(16*t.size*1024/e);i.Log(i.GetStackTrace(),`Average transfer bitrate: ${s}kb/s over ${e/1e3} seconds`,6);const n=new Blob(t.data,{type:t.mimetype}),r=document.createElement("a");r.setAttribute("href",URL.createObjectURL(n)),r.setAttribute("download",`transfer.${t.extension}`),document.body.append(r),r.remove()}else t.data.length>t.size&&(t.receiving=!1,i.Error(i.GetStackTrace(),`Received bigger file than advertised: ${t.data.length}/${t.size}`))}}class ze{constructor(){this.mimetype="",this.extension="",this.receiving=!1,this.size=0,this.data=[],this.valid=!1}}class Be{}Be.mainButton=0,Be.auxiliaryButton=1,Be.secondaryButton=2,Be.fourthButton=3,Be.fifthButton=4;class _e{}_e.primaryButton=1,_e.secondaryButton=2,_e.auxiliaryButton=4,_e.fourthButton=8,_e.fifthButton=16;class We{constructor(){this.unregisterCallbacks=[]}addUnregisterCallback(e){this.unregisterCallbacks.push(e)}unregisterAll(){for(const e of this.unregisterCallbacks)e();this.unregisterCallbacks=[]}}class He{constructor(e,t,s){this.touchEventListenerTracker=new We,this.toStreamerMessagesProvider=e,this.videoElementProvider=t,this.coordinateConverter=s;const n=e=>this.onTouchStart(e),r=e=>this.onTouchEnd(e),i=e=>this.onTouchMove(e);document.addEventListener("touchstart",n,{passive:!1}),document.addEventListener("touchend",r,{passive:!1}),document.addEventListener("touchmove",i,{passive:!1}),this.touchEventListenerTracker.addUnregisterCallback((()=>document.removeEventListener("touchstart",n))),this.touchEventListenerTracker.addUnregisterCallback((()=>document.removeEventListener("touchend",r))),this.touchEventListenerTracker.addUnregisterCallback((()=>document.removeEventListener("touchmove",i)))}unregisterTouchEvents(){this.touchEventListenerTracker.unregisterAll()}setVideoElementParentClientRect(e){this.videoElementParentClientRect=e}onTouchStart(e){if(this.videoElementProvider.isVideoReady()){if(null==this.fakeTouchFinger){const t=e.changedTouches[0];this.fakeTouchFinger=new Ve(t.identifier,t.clientX-this.videoElementParentClientRect.left,t.clientY-this.videoElementParentClientRect.top);const s=this.videoElementProvider.getVideoParentElement(),n=new MouseEvent("mouseenter",t);s.dispatchEvent(n);const r=this.coordinateConverter.normalizeAndQuantizeUnsigned(this.fakeTouchFinger.x,this.fakeTouchFinger.y);this.toStreamerMessagesProvider.toStreamerHandlers.get("MouseDown")([Be.mainButton,r.x,r.y])}e.preventDefault()}}onTouchEnd(e){if(!this.videoElementProvider.isVideoReady())return;const t=this.videoElementProvider.getVideoParentElement(),s=this.toStreamerMessagesProvider.toStreamerHandlers;for(let n=0;n<e.changedTouches.length;n++){const r=e.changedTouches[n];if(r.identifier===this.fakeTouchFinger.id){const e=r.clientX-this.videoElementParentClientRect.left,n=r.clientY-this.videoElementParentClientRect.top,i=this.coordinateConverter.normalizeAndQuantizeUnsigned(e,n);s.get("MouseUp")([Be.mainButton,i.x,i.y]);const o=new MouseEvent("mouseleave",r);t.dispatchEvent(o),this.fakeTouchFinger=null;break}}e.preventDefault()}onTouchMove(e){if(!this.videoElementProvider.isVideoReady())return;const t=this.toStreamerMessagesProvider.toStreamerHandlers;for(let s=0;s<e.touches.length;s++){const n=e.touches[s];if(n.identifier===this.fakeTouchFinger.id){const e=n.clientX-this.videoElementParentClientRect.left,s=n.clientY-this.videoElementParentClientRect.top,r=this.coordinateConverter.normalizeAndQuantizeUnsigned(e,s),i=this.coordinateConverter.normalizeAndQuantizeSigned(e-this.fakeTouchFinger.x,s-this.fakeTouchFinger.y);t.get("MouseMove")([r.x,r.y,i.x,i.y]),this.fakeTouchFinger.x=e,this.fakeTouchFinger.y=s;break}}e.preventDefault()}}class Ve{constructor(e,t,s){this.id=e,this.x=t,this.y=s}}class Ne{}Ne.backSpace=8,Ne.shift=16,Ne.control=17,Ne.alt=18,Ne.rightShift=253,Ne.rightControl=254,Ne.rightAlt=255;class Ke{constructor(e,t,s){this.keyboardEventListenerTracker=new We,this.CodeToKeyCode={Escape:27,Digit0:48,Digit1:49,Digit2:50,Digit3:51,Digit4:52,Digit5:53,Digit6:54,Digit7:55,Digit8:56,Digit9:57,Minus:173,Equal:187,Backspace:8,Tab:9,KeyQ:81,KeyW:87,KeyE:69,KeyR:82,KeyT:84,KeyY:89,KeyU:85,KeyI:73,KeyO:79,KeyP:80,BracketLeft:219,BracketRight:221,Enter:13,ControlLeft:17,KeyA:65,KeyS:83,KeyD:68,KeyF:70,KeyG:71,KeyH:72,KeyJ:74,KeyK:75,KeyL:76,Semicolon:186,Quote:222,Backquote:192,ShiftLeft:16,Backslash:220,KeyZ:90,KeyX:88,KeyC:67,KeyV:86,KeyB:66,KeyN:78,KeyM:77,Comma:188,Period:190,Slash:191,ShiftRight:253,AltLeft:18,Space:32,CapsLock:20,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,Pause:19,ScrollLock:145,NumpadDivide:111,NumpadMultiply:106,NumpadSubtract:109,NumpadAdd:107,NumpadDecimal:110,Numpad9:105,Numpad8:104,Numpad7:103,Numpad6:102,Numpad5:101,Numpad4:100,Numpad3:99,Numpad2:98,Numpad1:97,Numpad0:96,NumLock:144,ControlRight:254,AltRight:255,Home:36,End:35,ArrowUp:38,ArrowLeft:37,ArrowRight:39,ArrowDown:40,PageUp:33,PageDown:34,Insert:45,Delete:46,ContextMenu:93},this.toStreamerMessagesProvider=e,this.config=t,this.activeKeysProvider=s}registerKeyBoardEvents(){const e=e=>this.handleOnKeyDown(e),t=e=>this.handleOnKeyUp(e),s=e=>this.handleOnKeyPress(e);document.addEventListener("keydown",e),document.addEventListener("keyup",t),document.addEventListener("keypress",s),this.keyboardEventListenerTracker.addUnregisterCallback((()=>document.removeEventListener("keydown",e))),this.keyboardEventListenerTracker.addUnregisterCallback((()=>document.removeEventListener("keyup",t))),this.keyboardEventListenerTracker.addUnregisterCallback((()=>document.removeEventListener("keypress",s)))}unregisterKeyBoardEvents(){this.keyboardEventListenerTracker.unregisterAll()}handleOnKeyDown(e){const t=this.getKeycode(e);t&&(i.Log(i.GetStackTrace(),`key down ${t}, repeat = ${e.repeat}`,6),this.toStreamerMessagesProvider.toStreamerHandlers.get("KeyDown")([this.getKeycode(e),e.repeat?1:0]),this.activeKeysProvider.getActiveKeys().push(t),t===Ne.backSpace&&document.dispatchEvent(new KeyboardEvent("keypress",{charCode:Ne.backSpace})),this.config.isFlagEnabled(re.SuppressBrowserKeys)&&this.isKeyCodeBrowserKey(t)&&e.preventDefault())}handleOnKeyUp(e){const t=this.getKeycode(e);t&&(i.Log(i.GetStackTrace(),`key up ${t}`,6),this.toStreamerMessagesProvider.toStreamerHandlers.get("KeyUp")([t,e.repeat?1:0]),this.config.isFlagEnabled(re.SuppressBrowserKeys)&&this.isKeyCodeBrowserKey(t)&&e.preventDefault())}handleOnKeyPress(e){if(!("charCode"in e))return void i.Warning(i.GetStackTrace(),"KeyboardEvent.charCode is deprecated in this browser, cannot send key press.");const t=e.charCode;i.Log(i.GetStackTrace(),`key press ${t}`,6),this.toStreamerMessagesProvider.toStreamerHandlers.get("KeyPress")([t])}getKeycode(e){if(!("keyCode"in e)){const t=e;return t.code in this.CodeToKeyCode?this.CodeToKeyCode[t.code]:(i.Warning(i.GetStackTrace(),`Keyboard code of ${t.code} is not supported in our mapping, ignoring this key.`),null)}return e.keyCode===Ne.shift&&"ShiftRight"===e.code?Ne.rightShift:e.keyCode===Ne.control&&"ControlRight"===e.code?Ne.rightControl:e.keyCode===Ne.alt&&"AltRight"===e.code?Ne.rightAlt:e.keyCode}isKeyCodeBrowserKey(e){return e>=112&&e<=123||9===e}}class Qe{constructor(e,t,s){this.x=0,this.y=0,this.updateMouseMovePositionEvent=e=>{this.updateMouseMovePosition(e)},this.mouseEventListenerTracker=new We,this.videoElementProvider=e,this.mouseController=t,this.activeKeysProvider=s;const n=this.videoElementProvider.getVideoParentElement();this.x=n.getBoundingClientRect().width/2,this.y=n.getBoundingClientRect().height/2,this.coord=this.mouseController.coordinateConverter.normalizeAndQuantizeUnsigned(this.x,this.y)}unregisterMouseEvents(){this.mouseEventListenerTracker.unregisterAll()}lockStateChange(){const e=this.videoElementProvider.getVideoParentElement(),t=this.mouseController.toStreamerMessagesProvider.toStreamerHandlers;if(document.pointerLockElement===e||document.mozPointerLockElement===e)i.Log(i.GetStackTrace(),"Pointer locked",6),document.addEventListener("mousemove",this.updateMouseMovePositionEvent,!1),this.mouseEventListenerTracker.addUnregisterCallback((()=>document.removeEventListener("mousemove",this.updateMouseMovePositionEvent,!1)));else{i.Log(i.GetStackTrace(),"The pointer lock status is now unlocked",6),document.removeEventListener("mousemove",this.updateMouseMovePositionEvent,!1);let e=this.activeKeysProvider.getActiveKeys();const s=new Set(e),n=[];s.forEach((e=>{n[e]})),n.forEach((e=>{t.get("KeyUp")([e])})),e=[]}}updateMouseMovePosition(e){if(!this.videoElementProvider.isVideoReady())return;const t=this.mouseController.toStreamerMessagesProvider.toStreamerHandlers,s=this.videoElementProvider.getVideoParentElement().clientWidth,n=this.videoElementProvider.getVideoParentElement().clientHeight;this.x+=e.movementX,this.y+=e.movementY,this.x>s&&(this.x-=s),this.y>n&&(this.y-=n),this.x<0&&(this.x=s+this.x),this.y<0&&(this.y=n-this.y),this.coord=this.mouseController.coordinateConverter.normalizeAndQuantizeUnsigned(this.x,this.y);const r=this.mouseController.coordinateConverter.normalizeAndQuantizeSigned(e.movementX,e.movementY);t.get("MouseMove")([this.coord.x,this.coord.y,r.x,r.y])}handleMouseDown(e){this.videoElementProvider.isVideoReady()&&this.mouseController.toStreamerMessagesProvider.toStreamerHandlers.get("MouseDown")([e.button,this.coord.x,this.coord.y])}handleMouseUp(e){this.videoElementProvider.isVideoReady()&&this.mouseController.toStreamerMessagesProvider.toStreamerHandlers.get("MouseUp")([e.button,this.coord.x,this.coord.y])}handleMouseWheel(e){this.videoElementProvider.isVideoReady()&&this.mouseController.toStreamerMessagesProvider.toStreamerHandlers.get("MouseWheel")([e.wheelDelta,this.coord.x,this.coord.y])}handleMouseDouble(e){this.videoElementProvider.isVideoReady()&&this.mouseController.toStreamerMessagesProvider.toStreamerHandlers.get("MouseDouble")([e.button,this.coord.x,this.coord.y])}handlePressMouseButtons(e){this.videoElementProvider.isVideoReady()&&this.mouseController.pressMouseButtons(e.buttons,this.x,this.y)}handleReleaseMouseButtons(e){this.videoElementProvider.isVideoReady()&&this.mouseController.releaseMouseButtons(e.buttons,this.x,this.y)}}class $e{constructor(e){this.mouseController=e}unregisterMouseEvents(){}updateMouseMovePosition(e){if(!this.mouseController.videoElementProvider.isVideoReady())return;i.Log(i.GetStackTrace(),"MouseMove",6);const t=this.mouseController.coordinateConverter.normalizeAndQuantizeUnsigned(e.offsetX,e.offsetY),s=this.mouseController.coordinateConverter.normalizeAndQuantizeSigned(e.movementX,e.movementY);this.mouseController.toStreamerMessagesProvider.toStreamerHandlers.get("MouseMove")([t.x,t.y,s.x,s.y]),e.preventDefault()}handleMouseDown(e){if(!this.mouseController.videoElementProvider.isVideoReady())return;i.Log(i.GetStackTrace(),"onMouse Down",6);const t=this.mouseController.coordinateConverter.normalizeAndQuantizeUnsigned(e.offsetX,e.offsetY);this.mouseController.toStreamerMessagesProvider.toStreamerHandlers.get("MouseDown")([e.button,t.x,t.y]),e.preventDefault()}handleMouseUp(e){if(!this.mouseController.videoElementProvider.isVideoReady())return;const t=this.mouseController.coordinateConverter.normalizeAndQuantizeUnsigned(e.offsetX,e.offsetY);this.mouseController.toStreamerMessagesProvider.toStreamerHandlers.get("MouseUp")([e.button,t.x,t.y]),e.preventDefault()}handleContextMenu(e){if(!this.mouseController.videoElementProvider.isVideoReady())return;const t=this.mouseController.coordinateConverter.normalizeAndQuantizeUnsigned(e.offsetX,e.offsetY);this.mouseController.toStreamerMessagesProvider.toStreamerHandlers.get("MouseUp")([e.button,t.x,t.y]),e.preventDefault()}handleMouseWheel(e){if(!this.mouseController.videoElementProvider.isVideoReady())return;const t=this.mouseController.coordinateConverter.normalizeAndQuantizeUnsigned(e.offsetX,e.offsetY);this.mouseController.toStreamerMessagesProvider.toStreamerHandlers.get("MouseWheel")([e.wheelDelta,t.x,t.y]),e.preventDefault()}handleMouseDouble(e){if(!this.mouseController.videoElementProvider.isVideoReady())return;const t=this.mouseController.coordinateConverter.normalizeAndQuantizeUnsigned(e.offsetX,e.offsetY);this.mouseController.toStreamerMessagesProvider.toStreamerHandlers.get("MouseDouble")([e.button,t.x,t.y])}handlePressMouseButtons(e){this.mouseController.videoElementProvider.isVideoReady()&&this.mouseController.pressMouseButtons(e.buttons,e.offsetX,e.offsetY)}handleReleaseMouseButtons(e){this.mouseController.videoElementProvider.isVideoReady()&&this.mouseController.releaseMouseButtons(e.buttons,e.offsetX,e.offsetY)}}class qe{constructor(e,t,s,n){this.mouseEventListenerTracker=new We,this.toStreamerMessagesProvider=e,this.coordinateConverter=s,this.videoElementProvider=t,this.activeKeysProvider=n,this.registerMouseEnterAndLeaveEvents()}unregisterMouseEvents(){this.mouseEventListenerTracker.unregisterAll()}registerLockedMouseEvents(e){const t=this.videoElementProvider.getVideoParentElement(),s=new Qe(this.videoElementProvider,e,this.activeKeysProvider);if(t.requestPointerLock=t.requestPointerLock||t.mozRequestPointerLock,document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock,t.requestPointerLock){const e=()=>{t.requestPointerLock()};t.addEventListener("click",e),this.mouseEventListenerTracker.addUnregisterCallback((()=>t.removeEventListener("click",e)))}const n=()=>s.lockStateChange();document.addEventListener("pointerlockchange",n,!1),document.addEventListener("mozpointerlockchange",n,!1),this.mouseEventListenerTracker.addUnregisterCallback((()=>document.removeEventListener("pointerlockchange",n,!1))),this.mouseEventListenerTracker.addUnregisterCallback((()=>document.removeEventListener("mozpointerlockchange",n,!1)));const r=e=>s.handleMouseDown(e),i=e=>s.handleMouseUp(e),o=e=>s.handleMouseWheel(e),a=e=>s.handleMouseDouble(e);t.addEventListener("mousedown",r),t.addEventListener("mouseup",i),t.addEventListener("wheel",o),t.addEventListener("dblclick",a),this.mouseEventListenerTracker.addUnregisterCallback((()=>t.removeEventListener("mousedown",r))),this.mouseEventListenerTracker.addUnregisterCallback((()=>t.removeEventListener("mouseup",i))),this.mouseEventListenerTracker.addUnregisterCallback((()=>t.removeEventListener("wheel",o))),this.mouseEventListenerTracker.addUnregisterCallback((()=>t.removeEventListener("dblclick",a))),this.mouseEventListenerTracker.addUnregisterCallback((()=>s.unregisterMouseEvents())),this.mouseEventListenerTracker.addUnregisterCallback((()=>{!document.exitPointerLock||document.pointerLockElement!==t&&document.mozPointerLockElement!==t||document.exitPointerLock()}))}registerHoveringMouseEvents(e){const t=this.videoElementProvider.getVideoParentElement(),s=new $e(e),n=e=>s.updateMouseMovePosition(e),r=e=>s.handleMouseDown(e),i=e=>s.handleMouseUp(e),o=e=>s.handleContextMenu(e),a=e=>s.handleMouseWheel(e),l=e=>s.handleMouseDouble(e);t.addEventListener("mousemove",n),t.addEventListener("mousedown",r),t.addEventListener("mouseup",i),t.addEventListener("contextmenu",o),t.addEventListener("wheel",a),t.addEventListener("dblclick",l),this.mouseEventListenerTracker.addUnregisterCallback((()=>t.removeEventListener("mousemove",n))),this.mouseEventListenerTracker.addUnregisterCallback((()=>t.removeEventListener("mousedown",r))),this.mouseEventListenerTracker.addUnregisterCallback((()=>t.removeEventListener("mouseup",i))),this.mouseEventListenerTracker.addUnregisterCallback((()=>t.removeEventListener("contextmenu",o))),this.mouseEventListenerTracker.addUnregisterCallback((()=>t.removeEventListener("wheel",a))),this.mouseEventListenerTracker.addUnregisterCallback((()=>t.removeEventListener("dblclick",l))),this.mouseEventListenerTracker.addUnregisterCallback((()=>s.unregisterMouseEvents()))}registerMouseEnterAndLeaveEvents(){const e=this.videoElementProvider.getVideoParentElement(),t=e=>{this.videoElementProvider.isVideoReady()&&(i.Log(i.GetStackTrace(),"Mouse Entered",6),this.sendMouseEnter(),this.pressMouseButtons(e.buttons,e.x,e.y))},s=e=>{this.videoElementProvider.isVideoReady()&&(i.Log(i.GetStackTrace(),"Mouse Left",6),this.sendMouseLeave(),this.releaseMouseButtons(e.buttons,e.x,e.y))};e.addEventListener("mouseenter",t),e.addEventListener("mouseleave",s),this.mouseEventListenerTracker.addUnregisterCallback((()=>e.removeEventListener("mouseenter",t))),this.mouseEventListenerTracker.addUnregisterCallback((()=>e.removeEventListener("mouseleave",s)))}releaseMouseButtons(e,t,s){const n=this.coordinateConverter.normalizeAndQuantizeUnsigned(t,s);e&_e.primaryButton&&this.sendMouseUp(Be.mainButton,n.x,n.y),e&_e.secondaryButton&&this.sendMouseUp(Be.secondaryButton,n.x,n.y),e&_e.auxiliaryButton&&this.sendMouseUp(Be.auxiliaryButton,n.x,n.y),e&_e.fourthButton&&this.sendMouseUp(Be.fourthButton,n.x,n.y),e&_e.fifthButton&&this.sendMouseUp(Be.fifthButton,n.x,n.y)}pressMouseButtons(e,t,s){if(!this.videoElementProvider.isVideoReady())return;const n=this.coordinateConverter.normalizeAndQuantizeUnsigned(t,s);e&_e.primaryButton&&this.sendMouseDown(Be.mainButton,n.x,n.y),e&_e.secondaryButton&&this.sendMouseDown(Be.secondaryButton,n.x,n.y),e&_e.auxiliaryButton&&this.sendMouseDown(Be.auxiliaryButton,n.x,n.y),e&_e.fourthButton&&this.sendMouseDown(Be.fourthButton,n.x,n.y),e&_e.fifthButton&&this.sendMouseDown(Be.fifthButton,n.x,n.y)}sendMouseEnter(){this.videoElementProvider.isVideoReady()&&this.toStreamerMessagesProvider.toStreamerHandlers.get("MouseEnter")()}sendMouseLeave(){this.videoElementProvider.isVideoReady()&&this.toStreamerMessagesProvider.toStreamerHandlers.get("MouseLeave")()}sendMouseDown(e,t,s){this.videoElementProvider.isVideoReady()&&(i.Log(i.GetStackTrace(),`mouse button ${e} down at (${t}, ${s})`,6),this.toStreamerMessagesProvider.toStreamerHandlers.get("MouseDown")([e,t,s]))}sendMouseUp(e,t,s){if(!this.videoElementProvider.isVideoReady())return;i.Log(i.GetStackTrace(),`mouse button ${e} up at (${t}, ${s})`,6);const n=this.coordinateConverter.normalizeAndQuantizeUnsigned(t,s);this.toStreamerMessagesProvider.toStreamerHandlers.get("MouseUp")([e,n.x,n.y])}}class Xe{constructor(e,t,s){this.fingers=[9,8,7,6,5,4,3,2,1,0],this.fingerIds=new Map,this.maxByteValue=255,this.touchEventListenerTracker=new We,this.toStreamerMessagesProvider=e,this.videoElementProvider=t,this.coordinateConverter=s,this.videoElementParent=t.getVideoElement();const n=e=>this.onTouchStart(e),r=e=>this.onTouchEnd(e),o=e=>this.onTouchMove(e);this.videoElementParent.addEventListener("touchstart",n,{passive:!1}),this.videoElementParent.addEventListener("touchend",r,{passive:!1}),this.videoElementParent.addEventListener("touchmove",o,{passive:!1}),this.touchEventListenerTracker.addUnregisterCallback((()=>this.videoElementParent.removeEventListener("touchstart",n))),this.touchEventListenerTracker.addUnregisterCallback((()=>this.videoElementParent.removeEventListener("touchend",r))),this.touchEventListenerTracker.addUnregisterCallback((()=>this.videoElementParent.removeEventListener("touchmove",o))),i.Log(i.GetStackTrace(),"Touch Events Registered",6);const a=e=>{e.preventDefault()};document.addEventListener("touchmove",a,{passive:!1}),this.touchEventListenerTracker.addUnregisterCallback((()=>document.removeEventListener("touchmove",a)))}unregisterTouchEvents(){this.touchEventListenerTracker.unregisterAll()}rememberTouch(e){const t=this.fingers.pop();void 0===t&&i.Log(i.GetStackTrace(),"exhausted touch identifiers",6),this.fingerIds.set(e.identifier,t)}forgetTouch(e){this.fingers.push(this.fingerIds.get(e.identifier)),this.fingers.sort((function(e,t){return t-e})),this.fingerIds.delete(e.identifier)}onTouchStart(e){if(this.videoElementProvider.isVideoReady()){for(let t=0;t<e.changedTouches.length;t++)this.rememberTouch(e.changedTouches[t]);i.Log(i.GetStackTrace(),"touch start",6),this.emitTouchData("TouchStart",e.changedTouches),e.preventDefault()}}onTouchEnd(e){if(this.videoElementProvider.isVideoReady()){i.Log(i.GetStackTrace(),"touch end",6),this.emitTouchData("TouchEnd",e.changedTouches);for(let t=0;t<e.changedTouches.length;t++)this.forgetTouch(e.changedTouches[t]);e.preventDefault()}}onTouchMove(e){this.videoElementProvider.isVideoReady()&&(i.Log(i.GetStackTrace(),"touch move",6),this.emitTouchData("TouchMove",e.touches),e.preventDefault())}emitTouchData(e,t){if(!this.videoElementProvider.isVideoReady())return;const s=this.videoElementProvider.getVideoParentElement(),n=this.toStreamerMessagesProvider.toStreamerHandlers;for(let r=0;r<t.length;r++){const o=1,a=t[r],l=a.clientX-s.offsetLeft,d=a.clientY-s.offsetTop;i.Log(i.GetStackTrace(),`F${this.fingerIds.get(a.identifier)}=(${l}, ${d})`,6);const c=this.coordinateConverter.normalizeAndQuantizeUnsigned(l,d);switch(e){case"TouchStart":n.get("TouchStart")([o,c.x,c.y,this.fingerIds.get(a.identifier),this.maxByteValue*a.force,c.inRange?1:0]);break;case"TouchEnd":n.get("TouchEnd")([o,c.x,c.y,this.fingerIds.get(a.identifier),this.maxByteValue*a.force,c.inRange?1:0]);break;case"TouchMove":n.get("TouchMove")([o,c.x,c.y,this.fingerIds.get(a.identifier),this.maxByteValue*a.force,c.inRange?1:0])}}}}class je{constructor(e){this.gamePadEventListenerTracker=new We,this.toStreamerMessagesProvider=e,this.requestAnimationFrame=(window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.requestAnimationFrame).bind(window);const t=window;if("GamepadEvent"in t){const e=e=>this.gamePadConnectHandler(e),t=e=>this.gamePadDisconnectHandler(e);window.addEventListener("gamepadconnected",e),window.addEventListener("gamepaddisconnected",t),this.gamePadEventListenerTracker.addUnregisterCallback((()=>window.removeEventListener("gamepadconnected",e))),this.gamePadEventListenerTracker.addUnregisterCallback((()=>window.removeEventListener("gamepaddisconnected",t)))}else if("WebKitGamepadEvent"in t){const e=e=>this.gamePadConnectHandler(e),t=e=>this.gamePadDisconnectHandler(e);window.addEventListener("webkitgamepadconnected",e),window.addEventListener("webkitgamepaddisconnected",t),this.gamePadEventListenerTracker.addUnregisterCallback((()=>window.removeEventListener("webkitgamepadconnected",e))),this.gamePadEventListenerTracker.addUnregisterCallback((()=>window.removeEventListener("webkitgamepaddisconnected",t)))}if(this.controllers=[],navigator.getGamepads)for(const e of navigator.getGamepads())e&&this.gamePadConnectHandler(new GamepadEvent("gamepadconnected",{gamepad:e}))}unregisterGamePadEvents(){this.gamePadEventListenerTracker.unregisterAll();for(const e of this.controllers)void 0!==e.id&&this.onGamepadDisconnected(e.id);this.controllers=[],this.onGamepadConnected=()=>{},this.onGamepadDisconnected=()=>{}}gamePadConnectHandler(e){i.Log(i.GetStackTrace(),"Gamepad connect handler",6);const t=e.gamepad,s={currentState:t,prevState:t,id:void 0};this.controllers.push(s),this.controllers[t.index].currentState=t,this.controllers[t.index].prevState=t,i.Log(i.GetStackTrace(),"gamepad: "+t.id+" connected",6),window.requestAnimationFrame((()=>this.updateStatus())),this.onGamepadConnected()}gamePadDisconnectHandler(e){i.Log(i.GetStackTrace(),"Gamepad disconnect handler",6),i.Log(i.GetStackTrace(),"gamepad: "+e.gamepad.id+" disconnected",6);const t=this.controllers[e.gamepad.index];delete this.controllers[e.gamepad.index],this.controllers=this.controllers.filter((e=>void 0!==e)),this.onGamepadDisconnected(t.id)}scanGamePads(){const e=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads():[];for(let t=0;t<e.length;t++)e[t]&&e[t].index in this.controllers&&(this.controllers[e[t].index].currentState=e[t])}updateStatus(){this.scanGamePads();const e=this.toStreamerMessagesProvider.toStreamerHandlers;for(const t of this.controllers){const s=void 0===t.id?this.controllers.indexOf(t):t.id,n=t.currentState;for(let n=0;n<t.currentState.buttons.length;n++){const r=t.currentState.buttons[n],i=t.prevState.buttons[n];r.pressed?n==ke.LeftTrigger?e.get("GamepadAnalog")([s,5,r.value]):n==ke.RightTrigger?e.get("GamepadAnalog")([s,6,r.value]):e.get("GamepadButtonPressed")([s,n,i.pressed?1:0]):!r.pressed&&i.pressed&&(n==ke.LeftTrigger?e.get("GamepadAnalog")([s,5,0]):n==ke.RightTrigger?e.get("GamepadAnalog")([s,6,0]):e.get("GamepadButtonReleased")([s,n]))}for(let t=0;t<n.axes.length;t+=2){const r=parseFloat(n.axes[t].toFixed(4)),i=-parseFloat(n.axes[t+1].toFixed(4));e.get("GamepadAnalog")([s,t+1,r]),e.get("GamepadAnalog")([s,t+2,i])}this.controllers[s].prevState=n}this.controllers.length>0&&this.requestAnimationFrame((()=>this.updateStatus()))}onGamepadResponseReceived(e){for(const t of this.controllers)if(void 0===t.id){t.id=e;break}}onGamepadConnected(){}onGamepadDisconnected(e){}}!function(e){e[e.RightClusterBottomButton=0]="RightClusterBottomButton",e[e.RightClusterRightButton=1]="RightClusterRightButton",e[e.RightClusterLeftButton=2]="RightClusterLeftButton",e[e.RightClusterTopButton=3]="RightClusterTopButton",e[e.LeftShoulder=4]="LeftShoulder",e[e.RightShoulder=5]="RightShoulder",e[e.LeftTrigger=6]="LeftTrigger",e[e.RightTrigger=7]="RightTrigger",e[e.SelectOrBack=8]="SelectOrBack",e[e.StartOrForward=9]="StartOrForward",e[e.LeftAnalogPress=10]="LeftAnalogPress",e[e.RightAnalogPress=11]="RightAnalogPress",e[e.LeftClusterTopButton=12]="LeftClusterTopButton",e[e.LeftClusterBottomButton=13]="LeftClusterBottomButton",e[e.LeftClusterLeftButton=14]="LeftClusterLeftButton",e[e.LeftClusterRightButton=15]="LeftClusterRightButton",e[e.CentreButton=16]="CentreButton",e[e.LeftStickHorizontal=0]="LeftStickHorizontal",e[e.LeftStickVertical=1]="LeftStickVertical",e[e.RightStickHorizontal=2]="RightStickHorizontal",e[e.RightStickVertical=3]="RightStickVertical"}(ke||(ke={}));class Ye{constructor(e,t,s){this.activeKeys=new Je,this.toStreamerMessagesProvider=e,this.videoElementProvider=t,this.coordinateConverter=s}registerKeyBoard(e){i.Log(i.GetStackTrace(),"Register Keyboard Events",7);const t=new Ke(this.toStreamerMessagesProvider,e,this.activeKeys);return t.registerKeyBoardEvents(),t}registerMouse(e){i.Log(i.GetStackTrace(),"Register Mouse Events",7);const t=new qe(this.toStreamerMessagesProvider,this.videoElementProvider,this.coordinateConverter,this.activeKeys);switch(e){case ue.LockedMouse:t.registerLockedMouseEvents(t);break;case ue.HoveringMouse:t.registerHoveringMouseEvents(t);break;default:i.Info(i.GetStackTrace(),"unknown Control Scheme Type Defaulting to Locked Mouse Events"),t.registerLockedMouseEvents(t)}return t}registerTouch(e,t){if(i.Log(i.GetStackTrace(),"Registering Touch",6),e){const e=new He(this.toStreamerMessagesProvider,this.videoElementProvider,this.coordinateConverter);return e.setVideoElementParentClientRect(t),e}return new Xe(this.toStreamerMessagesProvider,this.videoElementProvider,this.coordinateConverter)}registerGamePad(){return i.Log(i.GetStackTrace(),"Register Game Pad",7),new je(this.toStreamerMessagesProvider)}}class Je{constructor(){this.activeKeys=[],this.activeKeys=[]}getActiveKeys(){return this.activeKeys}}class Ze{constructor(e,t){this.lastTimeResized=(new Date).getTime(),this.videoElement=document.createElement("video"),this.config=t,this.videoElement.id="streamingVideo",this.videoElement.disablePictureInPicture=!0,this.videoElement.playsInline=!0,this.videoElement.style.width="100%",this.videoElement.style.height="100%",this.videoElement.style.position="absolute",this.videoElement.style.pointerEvents="all",e.appendChild(this.videoElement),this.onResizePlayerCallback=()=>{console.log("Resolution changed, restyling player, did you forget to override this function?")},this.onMatchViewportResolutionCallback=()=>{console.log("Resolution changed and match viewport resolution is turned on, did you forget to override this function?")},this.videoElement.onclick=()=>{this.videoElement.paused&&this.videoElement.play()},this.videoElement.onloadedmetadata=()=>{this.onVideoInitialized()},window.addEventListener("resize",(()=>this.resizePlayerStyle()),!0),window.addEventListener("orientationchange",(()=>this.onOrientationChange()))}play(){return this.videoElement.muted=this.config.isFlagEnabled(re.StartVideoMuted),this.videoElement.autoplay=this.config.isFlagEnabled(re.AutoPlayVideo),this.videoElement.play()}isPaused(){return this.videoElement.paused}isVideoReady(){return void 0!==this.videoElement.readyState&&this.videoElement.readyState>0}hasVideoSource(){return void 0!==this.videoElement.srcObject&&null!==this.videoElement.srcObject}getVideoElement(){return this.videoElement}getVideoParentElement(){return this.videoElement.parentElement}setVideoEnabled(e){this.videoElement.srcObject.getTracks().forEach((t=>t.enabled=e))}onVideoInitialized(){}onOrientationChange(){clearTimeout(this.orientationChangeTimeout),this.orientationChangeTimeout=window.setTimeout((()=>{this.resizePlayerStyle()}),500)}resizePlayerStyle(){const e=this.getVideoParentElement();e&&(this.updateVideoStreamSize(),e.classList.contains("fixed-size")||this.resizePlayerStyleToFillParentElement(),this.onResizePlayerCallback())}resizePlayerStyleToFillParentElement(){this.getVideoParentElement().setAttribute("style","top: 0px; left: 0px; width: 100%; height: 100%; cursor: default;")}updateVideoStreamSize(){if(this.config.isFlagEnabled(re.MatchViewportResolution))if((new Date).getTime()-this.lastTimeResized>1e3){const e=this.getVideoParentElement();if(!e)return;this.onMatchViewportResolutionCallback(e.clientWidth,e.clientHeight),this.lastTimeResized=(new Date).getTime()}else i.Log(i.GetStackTrace(),"Resizing too often - skipping",6),clearTimeout(this.resizeTimeoutHandle),this.resizeTimeoutHandle=window.setTimeout((()=>this.updateVideoStreamSize),1e3)}}class et{constructor(){this.map=new Map,this.reverseMap=new Map}getFromKey(e){return this.map.get(e)}getFromValue(e){return this.reverseMap.get(e)}add(e,t){this.map.set(e,t),this.reverseMap.set(t,e)}remove(e,t){this.map.delete(e),this.reverseMap.delete(t)}}class tt{constructor(){this.toStreamerHandlers=new Map,this.fromStreamerHandlers=new Map,this.toStreamerMessages=new et,this.fromStreamerMessages=new et}populateDefaultProtocol(){this.toStreamerMessages.add("IFrameRequest",{id:0,byteLength:0,structure:[]}),this.toStreamerMessages.add("RequestQualityControl",{id:1,byteLength:0,structure:[]}),this.toStreamerMessages.add("FpsRequest",{id:2,byteLength:0,structure:[]}),this.toStreamerMessages.add("AverageBitrateRequest",{id:3,byteLength:0,structure:[]}),this.toStreamerMessages.add("StartStreaming",{id:4,byteLength:0,structure:[]}),this.toStreamerMessages.add("StopStreaming",{id:5,byteLength:0,structure:[]}),this.toStreamerMessages.add("LatencyTest",{id:6,byteLength:0,structure:[]}),this.toStreamerMessages.add("RequestInitialSettings",{id:7,byteLength:0,structure:[]}),this.toStreamerMessages.add("TestEcho",{id:8,byteLength:0,structure:[]}),this.toStreamerMessages.add("UIInteraction",{id:50,byteLength:0,structure:[]}),this.toStreamerMessages.add("Command",{id:51,byteLength:0,structure:[]}),this.toStreamerMessages.add("KeyDown",{id:60,byteLength:2,structure:["uint8","uint8"]}),this.toStreamerMessages.add("KeyUp",{id:61,byteLength:1,structure:["uint8"]}),this.toStreamerMessages.add("KeyPress",{id:62,byteLength:2,structure:["uint16"]}),this.toStreamerMessages.add("MouseEnter",{id:70,byteLength:0,structure:[]}),this.toStreamerMessages.add("MouseLeave",{id:71,byteLength:0,structure:[]}),this.toStreamerMessages.add("MouseDown",{id:72,byteLength:5,structure:["uint8","uint16","uint16"]}),this.toStreamerMessages.add("MouseUp",{id:73,byteLength:5,structure:["uint8","uint16","uint16"]}),this.toStreamerMessages.add("MouseMove",{id:74,byteLength:8,structure:["uint16","uint16","int16","int16"]}),this.toStreamerMessages.add("MouseWheel",{id:75,byteLength:6,structure:["int16","uint16","uint16"]}),this.toStreamerMessages.add("MouseDouble",{id:76,byteLength:5,structure:["uint8","uint16","uint16"]}),this.toStreamerMessages.add("TouchStart",{id:80,byteLength:8,structure:["uint8","uint16","uint16","uint8","uint8","uint8"]}),this.toStreamerMessages.add("TouchEnd",{id:81,byteLength:8,structure:["uint8","uint16","uint16","uint8","uint8","uint8"]}),this.toStreamerMessages.add("TouchMove",{id:82,byteLength:8,structure:["uint8","uint16","uint16","uint8","uint8","uint8"]}),this.toStreamerMessages.add("GamepadConnected",{id:93,byteLength:0,structure:[]}),this.toStreamerMessages.add("GamepadButtonPressed",{id:90,byteLength:3,structure:["uint8","uint8","uint8"]}),this.toStreamerMessages.add("GamepadButtonReleased",{id:91,byteLength:3,structure:["uint8","uint8","uint8"]}),this.toStreamerMessages.add("GamepadAnalog",{id:92,byteLength:10,structure:["uint8","uint8","double"]}),this.toStreamerMessages.add("GamepadDisconnected",{id:94,byteLength:1,structure:["uint8"]}),this.fromStreamerMessages.add("QualityControlOwnership",0),this.fromStreamerMessages.add("Response",1),this.fromStreamerMessages.add("Command",2),this.fromStreamerMessages.add("FreezeFrame",3),this.fromStreamerMessages.add("UnfreezeFrame",4),this.fromStreamerMessages.add("VideoEncoderAvgQP",5),this.fromStreamerMessages.add("LatencyTest",6),this.fromStreamerMessages.add("InitialSettings",7),this.fromStreamerMessages.add("FileExtension",8),this.fromStreamerMessages.add("FileMimeType",9),this.fromStreamerMessages.add("FileContents",10),this.fromStreamerMessages.add("TestEcho",11),this.fromStreamerMessages.add("InputControlOwnership",12),this.fromStreamerMessages.add("GamepadResponse",13),this.fromStreamerMessages.add("Protocol",255)}registerMessageHandler(e,t,s){switch(e){case Le.ToStreamer:this.toStreamerHandlers.set(t,s);break;case Le.FromStreamer:this.fromStreamerHandlers.set(t,s);break;default:i.Log(i.GetStackTrace(),`Unknown message direction ${e}`)}}}!function(e){e[e.ToStreamer=0]="ToStreamer",e[e.FromStreamer=1]="FromStreamer"}(Le||(Le={}));class st{constructor(){this.responseEventListeners=new Map}addResponseEventListener(e,t){this.responseEventListeners.set(e,t)}removeResponseEventListener(e){this.responseEventListeners.delete(e)}onResponse(e){i.Log(i.GetStackTrace(),"DataChannelReceiveMessageType.Response",6);const t=new TextDecoder("utf-16").decode(e.slice(1));i.Log(i.GetStackTrace(),t,6),this.responseEventListeners.forEach((e=>{e(t)}))}}class nt{constructor(e,t){this.dataChannelSender=e,this.toStreamerMessagesMapProvider=t}sendLatencyTest(e){this.sendDescriptor("LatencyTest",e)}emitCommand(e){this.sendDescriptor("Command",e)}emitUIInteraction(e){this.sendDescriptor("UIInteraction",e)}sendDescriptor(e,t){const s=JSON.stringify(t),n=this.toStreamerMessagesMapProvider.toStreamerMessages.getFromKey(e);void 0===n&&i.Error(i.GetStackTrace(),`Attempted to emit descriptor with message type: ${e}, but the frontend hasn't been configured to send such a message. Check you've added the message type in your cpp`),i.Log(i.GetStackTrace(),"Sending: "+t,6);const r=new DataView(new ArrayBuffer(3+2*s.length));let o=0;r.setUint8(o,n.id),o++,r.setUint16(o,s.length,!0),o+=2;for(let e=0;e<s.length;e++)r.setUint16(o,s.charCodeAt(e),!0),o+=2;this.dataChannelSender.canSend()?this.dataChannelSender.sendData(r.buffer):i.Info(i.GetStackTrace(),`Data channel cannot send yet, skipping sending descriptor message: ${e} - ${s}`)}}class rt{constructor(e,t){this.dataChannelSender=e,this.toStreamerMessagesMapProvider=t}sendMessageToStreamer(e,t){void 0===t&&(t=[]);const s=this.toStreamerMessagesMapProvider.toStreamerMessages.getFromKey(e);if(void 0===s)return void i.Error(i.GetStackTrace(),`Attempted to send a message to the streamer with message type: ${e}, but the frontend hasn't been configured to send such a message. Check you've added the message type in your cpp`);const n=new DataView(new ArrayBuffer(s.byteLength+1));n.setUint8(0,s.id);let r=1;t.forEach(((e,t)=>{switch(s.structure[t]){case"uint8":n.setUint8(r,e),r+=1;break;case"uint16":n.setUint16(r,e,!0),r+=2;break;case"int16":n.setInt16(r,e,!0),r+=2;break;case"float":n.setFloat32(r,e,!0),r+=4;break;case"double":n.setFloat64(r,e,!0),r+=8}})),this.dataChannelSender.canSend()?this.dataChannelSender.sendData(n.buffer):i.Info(i.GetStackTrace(),`Data channel cannot send yet, skipping sending message: ${e} - ${new Uint8Array(n.buffer)}`)}}class it{constructor(e){this.sendMessageController=e}SendRequestQualityControl(){this.sendMessageController.sendMessageToStreamer("RequestQualityControl")}SendMaxFpsRequest(){this.sendMessageController.sendMessageToStreamer("FpsRequest")}SendAverageBitrateRequest(){this.sendMessageController.sendMessageToStreamer("AverageBitrateRequest")}SendStartStreaming(){this.sendMessageController.sendMessageToStreamer("StartStreaming")}SendStopStreaming(){this.sendMessageController.sendMessageToStreamer("StopStreaming")}SendRequestInitialSettings(){this.sendMessageController.sendMessageToStreamer("RequestInitialSettings")}}class ot{constructor(e){this.dataChannelProvider=e}canSend(){return void 0!==this.dataChannelProvider.getDataChannelInstance().dataChannel&&"open"==this.dataChannelProvider.getDataChannelInstance().dataChannel.readyState}sendData(e){const t=this.dataChannelProvider.getDataChannelInstance();"open"==t.dataChannel.readyState?(t.dataChannel.send(e),i.Log(i.GetStackTrace(),`Message Sent: ${new Uint8Array(e)}`,6),this.resetAfkWarningTimerOnDataSend()):i.Error(i.GetStackTrace(),`Message Failed: ${new Uint8Array(e)}`)}resetAfkWarningTimerOnDataSend(){}}class at{constructor(e){this.videoElementProvider=e,this.normalizeAndQuantizeUnsignedFunc=()=>{throw new Error("Normalize and quantize unsigned, method not implemented.")},this.normalizeAndQuantizeSignedFunc=()=>{throw new Error("Normalize and unquantize signed, method not implemented.")},this.denormalizeAndUnquantizeUnsignedFunc=()=>{throw new Error("Denormalize and unquantize unsigned, method not implemented.")}}normalizeAndQuantizeUnsigned(e,t){return this.normalizeAndQuantizeUnsignedFunc(e,t)}unquantizeAndDenormalizeUnsigned(e,t){return this.denormalizeAndUnquantizeUnsignedFunc(e,t)}normalizeAndQuantizeSigned(e,t){return this.normalizeAndQuantizeSignedFunc(e,t)}setupNormalizeAndQuantize(){if(this.videoElementParent=this.videoElementProvider.getVideoParentElement(),this.videoElement=this.videoElementProvider.getVideoElement(),this.videoElementParent&&this.videoElement){const e=this.videoElementParent.clientHeight/this.videoElementParent.clientWidth,t=this.videoElement.videoHeight/this.videoElement.videoWidth;e>t?(i.Log(i.GetStackTrace(),"Setup Normalize and Quantize for playerAspectRatio > videoAspectRatio",6),this.ratio=e/t,this.normalizeAndQuantizeUnsignedFunc=(e,t)=>this.normalizeAndQuantizeUnsignedPlayerBigger(e,t),this.normalizeAndQuantizeSignedFunc=(e,t)=>this.normalizeAndQuantizeSignedPlayerBigger(e,t),this.denormalizeAndUnquantizeUnsignedFunc=(e,t)=>this.denormalizeAndUnquantizeUnsignedPlayerBigger(e,t)):(i.Log(i.GetStackTrace(),"Setup Normalize and Quantize for playerAspectRatio <= videoAspectRatio",6),this.ratio=t/e,this.normalizeAndQuantizeUnsignedFunc=(e,t)=>this.normalizeAndQuantizeUnsignedPlayerSmaller(e,t),this.normalizeAndQuantizeSignedFunc=(e,t)=>this.normalizeAndQuantizeSignedPlayerSmaller(e,t),this.denormalizeAndUnquantizeUnsignedFunc=(e,t)=>this.denormalizeAndUnquantizeUnsignedPlayerSmaller(e,t))}}normalizeAndQuantizeUnsignedPlayerBigger(e,t){const s=e/this.videoElementParent.clientWidth,n=this.ratio*(t/this.videoElementParent.clientHeight-.5)+.5;return s<0||s>1||n<0||n>1?new lt(!1,65535,65535):new lt(!0,65536*s,65536*n)}denormalizeAndUnquantizeUnsignedPlayerBigger(e,t){const s=e/65536,n=(t/65536-.5)/this.ratio+.5;return new dt(s*this.videoElementParent.clientWidth,n*this.videoElementParent.clientHeight)}normalizeAndQuantizeSignedPlayerBigger(e,t){const s=e/(.5*this.videoElementParent.clientWidth),n=this.ratio*t/(.5*this.videoElementParent.clientHeight);return new ct(32767*s,32767*n)}normalizeAndQuantizeUnsignedPlayerSmaller(e,t){const s=this.ratio*(e/this.videoElementParent.clientWidth-.5)+.5,n=t/this.videoElementParent.clientHeight;return s<0||s>1||n<0||n>1?new lt(!1,65535,65535):new lt(!0,65536*s,65536*n)}denormalizeAndUnquantizeUnsignedPlayerSmaller(e,t){const s=(e/65536-.5)/this.ratio+.5,n=t/65536;return new dt(s*this.videoElementParent.clientWidth,n*this.videoElementParent.clientHeight)}normalizeAndQuantizeSignedPlayerSmaller(e,t){const s=this.ratio*e/(.5*this.videoElementParent.clientWidth),n=t/(.5*this.videoElementParent.clientHeight);return new ct(32767*s,32767*n)}}class lt{constructor(e,t,s){this.inRange=e,this.x=t,this.y=s}}class dt{constructor(e,t){this.x=e,this.y=t}}class ct{constructor(e,t){this.x=e,this.y=t}}class ht{constructor(e,t){this.shouldShowPlayOverlay=!0,this.config=e,this.pixelStreaming=t,this.responseController=new st,this.file=new ze,this.sdpConstraints={offerToReceiveAudio:!0,offerToReceiveVideo:!0},this.afkController=new me(this.config,this.pixelStreaming,this.onAfkTriggered.bind(this)),this.afkController.onAFKTimedOutCallback=()=>{this.setDisconnectMessageOverride("You have been disconnected due to inactivity"),this.closeSignalingServer()},this.freezeFrameController=new y(this.pixelStreaming.videoElementParent),this.videoPlayer=new Ze(this.pixelStreaming.videoElementParent,this.config),this.videoPlayer.onVideoInitialized=()=>this.handleVideoInitialized(),this.videoPlayer.onMatchViewportResolutionCallback=(e,t)=>{const s={"Resolution.Width":e,"Resolution.Height":t};this.sendDescriptorController.emitCommand(s)},this.videoPlayer.onResizePlayerCallback=()=>{this.setUpMouseAndFreezeFrame()},this.streamController=new T(this.videoPlayer),this.coordinateConverter=new at(this.videoPlayer),this.sendrecvDataChannelController=new Se,this.recvDataChannelController=new Se,this.registerDataChannelEventEmitters(this.sendrecvDataChannelController),this.registerDataChannelEventEmitters(this.recvDataChannelController),this.dataChannelSender=new ot(this.sendrecvDataChannelController),this.dataChannelSender.resetAfkWarningTimerOnDataSend=()=>this.afkController.resetAfkWarningTimer(),this.streamMessageController=new tt,this.webSocketController=new f,this.webSocketController.onConfig=e=>this.handleOnConfigMessage(e),this.webSocketController.onStreamerList=e=>this.handleStreamerListMessage(e),this.webSocketController.onWebSocketOncloseOverlayMessage=e=>{this.pixelStreaming._onDisconnect(`Websocket disconnect (${e.code}) ${""!=e.reason?"- "+e.reason:""}`),this.setVideoEncoderAvgQP(0)},this.webSocketController.onOpen.addEventListener("open",(()=>{this.config.isFlagEnabled(re.BrowserSendOffer)||this.webSocketController.requestStreamerList()})),this.webSocketController.onClose.addEventListener("close",(()=>{this.afkController.stopAfkWarningTimer(),this.statsTimerHandle&&void 0!==this.statsTimerHandle&&window.clearInterval(this.statsTimerHandle),this.setTouchInputEnabled(!1),this.setMouseInputEnabled(!1),this.setKeyboardInputEnabled(!1),this.setGamePadInputEnabled(!1),this.shouldReconnect&&this.config.getNumericSettingValue(oe.MaxReconnectAttempts)>0&&(this.isReconnecting=!0,this.reconnectAttempt++,this.restartStreamAutomatically())})),this.sendDescriptorController=new nt(this.dataChannelSender,this.streamMessageController),this.sendMessageController=new rt(this.dataChannelSender,this.streamMessageController),this.toStreamerMessagesController=new it(this.sendMessageController),this.registerMessageHandlers(),this.streamMessageController.populateDefaultProtocol(),this.inputClassesFactory=new Ye(this.streamMessageController,this.videoPlayer,this.coordinateConverter),this.isUsingSFU=!1,this.isQualityController=!1,this.preferredCodec="",this.shouldReconnect=!0,this.isReconnecting=!1,this.reconnectAttempt=0,this.config._addOnOptionSettingChangedListener(ce.StreamerId,(e=>{""!==e&&(this.peerConnectionController.peerConnection.close(),this.peerConnectionController.createPeerConnection(this.peerConfig,this.preferredCodec),this.subscribedStream=e,this.webSocketController.sendSubscribe(e))})),this.setVideoEncoderAvgQP(-1),this.signallingUrlBuilder=()=>{let e=this.config.getTextSettingValue(le.SignallingServerUrl);return this.config.isFlagEnabled(re.BrowserSendOffer)&&(e+="?"+re.BrowserSendOffer+"=true"),e}}requestUnquantizedAndDenormalizeUnsigned(e,t){return this.coordinateConverter.unquantizeAndDenormalizeUnsigned(e,t)}handleOnMessage(e){const t=new Uint8Array(e.data);i.Log(i.GetStackTrace(),"Message incoming:"+t,6);const s=this.streamMessageController.fromStreamerMessages.getFromValue(t[0]);this.streamMessageController.fromStreamerHandlers.get(s)(e.data)}registerMessageHandlers(){this.streamMessageController.registerMessageHandler(Le.FromStreamer,"QualityControlOwnership",(e=>this.onQualityControlOwnership(e))),this.streamMessageController.registerMessageHandler(Le.FromStreamer,"Response",(e=>this.responseController.onResponse(e))),this.streamMessageController.registerMessageHandler(Le.FromStreamer,"Command",(e=>{this.onCommand(e)})),this.streamMessageController.registerMessageHandler(Le.FromStreamer,"FreezeFrame",(e=>this.onFreezeFrameMessage(e))),this.streamMessageController.registerMessageHandler(Le.FromStreamer,"UnfreezeFrame",(()=>this.invalidateFreezeFrameAndEnableVideo())),this.streamMessageController.registerMessageHandler(Le.FromStreamer,"VideoEncoderAvgQP",(e=>this.handleVideoEncoderAvgQP(e))),this.streamMessageController.registerMessageHandler(Le.FromStreamer,"LatencyTest",(e=>this.handleLatencyTestResult(e))),this.streamMessageController.registerMessageHandler(Le.FromStreamer,"InitialSettings",(e=>this.handleInitialSettings(e))),this.streamMessageController.registerMessageHandler(Le.FromStreamer,"FileExtension",(e=>this.onFileExtension(e))),this.streamMessageController.registerMessageHandler(Le.FromStreamer,"FileMimeType",(e=>this.onFileMimeType(e))),this.streamMessageController.registerMessageHandler(Le.FromStreamer,"FileContents",(e=>this.onFileContents(e))),this.streamMessageController.registerMessageHandler(Le.FromStreamer,"TestEcho",(()=>{})),this.streamMessageController.registerMessageHandler(Le.FromStreamer,"InputControlOwnership",(e=>this.onInputControlOwnership(e))),this.streamMessageController.registerMessageHandler(Le.FromStreamer,"GamepadResponse",(e=>this.onGamepadResponse(e))),this.streamMessageController.registerMessageHandler(Le.FromStreamer,"Protocol",(e=>this.onProtocolMessage(e))),this.streamMessageController.registerMessageHandler(Le.ToStreamer,"IFrameRequest",(()=>this.sendMessageController.sendMessageToStreamer("IFrameRequest"))),this.streamMessageController.registerMessageHandler(Le.ToStreamer,"RequestQualityControl",(()=>this.sendMessageController.sendMessageToStreamer("RequestQualityControl"))),this.streamMessageController.registerMessageHandler(Le.ToStreamer,"FpsRequest",(()=>this.sendMessageController.sendMessageToStreamer("FpsRequest"))),this.streamMessageController.registerMessageHandler(Le.ToStreamer,"AverageBitrateRequest",(()=>this.sendMessageController.sendMessageToStreamer("AverageBitrateRequest"))),this.streamMessageController.registerMessageHandler(Le.ToStreamer,"StartStreaming",(()=>this.sendMessageController.sendMessageToStreamer("StartStreaming"))),this.streamMessageController.registerMessageHandler(Le.ToStreamer,"StopStreaming",(()=>this.sendMessageController.sendMessageToStreamer("StopStreaming"))),this.streamMessageController.registerMessageHandler(Le.ToStreamer,"LatencyTest",(()=>this.sendMessageController.sendMessageToStreamer("LatencyTest"))),this.streamMessageController.registerMessageHandler(Le.ToStreamer,"RequestInitialSettings",(()=>this.sendMessageController.sendMessageToStreamer("RequestInitialSettings"))),this.streamMessageController.registerMessageHandler(Le.ToStreamer,"TestEcho",(()=>{})),this.streamMessageController.registerMessageHandler(Le.ToStreamer,"UIInteraction",(e=>this.sendDescriptorController.emitUIInteraction(e))),this.streamMessageController.registerMessageHandler(Le.ToStreamer,"Command",(e=>this.sendDescriptorController.emitCommand(e))),this.streamMessageController.registerMessageHandler(Le.ToStreamer,"KeyDown",(e=>this.sendMessageController.sendMessageToStreamer("KeyDown",e))),this.streamMessageController.registerMessageHandler(Le.ToStreamer,"KeyUp",(e=>this.sendMessageController.sendMessageToStreamer("KeyUp",e))),this.streamMessageController.registerMessageHandler(Le.ToStreamer,"KeyPress",(e=>this.sendMessageController.sendMessageToStreamer("KeyPress",e))),this.streamMessageController.registerMessageHandler(Le.ToStreamer,"MouseEnter",(e=>this.sendMessageController.sendMessageToStreamer("MouseEnter",e))),this.streamMessageController.registerMessageHandler(Le.ToStreamer,"MouseLeave",(e=>this.sendMessageController.sendMessageToStreamer("MouseLeave",e))),this.streamMessageController.registerMessageHandler(Le.ToStreamer,"MouseDown",(e=>this.sendMessageController.sendMessageToStreamer("MouseDown",e))),this.streamMessageController.registerMessageHandler(Le.ToStreamer,"MouseUp",(e=>this.sendMessageController.sendMessageToStreamer("MouseUp",e))),this.streamMessageController.registerMessageHandler(Le.ToStreamer,"MouseMove",(e=>this.sendMessageController.sendMessageToStreamer("MouseMove",e))),this.streamMessageController.registerMessageHandler(Le.ToStreamer,"MouseWheel",(e=>this.sendMessageController.sendMessageToStreamer("MouseWheel",e))),this.streamMessageController.registerMessageHandler(Le.ToStreamer,"MouseDouble",(e=>this.sendMessageController.sendMessageToStreamer("MouseDouble",e))),this.streamMessageController.registerMessageHandler(Le.ToStreamer,"TouchStart",(e=>this.sendMessageController.sendMessageToStreamer("TouchStart",e))),this.streamMessageController.registerMessageHandler(Le.ToStreamer,"TouchEnd",(e=>this.sendMessageController.sendMessageToStreamer("TouchEnd",e))),this.streamMessageController.registerMessageHandler(Le.ToStreamer,"TouchMove",(e=>this.sendMessageController.sendMessageToStreamer("TouchMove",e))),this.streamMessageController.registerMessageHandler(Le.ToStreamer,"GamepadConnected",(()=>this.sendMessageController.sendMessageToStreamer("GamepadConnected"))),this.streamMessageController.registerMessageHandler(Le.ToStreamer,"GamepadButtonPressed",(e=>this.sendMessageController.sendMessageToStreamer("GamepadButtonPressed",e))),this.streamMessageController.registerMessageHandler(Le.ToStreamer,"GamepadButtonReleased",(e=>this.sendMessageController.sendMessageToStreamer("GamepadButtonReleased",e))),this.streamMessageController.registerMessageHandler(Le.ToStreamer,"GamepadAnalog",(e=>this.sendMessageController.sendMessageToStreamer("GamepadAnalog",e))),this.streamMessageController.registerMessageHandler(Le.ToStreamer,"GamepadDisconnected",(e=>this.sendMessageController.sendMessageToStreamer("GamepadDisconnected",e))),this.streamMessageController.registerMessageHandler(Le.ToStreamer,"XRHMDTransform",(e=>this.sendMessageController.sendMessageToStreamer("XRHMDTransform",e))),this.streamMessageController.registerMessageHandler(Le.ToStreamer,"XRControllerTransform",(e=>this.sendMessageController.sendMessageToStreamer("XRControllerTransform",e))),this.streamMessageController.registerMessageHandler(Le.ToStreamer,"XRSystem",(e=>this.sendMessageController.sendMessageToStreamer("XRSystem",e))),this.streamMessageController.registerMessageHandler(Le.ToStreamer,"XRButtonTouched",(e=>this.sendMessageController.sendMessageToStreamer("XRButtonTouched",e))),this.streamMessageController.registerMessageHandler(Le.ToStreamer,"XRButtonPressed",(e=>this.sendMessageController.sendMessageToStreamer("XRButtonPressed",e))),this.streamMessageController.registerMessageHandler(Le.ToStreamer,"XRButtonReleased",(e=>this.sendMessageController.sendMessageToStreamer("XRButtonReleased",e))),this.streamMessageController.registerMessageHandler(Le.ToStreamer,"XRAnalog",(e=>this.sendMessageController.sendMessageToStreamer("XRAnalog",e)))}onCommand(e){i.Log(i.GetStackTrace(),"DataChannelReceiveMessageType.Command",6);const t=new TextDecoder("utf-16").decode(e.slice(1));i.Log(i.GetStackTrace(),"Data Channel Command: "+t,6);const s=JSON.parse(t);"onScreenKeyboard"===s.command&&this.pixelStreaming._activateOnScreenKeyboard(s)}onProtocolMessage(e){try{const t=new TextDecoder("utf-16").decode(e.slice(1)),s=JSON.parse(t);Object.prototype.hasOwnProperty.call(s,"Direction")||i.Error(i.GetStackTrace(),"Malformed protocol received. Ensure the protocol message contains a direction");const n=s.Direction;delete s.Direction,i.Log(i.GetStackTrace(),`Received new ${n==Le.FromStreamer?"FromStreamer":"ToStreamer"} protocol. Updating existing protocol...`),Object.keys(s).forEach((e=>{const t=s[e];switch(n){case Le.ToStreamer:if(!Object.prototype.hasOwnProperty.call(t,"id")||!Object.prototype.hasOwnProperty.call(t,"byteLength"))return void i.Error(i.GetStackTrace(),`ToStreamer->${e} protocol definition was malformed as it didn't contain at least an id and a byteLength\n\n                                           Definition was: ${JSON.stringify(t,null,2)}`);if(t.byteLength>0&&!Object.prototype.hasOwnProperty.call(t,"structure"))return void i.Error(i.GetStackTrace(),`ToStreamer->${e} protocol definition was malformed as it specified a byteLength but no accompanying structure`);this.streamMessageController.toStreamerHandlers.get(e)?this.streamMessageController.toStreamerMessages.add(e,t):i.Error(i.GetStackTrace(),`There was no registered handler for "${e}" - try adding one using registerMessageHandler(MessageDirection.ToStreamer, "${e}", myHandler)`);break;case Le.FromStreamer:if(!Object.prototype.hasOwnProperty.call(t,"id"))return void i.Error(i.GetStackTrace(),`FromStreamer->${e} protocol definition was malformed as it didn't contain at least an id\n\n                            Definition was: ${JSON.stringify(t,null,2)}`);this.streamMessageController.fromStreamerHandlers.get(e)?this.streamMessageController.fromStreamerMessages.add(e,t.id):i.Error(i.GetStackTrace(),`There was no registered handler for "${t}" - try adding one using registerMessageHandler(MessageDirection.FromStreamer, "${e}", myHandler)`);break;default:i.Error(i.GetStackTrace(),`Unknown direction: ${n}`)}})),this.toStreamerMessagesController.SendRequestInitialSettings(),this.toStreamerMessagesController.SendRequestQualityControl()}catch(e){i.Log(i.GetStackTrace(),e)}}onInputControlOwnership(e){const t=new Uint8Array(e);i.Log(i.GetStackTrace(),"DataChannelReceiveMessageType.InputControlOwnership",6);const s=new Boolean(t[1]).valueOf();i.Log(i.GetStackTrace(),`Received input controller message - will your input control the stream: ${s}`),this.pixelStreaming._onInputControlOwnership(s)}onGamepadResponse(e){const t=new TextDecoder("utf-16").decode(e.slice(1)),s=JSON.parse(t);this.gamePadController.onGamepadResponseReceived(s.controllerId)}onAfkTriggered(){this.afkController.onAfkClick(),this.videoPlayer.isPaused()&&this.videoPlayer.hasVideoSource()&&this.playStream()}setAfkEnabled(e){e?this.onAfkTriggered():this.afkController.stopAfkWarningTimer()}restartStreamAutomatically(){if(this.webSocketController)if(this.webSocketController.webSocket&&this.webSocketController.webSocket.readyState!==WebSocket.CLOSED){this.pixelStreaming._showActionOrErrorOnDisconnect=!1,this.setDisconnectMessageOverride("Restarting stream..."),this.closeSignalingServer();const e=setTimeout((()=>{this.pixelStreaming._onWebRtcAutoConnect(),this.connectToSignallingServer(),clearTimeout(e)}),3e3)}else i.Log(i.GetStackTrace(),"A websocket connection has not been made yet so we will start the stream"),this.pixelStreaming._onWebRtcAutoConnect(),this.connectToSignallingServer();else i.Log(i.GetStackTrace(),"The Web Socket Controller does not exist so this will not work right now.")}loadFreezeFrameOrShowPlayOverlay(){this.pixelStreaming.dispatchEvent(new $({shouldShowPlayOverlay:this.shouldShowPlayOverlay,isValid:this.freezeFrameController.valid,jpegData:this.freezeFrameController.jpeg})),!0===this.shouldShowPlayOverlay?(i.Log(i.GetStackTrace(),"showing play overlay"),this.resizePlayerStyle()):(i.Log(i.GetStackTrace(),"showing freeze frame"),this.freezeFrameController.showFreezeFrame()),setTimeout((()=>{this.videoPlayer.setVideoEnabled(!1)}),this.freezeFrameController.freezeFrameDelay)}onFreezeFrameMessage(e){i.Log(i.GetStackTrace(),"DataChannelReceiveMessageType.FreezeFrame",6);const t=new Uint8Array(e);this.freezeFrameController.processFreezeFrameMessage(t,(()=>this.loadFreezeFrameOrShowPlayOverlay()))}invalidateFreezeFrameAndEnableVideo(){i.Log(i.GetStackTrace(),"DataChannelReceiveMessageType.FreezeFrame",6),setTimeout((()=>{this.pixelStreaming.dispatchEvent(new q),this.freezeFrameController.hideFreezeFrame()}),this.freezeFrameController.freezeFrameDelay),this.videoPlayer.getVideoElement()&&this.videoPlayer.setVideoEnabled(!0)}onFileExtension(e){const t=new Uint8Array(e);Ge.setExtensionFromBytes(t,this.file)}onFileMimeType(e){const t=new Uint8Array(e);Ge.setMimeTypeFromBytes(t,this.file)}onFileContents(e){const t=new Uint8Array(e);Ge.setContentsFromBytes(t,this.file)}playStream(){if(!this.videoPlayer.getVideoElement()){const e="Could not play video stream because the video player was not initialized correctly.";return this.pixelStreaming.dispatchEvent(new N({message:e})),i.Error(i.GetStackTrace(),e),this.setDisconnectMessageOverride("Stream not initialized correctly"),void this.closeSignalingServer()}this.videoPlayer.hasVideoSource()?(this.setTouchInputEnabled(this.config.isFlagEnabled(re.TouchInput)),this.pixelStreaming.dispatchEvent(new K),this.streamController.audioElement.srcObject?(this.streamController.audioElement.muted=this.config.isFlagEnabled(re.StartVideoMuted),this.streamController.audioElement.play().then((()=>{this.playVideo()})).catch((e=>{i.Log(i.GetStackTrace(),e),i.Log(i.GetStackTrace(),"Browser does not support autoplaying video without interaction - to resolve this we are going to show the play button overlay."),this.pixelStreaming.dispatchEvent(new Q({reason:e}))}))):this.playVideo(),this.shouldShowPlayOverlay=!1,this.freezeFrameController.showFreezeFrame()):i.Warning(i.GetStackTrace(),"Cannot play stream, the video element has no srcObject to play.")}playVideo(){this.videoPlayer.play().catch((e=>{this.streamController.audioElement.srcObject&&this.streamController.audioElement.pause(),i.Log(i.GetStackTrace(),e),i.Log(i.GetStackTrace(),"Browser does not support autoplaying video without interaction - to resolve this we are going to show the play button overlay."),this.pixelStreaming.dispatchEvent(new Q({reason:e}))}))}autoPlayVideoOrSetUpPlayOverlay(){this.config.isFlagEnabled(re.AutoPlayVideo)&&this.playStream(),this.resizePlayerStyle()}connectToSignallingServer(){const e=this.signallingUrlBuilder();this.webSocketController.connect(e)}startSession(e){if(this.peerConfig=e,this.config.isFlagEnabled(re.ForceTURN)&&!this.checkTurnServerAvailability(e))return i.Info(i.GetStackTrace(),"No turn server was found in the Peer Connection Options. TURN cannot be forced, closing connection. Please use STUN instead"),this.setDisconnectMessageOverride("TURN cannot be forced, closing connection. Please use STUN instead."),void this.closeSignalingServer();this.peerConnectionController=new Ae(this.peerConfig,this.config,this.preferredCodec),this.peerConnectionController.onVideoStats=e=>this.handleVideoStats(e),this.peerConnectionController.onSendWebRTCOffer=e=>this.handleSendWebRTCOffer(e),this.peerConnectionController.onSendWebRTCAnswer=e=>this.handleSendWebRTCAnswer(e),this.peerConnectionController.onPeerIceCandidate=e=>this.handleSendIceCandidate(e),this.peerConnectionController.onDataChannel=e=>this.handleDataChannel(e),this.peerConnectionController.showTextOverlayConnecting=()=>this.pixelStreaming._onWebRtcConnecting(),this.peerConnectionController.showTextOverlaySetupFailure=()=>this.pixelStreaming._onWebRtcFailed();let t=!1;this.peerConnectionController.onIceConnectionStateChange=()=>{!t&&["connected","completed"].includes(this.peerConnectionController.peerConnection.iceConnectionState)&&(this.pixelStreaming._onWebRtcConnected(),t=!0)},this.peerConnectionController.onTrack=e=>this.streamController.handleOnTrack(e),this.config.isFlagEnabled(re.BrowserSendOffer)&&(this.sendrecvDataChannelController.createDataChannel(this.peerConnectionController.peerConnection,"cirrus",this.datachannelOptions),this.sendrecvDataChannelController.handleOnMessage=e=>this.handleOnMessage(e),this.peerConnectionController.createOffer(this.sdpConstraints,this.config))}checkTurnServerAvailability(e){if(!e.iceServers)return i.Info(i.GetStackTrace(),"A turn sever was not found"),!1;for(const t of e.iceServers)for(const e of t.urls)if(e.includes("turn"))return i.Log(i.GetStackTrace(),`A turn sever was found at ${e}`),!0;return i.Info(i.GetStackTrace(),"A turn sever was not found"),!1}handleOnConfigMessage(e){this.resizePlayerStyle(),this.startSession(e.peerConnectionOptions),this.webSocketController.onWebRtcAnswer=e=>this.handleWebRtcAnswer(e),this.webSocketController.onWebRtcOffer=e=>this.handleWebRtcOffer(e),this.webSocketController.onWebRtcPeerDataChannels=e=>this.handleWebRtcSFUPeerDatachannels(e),this.webSocketController.onIceCandidate=e=>this.handleIceCandidate(e)}handleStreamerListMessage(e){if(i.Log(i.GetStackTrace(),`Got streamer list ${e.ids}`,6),this.isReconnecting)e.ids.includes(this.subscribedStream)?(this.isReconnecting=!1,this.reconnectAttempt=0,this.webSocketController.sendSubscribe(this.subscribedStream)):this.reconnectAttempt<this.config.getNumericSettingValue(oe.MaxReconnectAttempts)?(this.reconnectAttempt++,setTimeout((()=>{this.webSocketController.requestStreamerList()}),2e3)):(this.reconnectAttempt=0,this.isReconnecting=!1,this.shouldReconnect=!1,this.webSocketController.close(),this.config.setOptionSettingValue(ce.StreamerId,""),this.config.setOptionSettingOptions(ce.StreamerId,[]));else{const t=[...e.ids];t.unshift(""),this.config.setOptionSettingOptions(ce.StreamerId,t);const s=new URLSearchParams(window.location.search);let n=null;1==e.ids.length?n=e.ids[0]:this.config.isFlagEnabled(re.PreferSFU)&&e.ids.includes("SFU")?n="SFU":s.has(ce.StreamerId)&&e.ids.includes(s.get(ce.StreamerId))&&(n=s.get(ce.StreamerId)),null!==n&&this.config.setOptionSettingValue(ce.StreamerId,n),this.pixelStreaming.dispatchEvent(new j({messageStreamerList:e,autoSelectedStreamerId:n}))}}handleWebRtcAnswer(e){i.Log(i.GetStackTrace(),`Got answer sdp ${e.sdp}`,6);const t={sdp:e.sdp,type:"answer"};this.peerConnectionController.receiveAnswer(t),this.handlePostWebrtcNegotiation()}handleWebRtcOffer(e){i.Log(i.GetStackTrace(),`Got offer sdp ${e.sdp}`,6),this.isUsingSFU=!!e.sfu&&e.sfu,this.isUsingSFU&&(this.peerConnectionController.preferredCodec="");const t={sdp:e.sdp,type:"offer"};this.peerConnectionController.receiveOffer(t,this.config),this.handlePostWebrtcNegotiation()}handleWebRtcSFUPeerDatachannels(e){const t={ordered:!0,negotiated:!0,id:e.sendStreamId},s=e.sendStreamId!=e.recvStreamId;if(this.sendrecvDataChannelController.createDataChannel(this.peerConnectionController.peerConnection,s?"send-datachannel":"datachannel",t),s){const t={ordered:!0,negotiated:!0,id:e.recvStreamId};this.recvDataChannelController.createDataChannel(this.peerConnectionController.peerConnection,"recv-datachannel",t),this.recvDataChannelController.handleOnOpen=()=>this.webSocketController.sendSFURecvDataChannelReady(),this.recvDataChannelController.handleOnMessage=e=>this.handleOnMessage(e)}else this.sendrecvDataChannelController.handleOnMessage=e=>this.handleOnMessage(e)}handlePostWebrtcNegotiation(){this.afkController.startAfkWarningTimer(),this.pixelStreaming._onWebRtcSdp(),this.statsTimerHandle&&void 0!==this.statsTimerHandle&&window.clearInterval(this.statsTimerHandle),this.statsTimerHandle=window.setInterval((()=>this.getStats()),1e3),this.setMouseInputEnabled(this.config.isFlagEnabled(re.MouseInput)),this.setKeyboardInputEnabled(this.config.isFlagEnabled(re.KeyboardInput)),this.setGamePadInputEnabled(this.config.isFlagEnabled(re.GamepadInput))}handleIceCandidate(e){i.Log(i.GetStackTrace(),"Web RTC Controller: onWebRtcIce",6);const t=new RTCIceCandidate(e);this.peerConnectionController.handleOnIce(t)}handleSendIceCandidate(e){i.Log(i.GetStackTrace(),"OnIceCandidate",6),e.candidate&&e.candidate.candidate&&this.webSocketController.sendIceCandidate(e.candidate)}handleDataChannel(e){i.Log(i.GetStackTrace(),"Data channel created for us by browser as we are a receiving peer.",6),this.sendrecvDataChannelController.dataChannel=e.channel,this.sendrecvDataChannelController.setupDataChannel(),this.sendrecvDataChannelController.handleOnMessage=e=>this.handleOnMessage(e)}handleSendWebRTCOffer(e){i.Log(i.GetStackTrace(),"Sending the offer to the Server",6),this.webSocketController.sendWebRtcOffer(e)}handleSendWebRTCAnswer(e){i.Log(i.GetStackTrace(),"Sending the answer to the Server",6),this.webSocketController.sendWebRtcAnswer(e),this.isUsingSFU&&this.webSocketController.sendWebRtcDatachannelRequest()}setUpMouseAndFreezeFrame(){this.videoElementParentClientRect=this.videoPlayer.getVideoParentElement().getBoundingClientRect(),this.coordinateConverter.setupNormalizeAndQuantize(),this.freezeFrameController.freezeFrame.resize()}closeSignalingServer(){var e;this.shouldReconnect=!1,null===(e=this.webSocketController)||void 0===e||e.close()}closePeerConnection(){var e;null===(e=this.peerConnectionController)||void 0===e||e.close()}close(){this.closeSignalingServer(),this.closePeerConnection()}getStats(){this.peerConnectionController.generateStats()}sendLatencyTest(){this.latencyStartTime=Date.now(),this.sendDescriptorController.sendLatencyTest({StartTime:this.latencyStartTime})}sendEncoderMinQP(e){i.Log(i.GetStackTrace(),`MinQP=${e}\n`,6),null!=e&&this.sendDescriptorController.emitCommand({"Encoder.MinQP":e})}sendEncoderMaxQP(e){i.Log(i.GetStackTrace(),`MaxQP=${e}\n`,6),null!=e&&this.sendDescriptorController.emitCommand({"Encoder.MaxQP":e})}sendWebRTCMinBitrate(e){i.Log(i.GetStackTrace(),`WebRTC Min Bitrate=${e}`,6),null!=e&&this.sendDescriptorController.emitCommand({"WebRTC.MinBitrate":e})}sendWebRTCMaxBitrate(e){i.Log(i.GetStackTrace(),`WebRTC Max Bitrate=${e}`,6),null!=e&&this.sendDescriptorController.emitCommand({"WebRTC.MaxBitrate":e})}sendWebRTCFps(e){i.Log(i.GetStackTrace(),`WebRTC FPS=${e}`,6),null!=e&&(this.sendDescriptorController.emitCommand({"WebRTC.Fps":e}),this.sendDescriptorController.emitCommand({"WebRTC.MaxFps":e}))}sendShowFps(){i.Log(i.GetStackTrace(),"----   Sending show stat to UE   ----",6),this.sendDescriptorController.emitCommand({"stat.fps":""})}sendIframeRequest(){i.Log(i.GetStackTrace(),"----   Sending Request for an IFrame  ----",6),this.streamMessageController.toStreamerHandlers.get("IFrameRequest")()}emitUIInteraction(e){i.Log(i.GetStackTrace(),"----   Sending custom UIInteraction message   ----",6),this.sendDescriptorController.emitUIInteraction(e)}emitCommand(e){i.Log(i.GetStackTrace(),"----   Sending custom Command message   ----",6),this.sendDescriptorController.emitCommand(e)}emitConsoleCommand(e){i.Log(i.GetStackTrace(),"----   Sending custom Command:ConsoleCommand message   ----",6),this.sendDescriptorController.emitCommand({ConsoleCommand:e})}sendRequestQualityControlOwnership(){i.Log(i.GetStackTrace(),"----   Sending Request to Control Quality  ----",6),this.toStreamerMessagesController.SendRequestQualityControl()}handleLatencyTestResult(e){i.Log(i.GetStackTrace(),"DataChannelReceiveMessageType.latencyTest",6);const t=new TextDecoder("utf-16").decode(e.slice(1)),s=new Ie;Object.assign(s,JSON.parse(t)),s.processFields(),s.testStartTimeMs=this.latencyStartTime,s.browserReceiptTimeMs=Date.now(),s.latencyExcludingDecode=~~(s.browserReceiptTimeMs-s.testStartTimeMs),s.testDuration=~~(s.TransmissionTimeMs-s.ReceiptTimeMs),s.networkLatency=~~(s.latencyExcludingDecode-s.testDuration),s.frameDisplayDeltaTimeMs&&s.browserReceiptTimeMs&&(s.endToEndLatency=(s.frameDisplayDeltaTimeMs,s.networkLatency,~~+s.CaptureToSendMs)),this.pixelStreaming._onLatencyTestResult(s)}handleInitialSettings(e){i.Log(i.GetStackTrace(),"DataChannelReceiveMessageType.InitialSettings",6);const t=new TextDecoder("utf-16").decode(e.slice(1)),s=JSON.parse(t),n=new Fe;s.Encoder&&(n.EncoderSettings=s.Encoder),s.WebRTC&&(n.WebRTCSettings=s.WebRTC),s.PixelStreaming&&(n.PixelStreamingSettings=s.PixelStreaming),s.ConfigOptions&&this.config.setFlagEnabled(re.HoveringMouseMode,!!s.ConfigOptions.DefaultToHover),n.ueCompatible(),i.Log(i.GetStackTrace(),t,6),this.pixelStreaming._onInitialSettings(n)}handleVideoEncoderAvgQP(e){i.Log(i.GetStackTrace(),"DataChannelReceiveMessageType.VideoEncoderAvgQP",6);const t=Number(new TextDecoder("utf-16").decode(e.slice(1)));this.setVideoEncoderAvgQP(t)}handleVideoInitialized(){this.pixelStreaming._onVideoInitialized(),this.autoPlayVideoOrSetUpPlayOverlay(),this.resizePlayerStyle(),this.videoPlayer.updateVideoStreamSize()}onQualityControlOwnership(e){const t=new Uint8Array(e);i.Log(i.GetStackTrace(),"DataChannelReceiveMessageType.QualityControlOwnership",6),this.isQualityController=new Boolean(t[1]).valueOf(),i.Log(i.GetStackTrace(),`Received quality controller message, will control quality: ${this.isQualityController}`),this.pixelStreaming._onQualityControlOwnership(this.isQualityController)}handleVideoStats(e){this.pixelStreaming._onVideoStats(e)}resizePlayerStyle(){this.videoPlayer.resizePlayerStyle()}getDisconnectMessageOverride(){return this.disconnectMessageOverride}setDisconnectMessageOverride(e){this.disconnectMessageOverride=e}setPreferredCodec(e){this.preferredCodec=e,this.peerConnectionController&&(this.peerConnectionController.preferredCodec=e,this.peerConnectionController.updateCodecSelection=!1)}setVideoEncoderAvgQP(e){this.videoAvgQp=e,this.pixelStreaming._onVideoEncoderAvgQP(this.videoAvgQp)}setKeyboardInputEnabled(e){var t;null===(t=this.keyboardController)||void 0===t||t.unregisterKeyBoardEvents(),e&&(this.keyboardController=this.inputClassesFactory.registerKeyBoard(this.config))}setMouseInputEnabled(e){var t;if(null===(t=this.mouseController)||void 0===t||t.unregisterMouseEvents(),e){const e=this.config.isFlagEnabled(re.HoveringMouseMode)?ue.HoveringMouse:ue.LockedMouse;this.mouseController=this.inputClassesFactory.registerMouse(e)}}setTouchInputEnabled(e){var t;null===(t=this.touchController)||void 0===t||t.unregisterTouchEvents(),e&&(this.touchController=this.inputClassesFactory.registerTouch(this.config.isFlagEnabled(re.FakeMouseWithTouches),this.videoElementParentClientRect))}setGamePadInputEnabled(e){var t;null===(t=this.gamePadController)||void 0===t||t.unregisterGamePadEvents(),e&&(this.gamePadController=this.inputClassesFactory.registerGamePad(),this.gamePadController.onGamepadConnected=()=>{this.streamMessageController.toStreamerHandlers.get("GamepadConnected")()},this.gamePadController.onGamepadDisconnected=e=>{this.streamMessageController.toStreamerHandlers.get("GamepadDisconnected")([e])})}registerDataChannelEventEmitters(e){e.onOpen=(e,t)=>this.pixelStreaming.dispatchEvent(new B({label:e,event:t})),e.onClose=(e,t)=>this.pixelStreaming.dispatchEvent(new _({label:e,event:t})),e.onError=(e,t)=>this.pixelStreaming.dispatchEvent(new W({label:e,event:t}))}}class gt{static vertexShader(){return"\n\t\tattribute vec2 a_position;\n\t\tattribute vec2 a_texCoord;\n\n\t\t// input\n\t\tuniform vec2 u_resolution;\n\t\tuniform vec4 u_offset;\n\n\t\t//\n\t\tvarying vec2 v_texCoord;\n\n\t\tvoid main() {\n\t\t   // convert the rectangle from pixels to 0.0 to 1.0\n\t\t   vec2 zeroToOne = a_position / u_resolution;\n\n\t\t   // convert from 0->1 to 0->2\n\t\t   vec2 zeroToTwo = zeroToOne * 2.0;\n\n\t\t   // convert from 0->2 to -1->+1 (clipspace)\n\t\t   vec2 clipSpace = zeroToTwo - 1.0;\n\n\t\t   gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\n\t\t   // pass the texCoord to the fragment shader\n\t\t   // The GPU will interpolate this value between points.\n\t\t   v_texCoord = (a_texCoord * u_offset.xy) + u_offset.zw;\n\t\t}\n\t\t"}static fragmentShader(){return"\n\t\tprecision mediump float;\n\n\t\t// our texture\n\t\tuniform sampler2D u_image;\n\n\t\t// the texCoords passed in from the vertex shader.\n\t\tvarying vec2 v_texCoord;\n\n\t\tvoid main() {\n\t\t   gl_FragColor = texture2D(u_image, v_texCoord);\n\t\t}\n\t\t"}}class ut{static deepCopyGamepad(e){return JSON.parse(JSON.stringify({buttons:e.buttons.map((e=>JSON.parse(JSON.stringify({pressed:e.pressed,touched:e.touched})))),axes:e.axes}))}}class mt{constructor(e){this.toStreamerMessagesProvider=e,this.controllers=[]}updateStatus(e,t,s){if(e.gamepad){const n=t.getPose(e.gripSpace,s);if(!n)return;let r=0;e.profiles.includes("htc-vive")?r=1:e.profiles.includes("oculus-touch")&&(r=2),this.toStreamerMessagesProvider.toStreamerHandlers.get("XRSystem")([r]);let i=2;switch(e.handedness){case"left":i=0;break;case"right":i=1}const o=n.transform.matrix,a=[];for(let e=0;e<16;e++)a[e]=new Float32Array([o[e]])[0];this.toStreamerMessagesProvider.toStreamerHandlers.get("XRControllerTransform")([a[0],a[4],a[8],a[12],a[1],a[5],a[9],a[13],a[2],a[6],a[10],a[14],a[3],a[7],a[11],a[15],i]),void 0===this.controllers[i]&&(this.controllers[i]={prevState:void 0,currentState:void 0,id:void 0},this.controllers[i].prevState=ut.deepCopyGamepad(e.gamepad)),this.controllers[i].currentState=ut.deepCopyGamepad(e.gamepad);const l=this.controllers[i],d=l.currentState,c=l.prevState;for(let e=0;e<d.buttons.length;e++){const t=d.buttons[e],s=c.buttons[e];t.pressed?this.toStreamerMessagesProvider.toStreamerHandlers.get("XRButtonPressed")([i,e,s.pressed?1:0]):!t.pressed&&s.pressed&&this.toStreamerMessagesProvider.toStreamerHandlers.get("XRButtonReleased")([i,e,0]),t.touched&&!t.pressed?this.toStreamerMessagesProvider.toStreamerHandlers.get("XRButtonPressed")([i,3,s.touched?1:0]):!t.touched&&s.touched&&this.toStreamerMessagesProvider.toStreamerHandlers.get("XRButtonReleased")([i,3,0])}for(let e=0;e<d.axes.length;e++)this.toStreamerMessagesProvider.toStreamerHandlers.get("XRAnalog")([i,e,d.axes[e]]);this.controllers[i].prevState=d}}}class St{constructor(e){this.xrSession=null,this.webRtcController=e,this.xrControllers=[],this.xrGamepadController=new mt(this.webRtcController.streamMessageController),this.onSessionEnded=new EventTarget,this.onSessionStarted=new EventTarget,this.onFrame=new EventTarget}xrClicked(){this.xrSession?this.xrSession.end():navigator.xr.requestSession("immersive-vr").then((e=>{this.onXrSessionStarted(e)}))}onXrSessionEnded(){i.Log(i.GetStackTrace(),"XR Session ended"),this.xrSession=null,this.onSessionEnded.dispatchEvent(new Event("xrSessionEnded"))}onXrSessionStarted(e){i.Log(i.GetStackTrace(),"XR Session started"),this.xrSession=e,this.xrSession.addEventListener("end",(()=>{this.onXrSessionEnded()}));const t=document.createElement("canvas");this.gl=t.getContext("webgl2",{xrCompatible:!0}),this.xrSession.updateRenderState({baseLayer:new XRWebGLLayer(this.xrSession,this.gl)});const s=this.gl.createShader(this.gl.VERTEX_SHADER);this.gl.shaderSource(s,gt.vertexShader()),this.gl.compileShader(s);const n=this.gl.createShader(this.gl.FRAGMENT_SHADER);this.gl.shaderSource(n,gt.fragmentShader()),this.gl.compileShader(n);const r=this.gl.createProgram();this.gl.attachShader(r,s),this.gl.attachShader(r,n),this.gl.linkProgram(r),this.gl.useProgram(r),this.positionLocation=this.gl.getAttribLocation(r,"a_position"),this.texcoordLocation=this.gl.getAttribLocation(r,"a_texCoord"),this.positionBuffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.positionBuffer),this.gl.enableVertexAttribArray(this.positionLocation);const o=this.gl.createTexture();this.gl.bindTexture(this.gl.TEXTURE_2D,o),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST),this.texcoordBuffer=this.gl.createBuffer(),this.resolutionLocation=this.gl.getUniformLocation(r,"u_resolution"),this.offsetLocation=this.gl.getUniformLocation(r,"u_offset"),e.requestReferenceSpace("local").then((e=>{this.xrRefSpace=e,this.xrSession.requestAnimationFrame(((e,t)=>this.onXrFrame(e,t)))})),this.onSessionStarted.dispatchEvent(new Event("xrSessionStarted"))}onXrFrame(e,t){const s=t.getViewerPose(this.xrRefSpace);if(s){const e=s.transform.matrix,t=[];for(let s=0;s<16;s++)t[s]=new Float32Array([e[s]])[0];this.webRtcController.streamMessageController.toStreamerHandlers.get("XRHMDTransform")([t[0],t[4],t[8],t[12],t[1],t[5],t[9],t[13],t[2],t[6],t[10],t[14],t[3],t[7],t[11],t[15]]);const n=this.xrSession.renderState.baseLayer;this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,n.framebuffer),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,this.webRtcController.videoPlayer.getVideoElement()),this.render(this.webRtcController.videoPlayer.getVideoElement())}this.webRtcController.config.isFlagEnabled(re.XRControllerInput)&&this.xrSession.inputSources.forEach(((e,s,n)=>{this.xrGamepadController.updateStatus(e,t,this.xrRefSpace)}),this),this.xrSession.requestAnimationFrame(((e,t)=>this.onXrFrame(e,t))),this.onFrame.dispatchEvent(new se({time:e,frame:t}))}render(e){if(!this.gl)return;const t=this.xrSession.renderState.baseLayer;let s,n,r,i,o;this.gl.viewport(0,0,t.framebufferWidth,t.framebufferHeight),this.gl.uniform4f(this.offsetLocation,1,1,0,0),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array([0,0,e.videoWidth,0,0,e.videoHeight,0,e.videoHeight,e.videoWidth,0,e.videoWidth,e.videoHeight]),this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.texcoordBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.positionBuffer),s=2,n=this.gl.FLOAT,r=!1,i=0,o=0,this.gl.vertexAttribPointer(this.positionLocation,s,n,r,i,o),this.gl.enableVertexAttribArray(this.texcoordLocation),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.texcoordBuffer),s=2,n=this.gl.FLOAT,r=!1,i=0,o=0,this.gl.vertexAttribPointer(this.texcoordLocation,s,n,r,i,o),this.gl.uniform2f(this.resolutionLocation,e.videoWidth,e.videoHeight);const a=this.gl.TRIANGLES;o=0,this.gl.drawArrays(a,o,6)}static isSessionSupported(e){return navigator.xr?navigator.xr.isSessionSupported(e):new Promise((()=>!1))}}class pt{constructor(e){this.editTextButton=null,this.hiddenInput=null,"ontouchstart"in document.documentElement&&this.createOnScreenKeyboardHelpers(e)}unquantizeAndDenormalizeUnsigned(e,t){return null}createOnScreenKeyboardHelpers(e){this.hiddenInput||(this.hiddenInput=document.createElement("input"),this.hiddenInput.id="hiddenInput",this.hiddenInput.maxLength=0,e.appendChild(this.hiddenInput)),this.editTextButton||(this.editTextButton=document.createElement("button"),this.editTextButton.id="editTextButton",this.editTextButton.innerHTML="edit text",e.appendChild(this.editTextButton),this.editTextButton.classList.add("hiddenState"),this.editTextButton.addEventListener("touchend",(e=>{this.hiddenInput.focus(),e.preventDefault()})))}showOnScreenKeyboard(e){if(e.showOnScreenKeyboard){this.editTextButton.classList.remove("hiddenState");const t=this.unquantizeAndDenormalizeUnsigned(e.x,e.y);this.editTextButton.style.top=t.y.toString()+"px",this.editTextButton.style.left=(t.x-40).toString()+"px"}else this.editTextButton.classList.add("hiddenState"),this.hiddenInput.blur()}}class vt{constructor(e,t){this._showActionOrErrorOnDisconnect=!0,this.allowConsoleCommands=!1,this.config=e,(null==t?void 0:t.videoElementParent)&&(this._videoElementParent=t.videoElementParent),this._eventEmitter=new ne,this.configureSettings(),this.setWebRtcPlayerController(new ht(this.config,this)),this.onScreenKeyboardHelper=new pt(this.videoElementParent),this.onScreenKeyboardHelper.unquantizeAndDenormalizeUnsigned=(e,t)=>this._webRtcController.requestUnquantizedAndDenormalizeUnsigned(e,t),this._activateOnScreenKeyboard=e=>this.onScreenKeyboardHelper.showOnScreenKeyboard(e),this._webXrController=new St(this._webRtcController)}get videoElementParent(){return this._videoElementParent||(this._videoElementParent=document.createElement("div"),this._videoElementParent.id="videoElementParent"),this._videoElementParent}configureSettings(){this.config._addOnSettingChangedListener(re.IsQualityController,(e=>{!0!==e||this._webRtcController.isQualityController||this._webRtcController.sendRequestQualityControlOwnership()})),this.config._addOnSettingChangedListener(re.AFKDetection,(e=>{this._webRtcController.setAfkEnabled(e)})),this.config._addOnSettingChangedListener(re.MatchViewportResolution,(()=>{this._webRtcController.videoPlayer.updateVideoStreamSize()})),this.config._addOnSettingChangedListener(re.HoveringMouseMode,(e=>{this.config.setFlagLabel(re.HoveringMouseMode,`Control Scheme: ${e?"Hovering":"Locked"} Mouse`),this._webRtcController.setMouseInputEnabled(this.config.isFlagEnabled(re.MouseInput))})),this.config._addOnSettingChangedListener(re.KeyboardInput,(e=>{this._webRtcController.setKeyboardInputEnabled(e)})),this.config._addOnSettingChangedListener(re.MouseInput,(e=>{this._webRtcController.setMouseInputEnabled(e)})),this.config._addOnSettingChangedListener(re.TouchInput,(e=>{this._webRtcController.setTouchInputEnabled(e)})),this.config._addOnSettingChangedListener(re.GamepadInput,(e=>{this._webRtcController.setGamePadInputEnabled(e)})),this.config._addOnNumericSettingChangedListener(oe.MinQP,(e=>{i.Log(i.GetStackTrace(),"--------  Sending MinQP  --------",7),this._webRtcController.sendEncoderMinQP(e),i.Log(i.GetStackTrace(),"-------------------------------------------",7)})),this.config._addOnNumericSettingChangedListener(oe.MaxQP,(e=>{i.Log(i.GetStackTrace(),"--------  Sending encoder settings  --------",7),this._webRtcController.sendEncoderMaxQP(e),i.Log(i.GetStackTrace(),"-------------------------------------------",7)})),this.config._addOnNumericSettingChangedListener(oe.WebRTCMinBitrate,(e=>{i.Log(i.GetStackTrace(),"--------  Sending web rtc settings  --------",7),this._webRtcController.sendWebRTCMinBitrate(1e3*e),i.Log(i.GetStackTrace(),"-------------------------------------------",7)})),this.config._addOnNumericSettingChangedListener(oe.WebRTCMaxBitrate,(e=>{i.Log(i.GetStackTrace(),"--------  Sending web rtc settings  --------",7),this._webRtcController.sendWebRTCMaxBitrate(1e3*e),i.Log(i.GetStackTrace(),"-------------------------------------------",7)})),this.config._addOnNumericSettingChangedListener(oe.WebRTCFPS,(e=>{i.Log(i.GetStackTrace(),"--------  Sending web rtc settings  --------",7),this._webRtcController.sendWebRTCFps(e),i.Log(i.GetStackTrace(),"-------------------------------------------",7)})),this.config._addOnOptionSettingChangedListener(ce.PreferredCodec,(e=>{this._webRtcController&&this._webRtcController.setPreferredCodec(e)})),this.config._registerOnChangeEvents(this._eventEmitter)}_activateOnScreenKeyboard(e){throw new Error("Method not implemented.")}_onInputControlOwnership(e){this._inputController=e}setWebRtcPlayerController(e){this._webRtcController=e,this._webRtcController.setPreferredCodec(this.config.getSettingOption(ce.PreferredCodec).selected),this._webRtcController.resizePlayerStyle(),this.checkForAutoConnect()}connect(){this._webRtcController.connectToSignallingServer()}reconnect(){this._webRtcController.restartStreamAutomatically()}disconnect(){this._webRtcController.close()}play(){this._onStreamLoading(),this._webRtcController.playStream()}checkForAutoConnect(){this.config.isFlagEnabled(re.AutoConnect)&&(this._onWebRtcAutoConnect(),this._webRtcController.connectToSignallingServer())}_onWebRtcAutoConnect(){this._eventEmitter.dispatchEvent(new O),this._showActionOrErrorOnDisconnect=!0}_onWebRtcSdp(){this._eventEmitter.dispatchEvent(new D)}_onStreamLoading(){this._eventEmitter.dispatchEvent(new V)}_onDisconnect(e){""!=this._webRtcController.getDisconnectMessageOverride()&&void 0!==this._webRtcController.getDisconnectMessageOverride()&&null!=this._webRtcController.getDisconnectMessageOverride()&&(e=this._webRtcController.getDisconnectMessageOverride(),this._webRtcController.setDisconnectMessageOverride("")),this._eventEmitter.dispatchEvent(new z({eventString:e,showActionOrErrorOnDisconnect:this._showActionOrErrorOnDisconnect})),0==this._showActionOrErrorOnDisconnect&&(this._showActionOrErrorOnDisconnect=!0)}_onWebRtcConnecting(){this._eventEmitter.dispatchEvent(new U)}_onWebRtcConnected(){this._eventEmitter.dispatchEvent(new I)}_onWebRtcFailed(){this._eventEmitter.dispatchEvent(new G)}_onVideoInitialized(){this._eventEmitter.dispatchEvent(new H),this._videoStartTime=Date.now()}_onLatencyTestResult(e){this._eventEmitter.dispatchEvent(new Y({latencyTimings:e}))}_onVideoStats(e){this._videoStartTime&&void 0!==this._videoStartTime||(this._videoStartTime=Date.now()),e.handleSessionStatistics(this._videoStartTime,this._inputController,this._webRtcController.videoAvgQp),this._eventEmitter.dispatchEvent(new X({aggregatedStats:e}))}_onVideoEncoderAvgQP(e){this._eventEmitter.dispatchEvent(new F({avgQP:e}))}_onInitialSettings(e){var t;this._eventEmitter.dispatchEvent(new J({settings:e})),e.PixelStreamingSettings&&(this.allowConsoleCommands=null!==(t=e.PixelStreamingSettings.AllowPixelStreamingCommands)&&void 0!==t&&t,!1===this.allowConsoleCommands&&i.Info(i.GetStackTrace(),"-AllowPixelStreamingCommands=false, sending arbitrary console commands from browser to UE is disabled."));const s=this.config.useUrlParams,n=new URLSearchParams(window.location.search);e.EncoderSettings&&(this.config.setNumericSetting(oe.MinQP,s&&n.has(oe.MinQP)?Number.parseInt(n.get(oe.MinQP)):e.EncoderSettings.MinQP),this.config.setNumericSetting(oe.MaxQP,s&&n.has(oe.MaxQP)?Number.parseInt(n.get(oe.MaxQP)):e.EncoderSettings.MaxQP)),e.WebRTCSettings&&(this.config.setNumericSetting(oe.WebRTCMinBitrate,s&&n.has(oe.WebRTCMinBitrate)?Number.parseInt(n.get(oe.WebRTCMinBitrate))/1e3:e.WebRTCSettings.MinBitrate/1e3),this.config.setNumericSetting(oe.WebRTCMaxBitrate,s&&n.has(oe.WebRTCMaxBitrate)?Number.parseInt(n.get(oe.WebRTCMaxBitrate))/1e3:e.WebRTCSettings.MaxBitrate/1e3),this.config.setNumericSetting(oe.WebRTCFPS,s&&n.has(oe.WebRTCFPS)?Number.parseInt(n.get(oe.WebRTCFPS)):e.WebRTCSettings.FPS))}_onQualityControlOwnership(e){this.config.setFlagEnabled(re.IsQualityController,e)}requestLatencyTest(){return!!this._webRtcController.videoPlayer.isVideoReady()&&(this._webRtcController.sendLatencyTest(),!0)}requestShowFps(){return!!this._webRtcController.videoPlayer.isVideoReady()&&(this._webRtcController.sendShowFps(),!0)}requestIframe(){return!!this._webRtcController.videoPlayer.isVideoReady()&&(this._webRtcController.sendIframeRequest(),!0)}emitUIInteraction(e){return!!this._webRtcController.videoPlayer.isVideoReady()&&(this._webRtcController.emitUIInteraction(e),!0)}emitCommand(e){return!(!this._webRtcController.videoPlayer.isVideoReady()||!this.allowConsoleCommands&&"ConsoleCommand"in e||(this._webRtcController.emitCommand(e),0))}emitConsoleCommand(e){return!(!this.allowConsoleCommands||!this._webRtcController.videoPlayer.isVideoReady()||(this._webRtcController.emitConsoleCommand(e),0))}addResponseEventListener(e,t){this._webRtcController.responseController.addResponseEventListener(e,t)}removeResponseEventListener(e){this._webRtcController.responseController.removeResponseEventListener(e)}dispatchEvent(e){return this._eventEmitter.dispatchEvent(e)}addEventListener(e,t){this._eventEmitter.addEventListener(e,t)}removeEventListener(e,t){this._eventEmitter.removeEventListener(e,t)}toggleXR(){this.webXrController.xrClicked()}setSignallingUrlBuilder(e){this._webRtcController.signallingUrlBuilder=e}get webSocketController(){return this._webRtcController.webSocketController}get webXrController(){return this._webXrController}}var Ct=r.Dz,ft=r.g$,Tt=r.Lt,Et=r.Q9,yt=r.qf,bt=r.hV,Mt=r.z$,wt=r.J0,Pt=r.De,Rt=r.$C,kt=r.al,Lt=r._W,xt=r.tz,At=r.Nu,Ft=r.zg,Dt=r.vp,Ot=r.vU,Ut=r.wF,It=r.rv,Gt=r.Nh,zt=r.ss,Bt=r.qW,_t=r.QL,Wt=r.cf,Ht=r.eM,Vt=r.Yd,Nt=r.iM,Kt=r.qy,Qt=r.ce,$t=r.sK,qt=r.Ok,Xt=r.q5,jt=r.g,Yt=r.xl,Jt=r.I,Zt=r.bx,es=r.Ib,ts=r.Az,ss=r.Iw,ns=r.qY,rs=r.db,is=r.mR,os=r.Tn,as=r.rV,ls=r.gh,ds=r.i5,cs=r.x_,hs=r.Am,gs=r.eR,us=r.r8,ms=r.u3,Ss=r.vd,ps=r.iV,vs=r.jZ,Cs=r.SW,fs=r.ZH,Ts=r.Ni,Es=r.lh,ys=r.bq,bs=r.$f,Ms=r.eu,ws=r.Ax,Ps=r.Mc;

/***/ }),

/***/ "./node_modules/@epicgames-ps/lib-pixelstreamingfrontend-ui-ue5.2/dist/lib-pixelstreamingfrontend-ui.esm.js":
/*!******************************************************************************************************************!*\
  !*** ./node_modules/@epicgames-ps/lib-pixelstreamingfrontend-ui-ue5.2/dist/lib-pixelstreamingfrontend-ui.esm.js ***!
  \******************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AFKOverlay": () => (/* binding */ q),
/* harmony export */   "ActionOverlay": () => (/* binding */ V),
/* harmony export */   "Application": () => (/* binding */ G),
/* harmony export */   "ConfigUI": () => (/* binding */ J),
/* harmony export */   "ConnectOverlay": () => (/* binding */ Y),
/* harmony export */   "DisconnectOverlay": () => (/* binding */ K),
/* harmony export */   "ErrorOverlay": () => (/* binding */ $),
/* harmony export */   "InfoOverlay": () => (/* binding */ tt),
/* harmony export */   "OverlayBase": () => (/* binding */ et),
/* harmony export */   "PixelStreamingApplicationStyle": () => (/* binding */ st),
/* harmony export */   "PlayOverlay": () => (/* binding */ it),
/* harmony export */   "SettingUIBase": () => (/* binding */ nt),
/* harmony export */   "SettingUIFlag": () => (/* binding */ ot),
/* harmony export */   "SettingUINumber": () => (/* binding */ lt),
/* harmony export */   "SettingUIOption": () => (/* binding */ at),
/* harmony export */   "SettingUIText": () => (/* binding */ rt),
/* harmony export */   "TextOverlay": () => (/* binding */ ct),
/* harmony export */   "UIElementCreationMode": () => (/* binding */ dt)
/* harmony export */ });
/* harmony import */ var _epicgames_ps_lib_pixelstreamingfrontend_ue5_2__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @epicgames-ps/lib-pixelstreamingfrontend-ue5.2 */ "./node_modules/@epicgames-ps/lib-pixelstreamingfrontend-ue5.2/dist/lib-pixelstreamingfrontend.esm.js");
/* harmony import */ var jss__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jss */ "./node_modules/jss/dist/jss.esm.js");
/* harmony import */ var jss_plugin_global__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jss-plugin-global */ "./node_modules/jss-plugin-global/dist/jss-plugin-global.esm.js");
/* harmony import */ var jss_plugin_camel_case__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jss-plugin-camel-case */ "./node_modules/jss-plugin-camel-case/dist/jss-plugin-camel-case.esm.js");
var n={d:(t,e)=>{for(var s in e)n.o(e,s)&&!n.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},o={};n.d(o,{ym:()=>b,EW:()=>h,Mx:()=>Q,L3:()=>H,rl:()=>m,NR:()=>u,f1:()=>v,IY:()=>E,RZ:()=>d,XY:()=>j,Fk:()=>g,Zh:()=>N,ek:()=>R,MG:()=>z,gE:()=>U,tW:()=>B,wr:()=>p,QT:()=>c});const l=(a={Flags:()=>_epicgames_ps_lib_pixelstreamingfrontend_ue5_2__WEBPACK_IMPORTED_MODULE_0__.Flags,Logger:()=>_epicgames_ps_lib_pixelstreamingfrontend_ue5_2__WEBPACK_IMPORTED_MODULE_0__.Logger,NumericParameters:()=>_epicgames_ps_lib_pixelstreamingfrontend_ue5_2__WEBPACK_IMPORTED_MODULE_0__.NumericParameters,OptionParameters:()=>_epicgames_ps_lib_pixelstreamingfrontend_ue5_2__WEBPACK_IMPORTED_MODULE_0__.OptionParameters,SettingFlag:()=>_epicgames_ps_lib_pixelstreamingfrontend_ue5_2__WEBPACK_IMPORTED_MODULE_0__.SettingFlag,TextParameters:()=>_epicgames_ps_lib_pixelstreamingfrontend_ue5_2__WEBPACK_IMPORTED_MODULE_0__.TextParameters,WebXRController:()=>_epicgames_ps_lib_pixelstreamingfrontend_ue5_2__WEBPACK_IMPORTED_MODULE_0__.WebXRController},r={},n.d(r,a),r);var a,r,c;class d{constructor(t,e,s){this.rootDiv=t,this.rootElement=e,this.textElement=s,this.rootElement.appendChild(this.textElement),this.hide(),this.rootDiv.appendChild(this.rootElement)}show(){this.rootElement.classList.remove("hiddenState")}hide(){this.rootElement.classList.add("hiddenState")}}class h extends d{constructor(t,e,s){super(t,e,s),this.onActionCallback=()=>{l.Logger.Info(l.Logger.GetStackTrace(),"Did you forget to set the onAction callback in your overlay?")}}update(t){null==t&&null==t||(this.textElement.innerHTML=t)}onAction(t){this.onActionCallback=t}activate(){this.onActionCallback()}}class m extends h{static createRootElement(){const t=document.createElement("div");return t.id="connectOverlay",t.className="clickableState",t}static createContentElement(){const t=document.createElement("div");return t.id="connectButton",t.innerHTML="Click to start",t}constructor(t){super(t,m.createRootElement(),m.createContentElement()),this.rootElement.addEventListener("click",(()=>{this.activate()}))}}class u extends h{static createRootElement(){const t=document.createElement("div");return t.id="disconnectOverlay",t.className="clickableState",t}static createContentElement(){const t=document.createElement("div");return t.id="disconnectButton",t.innerHTML="Click To Restart",t}constructor(t){super(t,u.createRootElement(),u.createContentElement()),this.rootElement.addEventListener("click",(()=>{this.activate()}))}}class g extends h{static createRootElement(){const t=document.createElement("div");return t.id="playOverlay",t.className="clickableState",t}static createContentElement(){const t=document.createElement("img");return t.id="playButton",t.src="data:image/png;base64,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",t.alt="Start Streaming",t}constructor(t){super(t,g.createRootElement(),g.createContentElement()),this.rootElement.addEventListener("click",(()=>{this.activate()}))}}class p extends d{constructor(t,e,s){super(t,e,s)}update(t){null==t&&null==t||(this.textElement.innerHTML=t)}}class E extends p{static createRootElement(){const t=document.createElement("div");return t.id="infoOverlay",t.className="textDisplayState",t}static createContentElement(){const t=document.createElement("div");return t.id="messageOverlayInner",t}constructor(t){super(t,E.createRootElement(),E.createContentElement())}}class v extends p{static createRootElement(){const t=document.createElement("div");return t.id="errorOverlay",t.className="textDisplayState",t}static createContentElement(){const t=document.createElement("div");return t.id="errorOverlayInner",t}constructor(t){super(t,v.createRootElement(),v.createContentElement())}}class b extends h{static createRootElement(){const t=document.createElement("div");return t.id="afkOverlay",t.className="clickableState",t}static createContentElement(){const t=document.createElement("div");return t.id="afkOverlayInner",t.innerHTML='<center>No activity detected<br>Disconnecting in <span id="afkCountDownNumber"></span> seconds<br>Click to continue<br></center>',t}constructor(t){super(t,b.createRootElement(),b.createContentElement()),this.rootElement.addEventListener("click",(()=>{this.activate()}))}updateCountdown(t){this.textElement.innerHTML=`<center>No activity detected<br>Disconnecting in <span id="afkCountDownNumber">${t}</span> seconds<br>Click to continue<br></center>`}}class f{get rootElement(){return this._rootElement}set rootElement(t){t.onclick=()=>this.toggleFullscreen(),this._rootElement=t}constructor(){this.isFullscreen=!1,document.addEventListener("webkitfullscreenchange",(()=>this.onFullscreenChange()),!1),document.addEventListener("mozfullscreenchange",(()=>this.onFullscreenChange()),!1),document.addEventListener("fullscreenchange",(()=>this.onFullscreenChange()),!1),document.addEventListener("MSFullscreenChange",(()=>this.onFullscreenChange()),!1)}toggleFullscreen(){if(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen();else{const t=this.fullscreenElement;if(!t)return;t.requestFullscreen?t.requestFullscreen():t.mozRequestFullscreen?t.mozRequestFullscreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.webkitEnterFullscreen&&t.webkitEnterFullscreen()}this.onFullscreenChange()}onFullscreenChange(){this.isFullscreen=document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement&&null!==document.msFullscreenElement||document.fullscreenElement&&null!==document.fullscreenElement}}class y extends f{constructor(t){super(),this.rootElement=t}}class x extends f{constructor(){super();const t=document.createElement("button");t.type="button",t.classList.add("UiTool"),t.id="fullscreen-btn",t.appendChild(this.maximizeIcon),t.appendChild(this.minimizeIcon),t.appendChild(this.tooltipText),this.rootElement=t}get tooltipText(){return this._tooltipText||(this._tooltipText=document.createElement("span"),this._tooltipText.classList.add("tooltiptext"),this._tooltipText.innerHTML="Fullscreen"),this._tooltipText}get maximizeIcon(){if(!this._maximizeIcon){this._maximizeIcon=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._maximizeIcon.setAttributeNS(null,"id","maximizeIcon"),this._maximizeIcon.setAttributeNS(null,"x","0px"),this._maximizeIcon.setAttributeNS(null,"y","0px"),this._maximizeIcon.setAttributeNS(null,"viewBox","0 0 384.97 384.97");const t=document.createElementNS("http://www.w3.org/2000/svg","g");t.classList.add("svgIcon"),this._maximizeIcon.appendChild(t);const e=document.createElementNS("http://www.w3.org/2000/svg","path");e.setAttributeNS(null,"d","M384.97,12.03c0-6.713-5.317-12.03-12.03-12.03H264.847c-6.833,0-11.922,5.39-11.934,12.223c0,6.821,5.101,11.838,11.934,11.838h96.062l-0.193,96.519c0,6.833,5.197,12.03,12.03,12.03c6.833-0.012,12.03-5.197,12.03-12.03l0.193-108.369c0-0.036-0.012-0.06-0.012-0.084C384.958,12.09,384.97,12.066,384.97,12.03z");const s=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttributeNS(null,"d","M120.496,0H12.403c-0.036,0-0.06,0.012-0.096,0.012C12.283,0.012,12.247,0,12.223,0C5.51,0,0.192,5.317,0.192,12.03L0,120.399c0,6.833,5.39,11.934,12.223,11.934c6.821,0,11.838-5.101,11.838-11.934l0.192-96.339h96.242c6.833,0,12.03-5.197,12.03-12.03C132.514,5.197,127.317,0,120.496,0z");const i=document.createElementNS("http://www.w3.org/2000/svg","path");i.setAttributeNS(null,"d","M120.123,360.909H24.061v-96.242c0-6.833-5.197-12.03-12.03-12.03S0,257.833,0,264.667v108.092c0,0.036,0.012,0.06,0.012,0.084c0,0.036-0.012,0.06-0.012,0.096c0,6.713,5.317,12.03,12.03,12.03h108.092c6.833,0,11.922-5.39,11.934-12.223C132.057,365.926,126.956,360.909,120.123,360.909z");const n=document.createElementNS("http://www.w3.org/2000/svg","path");n.setAttributeNS(null,"d","M372.747,252.913c-6.833,0-11.85,5.101-11.838,11.934v96.062h-96.242c-6.833,0-12.03,5.197-12.03,12.03s5.197,12.03,12.03,12.03h108.092c0.036,0,0.06-0.012,0.084-0.012c0.036-0.012,0.06,0.012,0.096,0.012c6.713,0,12.03-5.317,12.03-12.03V264.847C384.97,258.014,379.58,252.913,372.747,252.913z"),t.appendChild(e),t.appendChild(s),t.appendChild(i),t.appendChild(n)}return this._maximizeIcon}get minimizeIcon(){if(!this._minimizeIcon){this._minimizeIcon=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._minimizeIcon.setAttributeNS(null,"id","minimizeIcon"),this._minimizeIcon.setAttributeNS(null,"x","0px"),this._minimizeIcon.setAttributeNS(null,"y","0px"),this._minimizeIcon.setAttributeNS(null,"viewBox","0 0 385.331 385.331");const t=document.createElementNS("http://www.w3.org/2000/svg","g");t.classList.add("svgIcon"),this._minimizeIcon.appendChild(t);const e=document.createElementNS("http://www.w3.org/2000/svg","path");e.setAttributeNS(null,"d","M264.943,156.665h108.273c6.833,0,11.934-5.39,11.934-12.211c0-6.833-5.101-11.85-11.934-11.838h-96.242V36.181c0-6.833-5.197-12.03-12.03-12.03s-12.03,5.197-12.03,12.03v108.273c0,0.036,0.012,0.06,0.012,0.084c0,0.036-0.012,0.06-0.012,0.096C252.913,151.347,258.23,156.677,264.943,156.665z");const s=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttributeNS(null,"d","M120.291,24.247c-6.821,0-11.838,5.113-11.838,11.934v96.242H12.03c-6.833,0-12.03,5.197-12.03,12.03c0,6.833,5.197,12.03,12.03,12.03h108.273c0.036,0,0.06-0.012,0.084-0.012c0.036,0,0.06,0.012,0.096,0.012c6.713,0,12.03-5.317,12.03-12.03V36.181C132.514,29.36,127.124,24.259,120.291,24.247z");const i=document.createElementNS("http://www.w3.org/2000/svg","path");i.setAttributeNS(null,"d","M120.387,228.666H12.115c-6.833,0.012-11.934,5.39-11.934,12.223c0,6.833,5.101,11.85,11.934,11.838h96.242v96.423c0,6.833,5.197,12.03,12.03,12.03c6.833,0,12.03-5.197,12.03-12.03V240.877c0-0.036-0.012-0.06-0.012-0.084c0-0.036,0.012-0.06,0.012-0.096C132.418,233.983,127.1,228.666,120.387,228.666z");const n=document.createElementNS("http://www.w3.org/2000/svg","path");n.setAttributeNS(null,"d","M373.3,228.666H265.028c-0.036,0-0.06,0.012-0.084,0.012c-0.036,0-0.06-0.012-0.096-0.012c-6.713,0-12.03,5.317-12.03,12.03v108.273c0,6.833,5.39,11.922,12.223,11.934c6.821,0.012,11.838-5.101,11.838-11.922v-96.242H373.3c6.833,0,12.03-5.197,12.03-12.03S380.134,228.678,373.3,228.666z"),t.appendChild(e),t.appendChild(s),t.appendChild(i),t.appendChild(n)}return this._minimizeIcon}onFullscreenChange(){super.onFullscreenChange();const t=this.minimizeIcon,e=this.maximizeIcon;this.isFullscreen?(t.style.display="inline",t.style.transform="translate(0, 0)",e.style.display="none"):(t.style.display="none",e.style.display="inline",e.style.transform="translate(0, 0)")}}class C{get rootElement(){return this._rootElement||(this._rootElement=document.createElement("button"),this._rootElement.type="button",this._rootElement.classList.add("UiTool"),this._rootElement.id="settingsBtn",this._rootElement.appendChild(this.settingsIcon),this._rootElement.appendChild(this.tooltipText)),this._rootElement}get tooltipText(){return this._tooltipText||(this._tooltipText=document.createElement("span"),this._tooltipText.classList.add("tooltiptext"),this._tooltipText.innerHTML="Settings"),this._tooltipText}get settingsIcon(){if(!this._settingsIcon){this._settingsIcon=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._settingsIcon.setAttributeNS(null,"id","settingsIcon"),this._settingsIcon.setAttributeNS(null,"x","0px"),this._settingsIcon.setAttributeNS(null,"y","0px"),this._settingsIcon.setAttributeNS(null,"viewBox","0 0 478.703 478.703");const t=document.createElementNS("http://www.w3.org/2000/svg","g");t.classList.add("svgIcon"),this._settingsIcon.appendChild(t);const e=document.createElementNS("http://www.w3.org/2000/svg","path");e.setAttributeNS(null,"d","M454.2,189.101l-33.6-5.7c-3.5-11.3-8-22.2-13.5-32.6l19.8-27.7c8.4-11.8,7.1-27.9-3.2-38.1l-29.8-29.8\t\t\tc-5.6-5.6-13-8.7-20.9-8.7c-6.2,0-12.1,1.9-17.1,5.5l-27.8,19.8c-10.8-5.7-22.1-10.4-33.8-13.9l-5.6-33.2\t\t\tc-2.4-14.3-14.7-24.7-29.2-24.7h-42.1c-14.5,0-26.8,10.4-29.2,24.7l-5.8,34c-11.2,3.5-22.1,8.1-32.5,13.7l-27.5-19.8\t\t\tc-5-3.6-11-5.5-17.2-5.5c-7.9,0-15.4,3.1-20.9,8.7l-29.9,29.8c-10.2,10.2-11.6,26.3-3.2,38.1l20,28.1\t\t\tc-5.5,10.5-9.9,21.4-13.3,32.7l-33.2,5.6c-14.3,2.4-24.7,14.7-24.7,29.2v42.1c0,14.5,10.4,26.8,24.7,29.2l34,5.8\t\t\tc3.5,11.2,8.1,22.1,13.7,32.5l-19.7,27.4c-8.4,11.8-7.1,27.9,3.2,38.1l29.8,29.8c5.6,5.6,13,8.7,20.9,8.7c6.2,0,12.1-1.9,17.1-5.5\t\t\tl28.1-20c10.1,5.3,20.7,9.6,31.6,13l5.6,33.6c2.4,14.3,14.7,24.7,29.2,24.7h42.2c14.5,0,26.8-10.4,29.2-24.7l5.7-33.6\t\t\tc11.3-3.5,22.2-8,32.6-13.5l27.7,19.8c5,3.6,11,5.5,17.2,5.5l0,0c7.9,0,15.3-3.1,20.9-8.7l29.8-29.8c10.2-10.2,11.6-26.3,3.2-38.1\t\t\tl-19.8-27.8c5.5-10.5,10.1-21.4,13.5-32.6l33.6-5.6c14.3-2.4,24.7-14.7,24.7-29.2v-42.1\t\t\tC478.9,203.801,468.5,191.501,454.2,189.101z M451.9,260.401c0,1.3-0.9,2.4-2.2,2.6l-42,7c-5.3,0.9-9.5,4.8-10.8,9.9\t\t\tc-3.8,14.7-9.6,28.8-17.4,41.9c-2.7,4.6-2.5,10.3,0.6,14.7l24.7,34.8c0.7,1,0.6,2.5-0.3,3.4l-29.8,29.8c-0.7,0.7-1.4,0.8-1.9,0.8\t\t\tc-0.6,0-1.1-0.2-1.5-0.5l-34.7-24.7c-4.3-3.1-10.1-3.3-14.7-0.6c-13.1,7.8-27.2,13.6-41.9,17.4c-5.2,1.3-9.1,5.6-9.9,10.8l-7.1,42\t\t\tc-0.2,1.3-1.3,2.2-2.6,2.2h-42.1c-1.3,0-2.4-0.9-2.6-2.2l-7-42c-0.9-5.3-4.8-9.5-9.9-10.8c-14.3-3.7-28.1-9.4-41-16.8\t\t\tc-2.1-1.2-4.5-1.8-6.8-1.8c-2.7,0-5.5,0.8-7.8,2.5l-35,24.9c-0.5,0.3-1,0.5-1.5,0.5c-0.4,0-1.2-0.1-1.9-0.8l-29.8-29.8\t\t\tc-0.9-0.9-1-2.3-0.3-3.4l24.6-34.5c3.1-4.4,3.3-10.2,0.6-14.8c-7.8-13-13.8-27.1-17.6-41.8c-1.4-5.1-5.6-9-10.8-9.9l-42.3-7.2\t\t\tc-1.3-0.2-2.2-1.3-2.2-2.6v-42.1c0-1.3,0.9-2.4,2.2-2.6l41.7-7c5.3-0.9,9.6-4.8,10.9-10c3.7-14.7,9.4-28.9,17.1-42\t\t\tc2.7-4.6,2.4-10.3-0.7-14.6l-24.9-35c-0.7-1-0.6-2.5,0.3-3.4l29.8-29.8c0.7-0.7,1.4-0.8,1.9-0.8c0.6,0,1.1,0.2,1.5,0.5l34.5,24.6\t\t\tc4.4,3.1,10.2,3.3,14.8,0.6c13-7.8,27.1-13.8,41.8-17.6c5.1-1.4,9-5.6,9.9-10.8l7.2-42.3c0.2-1.3,1.3-2.2,2.6-2.2h42.1\t\t\tc1.3,0,2.4,0.9,2.6,2.2l7,41.7c0.9,5.3,4.8,9.6,10,10.9c15.1,3.8,29.5,9.7,42.9,17.6c4.6,2.7,10.3,2.5,14.7-0.6l34.5-24.8\t\t\tc0.5-0.3,1-0.5,1.5-0.5c0.4,0,1.2,0.1,1.9,0.8l29.8,29.8c0.9,0.9,1,2.3,0.3,3.4l-24.7,34.7c-3.1,4.3-3.3,10.1-0.6,14.7\t\t\tc7.8,13.1,13.6,27.2,17.4,41.9c1.3,5.2,5.6,9.1,10.8,9.9l42,7.1c1.3,0.2,2.2,1.3,2.2,2.6v42.1H451.9z");const s=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttributeNS(null,"d","M239.4,136.001c-57,0-103.3,46.3-103.3,103.3s46.3,103.3,103.3,103.3s103.3-46.3,103.3-103.3S296.4,136.001,239.4,136.001z M239.4,315.601c-42.1,0-76.3-34.2-76.3-76.3s34.2-76.3,76.3-76.3s76.3,34.2,76.3,76.3S281.5,315.601,239.4,315.601z"),t.appendChild(e),t.appendChild(s)}return this._settingsIcon}}class S{get rootElement(){return this._rootElement||(this._rootElement=document.createElement("button"),this._rootElement.type="button",this._rootElement.classList.add("UiTool"),this._rootElement.id="statsBtn",this._rootElement.appendChild(this.statsIcon),this._rootElement.appendChild(this.tooltipText)),this._rootElement}get tooltipText(){return this._tooltipText||(this._tooltipText=document.createElement("span"),this._tooltipText.classList.add("tooltiptext"),this._tooltipText.innerHTML="Information"),this._tooltipText}get statsIcon(){if(!this._statsIcon){this._statsIcon=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._statsIcon.setAttributeNS(null,"id","statsIcon"),this._statsIcon.setAttributeNS(null,"x","0px"),this._statsIcon.setAttributeNS(null,"y","0px"),this._statsIcon.setAttributeNS(null,"viewBox","0 0 330 330");const t=document.createElementNS("http://www.w3.org/2000/svg","g");t.classList.add("svgIcon"),this._statsIcon.appendChild(t);const e=document.createElementNS("http://www.w3.org/2000/svg","path");e.setAttributeNS(null,"d","M165,0.008C74.019,0.008,0,74.024,0,164.999c0,90.977,74.019,164.992,165,164.992s165-74.015,165-164.992C330,74.024,255.981,0.008,165,0.008z M165,299.992c-74.439,0-135-60.557-135-134.992S90.561,30.008,165,30.008s135,60.557,135,134.991C300,239.436,239.439,299.992,165,299.992z");const s=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttributeNS(null,"d","M165,130.008c-8.284,0-15,6.716-15,15v99.983c0,8.284,6.716,15,15,15s15-6.716,15-15v-99.983C180,136.725,173.284,130.008,165,130.008z");const i=document.createElementNS("http://www.w3.org/2000/svg","path");i.setAttributeNS(null,"d","M165,70.011c-3.95,0-7.811,1.6-10.61,4.39c-2.79,2.79-4.39,6.66-4.39,10.61s1.6,7.81,4.39,10.61c2.79,2.79,6.66,4.39,10.61,4.39s7.81-1.6,10.609-4.39c2.79-2.8,4.391-6.66,4.391-10.61s-1.601-7.82-4.391-10.61C172.81,71.61,168.95,70.011,165,70.011z"),t.appendChild(e),t.appendChild(s),t.appendChild(i)}return this._statsIcon}}class w{get rootElement(){return this._rootElement||(this._rootElement=document.createElement("button"),this._rootElement.type="button",this._rootElement.classList.add("UiTool"),this._rootElement.id="xrBtn",this._rootElement.appendChild(this.xrIcon),this._rootElement.appendChild(this.tooltipText)),this._rootElement}get tooltipText(){return this._tooltipText||(this._tooltipText=document.createElement("span"),this._tooltipText.classList.add("tooltiptext"),this._tooltipText.innerHTML="XR"),this._tooltipText}get xrIcon(){if(!this._xrIcon){this._xrIcon=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._xrIcon.setAttributeNS(null,"id","xrIcon"),this._xrIcon.setAttributeNS(null,"x","0px"),this._xrIcon.setAttributeNS(null,"y","0px"),this._xrIcon.setAttributeNS(null,"viewBox","0 0 100 100");const t=document.createElementNS("http://www.w3.org/2000/svg","g");t.classList.add("svgIcon"),this._xrIcon.appendChild(t);const e=document.createElementNS("http://www.w3.org/2000/svg","path");e.setAttributeNS(null,"d","M29 41c-5 0-9 4-9 9s4 9 9 9 9-4 9-9-4-9-9-9zm0 14c-2.8 0-5-2.2-5-5s2.2-5 5-5 5 2.2 5 5-2.2 5-5 5zm42-14c-5 0-9 4-9 9s4 9 9 9 9-4 9-9-4-9-9-9zm0 14c-2.8 0-5-2.2-5-5s2.2-5 5-5 5 2.2 5 5-2.2 5-5 5zm12-31H17c-6.6 0-12 5.4-12 12v28c0 6.6 5.4 12 12 12h14.5c3.5 0 6.8-1.5 9-4.1l3.5-4c1.5-1.7 3.7-2.7 6-2.7s4.5 1 6 2.7l3.5 4c2.3 2.6 5.6 4.1 9 4.1H83c6.6 0 12-5.4 12-12V36c0-6.6-5.4-12-12-12zm8 40c0 4.4-3.6 8-8 8H68.5c-2.3 0-4.5-1-6-2.7l-3.5-4c-2.3-2.6-5.6-4.1-9-4.1-3.5 0-6.8 1.5-9 4.1l-3.5 4C36 71 33.8 72 31.5 72H17c-4.4 0-8-3.6-8-8V36c0-4.4 3.6-8 8-8h66c4.4 0 8 3.6 8 8v28z"),t.appendChild(e)}return this._xrIcon}}function T(t){return!t||!!t&&t.isEnabled}function _(t){return null==t||t.creationMode===c.CreateDefaultElement}!function(t){t[t.CreateDefaultElement=0]="CreateDefaultElement",t[t.UseCustomElement=1]="UseCustomElement",t[t.Disable=2]="Disable"}(c||(c={}));class L{constructor(t){t&&!_(t.statsButtonType)||(this.statsIcon=new S),t&&!_(t.fullscreenButtonType)||(this.settingsIcon=new C),t&&!_(t.settingsButtonType)||(this.fullscreenIcon=new x),t&&!_(t.xrIconType)||(this.xrIcon=new w)}get rootElement(){return this._rootElement||(this._rootElement=document.createElement("div"),this._rootElement.id="controls",this.fullscreenIcon&&this._rootElement.appendChild(this.fullscreenIcon.rootElement),this.settingsIcon&&this._rootElement.appendChild(this.settingsIcon.rootElement),this.statsIcon&&this._rootElement.appendChild(this.statsIcon.rootElement),this.xrIcon&&l.WebXRController.isSessionSupported("immersive-vr").then((t=>{t&&this._rootElement.appendChild(this.xrIcon.rootElement)}))),this._rootElement}}class I{constructor(t,e){this._label=t,this._buttonText=e}addOnClickListener(t){this.button.addEventListener("click",t)}get button(){return this._button||(this._button=document.createElement("input"),this._button.type="button",this._button.value=this._buttonText,this._button.classList.add("overlay-button"),this._button.classList.add("btn-flat")),this._button}get rootElement(){if(!this._rootElement){this._rootElement=document.createElement("div"),this._rootElement.classList.add("setting");const t=document.createElement("div");t.innerText=this._label,this._rootElement.appendChild(t);const e=document.createElement("label");e.classList.add("btn-overlay"),this._rootElement.appendChild(e),e.appendChild(this.button)}return this._rootElement}}class k{constructor(){this._rootElement=null}get rootElement(){if(!this._rootElement){this._rootElement=document.createElement("div"),this._rootElement.id="settings-panel",this._rootElement.classList.add("panel-wrap");const t=document.createElement("div");t.classList.add("panel"),this._rootElement.appendChild(t);const e=document.createElement("div");e.id="settingsHeading",e.textContent="Settings",t.appendChild(e),t.appendChild(this.settingsCloseButton),t.appendChild(this.settingsContentElement)}return this._rootElement}get settingsContentElement(){return this._settingsContentElement||(this._settingsContentElement=document.createElement("div"),this._settingsContentElement.id="settingsContent"),this._settingsContentElement}get settingsCloseButton(){return this._settingsCloseButton||(this._settingsCloseButton=document.createElement("div"),this._settingsCloseButton.id="settingsClose"),this._settingsCloseButton}show(){this.rootElement.classList.contains("panel-wrap-visible")||this.rootElement.classList.add("panel-wrap-visible")}toggleVisibility(){this.rootElement.classList.toggle("panel-wrap-visible")}hide(){this.rootElement.classList.contains("panel-wrap-visible")&&this.rootElement.classList.remove("panel-wrap-visible")}}class F{get rootElement(){if(!this._rootElement){this._rootElement=document.createElement("section"),this._rootElement.classList.add("settingsContainer");const t=document.createElement("div");t.id="latencyTestHeader",t.classList.add("settings-text"),t.classList.add("settingsHeader"),this._rootElement.appendChild(t);const e=document.createElement("div");e.innerHTML="Latency Test",t.appendChild(e),t.appendChild(this.latencyTestButton);const s=document.createElement("div");s.id="latencyTestContainer",s.classList.add("d-none"),this._rootElement.appendChild(s),s.appendChild(this.latencyTestResultsElement)}return this._rootElement}get latencyTestResultsElement(){return this._latencyTestResultsElement||(this._latencyTestResultsElement=document.createElement("div"),this._latencyTestResultsElement.id="latencyStatsResults",this._latencyTestResultsElement.classList.add("StatsResult")),this._latencyTestResultsElement}get latencyTestButton(){return this._latencyTestButton||(this._latencyTestButton=document.createElement("input"),this._latencyTestButton.type="button",this._latencyTestButton.value="Run Test",this._latencyTestButton.id="btn-start-latency-test",this._latencyTestButton.classList.add("streamTools-button"),this._latencyTestButton.classList.add("btn-flat")),this._latencyTestButton}handleTestResult(t){l.Logger.Log(l.Logger.GetStackTrace(),t.toString(),6);let e="";e+="<div>Net latency RTT (ms): "+t.networkLatency+"</div>",e+="<div>UE Encode (ms): "+t.EncodeMs+"</div>",e+="<div>UE Capture (ms): "+t.CaptureToSendMs+"</div>",e+="<div>Browser send latency (ms): "+t.browserSendLatency+"</div>",e+=t.frameDisplayDeltaTimeMs&&t.browserReceiptTimeMs?"<div>Browser receive latency (ms): "+t.frameDisplayDeltaTimeMs+"</div>":"",e+="<div>Total latency (excluding browser) (ms): "+t.latencyExcludingDecode+"</div>",e+=t.endToEndLatency?"<div>Total latency (ms): "+t.endToEndLatency+"</div>":"",this.latencyTestResultsElement.innerHTML=e}}class P{static formatBytes(t,e){if(0===t)return"0";const s=e<0?0:e,i=Math.floor(Math.log(t)/Math.log(1024));return parseFloat((t/Math.pow(1024,i)).toFixed(s))+" "+["Bytes","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"][i]}}class A{}class O{constructor(){this.statsMap=new Map,this.latencyTest=new F}get rootElement(){if(!this._rootElement){this._rootElement=document.createElement("div"),this._rootElement.id="stats-panel",this._rootElement.classList.add("panel-wrap");const t=document.createElement("div");t.classList.add("panel"),this._rootElement.appendChild(t);const e=document.createElement("div");e.id="statsHeading",e.textContent="Information",t.appendChild(e),t.appendChild(this.statsCloseButton),t.appendChild(this.statsContentElement)}return this._rootElement}get statsContentElement(){if(!this._statsContentElement){this._statsContentElement=document.createElement("div"),this._statsContentElement.id="statsContent";const t=document.createElement("div");t.id="streamToolsStats",t.classList.add("container");const e=document.createElement("div");e.id="ControlStats",e.classList.add("row");const s=document.createElement("section");s.id="statistics",s.classList.add("settingsContainer");const i=document.createElement("div");i.id="statisticsHeader",i.classList.add("settings-text"),i.classList.add("settingsHeader");const n=document.createElement("div");n.innerHTML="Session Stats",this._statsContentElement.appendChild(t),t.appendChild(e),e.appendChild(s),s.appendChild(i),i.appendChild(n),s.appendChild(this.statisticsContainer),e.appendChild(this.latencyTest.rootElement)}return this._statsContentElement}get statisticsContainer(){return this._statisticsContainer||(this._statisticsContainer=document.createElement("div"),this._statisticsContainer.id="statisticsContainer",this._statisticsContainer.classList.add("d-none"),this._statisticsContainer.appendChild(this.statsResult)),this._statisticsContainer}get statsResult(){return this._statsResult||(this._statsResult=document.createElement("div"),this._statsResult.id="statisticsResult",this._statsResult.classList.add("StatsResult")),this._statsResult}get statsCloseButton(){return this._statsCloseButton||(this._statsCloseButton=document.createElement("div"),this._statsCloseButton.id="statsClose"),this._statsCloseButton}show(){this.rootElement.classList.contains("panel-wrap-visible")||this.rootElement.classList.add("panel-wrap-visible")}toggleVisibility(){this.rootElement.classList.toggle("panel-wrap-visible")}hide(){this.rootElement.classList.contains("panel-wrap-visible")&&this.rootElement.classList.remove("panel-wrap-visible")}handleStats(t){var e,s,i,n,o;const a=new Intl.NumberFormat(window.navigator.language,{maximumFractionDigits:0}),r=P.formatBytes(t.inboundVideoStats.bytesReceived,2);this.addOrUpdateStat("InboundDataStat","Received",r);const c=Object.prototype.hasOwnProperty.call(t.inboundVideoStats,"packetsLost")?a.format(t.inboundVideoStats.packetsLost):"Chrome only";this.addOrUpdateStat("PacketsLostStat","Packets Lost",c),t.inboundVideoStats.bitrate&&this.addOrUpdateStat("VideoBitrateStat","Video Bitrate (kbps)",t.inboundVideoStats.bitrate.toString()),t.inboundAudioStats.bitrate&&this.addOrUpdateStat("AudioBitrateStat","Audio Bitrate (kbps)",t.inboundAudioStats.bitrate.toString());const d=Object.prototype.hasOwnProperty.call(t.inboundVideoStats,"frameWidth")&&t.inboundVideoStats.frameWidth&&Object.prototype.hasOwnProperty.call(t.inboundVideoStats,"frameHeight")&&t.inboundVideoStats.frameHeight?t.inboundVideoStats.frameWidth+"x"+t.inboundVideoStats.frameHeight:"Chrome only";this.addOrUpdateStat("VideoResStat","Video resolution",d);const h=Object.prototype.hasOwnProperty.call(t.inboundVideoStats,"framesDecoded")?a.format(t.inboundVideoStats.framesDecoded):"Chrome only";this.addOrUpdateStat("FramesDecodedStat","Frames Decoded",h),t.inboundVideoStats.framesPerSecond&&this.addOrUpdateStat("FramerateStat","Framerate",t.inboundVideoStats.framesPerSecond.toString()),this.addOrUpdateStat("FramesDroppedStat","Frames dropped",null===(e=t.inboundVideoStats.framesDropped)||void 0===e?void 0:e.toString()),t.inboundVideoStats.codecId&&this.addOrUpdateStat("VideoCodecStat","Video codec",null!==(i=null===(s=t.codecs.get(t.inboundVideoStats.codecId))||void 0===s?void 0:s.split(" ")[0])&&void 0!==i?i:""),t.inboundAudioStats.codecId&&this.addOrUpdateStat("AudioCodecStat","Audio codec",null!==(o=null===(n=t.codecs.get(t.inboundAudioStats.codecId))||void 0===n?void 0:n.split(" ")[0])&&void 0!==o?o:"");const m=Object.prototype.hasOwnProperty.call(t.candidatePair,"currentRoundTripTime")&&t.isNumber(t.candidatePair.currentRoundTripTime)?a.format(1e3*t.candidatePair.currentRoundTripTime):"Can't calculate";this.addOrUpdateStat("RTTStat","Net RTT (ms)",m),this.addOrUpdateStat("DurationStat","Duration",t.sessionStats.runTime),this.addOrUpdateStat("ControlsInputStat","Controls stream input",t.sessionStats.controlsStreamInput),this.addOrUpdateStat("QPStat","Video quantization parameter",t.sessionStats.videoEncoderAvgQP.toString()),l.Logger.Log(l.Logger.GetStackTrace(),`--------- Stats ---------\n ${t}\n------------------------`,6)}addOrUpdateStat(t,e,s){const i=`${e}: ${s}`;if(this.statsMap.has(t)){const e=this.statsMap.get(t);void 0!==e&&(e.element.innerHTML=i)}else{const n=new A;n.id=t,n.stat=s,n.title=e,n.element=document.createElement("div"),n.element.innerHTML=i,this.statsResult.appendChild(n.element),this.statsMap.set(t,n)}}}class M{constructor(){this.videoEncoderAvgQP=-1,this.statsText="",this.color="",this.orangeQP=26,this.redQP=35}get rootElement(){return this._rootElement||(this._rootElement=document.createElement("div"),this._rootElement.id="connection",this._rootElement.classList.add("UiTool"),this._rootElement.appendChild(this.qualityStatus),this._rootElement.appendChild(this.qualityText),this.updateQpTooltip(-1)),this._rootElement}get qualityText(){return this._qualityText||(this._qualityText=document.createElement("span"),this._qualityText.id="qualityText",this._qualityText.classList.add("tooltiptext")),this._qualityText}get qualityStatus(){return this._qualityStatus||(this._qualityStatus=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._qualityStatus.setAttributeNS(null,"id","connectionStrength"),this._qualityStatus.setAttributeNS(null,"x","0px"),this._qualityStatus.setAttributeNS(null,"y","0px"),this._qualityStatus.setAttributeNS(null,"viewBox","0 0 494.45 494.45"),this.qualityStatus.appendChild(this.dot),this.qualityStatus.appendChild(this.middle),this.qualityStatus.appendChild(this.outer),this.qualityStatus.appendChild(this.inner)),this._qualityStatus}get dot(){return this._dot||(this._dot=document.createElementNS("http://www.w3.org/2000/svg","circle"),this._dot.setAttributeNS(null,"id","dot"),this._dot.setAttributeNS(null,"cx","247.125"),this._dot.setAttributeNS(null,"cy","398.925"),this._dot.setAttributeNS(null,"r","35.3")),this._dot}get outer(){return this._outer||(this._outer=document.createElementNS("http://www.w3.org/2000/svg","path"),this._outer.setAttributeNS(null,"id","outer"),this._outer.setAttributeNS(null,"d","M467.925,204.625c-6.8,0-13.5-2.6-18.7-7.8c-111.5-111.4-292.7-111.4-404.1,0c-10.3,10.3-27.1,10.3-37.4,0s-10.3-27.1,0-37.4c64-64,149-99.2,239.5-99.2s175.5,35.2,239.5,99.2c10.3,10.3,10.3,27.1,0,37.4C481.425,202.025,474.625,204.625,467.925,204.625z")),this._outer}get middle(){return this._middle||(this._middle=document.createElementNS("http://www.w3.org/2000/svg","path"),this._middle.setAttributeNS(null,"id","middle"),this._middle.setAttributeNS(null,"d","M395.225,277.325c-6.8,0-13.5-2.6-18.7-7.8c-71.4-71.3-187.4-71.3-258.8,0c-10.3,10.3-27.1,10.3-37.4,0s-10.3-27.1,0-37.4c92-92,241.6-92,333.6,0c10.3,10.3,10.3,27.1,0,37.4C408.725,274.725,401.925,277.325,395.225,277.325z")),this._middle}get inner(){return this._inner||(this._inner=document.createElementNS("http://www.w3.org/2000/svg","path"),this._inner.setAttributeNS(null,"id","inner"),this._inner.setAttributeNS(null,"d","M323.625,348.825c-6.8,0-13.5-2.6-18.7-7.8c-15.4-15.4-36-23.9-57.8-23.9s-42.4,8.5-57.8,23.9c-10.3,10.3-27.1,10.3-37.4,0c-10.3-10.3-10.3-27.1,0-37.4c25.4-25.4,59.2-39.4,95.2-39.4s69.8,14,95.2,39.5c10.3,10.3,10.3,27.1,0,37.4C337.225,346.225,330.425,348.825,323.625,348.825z")),this._inner}blinkVideoQualityStatus(t){let e=t,s=1;const i=setInterval((()=>{s-=.1,this.qualityText.style.opacity=String(Math.abs(2*(s-.5))),s<=.1&&(0==--e?clearInterval(i):s=1)}),100/t)}updateQpTooltip(t){this.videoEncoderAvgQP=t,t>this.redQP?(this.color="red",this.blinkVideoQualityStatus(2),this.statsText=`<div style="color: ${this.color}">Poor encoding quality</div>`,this.outer.setAttributeNS(null,"fill","#3c3b40"),this.middle.setAttributeNS(null,"fill","#3c3b40"),this.inner.setAttributeNS(null,"fill",this.color),this.dot.setAttributeNS(null,"fill",this.color)):t>this.orangeQP?(this.color="orange",this.blinkVideoQualityStatus(1),this.statsText=`<div style="color: ${this.color}">Blocky encoding quality</div>`,this.outer.setAttributeNS(null,"fill","#3c3b40"),this.middle.setAttributeNS(null,"fill",this.color),this.inner.setAttributeNS(null,"fill",this.color),this.dot.setAttributeNS(null,"fill",this.color)):t<=0?(this.color="#b0b0b0",this.outer.setAttributeNS(null,"fill","#3c3b40"),this.middle.setAttributeNS(null,"fill","#3c3b40"),this.inner.setAttributeNS(null,"fill","#3c3b40"),this.dot.setAttributeNS(null,"fill","#3c3b40"),this.statsText=`<div style="color: ${this.color}">Not connected</div>`):(this.color="lime",this.qualityStatus.style.opacity="1",this.statsText=`<div style="color: ${this.color}">Clear encoding quality</div>`,this.outer.setAttributeNS(null,"fill",this.color),this.middle.setAttributeNS(null,"fill",this.color),this.inner.setAttributeNS(null,"fill",this.color),this.dot.setAttributeNS(null,"fill",this.color)),this.qualityText.innerHTML=this.statsText}}class N{constructor(t){this._setting=t}get setting(){return this._setting}get rootElement(){return this._rootElement||(this._rootElement=document.createElement("div")),this._rootElement}}class R extends N{constructor(t){super(t),this.label=t.label,this.flag=t.flag}get setting(){return this._setting}get settingsTextElem(){return this._settingsTextElem||(this._settingsTextElem=document.createElement("div"),this._settingsTextElem.innerText=this.setting._label,this._settingsTextElem.title=this.setting.description),this._settingsTextElem}get checkbox(){return this._checkbox||(this._checkbox=document.createElement("input"),this._checkbox.type="checkbox"),this._checkbox}get rootElement(){if(!this._rootElement){this._rootElement=document.createElement("div"),this._rootElement.id=this.setting.id,this._rootElement.classList.add("setting"),this._rootElement.appendChild(this.settingsTextElem);const t=document.createElement("label");t.classList.add("tgl-switch"),this._rootElement.appendChild(t),this.checkbox.title=this.setting.description,this.checkbox.classList.add("tgl"),this.checkbox.classList.add("tgl-flat");const e=document.createElement("div");e.classList.add("tgl-slider"),t.appendChild(this.checkbox),t.appendChild(e),this.checkbox.addEventListener("change",(()=>{this.setting.flag!==this.checkbox.checked&&(this.setting.flag=this.checkbox.checked,this.setting.updateURLParams())}))}return this._rootElement}set flag(t){this.checkbox.checked=t}get flag(){return this.checkbox.checked}set label(t){this.settingsTextElem.innerText=t}get label(){return this.settingsTextElem.innerText}}class z extends N{constructor(t){super(t),this.label=this.setting.label,this.number=this.setting.number}get setting(){return this._setting}get settingsTextElem(){return this._settingsTextElem||(this._settingsTextElem=document.createElement("label"),this._settingsTextElem.innerText=this.setting.label,this._settingsTextElem.title=this.setting.description),this._settingsTextElem}get spinner(){return this._spinner||(this._spinner=document.createElement("input"),this._spinner.type="number",this._spinner.min=this.setting.min.toString(),this._spinner.max=this.setting.max.toString(),this._spinner.value=this.setting.number.toString(),this._spinner.title=this.setting.description,this._spinner.classList.add("form-control")),this._spinner}get rootElement(){return this._rootElement||(this._rootElement=document.createElement("div"),this._rootElement.classList.add("setting"),this._rootElement.classList.add("form-group"),this._rootElement.appendChild(this.settingsTextElem),this._rootElement.appendChild(this.spinner),this.spinner.onchange=t=>{const e=t.target,s=Number.parseInt(e.value);Number.isNaN(s)?(l.Logger.Warning(l.Logger.GetStackTrace(),`Could not parse value change into a valid number - value was ${e.value}, resetting value to ${this.setting.min}`),this.setting.number!==this.setting.min&&(this.setting.number=this.setting.min)):this.setting.number!==s&&(this.setting.number=s,this.setting.updateURLParams())}),this._rootElement}set number(t){this.spinner.value=this.setting.clamp(t).toString()}get number(){return+this.spinner.value}set label(t){this.settingsTextElem.innerText=t}get label(){return this.settingsTextElem.innerText}}class B extends N{constructor(t){super(t),this.label=this.setting.label,this.text=this.setting.text}get setting(){return this._setting}get settingsTextElem(){return this._settingsTextElem||(this._settingsTextElem=document.createElement("div"),this._settingsTextElem.innerText=this.setting.label,this._settingsTextElem.title=this.setting.description),this._settingsTextElem}get textbox(){return this._textbox||(this._textbox=document.createElement("input"),this._textbox.classList.add("form-control"),this._textbox.type="textbox"),this._textbox}get rootElement(){if(!this._rootElement){this._rootElement=document.createElement("div"),this._rootElement.id=this.setting.id,this._rootElement.classList.add("setting"),this._rootElement.appendChild(this.settingsTextElem);const t=document.createElement("label");this._rootElement.appendChild(t),this.textbox.title=this.setting.description,t.appendChild(this.textbox),this.textbox.addEventListener("input",(()=>{this.setting.text!==this.textbox.value&&(this.setting.text=this.textbox.value,this.setting.updateURLParams())}))}return this._rootElement}set text(t){this.textbox.value=t}get text(){return this.textbox.value}set label(t){this.settingsTextElem.innerText=t}get label(){return this.settingsTextElem.innerText}}class U extends N{constructor(t){super(t),this.label=this.setting.label,this.options=this.setting.options,this.selected=this.setting.selected}get setting(){return this._setting}get selector(){return this._selector||(this._selector=document.createElement("select"),this._selector.classList.add("form-control"),this._selector.classList.add("settings-option")),this._selector}get settingsTextElem(){return this._settingsTextElem||(this._settingsTextElem=document.createElement("div"),this._settingsTextElem.innerText=this.setting.label,this._settingsTextElem.title=this.setting.description),this._settingsTextElem}set label(t){this.settingsTextElem.innerText=t}get label(){return this.settingsTextElem.innerText}get rootElement(){if(!this._rootElement){this._rootElement=document.createElement("div"),this._rootElement.id=this.setting.id,this._rootElement.classList.add("setting"),this._rootElement.classList.add("form-group"),this._rootElement.appendChild(this.settingsTextElem);const t=document.createElement("label");this._rootElement.appendChild(t),this.selector.title=this.setting.description,t.appendChild(this.selector),this.selector.onchange=()=>{this.setting.selected!==this.selector.value&&(this.setting.selected=this.selector.value,this.setting.updateURLParams())}}return this._rootElement}set options(t){for(let t=this.selector.options.length-1;t>=0;t--)this.selector.remove(t);t.forEach((t=>{const e=document.createElement("option");e.value=t,e.innerHTML=t,this.selector.appendChild(e)}))}get options(){return[...this.selector.options].map((t=>t.value))}set selected(t){const e=this.options.filter((e=>-1!==e.indexOf(t)));e.length&&(this.selector.value=e[0])}get selected(){return this.selector.value}disable(){this.selector.disabled=!0}enable(){this.selector.disabled=!1}}const D="LightMode";class H{constructor(t){this.customFlags=new Map,this.flagsUi=new Map,this.numericParametersUi=new Map,this.textParametersUi=new Map,this.optionParametersUi=new Map,this.createCustomUISettings(t.useUrlParams),this.registerSettingsUIComponents(t)}createCustomUISettings(t){this.customFlags.set(D,new l.SettingFlag(D,"Color Scheme: Dark Mode","Page styling will be either light or dark",!1,t,((t,e)=>{e.label=`Color Scheme: ${t?"Light":"Dark"} Mode`})))}registerSettingsUIComponents(t){for(const e of t.getFlags())this.flagsUi.set(e.id,new R(e));for(const t of Array.from(this.customFlags.values()))this.flagsUi.set(t.id,new R(t));for(const e of t.getTextSettings())this.textParametersUi.set(e.id,new B(e));for(const e of t.getNumericSettings())this.numericParametersUi.set(e.id,new z(e));for(const e of t.getOptionSettings())this.optionParametersUi.set(e.id,new U(e))}buildSectionWithHeading(t,e){const s=document.createElement("section");s.classList.add("settingsContainer");const i=document.createElement("div");return i.classList.add("settingsHeader"),i.classList.add("settings-text"),i.textContent=e,s.appendChild(i),t.appendChild(s),s}populateSettingsElement(t){const e=this.buildSectionWithHeading(t,"Pixel Streaming");this.addSettingText(e,this.textParametersUi.get(l.TextParameters.SignallingServerUrl)),this.addSettingOption(e,this.optionParametersUi.get(l.OptionParameters.StreamerId)),this.addSettingFlag(e,this.flagsUi.get(l.Flags.AutoConnect)),this.addSettingFlag(e,this.flagsUi.get(l.Flags.AutoPlayVideo)),this.addSettingFlag(e,this.flagsUi.get(l.Flags.BrowserSendOffer)),this.addSettingFlag(e,this.flagsUi.get(l.Flags.UseMic)),this.addSettingFlag(e,this.flagsUi.get(l.Flags.StartVideoMuted)),this.addSettingFlag(e,this.flagsUi.get(l.Flags.PreferSFU)),this.addSettingFlag(e,this.flagsUi.get(l.Flags.IsQualityController)),this.addSettingFlag(e,this.flagsUi.get(l.Flags.ForceMonoAudio)),this.addSettingFlag(e,this.flagsUi.get(l.Flags.ForceTURN)),this.addSettingFlag(e,this.flagsUi.get(l.Flags.SuppressBrowserKeys)),this.addSettingFlag(e,this.flagsUi.get(l.Flags.AFKDetection)),this.addSettingNumeric(e,this.numericParametersUi.get(l.NumericParameters.AFKTimeoutSecs)),this.addSettingNumeric(e,this.numericParametersUi.get(l.NumericParameters.MaxReconnectAttempts));const s=this.buildSectionWithHeading(t,"UI");this.addSettingFlag(s,this.flagsUi.get(l.Flags.MatchViewportResolution)),this.addSettingFlag(s,this.flagsUi.get(l.Flags.HoveringMouseMode)),this.addSettingFlag(s,this.flagsUi.get(D));const i=this.buildSectionWithHeading(t,"Input");this.addSettingFlag(i,this.flagsUi.get(l.Flags.KeyboardInput)),this.addSettingFlag(i,this.flagsUi.get(l.Flags.MouseInput)),this.addSettingFlag(i,this.flagsUi.get(l.Flags.TouchInput)),this.addSettingFlag(i,this.flagsUi.get(l.Flags.GamepadInput)),this.addSettingFlag(i,this.flagsUi.get(l.Flags.XRControllerInput));const n=this.buildSectionWithHeading(t,"Encoder");this.addSettingNumeric(n,this.numericParametersUi.get(l.NumericParameters.MinQP)),this.addSettingNumeric(n,this.numericParametersUi.get(l.NumericParameters.MaxQP));const o=this.optionParametersUi.get(l.OptionParameters.PreferredCodec);this.addSettingOption(n,this.optionParametersUi.get(l.OptionParameters.PreferredCodec)),o&&[...o.selector.options].map((t=>t.value)).includes("Only available on Chrome")&&o.disable();const a=this.buildSectionWithHeading(t,"WebRTC");this.addSettingNumeric(a,this.numericParametersUi.get(l.NumericParameters.WebRTCFPS)),this.addSettingNumeric(a,this.numericParametersUi.get(l.NumericParameters.WebRTCMinBitrate)),this.addSettingNumeric(a,this.numericParametersUi.get(l.NumericParameters.WebRTCMaxBitrate))}addSettingText(t,e){e&&(t.appendChild(e.rootElement),this.textParametersUi.set(e.setting.id,e))}addSettingFlag(t,e){e&&(t.appendChild(e.rootElement),this.flagsUi.set(e.setting.id,e))}addSettingNumeric(t,e){e&&(t.appendChild(e.rootElement),this.numericParametersUi.set(e.setting.id,e))}addSettingOption(t,e){e&&(t.appendChild(e.rootElement),this.optionParametersUi.set(e.setting.id,e))}onSettingsChanged({data:{id:t,target:e,type:s}}){if("flag"===s){const s=t,i=e,n=this.flagsUi.get(s);n&&(n.flag!==i.flag&&(n.flag=i.flag),n.label!==i.label&&(n.label=i.label))}else if("number"===s){const s=t,i=e,n=this.numericParametersUi.get(s);n&&(n.number!==i.number&&(n.number=i.number),n.label!==i.label&&(n.label=i.label))}else if("text"===s){const s=t,i=e,n=this.textParametersUi.get(s);n&&(n.text!==i.text&&(n.text=i.text),n.label!==i.label&&(n.label=i.label))}else if("option"===s){const s=t,i=e,n=this.optionParametersUi.get(s);if(n){const t=n.options,e=i.options;t.length===e.length&&t.every((t=>e.includes(t)))||(n.options=i.options),n.selected!==i.selected&&(n.selected=i.selected),n.label!==i.label&&(n.label=i.label)}}}addCustomFlagOnSettingChangedListener(t,e){this.customFlags.has(t)&&(this.customFlags.get(t).onChange=e)}setCustomFlagLabel(t,e){this.customFlags.has(t)?(this.customFlags.get(t).label=e,this.flagsUi.get(t).label=e):l.Logger.Warning(l.Logger.GetStackTrace(),`Cannot set label for flag called ${t} - it does not exist in the Config.flags map.`)}isCustomFlagEnabled(t){return this.customFlags.get(t).flag}}class Q{constructor(t){this._options=t,this.stream=t.stream,this.onColorModeChanged=t.onColorModeChanged,this.configUI=new H(this.stream.config),this.createOverlays(),T(t.statsPanelConfig)&&(this.statsPanel=new O,this.uiFeaturesElement.appendChild(this.statsPanel.rootElement)),T(t.settingsPanelConfig)&&(this.settingsPanel=new k,this.uiFeaturesElement.appendChild(this.settingsPanel.rootElement),this.configureSettings()),t.videoQpIndicatorConfig&&t.videoQpIndicatorConfig.disableIndicator||(this.videoQpIndicator=new M,this.uiFeaturesElement.appendChild(this.videoQpIndicator.rootElement)),this.createButtons(),this.registerCallbacks(),this.showConnectOrAutoConnectOverlays(),this.setColorMode(this.configUI.isCustomFlagEnabled(D))}createOverlays(){this.disconnectOverlay=new u(this.stream.videoElementParent),this.connectOverlay=new m(this.stream.videoElementParent),this.playOverlay=new g(this.stream.videoElementParent),this.infoOverlay=new E(this.stream.videoElementParent),this.errorOverlay=new v(this.stream.videoElementParent),this.afkOverlay=new b(this.stream.videoElementParent),this.disconnectOverlay.onAction((()=>this.stream.reconnect())),this.connectOverlay.onAction((()=>this.stream.connect())),this.playOverlay.onAction((()=>this.stream.play()))}createButtons(){const t={statsButtonType:this._options.statsPanelConfig?this._options.statsPanelConfig.visibilityButtonConfig:void 0,settingsButtonType:this._options.settingsPanelConfig?this._options.settingsPanelConfig.visibilityButtonConfig:void 0,fullscreenButtonType:this._options.fullScreenControlsConfig,xrIconType:this._options.xrControlsConfig},e=new L(t);this.uiFeaturesElement.appendChild(e.rootElement);const s=this._options.fullScreenControlsConfig&&this._options.fullScreenControlsConfig.creationMode===c.UseCustomElement?new y(this._options.fullScreenControlsConfig.customElement):e.fullscreenIcon;s&&(s.fullscreenElement=this.rootElement);const i=e.settingsIcon?e.settingsIcon.rootElement:this._options.settingsPanelConfig.visibilityButtonConfig.customElement;i&&(i.onclick=()=>this.settingsClicked()),this.settingsPanel&&(this.settingsPanel.settingsCloseButton.onclick=()=>this.settingsClicked());const n=e.xrIcon?e.xrIcon.rootElement:this._options.xrControlsConfig.creationMode===c.UseCustomElement?this._options.xrControlsConfig.customElement:void 0;n&&(n.onclick=()=>this.stream.toggleXR());const o=e.statsIcon?e.statsIcon.rootElement:this._options.statsPanelConfig.visibilityButtonConfig.customElement;if(o&&(o.onclick=()=>this.statsClicked()),this.statsPanel&&(this.statsPanel.statsCloseButton.onclick=()=>this.statsClicked()),this.settingsPanel){const t=new I("Show FPS","Toggle");t.addOnClickListener((()=>{this.stream.requestShowFps()}));const e=new I("Restart Stream","Restart");e.addOnClickListener((()=>{this.stream.reconnect()}));const s=new I("Request keyframe","Request");s.addOnClickListener((()=>{this.stream.requestIframe()}));const i=this.configUI.buildSectionWithHeading(this.settingsPanel.settingsContentElement,"Commands");i.appendChild(t.rootElement),i.appendChild(s.rootElement),i.appendChild(e.rootElement)}}configureSettings(){this.configUI.populateSettingsElement(this.settingsPanel.settingsContentElement),this.configUI.addCustomFlagOnSettingChangedListener(D,(t=>{this.configUI.setCustomFlagLabel(D,`Color Scheme: ${t?"Light":"Dark"} Mode`),this.setColorMode(t)}))}registerCallbacks(){this.stream.addEventListener("afkWarningActivate",(({data:{countDown:t,dismissAfk:e}})=>this.showAfkOverlay(t,e))),this.stream.addEventListener("afkWarningUpdate",(({data:{countDown:t}})=>this.afkOverlay.updateCountdown(t))),this.stream.addEventListener("afkWarningDeactivate",(()=>this.afkOverlay.hide())),this.stream.addEventListener("afkTimedOut",(()=>this.afkOverlay.hide())),this.stream.addEventListener("videoEncoderAvgQP",(({data:{avgQP:t}})=>this.onVideoEncoderAvgQP(t))),this.stream.addEventListener("webRtcSdp",(()=>this.onWebRtcSdp())),this.stream.addEventListener("webRtcAutoConnect",(()=>this.onWebRtcAutoConnect())),this.stream.addEventListener("webRtcConnecting",(()=>this.onWebRtcConnecting())),this.stream.addEventListener("webRtcConnected",(()=>this.onWebRtcConnected())),this.stream.addEventListener("webRtcFailed",(()=>this.onWebRtcFailed())),this.stream.addEventListener("webRtcDisconnected",(({data:{eventString:t,showActionOrErrorOnDisconnect:e}})=>this.onDisconnect(t,e))),this.stream.addEventListener("videoInitialized",(()=>this.onVideoInitialized())),this.stream.addEventListener("streamLoading",(()=>this.onStreamLoading())),this.stream.addEventListener("playStreamError",(({data:{message:t}})=>this.onPlayStreamError(t))),this.stream.addEventListener("playStream",(()=>this.onPlayStream())),this.stream.addEventListener("playStreamRejected",(({data:{reason:t}})=>this.onPlayStreamRejected(t))),this.stream.addEventListener("loadFreezeFrame",(({data:{shouldShowPlayOverlay:t}})=>this.onLoadFreezeFrame(t))),this.stream.addEventListener("statsReceived",(({data:{aggregatedStats:t}})=>this.onStatsReceived(t))),this.stream.addEventListener("latencyTestResult",(({data:{latencyTimings:t}})=>this.onLatencyTestResults(t))),this.stream.addEventListener("streamerListMessage",(({data:{messageStreamerList:t,autoSelectedStreamerId:e}})=>this.handleStreamerListMessage(t,e))),this.stream.addEventListener("settingsChanged",(t=>this.configUI.onSettingsChanged(t)))}get rootElement(){return this._rootElement||(this._rootElement=document.createElement("div"),this._rootElement.id="playerUI",this._rootElement.classList.add("noselect"),this._rootElement.appendChild(this.stream.videoElementParent),this._rootElement.appendChild(this.uiFeaturesElement)),this._rootElement}get uiFeaturesElement(){return this._uiFeatureElement||(this._uiFeatureElement=document.createElement("div"),this._uiFeatureElement.id="uiFeatures"),this._uiFeatureElement}showDisconnectOverlay(t){this.hideCurrentOverlay(),this.updateDisconnectOverlay(t),this.disconnectOverlay.show(),this.currentOverlay=this.disconnectOverlay}updateDisconnectOverlay(t){this.disconnectOverlay.update(t)}onDisconnectionAction(){this.disconnectOverlay.activate()}hideCurrentOverlay(){null!=this.currentOverlay&&(this.currentOverlay.hide(),this.currentOverlay=null)}showConnectOverlay(){this.hideCurrentOverlay(),this.connectOverlay.show(),this.currentOverlay=this.connectOverlay}showPlayOverlay(){this.hideCurrentOverlay(),this.playOverlay.show(),this.currentOverlay=this.playOverlay}showTextOverlay(t){this.hideCurrentOverlay(),this.infoOverlay.update(t),this.infoOverlay.show(),this.currentOverlay=this.infoOverlay}showErrorOverlay(t){this.hideCurrentOverlay(),this.errorOverlay.update(t),this.errorOverlay.show(),this.currentOverlay=this.errorOverlay}settingsClicked(){this.statsPanel.hide(),this.settingsPanel.toggleVisibility()}statsClicked(){this.settingsPanel.hide(),this.statsPanel.toggleVisibility()}onConnectAction(){this.connectOverlay.activate()}onPlayAction(){this.playOverlay.activate()}showAfkOverlay(t,e){this.hideCurrentOverlay(),this.afkOverlay.updateCountdown(t),this.afkOverlay.onAction((()=>e())),this.afkOverlay.show(),this.currentOverlay=this.afkOverlay}showConnectOrAutoConnectOverlays(){this.stream.config.isFlagEnabled(l.Flags.AutoConnect)||this.showConnectOverlay()}onWebRtcAutoConnect(){this.showTextOverlay("Auto Connecting Now")}onWebRtcSdp(){this.showTextOverlay("WebRTC Connection Negotiated")}onStreamLoading(){const t=document.createElement("span");t.className="visually-hidden",t.innerHTML="Loading...";const e=document.createElement("div");e.id="loading-spinner",e.className="spinner-border ms-2",e.setAttribute("role","status"),e.appendChild(t),this.showTextOverlay("Loading Stream "+e.outerHTML)}onDisconnect(t,e){0==e?this.showErrorOverlay(`Disconnected: ${t}`):this.showDisconnectOverlay(`Disconnected: ${t}  <div class="clickableState">Click To Restart</div>`),this.statsPanel.latencyTest.latencyTestButton.onclick=()=>{}}onWebRtcConnecting(){this.showTextOverlay("Starting connection to server, please wait")}onWebRtcConnected(){this.showTextOverlay("WebRTC connected, waiting for video")}onWebRtcFailed(){this.showErrorOverlay("Unable to setup video")}onLoadFreezeFrame(t){!0===t&&(l.Logger.Log(l.Logger.GetStackTrace(),"showing play overlay"),this.showPlayOverlay())}onPlayStream(){this.hideCurrentOverlay()}onPlayStreamError(t){this.showErrorOverlay(t)}onPlayStreamRejected(t){this.showPlayOverlay()}onVideoInitialized(){this.stream.config.isFlagEnabled(l.Flags.AutoPlayVideo)||this.showPlayOverlay(),this.statsPanel.latencyTest.latencyTestButton.onclick=()=>{this.stream.requestLatencyTest()}}onVideoEncoderAvgQP(t){this.videoQpIndicator&&this.videoQpIndicator.updateQpTooltip(t)}onInitialSettings(t){t.PixelStreamingSettings&&t.PixelStreamingSettings.DisableLatencyTest&&(this.statsPanel.latencyTest.latencyTestButton.disabled=!0,this.statsPanel.latencyTest.latencyTestButton.title="Disabled by -PixelStreamingDisableLatencyTester=true",l.Logger.Info(l.Logger.GetStackTrace(),"-PixelStreamingDisableLatencyTester=true, requesting latency report from the the browser to UE is disabled."))}onStatsReceived(t){this.statsPanel.handleStats(t)}onLatencyTestResults(t){this.statsPanel.latencyTest.handleTestResult(t)}handleStreamerListMessage(t,e){null===e&&(0===t.ids.length?this.showDisconnectOverlay('No streamers connected. <div class="clickableState">Click To Restart</div>'):this.showTextOverlay("Multiple streamers detected. Use the dropdown in the settings menu to select the streamer"))}setColorMode(t){this.onColorModeChanged&&this.onColorModeChanged(t)}}const W=(t=>{var e={};return n.d(e,t),e})({default:()=>jss__WEBPACK_IMPORTED_MODULE_1__["default"]}),Z=(t=>{var e={};return n.d(e,t),e})({default:()=>jss_plugin_global__WEBPACK_IMPORTED_MODULE_2__["default"]}),X=(t=>{var e={};return n.d(e,t),e})({default:()=>jss_plugin_camel_case__WEBPACK_IMPORTED_MODULE_3__["default"]});class j{constructor(t){this.defaultLightModePalette={"--color0":"#e2e0dd80","--color1":"#FFFFFF","--color2":"#000000","--color3":"#0585fe","--color4":"#35b350","--color5":"#ffab00","--color6":"#e1e2dd","--color7":"#c3c4bf"},this.defaultDarkModePalette={"--color0":"#1D1F2280","--color1":"#000000","--color2":"#FFFFFF","--color3":"#0585fe","--color4":"#35b350","--color5":"#ffab00","--color6":"#1e1d22","--color7":"#3c3b40"},this.defaultStyles={":root":{"--color0":"#1D1F2280","--color1":"#000000","--color2":"#FFFFFF","--color3":"#0585fe","--color4":"#35b350","--color5":"#ffab00","--color6":"#1e1d22","--color7":"#3c3b40","--color8":"#41008c","--color9":"#3e0070","--color10":"#2e0052","--color11":"rgba(65,0,139,1)"},".noselect":{userSelect:"none"},"#playerUI":{width:"100%",height:"100%",position:"relative"},"#videoElementParent":{width:"100%",height:"100%",position:"absolute",backgroundColor:"var(--color1)"},"#uiFeatures":{width:"100%",height:"100%",zIndex:"30",position:"relative",color:"var(--color2)",pointerEvents:"none",overflow:"hidden"},".UiTool .tooltiptext":{visibility:"hidden",width:"auto",color:"var(--color2)",textAlign:"center",borderRadius:"15px",padding:"0px 10px",fontFamily:"'Montserrat', sans-serif",fontSize:"0.75rem",letterSpacing:"0.75px",position:"absolute",top:"0",transform:"translateY(25%)",left:"125%",zIndex:"20"},".UiTool:hover .tooltiptext":{visibility:"visible",backgroundColor:"var(--color7)"},"#connection .tooltiptext":{top:"125%",transform:"translateX(-25%)",left:"0",zIndex:"20",padding:"5px 10px"},"#connection":{position:"absolute",bottom:"8%",left:"5%",fontFamily:"'Michroma', sans-serif",height:"3rem",width:"3rem",pointerEvents:"all"},"#settings-panel .tooltiptext":{display:"block",top:"125%",transform:"translateX(-50%)",left:"0",zIndex:"20",padding:"5px 10px",border:"3px solid var(--color3)",width:"max-content",fallbacks:[{width:"max-content"},{border:"3px solid var(--color3)"},{padding:"5px 10px"},{zIndex:"20"},{left:"0"},{transform:"translateX(-50%)"},{top:"125%"},{display:"block"}]},"#controls":{position:"absolute",top:"3%",left:"2%",fontFamily:"'Michroma', sans-serif",pointerEvents:"all",display:"block"},"#controls>*":{marginBottom:"0.5rem",borderRadius:"50%",display:"block",height:"2rem",lineHeight:"1.75rem",padding:"0.5rem"},"#controls #additionalinfo":{textAlign:"center",fontFamily:"'Montserrat', sans-serif"},"#fullscreen-btn":{padding:"0.6rem !important"},"#minimizeIcon":{display:"none"},"#settingsBtn, #statsBtn":{cursor:"pointer"},"#uiFeatures button":{backgroundColor:"var(--color7)",border:"1px solid var(--color7)",color:"var(--color2)",position:"relative",width:"3rem",height:"3rem",padding:"0.5rem",textAlign:"center"},"#uiFeatures button:hover":{backgroundColor:"var(--color3)",border:"3px solid var(--color3)",transition:"0.25s ease",paddingLeft:"0.55rem",paddingTop:"0.55rem"},"#uiFeatures button:active":{border:"3px solid var(--color3)",backgroundColor:"var(--color7)",paddingLeft:"0.55rem",paddingTop:"0.55rem"},".btn-flat":{backgroundColor:"transparent",color:"var(--color2)",fontFamily:"'Montserrat'",fontWeight:"bold",border:"3px solid var(--color3)",borderRadius:"1rem",fontSize:"0.75rem",paddingLeft:"0.5rem",paddingRight:"0.5rem",cursor:"pointer",textAlign:"center"},".btn-flat:hover":{backgroundColor:"var(--color3)",transition:"ease 0.3s"},".btn-flat:disabled":{background:"var(--color7)",borderColor:"var(--color3)",color:"var(--color3)",cursor:"default"},".btn-flat:active":{backgroundColor:"transparent"},".btn-flat:focus":{outline:"none"},"#uiFeatures img":{width:"100%",height:"100%"},".panel-wrap":{position:"absolute",top:"0",bottom:"0",right:"0",height:"100%",minWidth:"20vw",maxWidth:"100vw",transform:"translateX(100%)",transition:".3s ease-out",pointerEvents:"all",backdropFilter:"blur(10px)",webkitBackdropFilter:"blur(10px)",overflowY:"auto",overflowX:"hidden",backgroundColor:"var(--color0)"},".panel-wrap-visible":{transform:"translateX(0%)"},".panel":{overflowY:"auto",padding:"1em"},"#settingsHeading, #statsHeading":{display:"inline-block",fontSize:"2em",marginBlockStart:"0.67em",marginBlockEnd:"0.67em",marginInlineStart:"0px",marginInlineEnd:"0px",position:"relative",padding:"0 0 0 2rem"},"#settingsClose, #statsClose":{margin:"0.5rem",paddingTop:"0.5rem",paddingBottom:"0.5rem",paddingRight:"0.5rem",fontSize:"2em",float:"right"},"#settingsClose:after, #statsClose:after":{paddingLeft:"0.5rem",display:"inline-block",content:'"\\00d7"'},"#settingsClose:hover, #statsClose:hover":{color:"var(--color3)",transition:"ease 0.3s"},"#settingsContent, #statsContent":{marginLeft:"2rem",marginRight:"2rem"},".setting":{display:"flex",flexDirection:"row",justifyContent:"space-between",padding:"0.15rem 10px 0.15rem 10px"},".settings-text":{color:"var(--color2)",verticalAlign:"middle",fontWeight:"normal"},".settings-option":{width:"100%",textOverflow:"ellipsis",whiteSpace:"nowrap"},"#connectOverlay, #playOverlay, #infoOverlay, #errorOverlay, #afkOverlay, #disconnectOverlay":{zIndex:"30",position:"absolute",color:"var(--color2)",fontSize:"1.8em",width:"100%",height:"100%",backgroundColor:"var(--color1)",alignItems:"center",justifyContent:"center",textTransform:"uppercase"},".clickableState":{alignItems:"center",justifyContent:"center",display:"flex",cursor:"pointer"},".textDisplayState":{display:"flex"},".hiddenState":{display:"none"},"#playButton, #connectButton":{display:"inline-block",height:"auto",zIndex:"30"},"img#playButton":{maxWidth:"241px",width:"10%"},"#uiInteraction":{position:"fixed"},"#UIInteractionButtonBoundary":{padding:"2px"},"#UIInteractionButton":{cursor:"pointer"},"#hiddenInput":{position:"absolute",left:"-10%",width:"0px",opacity:"0"},"#editTextButton":{position:"absolute",height:"40px",width:"40px"},".btn-overlay":{verticalAlign:"middle",display:"inline-block"},".tgl-switch":{verticalAlign:"middle",display:"inline-block"},".tgl-switch .tgl":{display:"none"},".tgl, .tgl:after, .tgl:before, .tgl *, .tgl *:after, .tgl *:before, .tgl+.tgl-slider":{webkitBoxSizing:"border-box",boxSizing:"border-box"},".tgl::-moz-selection, .tgl:after::-moz-selection, .tgl:before::-moz-selection, .tgl *::-moz-selection, .tgl *:after::-moz-selection, .tgl *:before::-moz-selection, .tgl+.tgl-slider::-moz-selection":{background:"none"},".tgl::selection, .tgl:after::selection, .tgl:before::selection, .tgl *::selection, .tgl *:after::selection, .tgl *:before::selection, .tgl+.tgl-slider::selection":{background:"none"},".tgl-slider":{},".tgl+.tgl-slider":{outline:"0",display:"block",width:"40px",height:"18px",position:"relative",cursor:"pointer",userSelect:"none"},".tgl+.tgl-slider:after, .tgl+.tgl-slider:before":{position:"relative",display:"block",content:'""',width:"50%",height:"100%"},".tgl+.tgl-slider:after":{left:"0"},".tgl+.tgl-slider:before":{display:"none"},".tgl-flat+.tgl-slider":{padding:"2px",webkitTransition:"all .2s ease",transition:"all .2s ease",background:"var(--color6)",border:"3px solid var(--color7)",borderRadius:"2em"},".tgl-flat+.tgl-slider:after":{webkitTransition:"all .2s ease",transition:"all .2s ease",background:"var(--color7)",content:'""',borderRadius:"1em"},".tgl-flat:checked+.tgl-slider":{border:"3px solid var(--color3)"},".tgl-flat:checked+.tgl-slider:after":{left:"50%",background:"var(--color3)"},".btn-apply":{display:"block !important",marginLeft:"auto",marginRight:"auto",width:"40%"},".form-control":{backgroundColor:"var(--color7)",border:"2px solid var(--color7)",borderRadius:"4px",color:"var(--color2)",textAlign:"right",fontFamily:"inherit"},".form-control:hover":{borderColor:"var(--color7)"},".form-group":{paddingTop:"4px",display:"grid",gridTemplateColumns:"80% 20%",rowGap:"4px",paddingRight:"10px",paddingLeft:"10px"},".form-group label":{verticalAlign:"middle",fontWeight:"normal"},".settingsContainer":{display:"flex",flexDirection:"column",borderBottom:"1px solid var(--color7)",paddingTop:"10px",paddingBottom:"10px"},".settingsContainer> :first-child":{marginTop:"4px",marginBottom:"4px",fontWeight:"bold",justifyContent:"space-between",display:"flex",flexDirection:"row",alignItems:"baseline"},".collapse":{paddingLeft:"5%"},"#streamTools":{borderBottomRightRadius:"5px",borderBottomLeftRadius:"5px",userSelect:"none",position:"absolute",top:"0",right:"2%",zIndex:"100",border:"4px solid var(--colour8)",borderTopWidth:"0px"},".settingsHeader":{fontStyle:"italic"},"#streamToolsHeader":{display:"flex",flexDirection:"row",justifyContent:"space-between",borderBottom:"1px solid var(--colour8)",backgroundColor:"var(--color7)"},".streamTools":{backgroundColor:"var(--color2)",fontFamily:"var(--buttonFont)",fontWeight:"lighter",color:"var(--color7)"},".streamTools-shown>#streamToolsSettings, .streamTools-shown>#streamToolsStats":{display:"block"},"#streamToolsToggle":{width:"100%"},"#qualityStatus":{fontSize:"37px",paddingRight:"4px"},".svgIcon":{fill:"var(--color2)"}};const{customStyles:e,lightModePalette:s,darkModePalette:i}=null!=t?t:{},n={plugins:[(0,Z.default)(),(0,X.default)()]};W.default.setup(n),this.customStyles=e,this.lightModePalette=null!=s?s:this.defaultLightModePalette,this.darkModePalette=null!=i?i:this.defaultDarkModePalette}applyStyleSheet(){W.default.createStyleSheet({"@global":Object.assign(Object.assign({},this.defaultStyles),this.customStyles)}).attach()}applyPalette(t){const e=document.querySelector(":root");e.style.setProperty("--color0",t["--color0"]),e.style.setProperty("--color1",t["--color1"]),e.style.setProperty("--color2",t["--color2"]),e.style.setProperty("--color3",t["--color3"]),e.style.setProperty("--color4",t["--color4"]),e.style.setProperty("--color5",t["--color5"]),e.style.setProperty("--color6",t["--color6"]),e.style.setProperty("--color7",t["--color7"])}setColorMode(t){t?this.applyPalette(this.lightModePalette):this.applyPalette(this.darkModePalette)}}var q=o.ym,V=o.EW,G=o.Mx,J=o.L3,Y=o.rl,K=o.NR,$=o.f1,tt=o.IY,et=o.RZ,st=o.XY,it=o.Fk,nt=o.Zh,ot=o.ek,lt=o.MG,at=o.gE,rt=o.tW,ct=o.wr,dt=o.QT;

/***/ }),

/***/ "./node_modules/hyphenate-style-name/index.js":
/*!****************************************************!*\
  !*** ./node_modules/hyphenate-style-name/index.js ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* eslint-disable no-var, prefer-template */
var uppercasePattern = /[A-Z]/g
var msPattern = /^ms-/
var cache = {}

function toHyphenLower(match) {
  return '-' + match.toLowerCase()
}

function hyphenateStyleName(name) {
  if (cache.hasOwnProperty(name)) {
    return cache[name]
  }

  var hName = name.replace(uppercasePattern, toHyphenLower)
  return (cache[name] = msPattern.test(hName) ? '-' + hName : hName)
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (hyphenateStyleName);


/***/ }),

/***/ "./node_modules/is-in-browser/dist/module.js":
/*!***************************************************!*\
  !*** ./node_modules/is-in-browser/dist/module.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   "isBrowser": () => (/* binding */ isBrowser)
/* harmony export */ });
var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var isBrowser = (typeof window === "undefined" ? "undefined" : _typeof(window)) === "object" && (typeof document === "undefined" ? "undefined" : _typeof(document)) === 'object' && document.nodeType === 9;

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (isBrowser);


/***/ }),

/***/ "./node_modules/jss-plugin-camel-case/dist/jss-plugin-camel-case.esm.js":
/*!******************************************************************************!*\
  !*** ./node_modules/jss-plugin-camel-case/dist/jss-plugin-camel-case.esm.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var hyphenate_style_name__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! hyphenate-style-name */ "./node_modules/hyphenate-style-name/index.js");


/**
 * Convert camel cased property names to dash separated.
 */

function convertCase(style) {
  var converted = {};

  for (var prop in style) {
    var key = prop.indexOf('--') === 0 ? prop : (0,hyphenate_style_name__WEBPACK_IMPORTED_MODULE_0__["default"])(prop);
    converted[key] = style[prop];
  }

  if (style.fallbacks) {
    if (Array.isArray(style.fallbacks)) converted.fallbacks = style.fallbacks.map(convertCase);else converted.fallbacks = convertCase(style.fallbacks);
  }

  return converted;
}
/**
 * Allow camel cased property names by converting them back to dasherized.
 */


function camelCase() {
  function onProcessStyle(style) {
    if (Array.isArray(style)) {
      // Handle rules like @font-face, which can have multiple styles in an array
      for (var index = 0; index < style.length; index++) {
        style[index] = convertCase(style[index]);
      }

      return style;
    }

    return convertCase(style);
  }

  function onChangeValue(value, prop, rule) {
    if (prop.indexOf('--') === 0) {
      return value;
    }

    var hyphenatedProp = (0,hyphenate_style_name__WEBPACK_IMPORTED_MODULE_0__["default"])(prop); // There was no camel case in place

    if (prop === hyphenatedProp) return value;
    rule.prop(hyphenatedProp, value); // Core will ignore that property value we set the proper one above.

    return null;
  }

  return {
    onProcessStyle: onProcessStyle,
    onChangeValue: onChangeValue
  };
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (camelCase);


/***/ }),

/***/ "./node_modules/jss-plugin-global/dist/jss-plugin-global.esm.js":
/*!**********************************************************************!*\
  !*** ./node_modules/jss-plugin-global/dist/jss-plugin-global.esm.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "./node_modules/@babel/runtime/helpers/esm/extends.js");
/* harmony import */ var jss__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jss */ "./node_modules/jss/dist/jss.esm.js");



var at = '@global';
var atPrefix = '@global ';

var GlobalContainerRule =
/*#__PURE__*/
function () {
  function GlobalContainerRule(key, styles, options) {
    this.type = 'global';
    this.at = at;
    this.isProcessed = false;
    this.key = key;
    this.options = options;
    this.rules = new jss__WEBPACK_IMPORTED_MODULE_1__.RuleList((0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__["default"])({}, options, {
      parent: this
    }));

    for (var selector in styles) {
      this.rules.add(selector, styles[selector]);
    }

    this.rules.process();
  }
  /**
   * Get a rule.
   */


  var _proto = GlobalContainerRule.prototype;

  _proto.getRule = function getRule(name) {
    return this.rules.get(name);
  }
  /**
   * Create and register rule, run plugins.
   */
  ;

  _proto.addRule = function addRule(name, style, options) {
    var rule = this.rules.add(name, style, options);
    if (rule) this.options.jss.plugins.onProcessRule(rule);
    return rule;
  }
  /**
   * Replace rule, run plugins.
   */
  ;

  _proto.replaceRule = function replaceRule(name, style, options) {
    var newRule = this.rules.replace(name, style, options);
    if (newRule) this.options.jss.plugins.onProcessRule(newRule);
    return newRule;
  }
  /**
   * Get index of a rule.
   */
  ;

  _proto.indexOf = function indexOf(rule) {
    return this.rules.indexOf(rule);
  }
  /**
   * Generates a CSS string.
   */
  ;

  _proto.toString = function toString(options) {
    return this.rules.toString(options);
  };

  return GlobalContainerRule;
}();

var GlobalPrefixedRule =
/*#__PURE__*/
function () {
  function GlobalPrefixedRule(key, style, options) {
    this.type = 'global';
    this.at = at;
    this.isProcessed = false;
    this.key = key;
    this.options = options;
    var selector = key.substr(atPrefix.length);
    this.rule = options.jss.createRule(selector, style, (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__["default"])({}, options, {
      parent: this
    }));
  }

  var _proto2 = GlobalPrefixedRule.prototype;

  _proto2.toString = function toString(options) {
    return this.rule ? this.rule.toString(options) : '';
  };

  return GlobalPrefixedRule;
}();

var separatorRegExp = /\s*,\s*/g;

function addScope(selector, scope) {
  var parts = selector.split(separatorRegExp);
  var scoped = '';

  for (var i = 0; i < parts.length; i++) {
    scoped += scope + " " + parts[i].trim();
    if (parts[i + 1]) scoped += ', ';
  }

  return scoped;
}

function handleNestedGlobalContainerRule(rule, sheet) {
  var options = rule.options,
      style = rule.style;
  var rules = style ? style[at] : null;
  if (!rules) return;

  for (var name in rules) {
    sheet.addRule(name, rules[name], (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__["default"])({}, options, {
      selector: addScope(name, rule.selector)
    }));
  }

  delete style[at];
}

function handlePrefixedGlobalRule(rule, sheet) {
  var options = rule.options,
      style = rule.style;

  for (var prop in style) {
    if (prop[0] !== '@' || prop.substr(0, at.length) !== at) continue;
    var selector = addScope(prop.substr(at.length), rule.selector);
    sheet.addRule(selector, style[prop], (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__["default"])({}, options, {
      selector: selector
    }));
    delete style[prop];
  }
}
/**
 * Convert nested rules to separate, remove them from original styles.
 */


function jssGlobal() {
  function onCreateRule(name, styles, options) {
    if (!name) return null;

    if (name === at) {
      return new GlobalContainerRule(name, styles, options);
    }

    if (name[0] === '@' && name.substr(0, atPrefix.length) === atPrefix) {
      return new GlobalPrefixedRule(name, styles, options);
    }

    var parent = options.parent;

    if (parent) {
      if (parent.type === 'global' || parent.options.parent && parent.options.parent.type === 'global') {
        options.scoped = false;
      }
    }

    if (!options.selector && options.scoped === false) {
      options.selector = name;
    }

    return null;
  }

  function onProcessRule(rule, sheet) {
    if (rule.type !== 'style' || !sheet) return;
    handleNestedGlobalContainerRule(rule, sheet);
    handlePrefixedGlobalRule(rule, sheet);
  }

  return {
    onCreateRule: onCreateRule,
    onProcessRule: onProcessRule
  };
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (jssGlobal);


/***/ }),

/***/ "./node_modules/jss/dist/jss.esm.js":
/*!******************************************!*\
  !*** ./node_modules/jss/dist/jss.esm.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "RuleList": () => (/* binding */ RuleList),
/* harmony export */   "SheetsManager": () => (/* binding */ SheetsManager),
/* harmony export */   "SheetsRegistry": () => (/* binding */ SheetsRegistry),
/* harmony export */   "create": () => (/* binding */ createJss),
/* harmony export */   "createGenerateId": () => (/* binding */ createGenerateId),
/* harmony export */   "createRule": () => (/* binding */ createRule),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   "getDynamicStyles": () => (/* binding */ getDynamicStyles),
/* harmony export */   "hasCSSTOMSupport": () => (/* binding */ hasCSSTOMSupport),
/* harmony export */   "sheets": () => (/* binding */ sheets),
/* harmony export */   "toCssValue": () => (/* binding */ toCssValue)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "./node_modules/@babel/runtime/helpers/esm/extends.js");
/* harmony import */ var is_in_browser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! is-in-browser */ "./node_modules/is-in-browser/dist/module.js");
/* harmony import */ var tiny_warning__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! tiny-warning */ "./node_modules/tiny-warning/dist/tiny-warning.esm.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/esm/assertThisInitialized */ "./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js");
/* harmony import */ var _babel_runtime_helpers_esm_objectWithoutPropertiesLoose__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/esm/objectWithoutPropertiesLoose */ "./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js");








var plainObjectConstrurctor = {}.constructor;
function cloneStyle(style) {
  if (style == null || typeof style !== 'object') return style;
  if (Array.isArray(style)) return style.map(cloneStyle);
  if (style.constructor !== plainObjectConstrurctor) return style;
  var newStyle = {};

  for (var name in style) {
    newStyle[name] = cloneStyle(style[name]);
  }

  return newStyle;
}

/**
 * Create a rule instance.
 */

function createRule(name, decl, options) {
  if (name === void 0) {
    name = 'unnamed';
  }

  var jss = options.jss;
  var declCopy = cloneStyle(decl);
  var rule = jss.plugins.onCreateRule(name, declCopy, options);
  if (rule) return rule; // It is an at-rule and it has no instance.

  if (name[0] === '@') {
     true ? (0,tiny_warning__WEBPACK_IMPORTED_MODULE_6__["default"])(false, "[JSS] Unknown rule " + name) : 0;
  }

  return null;
}

var join = function join(value, by) {
  var result = '';

  for (var i = 0; i < value.length; i++) {
    // Remove !important from the value, it will be readded later.
    if (value[i] === '!important') break;
    if (result) result += by;
    result += value[i];
  }

  return result;
};
/**
 * Converts JSS array value to a CSS string.
 *
 * `margin: [['5px', '10px']]` > `margin: 5px 10px;`
 * `border: ['1px', '2px']` > `border: 1px, 2px;`
 * `margin: [['5px', '10px'], '!important']` > `margin: 5px 10px !important;`
 * `color: ['red', !important]` > `color: red !important;`
 */


var toCssValue = function toCssValue(value) {
  if (!Array.isArray(value)) return value;
  var cssValue = ''; // Support space separated values via `[['5px', '10px']]`.

  if (Array.isArray(value[0])) {
    for (var i = 0; i < value.length; i++) {
      if (value[i] === '!important') break;
      if (cssValue) cssValue += ', ';
      cssValue += join(value[i], ' ');
    }
  } else cssValue = join(value, ', '); // Add !important, because it was ignored.


  if (value[value.length - 1] === '!important') {
    cssValue += ' !important';
  }

  return cssValue;
};

function getWhitespaceSymbols(options) {
  if (options && options.format === false) {
    return {
      linebreak: '',
      space: ''
    };
  }

  return {
    linebreak: '\n',
    space: ' '
  };
}

/**
 * Indent a string.
 * http://jsperf.com/array-join-vs-for
 */

function indentStr(str, indent) {
  var result = '';

  for (var index = 0; index < indent; index++) {
    result += '  ';
  }

  return result + str;
}
/**
 * Converts a Rule to CSS string.
 */


function toCss(selector, style, options) {
  if (options === void 0) {
    options = {};
  }

  var result = '';
  if (!style) return result;
  var _options = options,
      _options$indent = _options.indent,
      indent = _options$indent === void 0 ? 0 : _options$indent;
  var fallbacks = style.fallbacks;

  if (options.format === false) {
    indent = -Infinity;
  }

  var _getWhitespaceSymbols = getWhitespaceSymbols(options),
      linebreak = _getWhitespaceSymbols.linebreak,
      space = _getWhitespaceSymbols.space;

  if (selector) indent++; // Apply fallbacks first.

  if (fallbacks) {
    // Array syntax {fallbacks: [{prop: value}]}
    if (Array.isArray(fallbacks)) {
      for (var index = 0; index < fallbacks.length; index++) {
        var fallback = fallbacks[index];

        for (var prop in fallback) {
          var value = fallback[prop];

          if (value != null) {
            if (result) result += linebreak;
            result += indentStr(prop + ":" + space + toCssValue(value) + ";", indent);
          }
        }
      }
    } else {
      // Object syntax {fallbacks: {prop: value}}
      for (var _prop in fallbacks) {
        var _value = fallbacks[_prop];

        if (_value != null) {
          if (result) result += linebreak;
          result += indentStr(_prop + ":" + space + toCssValue(_value) + ";", indent);
        }
      }
    }
  }

  for (var _prop2 in style) {
    var _value2 = style[_prop2];

    if (_value2 != null && _prop2 !== 'fallbacks') {
      if (result) result += linebreak;
      result += indentStr(_prop2 + ":" + space + toCssValue(_value2) + ";", indent);
    }
  } // Allow empty style in this case, because properties will be added dynamically.


  if (!result && !options.allowEmpty) return result; // When rule is being stringified before selector was defined.

  if (!selector) return result;
  indent--;
  if (result) result = "" + linebreak + result + linebreak;
  return indentStr("" + selector + space + "{" + result, indent) + indentStr('}', indent);
}

var escapeRegex = /([[\].#*$><+~=|^:(),"'`\s])/g;
var nativeEscape = typeof CSS !== 'undefined' && CSS.escape;
var escape = (function (str) {
  return nativeEscape ? nativeEscape(str) : str.replace(escapeRegex, '\\$1');
});

var BaseStyleRule =
/*#__PURE__*/
function () {
  function BaseStyleRule(key, style, options) {
    this.type = 'style';
    this.isProcessed = false;
    var sheet = options.sheet,
        Renderer = options.Renderer;
    this.key = key;
    this.options = options;
    this.style = style;
    if (sheet) this.renderer = sheet.renderer;else if (Renderer) this.renderer = new Renderer();
  }
  /**
   * Get or set a style property.
   */


  var _proto = BaseStyleRule.prototype;

  _proto.prop = function prop(name, value, options) {
    // It's a getter.
    if (value === undefined) return this.style[name]; // Don't do anything if the value has not changed.

    var force = options ? options.force : false;
    if (!force && this.style[name] === value) return this;
    var newValue = value;

    if (!options || options.process !== false) {
      newValue = this.options.jss.plugins.onChangeValue(value, name, this);
    }

    var isEmpty = newValue == null || newValue === false;
    var isDefined = name in this.style; // Value is empty and wasn't defined before.

    if (isEmpty && !isDefined && !force) return this; // We are going to remove this value.

    var remove = isEmpty && isDefined;
    if (remove) delete this.style[name];else this.style[name] = newValue; // Renderable is defined if StyleSheet option `link` is true.

    if (this.renderable && this.renderer) {
      if (remove) this.renderer.removeProperty(this.renderable, name);else this.renderer.setProperty(this.renderable, name, newValue);
      return this;
    }

    var sheet = this.options.sheet;

    if (sheet && sheet.attached) {
       true ? (0,tiny_warning__WEBPACK_IMPORTED_MODULE_6__["default"])(false, '[JSS] Rule is not linked. Missing sheet option "link: true".') : 0;
    }

    return this;
  };

  return BaseStyleRule;
}();
var StyleRule =
/*#__PURE__*/
function (_BaseStyleRule) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_3__["default"])(StyleRule, _BaseStyleRule);

  function StyleRule(key, style, options) {
    var _this;

    _this = _BaseStyleRule.call(this, key, style, options) || this;
    var selector = options.selector,
        scoped = options.scoped,
        sheet = options.sheet,
        generateId = options.generateId;

    if (selector) {
      _this.selectorText = selector;
    } else if (scoped !== false) {
      _this.id = generateId((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__["default"])((0,_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__["default"])(_this)), sheet);
      _this.selectorText = "." + escape(_this.id);
    }

    return _this;
  }
  /**
   * Set selector string.
   * Attention: use this with caution. Most browsers didn't implement
   * selectorText setter, so this may result in rerendering of entire Style Sheet.
   */


  var _proto2 = StyleRule.prototype;

  /**
   * Apply rule to an element inline.
   */
  _proto2.applyTo = function applyTo(renderable) {
    var renderer = this.renderer;

    if (renderer) {
      var json = this.toJSON();

      for (var prop in json) {
        renderer.setProperty(renderable, prop, json[prop]);
      }
    }

    return this;
  }
  /**
   * Returns JSON representation of the rule.
   * Fallbacks are not supported.
   * Useful for inline styles.
   */
  ;

  _proto2.toJSON = function toJSON() {
    var json = {};

    for (var prop in this.style) {
      var value = this.style[prop];
      if (typeof value !== 'object') json[prop] = value;else if (Array.isArray(value)) json[prop] = toCssValue(value);
    }

    return json;
  }
  /**
   * Generates a CSS string.
   */
  ;

  _proto2.toString = function toString(options) {
    var sheet = this.options.sheet;
    var link = sheet ? sheet.options.link : false;
    var opts = link ? (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__["default"])({}, options, {
      allowEmpty: true
    }) : options;
    return toCss(this.selectorText, this.style, opts);
  };

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__["default"])(StyleRule, [{
    key: "selector",
    set: function set(selector) {
      if (selector === this.selectorText) return;
      this.selectorText = selector;
      var renderer = this.renderer,
          renderable = this.renderable;
      if (!renderable || !renderer) return;
      var hasChanged = renderer.setSelector(renderable, selector); // If selector setter is not implemented, rerender the rule.

      if (!hasChanged) {
        renderer.replaceRule(renderable, this);
      }
    }
    /**
     * Get selector string.
     */
    ,
    get: function get() {
      return this.selectorText;
    }
  }]);

  return StyleRule;
}(BaseStyleRule);
var pluginStyleRule = {
  onCreateRule: function onCreateRule(key, style, options) {
    if (key[0] === '@' || options.parent && options.parent.type === 'keyframes') {
      return null;
    }

    return new StyleRule(key, style, options);
  }
};

var defaultToStringOptions = {
  indent: 1,
  children: true
};
var atRegExp = /@([\w-]+)/;
/**
 * Conditional rule for @media, @supports
 */

var ConditionalRule =
/*#__PURE__*/
function () {
  function ConditionalRule(key, styles, options) {
    this.type = 'conditional';
    this.isProcessed = false;
    this.key = key;
    var atMatch = key.match(atRegExp);
    this.at = atMatch ? atMatch[1] : 'unknown'; // Key might contain a unique suffix in case the `name` passed by user was duplicate.

    this.query = options.name || "@" + this.at;
    this.options = options;
    this.rules = new RuleList((0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__["default"])({}, options, {
      parent: this
    }));

    for (var name in styles) {
      this.rules.add(name, styles[name]);
    }

    this.rules.process();
  }
  /**
   * Get a rule.
   */


  var _proto = ConditionalRule.prototype;

  _proto.getRule = function getRule(name) {
    return this.rules.get(name);
  }
  /**
   * Get index of a rule.
   */
  ;

  _proto.indexOf = function indexOf(rule) {
    return this.rules.indexOf(rule);
  }
  /**
   * Create and register rule, run plugins.
   */
  ;

  _proto.addRule = function addRule(name, style, options) {
    var rule = this.rules.add(name, style, options);
    if (!rule) return null;
    this.options.jss.plugins.onProcessRule(rule);
    return rule;
  }
  /**
   * Replace rule, run plugins.
   */
  ;

  _proto.replaceRule = function replaceRule(name, style, options) {
    var newRule = this.rules.replace(name, style, options);
    if (newRule) this.options.jss.plugins.onProcessRule(newRule);
    return newRule;
  }
  /**
   * Generates a CSS string.
   */
  ;

  _proto.toString = function toString(options) {
    if (options === void 0) {
      options = defaultToStringOptions;
    }

    var _getWhitespaceSymbols = getWhitespaceSymbols(options),
        linebreak = _getWhitespaceSymbols.linebreak;

    if (options.indent == null) options.indent = defaultToStringOptions.indent;
    if (options.children == null) options.children = defaultToStringOptions.children;

    if (options.children === false) {
      return this.query + " {}";
    }

    var children = this.rules.toString(options);
    return children ? this.query + " {" + linebreak + children + linebreak + "}" : '';
  };

  return ConditionalRule;
}();
var keyRegExp = /@container|@media|@supports\s+/;
var pluginConditionalRule = {
  onCreateRule: function onCreateRule(key, styles, options) {
    return keyRegExp.test(key) ? new ConditionalRule(key, styles, options) : null;
  }
};

var defaultToStringOptions$1 = {
  indent: 1,
  children: true
};
var nameRegExp = /@keyframes\s+([\w-]+)/;
/**
 * Rule for @keyframes
 */

var KeyframesRule =
/*#__PURE__*/
function () {
  function KeyframesRule(key, frames, options) {
    this.type = 'keyframes';
    this.at = '@keyframes';
    this.isProcessed = false;
    var nameMatch = key.match(nameRegExp);

    if (nameMatch && nameMatch[1]) {
      this.name = nameMatch[1];
    } else {
      this.name = 'noname';
       true ? (0,tiny_warning__WEBPACK_IMPORTED_MODULE_6__["default"])(false, "[JSS] Bad keyframes name " + key) : 0;
    }

    this.key = this.type + "-" + this.name;
    this.options = options;
    var scoped = options.scoped,
        sheet = options.sheet,
        generateId = options.generateId;
    this.id = scoped === false ? this.name : escape(generateId(this, sheet));
    this.rules = new RuleList((0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__["default"])({}, options, {
      parent: this
    }));

    for (var name in frames) {
      this.rules.add(name, frames[name], (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__["default"])({}, options, {
        parent: this
      }));
    }

    this.rules.process();
  }
  /**
   * Generates a CSS string.
   */


  var _proto = KeyframesRule.prototype;

  _proto.toString = function toString(options) {
    if (options === void 0) {
      options = defaultToStringOptions$1;
    }

    var _getWhitespaceSymbols = getWhitespaceSymbols(options),
        linebreak = _getWhitespaceSymbols.linebreak;

    if (options.indent == null) options.indent = defaultToStringOptions$1.indent;
    if (options.children == null) options.children = defaultToStringOptions$1.children;

    if (options.children === false) {
      return this.at + " " + this.id + " {}";
    }

    var children = this.rules.toString(options);
    if (children) children = "" + linebreak + children + linebreak;
    return this.at + " " + this.id + " {" + children + "}";
  };

  return KeyframesRule;
}();
var keyRegExp$1 = /@keyframes\s+/;
var refRegExp = /\$([\w-]+)/g;

var findReferencedKeyframe = function findReferencedKeyframe(val, keyframes) {
  if (typeof val === 'string') {
    return val.replace(refRegExp, function (match, name) {
      if (name in keyframes) {
        return keyframes[name];
      }

       true ? (0,tiny_warning__WEBPACK_IMPORTED_MODULE_6__["default"])(false, "[JSS] Referenced keyframes rule \"" + name + "\" is not defined.") : 0;
      return match;
    });
  }

  return val;
};
/**
 * Replace the reference for a animation name.
 */


var replaceRef = function replaceRef(style, prop, keyframes) {
  var value = style[prop];
  var refKeyframe = findReferencedKeyframe(value, keyframes);

  if (refKeyframe !== value) {
    style[prop] = refKeyframe;
  }
};

var pluginKeyframesRule = {
  onCreateRule: function onCreateRule(key, frames, options) {
    return typeof key === 'string' && keyRegExp$1.test(key) ? new KeyframesRule(key, frames, options) : null;
  },
  // Animation name ref replacer.
  onProcessStyle: function onProcessStyle(style, rule, sheet) {
    if (rule.type !== 'style' || !sheet) return style;
    if ('animation-name' in style) replaceRef(style, 'animation-name', sheet.keyframes);
    if ('animation' in style) replaceRef(style, 'animation', sheet.keyframes);
    return style;
  },
  onChangeValue: function onChangeValue(val, prop, rule) {
    var sheet = rule.options.sheet;

    if (!sheet) {
      return val;
    }

    switch (prop) {
      case 'animation':
        return findReferencedKeyframe(val, sheet.keyframes);

      case 'animation-name':
        return findReferencedKeyframe(val, sheet.keyframes);

      default:
        return val;
    }
  }
};

var KeyframeRule =
/*#__PURE__*/
function (_BaseStyleRule) {
  (0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_3__["default"])(KeyframeRule, _BaseStyleRule);

  function KeyframeRule() {
    return _BaseStyleRule.apply(this, arguments) || this;
  }

  var _proto = KeyframeRule.prototype;

  /**
   * Generates a CSS string.
   */
  _proto.toString = function toString(options) {
    var sheet = this.options.sheet;
    var link = sheet ? sheet.options.link : false;
    var opts = link ? (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__["default"])({}, options, {
      allowEmpty: true
    }) : options;
    return toCss(this.key, this.style, opts);
  };

  return KeyframeRule;
}(BaseStyleRule);
var pluginKeyframeRule = {
  onCreateRule: function onCreateRule(key, style, options) {
    if (options.parent && options.parent.type === 'keyframes') {
      return new KeyframeRule(key, style, options);
    }

    return null;
  }
};

var FontFaceRule =
/*#__PURE__*/
function () {
  function FontFaceRule(key, style, options) {
    this.type = 'font-face';
    this.at = '@font-face';
    this.isProcessed = false;
    this.key = key;
    this.style = style;
    this.options = options;
  }
  /**
   * Generates a CSS string.
   */


  var _proto = FontFaceRule.prototype;

  _proto.toString = function toString(options) {
    var _getWhitespaceSymbols = getWhitespaceSymbols(options),
        linebreak = _getWhitespaceSymbols.linebreak;

    if (Array.isArray(this.style)) {
      var str = '';

      for (var index = 0; index < this.style.length; index++) {
        str += toCss(this.at, this.style[index]);
        if (this.style[index + 1]) str += linebreak;
      }

      return str;
    }

    return toCss(this.at, this.style, options);
  };

  return FontFaceRule;
}();
var keyRegExp$2 = /@font-face/;
var pluginFontFaceRule = {
  onCreateRule: function onCreateRule(key, style, options) {
    return keyRegExp$2.test(key) ? new FontFaceRule(key, style, options) : null;
  }
};

var ViewportRule =
/*#__PURE__*/
function () {
  function ViewportRule(key, style, options) {
    this.type = 'viewport';
    this.at = '@viewport';
    this.isProcessed = false;
    this.key = key;
    this.style = style;
    this.options = options;
  }
  /**
   * Generates a CSS string.
   */


  var _proto = ViewportRule.prototype;

  _proto.toString = function toString(options) {
    return toCss(this.key, this.style, options);
  };

  return ViewportRule;
}();
var pluginViewportRule = {
  onCreateRule: function onCreateRule(key, style, options) {
    return key === '@viewport' || key === '@-ms-viewport' ? new ViewportRule(key, style, options) : null;
  }
};

var SimpleRule =
/*#__PURE__*/
function () {
  function SimpleRule(key, value, options) {
    this.type = 'simple';
    this.isProcessed = false;
    this.key = key;
    this.value = value;
    this.options = options;
  }
  /**
   * Generates a CSS string.
   */
  // eslint-disable-next-line no-unused-vars


  var _proto = SimpleRule.prototype;

  _proto.toString = function toString(options) {
    if (Array.isArray(this.value)) {
      var str = '';

      for (var index = 0; index < this.value.length; index++) {
        str += this.key + " " + this.value[index] + ";";
        if (this.value[index + 1]) str += '\n';
      }

      return str;
    }

    return this.key + " " + this.value + ";";
  };

  return SimpleRule;
}();
var keysMap = {
  '@charset': true,
  '@import': true,
  '@namespace': true
};
var pluginSimpleRule = {
  onCreateRule: function onCreateRule(key, value, options) {
    return key in keysMap ? new SimpleRule(key, value, options) : null;
  }
};

var plugins = [pluginStyleRule, pluginConditionalRule, pluginKeyframesRule, pluginKeyframeRule, pluginFontFaceRule, pluginViewportRule, pluginSimpleRule];

var defaultUpdateOptions = {
  process: true
};
var forceUpdateOptions = {
  force: true,
  process: true
  /**
   * Contains rules objects and allows adding/removing etc.
   * Is used for e.g. by `StyleSheet` or `ConditionalRule`.
   */

};

var RuleList =
/*#__PURE__*/
function () {
  // Rules registry for access by .get() method.
  // It contains the same rule registered by name and by selector.
  // Original styles object.
  // Used to ensure correct rules order.
  function RuleList(options) {
    this.map = {};
    this.raw = {};
    this.index = [];
    this.counter = 0;
    this.options = options;
    this.classes = options.classes;
    this.keyframes = options.keyframes;
  }
  /**
   * Create and register rule.
   *
   * Will not render after Style Sheet was rendered the first time.
   */


  var _proto = RuleList.prototype;

  _proto.add = function add(name, decl, ruleOptions) {
    var _this$options = this.options,
        parent = _this$options.parent,
        sheet = _this$options.sheet,
        jss = _this$options.jss,
        Renderer = _this$options.Renderer,
        generateId = _this$options.generateId,
        scoped = _this$options.scoped;

    var options = (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__["default"])({
      classes: this.classes,
      parent: parent,
      sheet: sheet,
      jss: jss,
      Renderer: Renderer,
      generateId: generateId,
      scoped: scoped,
      name: name,
      keyframes: this.keyframes,
      selector: undefined
    }, ruleOptions); // When user uses .createStyleSheet(), duplicate names are not possible, but
    // `sheet.addRule()` opens the door for any duplicate rule name. When this happens
    // we need to make the key unique within this RuleList instance scope.


    var key = name;

    if (name in this.raw) {
      key = name + "-d" + this.counter++;
    } // We need to save the original decl before creating the rule
    // because cache plugin needs to use it as a key to return a cached rule.


    this.raw[key] = decl;

    if (key in this.classes) {
      // E.g. rules inside of @media container
      options.selector = "." + escape(this.classes[key]);
    }

    var rule = createRule(key, decl, options);
    if (!rule) return null;
    this.register(rule);
    var index = options.index === undefined ? this.index.length : options.index;
    this.index.splice(index, 0, rule);
    return rule;
  }
  /**
   * Replace rule.
   * Create a new rule and remove old one instead of overwriting
   * because we want to invoke onCreateRule hook to make plugins work.
   */
  ;

  _proto.replace = function replace(name, decl, ruleOptions) {
    var oldRule = this.get(name);
    var oldIndex = this.index.indexOf(oldRule);

    if (oldRule) {
      this.remove(oldRule);
    }

    var options = ruleOptions;
    if (oldIndex !== -1) options = (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__["default"])({}, ruleOptions, {
      index: oldIndex
    });
    return this.add(name, decl, options);
  }
  /**
   * Get a rule by name or selector.
   */
  ;

  _proto.get = function get(nameOrSelector) {
    return this.map[nameOrSelector];
  }
  /**
   * Delete a rule.
   */
  ;

  _proto.remove = function remove(rule) {
    this.unregister(rule);
    delete this.raw[rule.key];
    this.index.splice(this.index.indexOf(rule), 1);
  }
  /**
   * Get index of a rule.
   */
  ;

  _proto.indexOf = function indexOf(rule) {
    return this.index.indexOf(rule);
  }
  /**
   * Run `onProcessRule()` plugins on every rule.
   */
  ;

  _proto.process = function process() {
    var plugins = this.options.jss.plugins; // We need to clone array because if we modify the index somewhere else during a loop
    // we end up with very hard-to-track-down side effects.

    this.index.slice(0).forEach(plugins.onProcessRule, plugins);
  }
  /**
   * Register a rule in `.map`, `.classes` and `.keyframes` maps.
   */
  ;

  _proto.register = function register(rule) {
    this.map[rule.key] = rule;

    if (rule instanceof StyleRule) {
      this.map[rule.selector] = rule;
      if (rule.id) this.classes[rule.key] = rule.id;
    } else if (rule instanceof KeyframesRule && this.keyframes) {
      this.keyframes[rule.name] = rule.id;
    }
  }
  /**
   * Unregister a rule.
   */
  ;

  _proto.unregister = function unregister(rule) {
    delete this.map[rule.key];

    if (rule instanceof StyleRule) {
      delete this.map[rule.selector];
      delete this.classes[rule.key];
    } else if (rule instanceof KeyframesRule) {
      delete this.keyframes[rule.name];
    }
  }
  /**
   * Update the function values with a new data.
   */
  ;

  _proto.update = function update() {
    var name;
    var data;
    var options;

    if (typeof (arguments.length <= 0 ? undefined : arguments[0]) === 'string') {
      name = arguments.length <= 0 ? undefined : arguments[0];
      data = arguments.length <= 1 ? undefined : arguments[1];
      options = arguments.length <= 2 ? undefined : arguments[2];
    } else {
      data = arguments.length <= 0 ? undefined : arguments[0];
      options = arguments.length <= 1 ? undefined : arguments[1];
      name = null;
    }

    if (name) {
      this.updateOne(this.get(name), data, options);
    } else {
      for (var index = 0; index < this.index.length; index++) {
        this.updateOne(this.index[index], data, options);
      }
    }
  }
  /**
   * Execute plugins, update rule props.
   */
  ;

  _proto.updateOne = function updateOne(rule, data, options) {
    if (options === void 0) {
      options = defaultUpdateOptions;
    }

    var _this$options2 = this.options,
        plugins = _this$options2.jss.plugins,
        sheet = _this$options2.sheet; // It is a rules container like for e.g. ConditionalRule.

    if (rule.rules instanceof RuleList) {
      rule.rules.update(data, options);
      return;
    }

    var style = rule.style;
    plugins.onUpdate(data, rule, sheet, options); // We rely on a new `style` ref in case it was mutated during onUpdate hook.

    if (options.process && style && style !== rule.style) {
      // We need to run the plugins in case new `style` relies on syntax plugins.
      plugins.onProcessStyle(rule.style, rule, sheet); // Update and add props.

      for (var prop in rule.style) {
        var nextValue = rule.style[prop];
        var prevValue = style[prop]; // We need to use `force: true` because `rule.style` has been updated during onUpdate hook, so `rule.prop()` will not update the CSSOM rule.
        // We do this comparison to avoid unneeded `rule.prop()` calls, since we have the old `style` object here.

        if (nextValue !== prevValue) {
          rule.prop(prop, nextValue, forceUpdateOptions);
        }
      } // Remove props.


      for (var _prop in style) {
        var _nextValue = rule.style[_prop];
        var _prevValue = style[_prop]; // We need to use `force: true` because `rule.style` has been updated during onUpdate hook, so `rule.prop()` will not update the CSSOM rule.
        // We do this comparison to avoid unneeded `rule.prop()` calls, since we have the old `style` object here.

        if (_nextValue == null && _nextValue !== _prevValue) {
          rule.prop(_prop, null, forceUpdateOptions);
        }
      }
    }
  }
  /**
   * Convert rules to a CSS string.
   */
  ;

  _proto.toString = function toString(options) {
    var str = '';
    var sheet = this.options.sheet;
    var link = sheet ? sheet.options.link : false;

    var _getWhitespaceSymbols = getWhitespaceSymbols(options),
        linebreak = _getWhitespaceSymbols.linebreak;

    for (var index = 0; index < this.index.length; index++) {
      var rule = this.index[index];
      var css = rule.toString(options); // No need to render an empty rule.

      if (!css && !link) continue;
      if (str) str += linebreak;
      str += css;
    }

    return str;
  };

  return RuleList;
}();

var StyleSheet =
/*#__PURE__*/
function () {
  function StyleSheet(styles, options) {
    this.attached = false;
    this.deployed = false;
    this.classes = {};
    this.keyframes = {};
    this.options = (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__["default"])({}, options, {
      sheet: this,
      parent: this,
      classes: this.classes,
      keyframes: this.keyframes
    });

    if (options.Renderer) {
      this.renderer = new options.Renderer(this);
    }

    this.rules = new RuleList(this.options);

    for (var name in styles) {
      this.rules.add(name, styles[name]);
    }

    this.rules.process();
  }
  /**
   * Attach renderable to the render tree.
   */


  var _proto = StyleSheet.prototype;

  _proto.attach = function attach() {
    if (this.attached) return this;
    if (this.renderer) this.renderer.attach();
    this.attached = true; // Order is important, because we can't use insertRule API if style element is not attached.

    if (!this.deployed) this.deploy();
    return this;
  }
  /**
   * Remove renderable from render tree.
   */
  ;

  _proto.detach = function detach() {
    if (!this.attached) return this;
    if (this.renderer) this.renderer.detach();
    this.attached = false;
    return this;
  }
  /**
   * Add a rule to the current stylesheet.
   * Will insert a rule also after the stylesheet has been rendered first time.
   */
  ;

  _proto.addRule = function addRule(name, decl, options) {
    var queue = this.queue; // Plugins can create rules.
    // In order to preserve the right order, we need to queue all `.addRule` calls,
    // which happen after the first `rules.add()` call.

    if (this.attached && !queue) this.queue = [];
    var rule = this.rules.add(name, decl, options);
    if (!rule) return null;
    this.options.jss.plugins.onProcessRule(rule);

    if (this.attached) {
      if (!this.deployed) return rule; // Don't insert rule directly if there is no stringified version yet.
      // It will be inserted all together when .attach is called.

      if (queue) queue.push(rule);else {
        this.insertRule(rule);

        if (this.queue) {
          this.queue.forEach(this.insertRule, this);
          this.queue = undefined;
        }
      }
      return rule;
    } // We can't add rules to a detached style node.
    // We will redeploy the sheet once user will attach it.


    this.deployed = false;
    return rule;
  }
  /**
   * Replace a rule in the current stylesheet.
   */
  ;

  _proto.replaceRule = function replaceRule(nameOrSelector, decl, options) {
    var oldRule = this.rules.get(nameOrSelector);
    if (!oldRule) return this.addRule(nameOrSelector, decl, options);
    var newRule = this.rules.replace(nameOrSelector, decl, options);

    if (newRule) {
      this.options.jss.plugins.onProcessRule(newRule);
    }

    if (this.attached) {
      if (!this.deployed) return newRule; // Don't replace / delete rule directly if there is no stringified version yet.
      // It will be inserted all together when .attach is called.

      if (this.renderer) {
        if (!newRule) {
          this.renderer.deleteRule(oldRule);
        } else if (oldRule.renderable) {
          this.renderer.replaceRule(oldRule.renderable, newRule);
        }
      }

      return newRule;
    } // We can't replace rules to a detached style node.
    // We will redeploy the sheet once user will attach it.


    this.deployed = false;
    return newRule;
  }
  /**
   * Insert rule into the StyleSheet
   */
  ;

  _proto.insertRule = function insertRule(rule) {
    if (this.renderer) {
      this.renderer.insertRule(rule);
    }
  }
  /**
   * Create and add rules.
   * Will render also after Style Sheet was rendered the first time.
   */
  ;

  _proto.addRules = function addRules(styles, options) {
    var added = [];

    for (var name in styles) {
      var rule = this.addRule(name, styles[name], options);
      if (rule) added.push(rule);
    }

    return added;
  }
  /**
   * Get a rule by name or selector.
   */
  ;

  _proto.getRule = function getRule(nameOrSelector) {
    return this.rules.get(nameOrSelector);
  }
  /**
   * Delete a rule by name.
   * Returns `true`: if rule has been deleted from the DOM.
   */
  ;

  _proto.deleteRule = function deleteRule(name) {
    var rule = typeof name === 'object' ? name : this.rules.get(name);

    if (!rule || // Style sheet was created without link: true and attached, in this case we
    // won't be able to remove the CSS rule from the DOM.
    this.attached && !rule.renderable) {
      return false;
    }

    this.rules.remove(rule);

    if (this.attached && rule.renderable && this.renderer) {
      return this.renderer.deleteRule(rule.renderable);
    }

    return true;
  }
  /**
   * Get index of a rule.
   */
  ;

  _proto.indexOf = function indexOf(rule) {
    return this.rules.indexOf(rule);
  }
  /**
   * Deploy pure CSS string to a renderable.
   */
  ;

  _proto.deploy = function deploy() {
    if (this.renderer) this.renderer.deploy();
    this.deployed = true;
    return this;
  }
  /**
   * Update the function values with a new data.
   */
  ;

  _proto.update = function update() {
    var _this$rules;

    (_this$rules = this.rules).update.apply(_this$rules, arguments);

    return this;
  }
  /**
   * Updates a single rule.
   */
  ;

  _proto.updateOne = function updateOne(rule, data, options) {
    this.rules.updateOne(rule, data, options);
    return this;
  }
  /**
   * Convert rules to a CSS string.
   */
  ;

  _proto.toString = function toString(options) {
    return this.rules.toString(options);
  };

  return StyleSheet;
}();

var PluginsRegistry =
/*#__PURE__*/
function () {
  function PluginsRegistry() {
    this.plugins = {
      internal: [],
      external: []
    };
    this.registry = {};
  }

  var _proto = PluginsRegistry.prototype;

  /**
   * Call `onCreateRule` hooks and return an object if returned by a hook.
   */
  _proto.onCreateRule = function onCreateRule(name, decl, options) {
    for (var i = 0; i < this.registry.onCreateRule.length; i++) {
      var rule = this.registry.onCreateRule[i](name, decl, options);
      if (rule) return rule;
    }

    return null;
  }
  /**
   * Call `onProcessRule` hooks.
   */
  ;

  _proto.onProcessRule = function onProcessRule(rule) {
    if (rule.isProcessed) return;
    var sheet = rule.options.sheet;

    for (var i = 0; i < this.registry.onProcessRule.length; i++) {
      this.registry.onProcessRule[i](rule, sheet);
    }

    if (rule.style) this.onProcessStyle(rule.style, rule, sheet);
    rule.isProcessed = true;
  }
  /**
   * Call `onProcessStyle` hooks.
   */
  ;

  _proto.onProcessStyle = function onProcessStyle(style, rule, sheet) {
    for (var i = 0; i < this.registry.onProcessStyle.length; i++) {
      rule.style = this.registry.onProcessStyle[i](rule.style, rule, sheet);
    }
  }
  /**
   * Call `onProcessSheet` hooks.
   */
  ;

  _proto.onProcessSheet = function onProcessSheet(sheet) {
    for (var i = 0; i < this.registry.onProcessSheet.length; i++) {
      this.registry.onProcessSheet[i](sheet);
    }
  }
  /**
   * Call `onUpdate` hooks.
   */
  ;

  _proto.onUpdate = function onUpdate(data, rule, sheet, options) {
    for (var i = 0; i < this.registry.onUpdate.length; i++) {
      this.registry.onUpdate[i](data, rule, sheet, options);
    }
  }
  /**
   * Call `onChangeValue` hooks.
   */
  ;

  _proto.onChangeValue = function onChangeValue(value, prop, rule) {
    var processedValue = value;

    for (var i = 0; i < this.registry.onChangeValue.length; i++) {
      processedValue = this.registry.onChangeValue[i](processedValue, prop, rule);
    }

    return processedValue;
  }
  /**
   * Register a plugin.
   */
  ;

  _proto.use = function use(newPlugin, options) {
    if (options === void 0) {
      options = {
        queue: 'external'
      };
    }

    var plugins = this.plugins[options.queue]; // Avoids applying same plugin twice, at least based on ref.

    if (plugins.indexOf(newPlugin) !== -1) {
      return;
    }

    plugins.push(newPlugin);
    this.registry = [].concat(this.plugins.external, this.plugins.internal).reduce(function (registry, plugin) {
      for (var name in plugin) {
        if (name in registry) {
          registry[name].push(plugin[name]);
        } else {
           true ? (0,tiny_warning__WEBPACK_IMPORTED_MODULE_6__["default"])(false, "[JSS] Unknown hook \"" + name + "\".") : 0;
        }
      }

      return registry;
    }, {
      onCreateRule: [],
      onProcessRule: [],
      onProcessStyle: [],
      onProcessSheet: [],
      onChangeValue: [],
      onUpdate: []
    });
  };

  return PluginsRegistry;
}();

/**
 * Sheets registry to access all instances in one place.
 */

var SheetsRegistry =
/*#__PURE__*/
function () {
  function SheetsRegistry() {
    this.registry = [];
  }

  var _proto = SheetsRegistry.prototype;

  /**
   * Register a Style Sheet.
   */
  _proto.add = function add(sheet) {
    var registry = this.registry;
    var index = sheet.options.index;
    if (registry.indexOf(sheet) !== -1) return;

    if (registry.length === 0 || index >= this.index) {
      registry.push(sheet);
      return;
    } // Find a position.


    for (var i = 0; i < registry.length; i++) {
      if (registry[i].options.index > index) {
        registry.splice(i, 0, sheet);
        return;
      }
    }
  }
  /**
   * Reset the registry.
   */
  ;

  _proto.reset = function reset() {
    this.registry = [];
  }
  /**
   * Remove a Style Sheet.
   */
  ;

  _proto.remove = function remove(sheet) {
    var index = this.registry.indexOf(sheet);
    this.registry.splice(index, 1);
  }
  /**
   * Convert all attached sheets to a CSS string.
   */
  ;

  _proto.toString = function toString(_temp) {
    var _ref = _temp === void 0 ? {} : _temp,
        attached = _ref.attached,
        options = (0,_babel_runtime_helpers_esm_objectWithoutPropertiesLoose__WEBPACK_IMPORTED_MODULE_5__["default"])(_ref, ["attached"]);

    var _getWhitespaceSymbols = getWhitespaceSymbols(options),
        linebreak = _getWhitespaceSymbols.linebreak;

    var css = '';

    for (var i = 0; i < this.registry.length; i++) {
      var sheet = this.registry[i];

      if (attached != null && sheet.attached !== attached) {
        continue;
      }

      if (css) css += linebreak;
      css += sheet.toString(options);
    }

    return css;
  };

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__["default"])(SheetsRegistry, [{
    key: "index",

    /**
     * Current highest index number.
     */
    get: function get() {
      return this.registry.length === 0 ? 0 : this.registry[this.registry.length - 1].options.index;
    }
  }]);

  return SheetsRegistry;
}();

/**
 * This is a global sheets registry. Only DomRenderer will add sheets to it.
 * On the server one should use an own SheetsRegistry instance and add the
 * sheets to it, because you need to make sure to create a new registry for
 * each request in order to not leak sheets across requests.
 */

var sheets = new SheetsRegistry();

/* eslint-disable */

/**
 * Now that `globalThis` is available on most platforms
 * (https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/globalThis#browser_compatibility)
 * we check for `globalThis` first. `globalThis` is necessary for jss
 * to run in Agoric's secure version of JavaScript (SES). Under SES,
 * `globalThis` exists, but `window`, `self`, and `Function('return
 * this')()` are all undefined for security reasons.
 *
 * https://github.com/zloirock/core-js/issues/86#issuecomment-115759028
 */
var globalThis$1 = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' && window.Math === Math ? window : typeof self !== 'undefined' && self.Math === Math ? self : Function('return this')();

var ns = '2f1acc6c3a606b082e5eef5e54414ffb';
if (globalThis$1[ns] == null) globalThis$1[ns] = 0; // Bundle may contain multiple JSS versions at the same time. In order to identify
// the current version with just one short number and use it for classes generation
// we use a counter. Also it is more accurate, because user can manually reevaluate
// the module.

var moduleId = globalThis$1[ns]++;

var maxRules = 1e10;
/**
 * Returns a function which generates unique class names based on counters.
 * When new generator function is created, rule counter is reseted.
 * We need to reset the rule counter for SSR for each request.
 */

var createGenerateId = function createGenerateId(options) {
  if (options === void 0) {
    options = {};
  }

  var ruleCounter = 0;

  var generateId = function generateId(rule, sheet) {
    ruleCounter += 1;

    if (ruleCounter > maxRules) {
       true ? (0,tiny_warning__WEBPACK_IMPORTED_MODULE_6__["default"])(false, "[JSS] You might have a memory leak. Rule counter is at " + ruleCounter + ".") : 0;
    }

    var jssId = '';
    var prefix = '';

    if (sheet) {
      if (sheet.options.classNamePrefix) {
        prefix = sheet.options.classNamePrefix;
      }

      if (sheet.options.jss.id != null) {
        jssId = String(sheet.options.jss.id);
      }
    }

    if (options.minify) {
      // Using "c" because a number can't be the first char in a class name.
      return "" + (prefix || 'c') + moduleId + jssId + ruleCounter;
    }

    return prefix + rule.key + "-" + moduleId + (jssId ? "-" + jssId : '') + "-" + ruleCounter;
  };

  return generateId;
};

/**
 * Cache the value from the first time a function is called.
 */

var memoize = function memoize(fn) {
  var value;
  return function () {
    if (!value) value = fn();
    return value;
  };
};
/**
 * Get a style property value.
 */


var getPropertyValue = function getPropertyValue(cssRule, prop) {
  try {
    // Support CSSTOM.
    if (cssRule.attributeStyleMap) {
      return cssRule.attributeStyleMap.get(prop);
    }

    return cssRule.style.getPropertyValue(prop);
  } catch (err) {
    // IE may throw if property is unknown.
    return '';
  }
};
/**
 * Set a style property.
 */


var setProperty = function setProperty(cssRule, prop, value) {
  try {
    var cssValue = value;

    if (Array.isArray(value)) {
      cssValue = toCssValue(value);
    } // Support CSSTOM.


    if (cssRule.attributeStyleMap) {
      cssRule.attributeStyleMap.set(prop, cssValue);
    } else {
      var indexOfImportantFlag = cssValue ? cssValue.indexOf('!important') : -1;
      var cssValueWithoutImportantFlag = indexOfImportantFlag > -1 ? cssValue.substr(0, indexOfImportantFlag - 1) : cssValue;
      cssRule.style.setProperty(prop, cssValueWithoutImportantFlag, indexOfImportantFlag > -1 ? 'important' : '');
    }
  } catch (err) {
    // IE may throw if property is unknown.
    return false;
  }

  return true;
};
/**
 * Remove a style property.
 */


var removeProperty = function removeProperty(cssRule, prop) {
  try {
    // Support CSSTOM.
    if (cssRule.attributeStyleMap) {
      cssRule.attributeStyleMap.delete(prop);
    } else {
      cssRule.style.removeProperty(prop);
    }
  } catch (err) {
     true ? (0,tiny_warning__WEBPACK_IMPORTED_MODULE_6__["default"])(false, "[JSS] DOMException \"" + err.message + "\" was thrown. Tried to remove property \"" + prop + "\".") : 0;
  }
};
/**
 * Set the selector.
 */


var setSelector = function setSelector(cssRule, selectorText) {
  cssRule.selectorText = selectorText; // Return false if setter was not successful.
  // Currently works in chrome only.

  return cssRule.selectorText === selectorText;
};
/**
 * Gets the `head` element upon the first call and caches it.
 * We assume it can't be null.
 */


var getHead = memoize(function () {
  return document.querySelector('head');
});
/**
 * Find attached sheet with an index higher than the passed one.
 */

function findHigherSheet(registry, options) {
  for (var i = 0; i < registry.length; i++) {
    var sheet = registry[i];

    if (sheet.attached && sheet.options.index > options.index && sheet.options.insertionPoint === options.insertionPoint) {
      return sheet;
    }
  }

  return null;
}
/**
 * Find attached sheet with the highest index.
 */


function findHighestSheet(registry, options) {
  for (var i = registry.length - 1; i >= 0; i--) {
    var sheet = registry[i];

    if (sheet.attached && sheet.options.insertionPoint === options.insertionPoint) {
      return sheet;
    }
  }

  return null;
}
/**
 * Find a comment with "jss" inside.
 */


function findCommentNode(text) {
  var head = getHead();

  for (var i = 0; i < head.childNodes.length; i++) {
    var node = head.childNodes[i];

    if (node.nodeType === 8 && node.nodeValue.trim() === text) {
      return node;
    }
  }

  return null;
}
/**
 * Find a node before which we can insert the sheet.
 */


function findPrevNode(options) {
  var registry = sheets.registry;

  if (registry.length > 0) {
    // Try to insert before the next higher sheet.
    var sheet = findHigherSheet(registry, options);

    if (sheet && sheet.renderer) {
      return {
        parent: sheet.renderer.element.parentNode,
        node: sheet.renderer.element
      };
    } // Otherwise insert after the last attached.


    sheet = findHighestSheet(registry, options);

    if (sheet && sheet.renderer) {
      return {
        parent: sheet.renderer.element.parentNode,
        node: sheet.renderer.element.nextSibling
      };
    }
  } // Try to find a comment placeholder if registry is empty.


  var insertionPoint = options.insertionPoint;

  if (insertionPoint && typeof insertionPoint === 'string') {
    var comment = findCommentNode(insertionPoint);

    if (comment) {
      return {
        parent: comment.parentNode,
        node: comment.nextSibling
      };
    } // If user specifies an insertion point and it can't be found in the document -
    // bad specificity issues may appear.


     true ? (0,tiny_warning__WEBPACK_IMPORTED_MODULE_6__["default"])(false, "[JSS] Insertion point \"" + insertionPoint + "\" not found.") : 0;
  }

  return false;
}
/**
 * Insert style element into the DOM.
 */


function insertStyle(style, options) {
  var insertionPoint = options.insertionPoint;
  var nextNode = findPrevNode(options);

  if (nextNode !== false && nextNode.parent) {
    nextNode.parent.insertBefore(style, nextNode.node);
    return;
  } // Works with iframes and any node types.


  if (insertionPoint && typeof insertionPoint.nodeType === 'number') {
    var insertionPointElement = insertionPoint;
    var parentNode = insertionPointElement.parentNode;
    if (parentNode) parentNode.insertBefore(style, insertionPointElement.nextSibling);else  true ? (0,tiny_warning__WEBPACK_IMPORTED_MODULE_6__["default"])(false, '[JSS] Insertion point is not in the DOM.') : 0;
    return;
  }

  getHead().appendChild(style);
}
/**
 * Read jss nonce setting from the page if the user has set it.
 */


var getNonce = memoize(function () {
  var node = document.querySelector('meta[property="csp-nonce"]');
  return node ? node.getAttribute('content') : null;
});

var _insertRule = function insertRule(container, rule, index) {
  try {
    if ('insertRule' in container) {
      container.insertRule(rule, index);
    } // Keyframes rule.
    else if ('appendRule' in container) {
        container.appendRule(rule);
      }
  } catch (err) {
     true ? (0,tiny_warning__WEBPACK_IMPORTED_MODULE_6__["default"])(false, "[JSS] " + err.message) : 0;
    return false;
  }

  return container.cssRules[index];
};

var getValidRuleInsertionIndex = function getValidRuleInsertionIndex(container, index) {
  var maxIndex = container.cssRules.length; // In case previous insertion fails, passed index might be wrong

  if (index === undefined || index > maxIndex) {
    // eslint-disable-next-line no-param-reassign
    return maxIndex;
  }

  return index;
};

var createStyle = function createStyle() {
  var el = document.createElement('style'); // Without it, IE will have a broken source order specificity if we
  // insert rules after we insert the style tag.
  // It seems to kick-off the source order specificity algorithm.

  el.textContent = '\n';
  return el;
};

var DomRenderer =
/*#__PURE__*/
function () {
  // Will be empty if link: true option is not set, because
  // it is only for use together with insertRule API.
  function DomRenderer(sheet) {
    this.getPropertyValue = getPropertyValue;
    this.setProperty = setProperty;
    this.removeProperty = removeProperty;
    this.setSelector = setSelector;
    this.hasInsertedRules = false;
    this.cssRules = [];
    // There is no sheet when the renderer is used from a standalone StyleRule.
    if (sheet) sheets.add(sheet);
    this.sheet = sheet;

    var _ref = this.sheet ? this.sheet.options : {},
        media = _ref.media,
        meta = _ref.meta,
        element = _ref.element;

    this.element = element || createStyle();
    this.element.setAttribute('data-jss', '');
    if (media) this.element.setAttribute('media', media);
    if (meta) this.element.setAttribute('data-meta', meta);
    var nonce = getNonce();
    if (nonce) this.element.setAttribute('nonce', nonce);
  }
  /**
   * Insert style element into render tree.
   */


  var _proto = DomRenderer.prototype;

  _proto.attach = function attach() {
    // In the case the element node is external and it is already in the DOM.
    if (this.element.parentNode || !this.sheet) return;
    insertStyle(this.element, this.sheet.options); // When rules are inserted using `insertRule` API, after `sheet.detach().attach()`
    // most browsers create a new CSSStyleSheet, except of all IEs.

    var deployed = Boolean(this.sheet && this.sheet.deployed);

    if (this.hasInsertedRules && deployed) {
      this.hasInsertedRules = false;
      this.deploy();
    }
  }
  /**
   * Remove style element from render tree.
   */
  ;

  _proto.detach = function detach() {
    if (!this.sheet) return;
    var parentNode = this.element.parentNode;
    if (parentNode) parentNode.removeChild(this.element); // In the most browsers, rules inserted using insertRule() API will be lost when style element is removed.
    // Though IE will keep them and we need a consistent behavior.

    if (this.sheet.options.link) {
      this.cssRules = [];
      this.element.textContent = '\n';
    }
  }
  /**
   * Inject CSS string into element.
   */
  ;

  _proto.deploy = function deploy() {
    var sheet = this.sheet;
    if (!sheet) return;

    if (sheet.options.link) {
      this.insertRules(sheet.rules);
      return;
    }

    this.element.textContent = "\n" + sheet.toString() + "\n";
  }
  /**
   * Insert RuleList into an element.
   */
  ;

  _proto.insertRules = function insertRules(rules, nativeParent) {
    for (var i = 0; i < rules.index.length; i++) {
      this.insertRule(rules.index[i], i, nativeParent);
    }
  }
  /**
   * Insert a rule into element.
   */
  ;

  _proto.insertRule = function insertRule(rule, index, nativeParent) {
    if (nativeParent === void 0) {
      nativeParent = this.element.sheet;
    }

    if (rule.rules) {
      var parent = rule;
      var latestNativeParent = nativeParent;

      if (rule.type === 'conditional' || rule.type === 'keyframes') {
        var _insertionIndex = getValidRuleInsertionIndex(nativeParent, index); // We need to render the container without children first.


        latestNativeParent = _insertRule(nativeParent, parent.toString({
          children: false
        }), _insertionIndex);

        if (latestNativeParent === false) {
          return false;
        }

        this.refCssRule(rule, _insertionIndex, latestNativeParent);
      }

      this.insertRules(parent.rules, latestNativeParent);
      return latestNativeParent;
    }

    var ruleStr = rule.toString();
    if (!ruleStr) return false;
    var insertionIndex = getValidRuleInsertionIndex(nativeParent, index);

    var nativeRule = _insertRule(nativeParent, ruleStr, insertionIndex);

    if (nativeRule === false) {
      return false;
    }

    this.hasInsertedRules = true;
    this.refCssRule(rule, insertionIndex, nativeRule);
    return nativeRule;
  };

  _proto.refCssRule = function refCssRule(rule, index, cssRule) {
    rule.renderable = cssRule; // We only want to reference the top level rules, deleteRule API doesn't support removing nested rules
    // like rules inside media queries or keyframes

    if (rule.options.parent instanceof StyleSheet) {
      this.cssRules.splice(index, 0, cssRule);
    }
  }
  /**
   * Delete a rule.
   */
  ;

  _proto.deleteRule = function deleteRule(cssRule) {
    var sheet = this.element.sheet;
    var index = this.indexOf(cssRule);
    if (index === -1) return false;
    sheet.deleteRule(index);
    this.cssRules.splice(index, 1);
    return true;
  }
  /**
   * Get index of a CSS Rule.
   */
  ;

  _proto.indexOf = function indexOf(cssRule) {
    return this.cssRules.indexOf(cssRule);
  }
  /**
   * Generate a new CSS rule and replace the existing one.
   */
  ;

  _proto.replaceRule = function replaceRule(cssRule, rule) {
    var index = this.indexOf(cssRule);
    if (index === -1) return false;
    this.element.sheet.deleteRule(index);
    this.cssRules.splice(index, 1);
    return this.insertRule(rule, index);
  }
  /**
   * Get all rules elements.
   */
  ;

  _proto.getRules = function getRules() {
    return this.element.sheet.cssRules;
  };

  return DomRenderer;
}();

var instanceCounter = 0;

var Jss =
/*#__PURE__*/
function () {
  function Jss(options) {
    this.id = instanceCounter++;
    this.version = "10.10.0";
    this.plugins = new PluginsRegistry();
    this.options = {
      id: {
        minify: false
      },
      createGenerateId: createGenerateId,
      Renderer: is_in_browser__WEBPACK_IMPORTED_MODULE_1__["default"] ? DomRenderer : null,
      plugins: []
    };
    this.generateId = createGenerateId({
      minify: false
    });

    for (var i = 0; i < plugins.length; i++) {
      this.plugins.use(plugins[i], {
        queue: 'internal'
      });
    }

    this.setup(options);
  }
  /**
   * Prepares various options, applies plugins.
   * Should not be used twice on the same instance, because there is no plugins
   * deduplication logic.
   */


  var _proto = Jss.prototype;

  _proto.setup = function setup(options) {
    if (options === void 0) {
      options = {};
    }

    if (options.createGenerateId) {
      this.options.createGenerateId = options.createGenerateId;
    }

    if (options.id) {
      this.options.id = (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__["default"])({}, this.options.id, options.id);
    }

    if (options.createGenerateId || options.id) {
      this.generateId = this.options.createGenerateId(this.options.id);
    }

    if (options.insertionPoint != null) this.options.insertionPoint = options.insertionPoint;

    if ('Renderer' in options) {
      this.options.Renderer = options.Renderer;
    } // eslint-disable-next-line prefer-spread


    if (options.plugins) this.use.apply(this, options.plugins);
    return this;
  }
  /**
   * Create a Style Sheet.
   */
  ;

  _proto.createStyleSheet = function createStyleSheet(styles, options) {
    if (options === void 0) {
      options = {};
    }

    var _options = options,
        index = _options.index;

    if (typeof index !== 'number') {
      index = sheets.index === 0 ? 0 : sheets.index + 1;
    }

    var sheet = new StyleSheet(styles, (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__["default"])({}, options, {
      jss: this,
      generateId: options.generateId || this.generateId,
      insertionPoint: this.options.insertionPoint,
      Renderer: this.options.Renderer,
      index: index
    }));
    this.plugins.onProcessSheet(sheet);
    return sheet;
  }
  /**
   * Detach the Style Sheet and remove it from the registry.
   */
  ;

  _proto.removeStyleSheet = function removeStyleSheet(sheet) {
    sheet.detach();
    sheets.remove(sheet);
    return this;
  }
  /**
   * Create a rule without a Style Sheet.
   * [Deprecated] will be removed in the next major version.
   */
  ;

  _proto.createRule = function createRule$1(name, style, options) {
    if (style === void 0) {
      style = {};
    }

    if (options === void 0) {
      options = {};
    }

    // Enable rule without name for inline styles.
    if (typeof name === 'object') {
      return this.createRule(undefined, name, style);
    }

    var ruleOptions = (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__["default"])({}, options, {
      name: name,
      jss: this,
      Renderer: this.options.Renderer
    });

    if (!ruleOptions.generateId) ruleOptions.generateId = this.generateId;
    if (!ruleOptions.classes) ruleOptions.classes = {};
    if (!ruleOptions.keyframes) ruleOptions.keyframes = {};

    var rule = createRule(name, style, ruleOptions);

    if (rule) this.plugins.onProcessRule(rule);
    return rule;
  }
  /**
   * Register plugin. Passed function will be invoked with a rule instance.
   */
  ;

  _proto.use = function use() {
    var _this = this;

    for (var _len = arguments.length, plugins = new Array(_len), _key = 0; _key < _len; _key++) {
      plugins[_key] = arguments[_key];
    }

    plugins.forEach(function (plugin) {
      _this.plugins.use(plugin);
    });
    return this;
  };

  return Jss;
}();

var createJss = function createJss(options) {
  return new Jss(options);
};

/**
 * SheetsManager is like a WeakMap which is designed to count StyleSheet
 * instances and attach/detach automatically.
 * Used in react-jss.
 */

var SheetsManager =
/*#__PURE__*/
function () {
  function SheetsManager() {
    this.length = 0;
    this.sheets = new WeakMap();
  }

  var _proto = SheetsManager.prototype;

  _proto.get = function get(key) {
    var entry = this.sheets.get(key);
    return entry && entry.sheet;
  };

  _proto.add = function add(key, sheet) {
    if (this.sheets.has(key)) return;
    this.length++;
    this.sheets.set(key, {
      sheet: sheet,
      refs: 0
    });
  };

  _proto.manage = function manage(key) {
    var entry = this.sheets.get(key);

    if (entry) {
      if (entry.refs === 0) {
        entry.sheet.attach();
      }

      entry.refs++;
      return entry.sheet;
    }

    (0,tiny_warning__WEBPACK_IMPORTED_MODULE_6__["default"])(false, "[JSS] SheetsManager: can't find sheet to manage");
    return undefined;
  };

  _proto.unmanage = function unmanage(key) {
    var entry = this.sheets.get(key);

    if (entry) {
      if (entry.refs > 0) {
        entry.refs--;
        if (entry.refs === 0) entry.sheet.detach();
      }
    } else {
      (0,tiny_warning__WEBPACK_IMPORTED_MODULE_6__["default"])(false, "SheetsManager: can't find sheet to unmanage");
    }
  };

  (0,_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__["default"])(SheetsManager, [{
    key: "size",
    get: function get() {
      return this.length;
    }
  }]);

  return SheetsManager;
}();

/**
* Export a constant indicating if this browser has CSSTOM support.
* https://developers.google.com/web/updates/2018/03/cssom
*/
var hasCSSTOMSupport = typeof CSS === 'object' && CSS != null && 'number' in CSS;

/**
 * Extracts a styles object with only props that contain function values.
 */
function getDynamicStyles(styles) {
  var to = null;

  for (var key in styles) {
    var value = styles[key];
    var type = typeof value;

    if (type === 'function') {
      if (!to) to = {};
      to[key] = value;
    } else if (type === 'object' && value !== null && !Array.isArray(value)) {
      var extracted = getDynamicStyles(value);

      if (extracted) {
        if (!to) to = {};
        to[key] = extracted;
      }
    }
  }

  return to;
}

/**
 * A better abstraction over CSS.
 *
 * @copyright Oleg Isonen (Slobodskoi) / Isonen 2014-present
 * @website https://github.com/cssinjs/jss
 * @license MIT
 */
var index = createJss();

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (index);



/***/ }),

/***/ "./node_modules/sdp/sdp.js":
/*!*********************************!*\
  !*** ./node_modules/sdp/sdp.js ***!
  \*********************************/
/***/ ((module) => {

/* eslint-env node */


// SDP helpers.
const SDPUtils = {};

// Generate an alphanumeric identifier for cname or mids.
// TODO: use UUIDs instead? https://gist.github.com/jed/982883
SDPUtils.generateIdentifier = function() {
  return Math.random().toString(36).substring(2, 12);
};

// The RTCP CNAME used by all peerconnections from the same JS.
SDPUtils.localCName = SDPUtils.generateIdentifier();

// Splits SDP into lines, dealing with both CRLF and LF.
SDPUtils.splitLines = function(blob) {
  return blob.trim().split('\n').map(line => line.trim());
};
// Splits SDP into sessionpart and mediasections. Ensures CRLF.
SDPUtils.splitSections = function(blob) {
  const parts = blob.split('\nm=');
  return parts.map((part, index) => (index > 0 ?
    'm=' + part : part).trim() + '\r\n');
};

// Returns the session description.
SDPUtils.getDescription = function(blob) {
  const sections = SDPUtils.splitSections(blob);
  return sections && sections[0];
};

// Returns the individual media sections.
SDPUtils.getMediaSections = function(blob) {
  const sections = SDPUtils.splitSections(blob);
  sections.shift();
  return sections;
};

// Returns lines that start with a certain prefix.
SDPUtils.matchPrefix = function(blob, prefix) {
  return SDPUtils.splitLines(blob).filter(line => line.indexOf(prefix) === 0);
};

// Parses an ICE candidate line. Sample input:
// candidate:702786350 2 udp 41819902 8.8.8.8 60769 typ relay raddr 8.8.8.8
// rport 55996"
// Input can be prefixed with a=.
SDPUtils.parseCandidate = function(line) {
  let parts;
  // Parse both variants.
  if (line.indexOf('a=candidate:') === 0) {
    parts = line.substring(12).split(' ');
  } else {
    parts = line.substring(10).split(' ');
  }

  const candidate = {
    foundation: parts[0],
    component: {1: 'rtp', 2: 'rtcp'}[parts[1]] || parts[1],
    protocol: parts[2].toLowerCase(),
    priority: parseInt(parts[3], 10),
    ip: parts[4],
    address: parts[4], // address is an alias for ip.
    port: parseInt(parts[5], 10),
    // skip parts[6] == 'typ'
    type: parts[7],
  };

  for (let i = 8; i < parts.length; i += 2) {
    switch (parts[i]) {
      case 'raddr':
        candidate.relatedAddress = parts[i + 1];
        break;
      case 'rport':
        candidate.relatedPort = parseInt(parts[i + 1], 10);
        break;
      case 'tcptype':
        candidate.tcpType = parts[i + 1];
        break;
      case 'ufrag':
        candidate.ufrag = parts[i + 1]; // for backward compatibility.
        candidate.usernameFragment = parts[i + 1];
        break;
      default: // extension handling, in particular ufrag. Don't overwrite.
        if (candidate[parts[i]] === undefined) {
          candidate[parts[i]] = parts[i + 1];
        }
        break;
    }
  }
  return candidate;
};

// Translates a candidate object into SDP candidate attribute.
// This does not include the a= prefix!
SDPUtils.writeCandidate = function(candidate) {
  const sdp = [];
  sdp.push(candidate.foundation);

  const component = candidate.component;
  if (component === 'rtp') {
    sdp.push(1);
  } else if (component === 'rtcp') {
    sdp.push(2);
  } else {
    sdp.push(component);
  }
  sdp.push(candidate.protocol.toUpperCase());
  sdp.push(candidate.priority);
  sdp.push(candidate.address || candidate.ip);
  sdp.push(candidate.port);

  const type = candidate.type;
  sdp.push('typ');
  sdp.push(type);
  if (type !== 'host' && candidate.relatedAddress &&
      candidate.relatedPort) {
    sdp.push('raddr');
    sdp.push(candidate.relatedAddress);
    sdp.push('rport');
    sdp.push(candidate.relatedPort);
  }
  if (candidate.tcpType && candidate.protocol.toLowerCase() === 'tcp') {
    sdp.push('tcptype');
    sdp.push(candidate.tcpType);
  }
  if (candidate.usernameFragment || candidate.ufrag) {
    sdp.push('ufrag');
    sdp.push(candidate.usernameFragment || candidate.ufrag);
  }
  return 'candidate:' + sdp.join(' ');
};

// Parses an ice-options line, returns an array of option tags.
// Sample input:
// a=ice-options:foo bar
SDPUtils.parseIceOptions = function(line) {
  return line.substring(14).split(' ');
};

// Parses a rtpmap line, returns RTCRtpCoddecParameters. Sample input:
// a=rtpmap:111 opus/48000/2
SDPUtils.parseRtpMap = function(line) {
  let parts = line.substring(9).split(' ');
  const parsed = {
    payloadType: parseInt(parts.shift(), 10), // was: id
  };

  parts = parts[0].split('/');

  parsed.name = parts[0];
  parsed.clockRate = parseInt(parts[1], 10); // was: clockrate
  parsed.channels = parts.length === 3 ? parseInt(parts[2], 10) : 1;
  // legacy alias, got renamed back to channels in ORTC.
  parsed.numChannels = parsed.channels;
  return parsed;
};

// Generates a rtpmap line from RTCRtpCodecCapability or
// RTCRtpCodecParameters.
SDPUtils.writeRtpMap = function(codec) {
  let pt = codec.payloadType;
  if (codec.preferredPayloadType !== undefined) {
    pt = codec.preferredPayloadType;
  }
  const channels = codec.channels || codec.numChannels || 1;
  return 'a=rtpmap:' + pt + ' ' + codec.name + '/' + codec.clockRate +
      (channels !== 1 ? '/' + channels : '') + '\r\n';
};

// Parses a extmap line (headerextension from RFC 5285). Sample input:
// a=extmap:2 urn:ietf:params:rtp-hdrext:toffset
// a=extmap:2/sendonly urn:ietf:params:rtp-hdrext:toffset
SDPUtils.parseExtmap = function(line) {
  const parts = line.substring(9).split(' ');
  return {
    id: parseInt(parts[0], 10),
    direction: parts[0].indexOf('/') > 0 ? parts[0].split('/')[1] : 'sendrecv',
    uri: parts[1],
    attributes: parts.slice(2).join(' '),
  };
};

// Generates an extmap line from RTCRtpHeaderExtensionParameters or
// RTCRtpHeaderExtension.
SDPUtils.writeExtmap = function(headerExtension) {
  return 'a=extmap:' + (headerExtension.id || headerExtension.preferredId) +
      (headerExtension.direction && headerExtension.direction !== 'sendrecv'
        ? '/' + headerExtension.direction
        : '') +
      ' ' + headerExtension.uri +
      (headerExtension.attributes ? ' ' + headerExtension.attributes : '') +
      '\r\n';
};

// Parses a fmtp line, returns dictionary. Sample input:
// a=fmtp:96 vbr=on;cng=on
// Also deals with vbr=on; cng=on
SDPUtils.parseFmtp = function(line) {
  const parsed = {};
  let kv;
  const parts = line.substring(line.indexOf(' ') + 1).split(';');
  for (let j = 0; j < parts.length; j++) {
    kv = parts[j].trim().split('=');
    parsed[kv[0].trim()] = kv[1];
  }
  return parsed;
};

// Generates a fmtp line from RTCRtpCodecCapability or RTCRtpCodecParameters.
SDPUtils.writeFmtp = function(codec) {
  let line = '';
  let pt = codec.payloadType;
  if (codec.preferredPayloadType !== undefined) {
    pt = codec.preferredPayloadType;
  }
  if (codec.parameters && Object.keys(codec.parameters).length) {
    const params = [];
    Object.keys(codec.parameters).forEach(param => {
      if (codec.parameters[param] !== undefined) {
        params.push(param + '=' + codec.parameters[param]);
      } else {
        params.push(param);
      }
    });
    line += 'a=fmtp:' + pt + ' ' + params.join(';') + '\r\n';
  }
  return line;
};

// Parses a rtcp-fb line, returns RTCPRtcpFeedback object. Sample input:
// a=rtcp-fb:98 nack rpsi
SDPUtils.parseRtcpFb = function(line) {
  const parts = line.substring(line.indexOf(' ') + 1).split(' ');
  return {
    type: parts.shift(),
    parameter: parts.join(' '),
  };
};

// Generate a=rtcp-fb lines from RTCRtpCodecCapability or RTCRtpCodecParameters.
SDPUtils.writeRtcpFb = function(codec) {
  let lines = '';
  let pt = codec.payloadType;
  if (codec.preferredPayloadType !== undefined) {
    pt = codec.preferredPayloadType;
  }
  if (codec.rtcpFeedback && codec.rtcpFeedback.length) {
    // FIXME: special handling for trr-int?
    codec.rtcpFeedback.forEach(fb => {
      lines += 'a=rtcp-fb:' + pt + ' ' + fb.type +
      (fb.parameter && fb.parameter.length ? ' ' + fb.parameter : '') +
          '\r\n';
    });
  }
  return lines;
};

// Parses a RFC 5576 ssrc media attribute. Sample input:
// a=ssrc:3735928559 cname:something
SDPUtils.parseSsrcMedia = function(line) {
  const sp = line.indexOf(' ');
  const parts = {
    ssrc: parseInt(line.substring(7, sp), 10),
  };
  const colon = line.indexOf(':', sp);
  if (colon > -1) {
    parts.attribute = line.substring(sp + 1, colon);
    parts.value = line.substring(colon + 1);
  } else {
    parts.attribute = line.substring(sp + 1);
  }
  return parts;
};

// Parse a ssrc-group line (see RFC 5576). Sample input:
// a=ssrc-group:semantics 12 34
SDPUtils.parseSsrcGroup = function(line) {
  const parts = line.substring(13).split(' ');
  return {
    semantics: parts.shift(),
    ssrcs: parts.map(ssrc => parseInt(ssrc, 10)),
  };
};

// Extracts the MID (RFC 5888) from a media section.
// Returns the MID or undefined if no mid line was found.
SDPUtils.getMid = function(mediaSection) {
  const mid = SDPUtils.matchPrefix(mediaSection, 'a=mid:')[0];
  if (mid) {
    return mid.substring(6);
  }
};

// Parses a fingerprint line for DTLS-SRTP.
SDPUtils.parseFingerprint = function(line) {
  const parts = line.substring(14).split(' ');
  return {
    algorithm: parts[0].toLowerCase(), // algorithm is case-sensitive in Edge.
    value: parts[1].toUpperCase(), // the definition is upper-case in RFC 4572.
  };
};

// Extracts DTLS parameters from SDP media section or sessionpart.
// FIXME: for consistency with other functions this should only
//   get the fingerprint line as input. See also getIceParameters.
SDPUtils.getDtlsParameters = function(mediaSection, sessionpart) {
  const lines = SDPUtils.matchPrefix(mediaSection + sessionpart,
    'a=fingerprint:');
  // Note: a=setup line is ignored since we use the 'auto' role in Edge.
  return {
    role: 'auto',
    fingerprints: lines.map(SDPUtils.parseFingerprint),
  };
};

// Serializes DTLS parameters to SDP.
SDPUtils.writeDtlsParameters = function(params, setupType) {
  let sdp = 'a=setup:' + setupType + '\r\n';
  params.fingerprints.forEach(fp => {
    sdp += 'a=fingerprint:' + fp.algorithm + ' ' + fp.value + '\r\n';
  });
  return sdp;
};

// Parses a=crypto lines into
//   https://rawgit.com/aboba/edgertc/master/msortc-rs4.html#dictionary-rtcsrtpsdesparameters-members
SDPUtils.parseCryptoLine = function(line) {
  const parts = line.substring(9).split(' ');
  return {
    tag: parseInt(parts[0], 10),
    cryptoSuite: parts[1],
    keyParams: parts[2],
    sessionParams: parts.slice(3),
  };
};

SDPUtils.writeCryptoLine = function(parameters) {
  return 'a=crypto:' + parameters.tag + ' ' +
    parameters.cryptoSuite + ' ' +
    (typeof parameters.keyParams === 'object'
      ? SDPUtils.writeCryptoKeyParams(parameters.keyParams)
      : parameters.keyParams) +
    (parameters.sessionParams ? ' ' + parameters.sessionParams.join(' ') : '') +
    '\r\n';
};

// Parses the crypto key parameters into
//   https://rawgit.com/aboba/edgertc/master/msortc-rs4.html#rtcsrtpkeyparam*
SDPUtils.parseCryptoKeyParams = function(keyParams) {
  if (keyParams.indexOf('inline:') !== 0) {
    return null;
  }
  const parts = keyParams.substring(7).split('|');
  return {
    keyMethod: 'inline',
    keySalt: parts[0],
    lifeTime: parts[1],
    mkiValue: parts[2] ? parts[2].split(':')[0] : undefined,
    mkiLength: parts[2] ? parts[2].split(':')[1] : undefined,
  };
};

SDPUtils.writeCryptoKeyParams = function(keyParams) {
  return keyParams.keyMethod + ':'
    + keyParams.keySalt +
    (keyParams.lifeTime ? '|' + keyParams.lifeTime : '') +
    (keyParams.mkiValue && keyParams.mkiLength
      ? '|' + keyParams.mkiValue + ':' + keyParams.mkiLength
      : '');
};

// Extracts all SDES parameters.
SDPUtils.getCryptoParameters = function(mediaSection, sessionpart) {
  const lines = SDPUtils.matchPrefix(mediaSection + sessionpart,
    'a=crypto:');
  return lines.map(SDPUtils.parseCryptoLine);
};

// Parses ICE information from SDP media section or sessionpart.
// FIXME: for consistency with other functions this should only
//   get the ice-ufrag and ice-pwd lines as input.
SDPUtils.getIceParameters = function(mediaSection, sessionpart) {
  const ufrag = SDPUtils.matchPrefix(mediaSection + sessionpart,
    'a=ice-ufrag:')[0];
  const pwd = SDPUtils.matchPrefix(mediaSection + sessionpart,
    'a=ice-pwd:')[0];
  if (!(ufrag && pwd)) {
    return null;
  }
  return {
    usernameFragment: ufrag.substring(12),
    password: pwd.substring(10),
  };
};

// Serializes ICE parameters to SDP.
SDPUtils.writeIceParameters = function(params) {
  let sdp = 'a=ice-ufrag:' + params.usernameFragment + '\r\n' +
      'a=ice-pwd:' + params.password + '\r\n';
  if (params.iceLite) {
    sdp += 'a=ice-lite\r\n';
  }
  return sdp;
};

// Parses the SDP media section and returns RTCRtpParameters.
SDPUtils.parseRtpParameters = function(mediaSection) {
  const description = {
    codecs: [],
    headerExtensions: [],
    fecMechanisms: [],
    rtcp: [],
  };
  const lines = SDPUtils.splitLines(mediaSection);
  const mline = lines[0].split(' ');
  description.profile = mline[2];
  for (let i = 3; i < mline.length; i++) { // find all codecs from mline[3..]
    const pt = mline[i];
    const rtpmapline = SDPUtils.matchPrefix(
      mediaSection, 'a=rtpmap:' + pt + ' ')[0];
    if (rtpmapline) {
      const codec = SDPUtils.parseRtpMap(rtpmapline);
      const fmtps = SDPUtils.matchPrefix(
        mediaSection, 'a=fmtp:' + pt + ' ');
      // Only the first a=fmtp:<pt> is considered.
      codec.parameters = fmtps.length ? SDPUtils.parseFmtp(fmtps[0]) : {};
      codec.rtcpFeedback = SDPUtils.matchPrefix(
        mediaSection, 'a=rtcp-fb:' + pt + ' ')
        .map(SDPUtils.parseRtcpFb);
      description.codecs.push(codec);
      // parse FEC mechanisms from rtpmap lines.
      switch (codec.name.toUpperCase()) {
        case 'RED':
        case 'ULPFEC':
          description.fecMechanisms.push(codec.name.toUpperCase());
          break;
        default: // only RED and ULPFEC are recognized as FEC mechanisms.
          break;
      }
    }
  }
  SDPUtils.matchPrefix(mediaSection, 'a=extmap:').forEach(line => {
    description.headerExtensions.push(SDPUtils.parseExtmap(line));
  });
  const wildcardRtcpFb = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-fb:* ')
    .map(SDPUtils.parseRtcpFb);
  description.codecs.forEach(codec => {
    wildcardRtcpFb.forEach(fb=> {
      const duplicate = codec.rtcpFeedback.find(existingFeedback => {
        return existingFeedback.type === fb.type &&
          existingFeedback.parameter === fb.parameter;
      });
      if (!duplicate) {
        codec.rtcpFeedback.push(fb);
      }
    });
  });
  // FIXME: parse rtcp.
  return description;
};

// Generates parts of the SDP media section describing the capabilities /
// parameters.
SDPUtils.writeRtpDescription = function(kind, caps) {
  let sdp = '';

  // Build the mline.
  sdp += 'm=' + kind + ' ';
  sdp += caps.codecs.length > 0 ? '9' : '0'; // reject if no codecs.
  sdp += ' ' + (caps.profile || 'UDP/TLS/RTP/SAVPF') + ' ';
  sdp += caps.codecs.map(codec => {
    if (codec.preferredPayloadType !== undefined) {
      return codec.preferredPayloadType;
    }
    return codec.payloadType;
  }).join(' ') + '\r\n';

  sdp += 'c=IN IP4 0.0.0.0\r\n';
  sdp += 'a=rtcp:9 IN IP4 0.0.0.0\r\n';

  // Add a=rtpmap lines for each codec. Also fmtp and rtcp-fb.
  caps.codecs.forEach(codec => {
    sdp += SDPUtils.writeRtpMap(codec);
    sdp += SDPUtils.writeFmtp(codec);
    sdp += SDPUtils.writeRtcpFb(codec);
  });
  let maxptime = 0;
  caps.codecs.forEach(codec => {
    if (codec.maxptime > maxptime) {
      maxptime = codec.maxptime;
    }
  });
  if (maxptime > 0) {
    sdp += 'a=maxptime:' + maxptime + '\r\n';
  }

  if (caps.headerExtensions) {
    caps.headerExtensions.forEach(extension => {
      sdp += SDPUtils.writeExtmap(extension);
    });
  }
  // FIXME: write fecMechanisms.
  return sdp;
};

// Parses the SDP media section and returns an array of
// RTCRtpEncodingParameters.
SDPUtils.parseRtpEncodingParameters = function(mediaSection) {
  const encodingParameters = [];
  const description = SDPUtils.parseRtpParameters(mediaSection);
  const hasRed = description.fecMechanisms.indexOf('RED') !== -1;
  const hasUlpfec = description.fecMechanisms.indexOf('ULPFEC') !== -1;

  // filter a=ssrc:... cname:, ignore PlanB-msid
  const ssrcs = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')
    .map(line => SDPUtils.parseSsrcMedia(line))
    .filter(parts => parts.attribute === 'cname');
  const primarySsrc = ssrcs.length > 0 && ssrcs[0].ssrc;
  let secondarySsrc;

  const flows = SDPUtils.matchPrefix(mediaSection, 'a=ssrc-group:FID')
    .map(line => {
      const parts = line.substring(17).split(' ');
      return parts.map(part => parseInt(part, 10));
    });
  if (flows.length > 0 && flows[0].length > 1 && flows[0][0] === primarySsrc) {
    secondarySsrc = flows[0][1];
  }

  description.codecs.forEach(codec => {
    if (codec.name.toUpperCase() === 'RTX' && codec.parameters.apt) {
      let encParam = {
        ssrc: primarySsrc,
        codecPayloadType: parseInt(codec.parameters.apt, 10),
      };
      if (primarySsrc && secondarySsrc) {
        encParam.rtx = {ssrc: secondarySsrc};
      }
      encodingParameters.push(encParam);
      if (hasRed) {
        encParam = JSON.parse(JSON.stringify(encParam));
        encParam.fec = {
          ssrc: primarySsrc,
          mechanism: hasUlpfec ? 'red+ulpfec' : 'red',
        };
        encodingParameters.push(encParam);
      }
    }
  });
  if (encodingParameters.length === 0 && primarySsrc) {
    encodingParameters.push({
      ssrc: primarySsrc,
    });
  }

  // we support both b=AS and b=TIAS but interpret AS as TIAS.
  let bandwidth = SDPUtils.matchPrefix(mediaSection, 'b=');
  if (bandwidth.length) {
    if (bandwidth[0].indexOf('b=TIAS:') === 0) {
      bandwidth = parseInt(bandwidth[0].substring(7), 10);
    } else if (bandwidth[0].indexOf('b=AS:') === 0) {
      // use formula from JSEP to convert b=AS to TIAS value.
      bandwidth = parseInt(bandwidth[0].substring(5), 10) * 1000 * 0.95
          - (50 * 40 * 8);
    } else {
      bandwidth = undefined;
    }
    encodingParameters.forEach(params => {
      params.maxBitrate = bandwidth;
    });
  }
  return encodingParameters;
};

// parses http://draft.ortc.org/#rtcrtcpparameters*
SDPUtils.parseRtcpParameters = function(mediaSection) {
  const rtcpParameters = {};

  // Gets the first SSRC. Note that with RTX there might be multiple
  // SSRCs.
  const remoteSsrc = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')
    .map(line => SDPUtils.parseSsrcMedia(line))
    .filter(obj => obj.attribute === 'cname')[0];
  if (remoteSsrc) {
    rtcpParameters.cname = remoteSsrc.value;
    rtcpParameters.ssrc = remoteSsrc.ssrc;
  }

  // Edge uses the compound attribute instead of reducedSize
  // compound is !reducedSize
  const rsize = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-rsize');
  rtcpParameters.reducedSize = rsize.length > 0;
  rtcpParameters.compound = rsize.length === 0;

  // parses the rtcp-mux attrіbute.
  // Note that Edge does not support unmuxed RTCP.
  const mux = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-mux');
  rtcpParameters.mux = mux.length > 0;

  return rtcpParameters;
};

SDPUtils.writeRtcpParameters = function(rtcpParameters) {
  let sdp = '';
  if (rtcpParameters.reducedSize) {
    sdp += 'a=rtcp-rsize\r\n';
  }
  if (rtcpParameters.mux) {
    sdp += 'a=rtcp-mux\r\n';
  }
  if (rtcpParameters.ssrc !== undefined && rtcpParameters.cname) {
    sdp += 'a=ssrc:' + rtcpParameters.ssrc +
      ' cname:' + rtcpParameters.cname + '\r\n';
  }
  return sdp;
};


// parses either a=msid: or a=ssrc:... msid lines and returns
// the id of the MediaStream and MediaStreamTrack.
SDPUtils.parseMsid = function(mediaSection) {
  let parts;
  const spec = SDPUtils.matchPrefix(mediaSection, 'a=msid:');
  if (spec.length === 1) {
    parts = spec[0].substring(7).split(' ');
    return {stream: parts[0], track: parts[1]};
  }
  const planB = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')
    .map(line => SDPUtils.parseSsrcMedia(line))
    .filter(msidParts => msidParts.attribute === 'msid');
  if (planB.length > 0) {
    parts = planB[0].value.split(' ');
    return {stream: parts[0], track: parts[1]};
  }
};

// SCTP
// parses draft-ietf-mmusic-sctp-sdp-26 first and falls back
// to draft-ietf-mmusic-sctp-sdp-05
SDPUtils.parseSctpDescription = function(mediaSection) {
  const mline = SDPUtils.parseMLine(mediaSection);
  const maxSizeLine = SDPUtils.matchPrefix(mediaSection, 'a=max-message-size:');
  let maxMessageSize;
  if (maxSizeLine.length > 0) {
    maxMessageSize = parseInt(maxSizeLine[0].substring(19), 10);
  }
  if (isNaN(maxMessageSize)) {
    maxMessageSize = 65536;
  }
  const sctpPort = SDPUtils.matchPrefix(mediaSection, 'a=sctp-port:');
  if (sctpPort.length > 0) {
    return {
      port: parseInt(sctpPort[0].substring(12), 10),
      protocol: mline.fmt,
      maxMessageSize,
    };
  }
  const sctpMapLines = SDPUtils.matchPrefix(mediaSection, 'a=sctpmap:');
  if (sctpMapLines.length > 0) {
    const parts = sctpMapLines[0]
      .substring(10)
      .split(' ');
    return {
      port: parseInt(parts[0], 10),
      protocol: parts[1],
      maxMessageSize,
    };
  }
};

// SCTP
// outputs the draft-ietf-mmusic-sctp-sdp-26 version that all browsers
// support by now receiving in this format, unless we originally parsed
// as the draft-ietf-mmusic-sctp-sdp-05 format (indicated by the m-line
// protocol of DTLS/SCTP -- without UDP/ or TCP/)
SDPUtils.writeSctpDescription = function(media, sctp) {
  let output = [];
  if (media.protocol !== 'DTLS/SCTP') {
    output = [
      'm=' + media.kind + ' 9 ' + media.protocol + ' ' + sctp.protocol + '\r\n',
      'c=IN IP4 0.0.0.0\r\n',
      'a=sctp-port:' + sctp.port + '\r\n',
    ];
  } else {
    output = [
      'm=' + media.kind + ' 9 ' + media.protocol + ' ' + sctp.port + '\r\n',
      'c=IN IP4 0.0.0.0\r\n',
      'a=sctpmap:' + sctp.port + ' ' + sctp.protocol + ' 65535\r\n',
    ];
  }
  if (sctp.maxMessageSize !== undefined) {
    output.push('a=max-message-size:' + sctp.maxMessageSize + '\r\n');
  }
  return output.join('');
};

// Generate a session ID for SDP.
// https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-20#section-5.2.1
// recommends using a cryptographically random +ve 64-bit value
// but right now this should be acceptable and within the right range
SDPUtils.generateSessionId = function() {
  return Math.random().toString().substr(2, 22);
};

// Write boiler plate for start of SDP
// sessId argument is optional - if not supplied it will
// be generated randomly
// sessVersion is optional and defaults to 2
// sessUser is optional and defaults to 'thisisadapterortc'
SDPUtils.writeSessionBoilerplate = function(sessId, sessVer, sessUser) {
  let sessionId;
  const version = sessVer !== undefined ? sessVer : 2;
  if (sessId) {
    sessionId = sessId;
  } else {
    sessionId = SDPUtils.generateSessionId();
  }
  const user = sessUser || 'thisisadapterortc';
  // FIXME: sess-id should be an NTP timestamp.
  return 'v=0\r\n' +
      'o=' + user + ' ' + sessionId + ' ' + version +
        ' IN IP4 127.0.0.1\r\n' +
      's=-\r\n' +
      't=0 0\r\n';
};

// Gets the direction from the mediaSection or the sessionpart.
SDPUtils.getDirection = function(mediaSection, sessionpart) {
  // Look for sendrecv, sendonly, recvonly, inactive, default to sendrecv.
  const lines = SDPUtils.splitLines(mediaSection);
  for (let i = 0; i < lines.length; i++) {
    switch (lines[i]) {
      case 'a=sendrecv':
      case 'a=sendonly':
      case 'a=recvonly':
      case 'a=inactive':
        return lines[i].substring(2);
      default:
        // FIXME: What should happen here?
    }
  }
  if (sessionpart) {
    return SDPUtils.getDirection(sessionpart);
  }
  return 'sendrecv';
};

SDPUtils.getKind = function(mediaSection) {
  const lines = SDPUtils.splitLines(mediaSection);
  const mline = lines[0].split(' ');
  return mline[0].substring(2);
};

SDPUtils.isRejected = function(mediaSection) {
  return mediaSection.split(' ', 2)[1] === '0';
};

SDPUtils.parseMLine = function(mediaSection) {
  const lines = SDPUtils.splitLines(mediaSection);
  const parts = lines[0].substring(2).split(' ');
  return {
    kind: parts[0],
    port: parseInt(parts[1], 10),
    protocol: parts[2],
    fmt: parts.slice(3).join(' '),
  };
};

SDPUtils.parseOLine = function(mediaSection) {
  const line = SDPUtils.matchPrefix(mediaSection, 'o=')[0];
  const parts = line.substring(2).split(' ');
  return {
    username: parts[0],
    sessionId: parts[1],
    sessionVersion: parseInt(parts[2], 10),
    netType: parts[3],
    addressType: parts[4],
    address: parts[5],
  };
};

// a very naive interpretation of a valid SDP.
SDPUtils.isValidSDP = function(blob) {
  if (typeof blob !== 'string' || blob.length === 0) {
    return false;
  }
  const lines = SDPUtils.splitLines(blob);
  for (let i = 0; i < lines.length; i++) {
    if (lines[i].length < 2 || lines[i].charAt(1) !== '=') {
      return false;
    }
    // TODO: check the modifier a bit more.
  }
  return true;
};

// Expose public methods.
if (true) {
  module.exports = SDPUtils;
}


/***/ }),

/***/ "./node_modules/tiny-warning/dist/tiny-warning.esm.js":
/*!************************************************************!*\
  !*** ./node_modules/tiny-warning/dist/tiny-warning.esm.js ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
var isProduction = "development" === 'production';
function warning(condition, message) {
  if (!isProduction) {
    if (condition) {
      return;
    }

    var text = "Warning: " + message;

    if (typeof console !== 'undefined') {
      console.warn(text);
    }

    try {
      throw Error(text);
    } catch (x) {}
  }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (warning);


/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ _assertThisInitialized)
/* harmony export */ });
function _assertThisInitialized(self) {
  if (self === void 0) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }
  return self;
}

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/createClass.js":
/*!****************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/createClass.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ _createClass)
/* harmony export */ });
/* harmony import */ var _toPropertyKey_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./toPropertyKey.js */ "./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js");

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, (0,_toPropertyKey_js__WEBPACK_IMPORTED_MODULE_0__["default"])(descriptor.key), descriptor);
  }
}
function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  Object.defineProperty(Constructor, "prototype", {
    writable: false
  });
  return Constructor;
}

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/extends.js":
/*!************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/extends.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ _extends)
/* harmony export */ });
function _extends() {
  _extends = Object.assign ? Object.assign.bind() : function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends.apply(this, arguments);
}

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js":
/*!******************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ _inheritsLoose)
/* harmony export */ });
/* harmony import */ var _setPrototypeOf_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./setPrototypeOf.js */ "./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js");

function _inheritsLoose(subClass, superClass) {
  subClass.prototype = Object.create(superClass.prototype);
  subClass.prototype.constructor = subClass;
  (0,_setPrototypeOf_js__WEBPACK_IMPORTED_MODULE_0__["default"])(subClass, superClass);
}

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ _objectWithoutPropertiesLoose)
/* harmony export */ });
function _objectWithoutPropertiesLoose(source, excluded) {
  if (source == null) return {};
  var target = {};
  var sourceKeys = Object.keys(source);
  var key, i;
  for (i = 0; i < sourceKeys.length; i++) {
    key = sourceKeys[i];
    if (excluded.indexOf(key) >= 0) continue;
    target[key] = source[key];
  }
  return target;
}

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ _setPrototypeOf)
/* harmony export */ });
function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };
  return _setPrototypeOf(o, p);
}

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/toPrimitive.js":
/*!****************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/toPrimitive.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ _toPrimitive)
/* harmony export */ });
/* harmony import */ var _typeof_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./typeof.js */ "./node_modules/@babel/runtime/helpers/esm/typeof.js");

function _toPrimitive(input, hint) {
  if ((0,_typeof_js__WEBPACK_IMPORTED_MODULE_0__["default"])(input) !== "object" || input === null) return input;
  var prim = input[Symbol.toPrimitive];
  if (prim !== undefined) {
    var res = prim.call(input, hint || "default");
    if ((0,_typeof_js__WEBPACK_IMPORTED_MODULE_0__["default"])(res) !== "object") return res;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (hint === "string" ? String : Number)(input);
}

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js":
/*!******************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ _toPropertyKey)
/* harmony export */ });
/* harmony import */ var _typeof_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./typeof.js */ "./node_modules/@babel/runtime/helpers/esm/typeof.js");
/* harmony import */ var _toPrimitive_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./toPrimitive.js */ "./node_modules/@babel/runtime/helpers/esm/toPrimitive.js");


function _toPropertyKey(arg) {
  var key = (0,_toPrimitive_js__WEBPACK_IMPORTED_MODULE_1__["default"])(arg, "string");
  return (0,_typeof_js__WEBPACK_IMPORTED_MODULE_0__["default"])(key) === "symbol" ? key : String(key);
}

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/typeof.js":
/*!***********************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/typeof.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ _typeof)
/* harmony export */ });
function _typeof(obj) {
  "@babel/helpers - typeof";

  return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (obj) {
    return typeof obj;
  } : function (obj) {
    return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
  }, _typeof(obj);
}

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be isolated against other modules in the chunk.
(() => {
/*!***********************!*\
  !*** ./src/player.ts ***!
  \***********************/
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _epicgames_ps_lib_pixelstreamingfrontend_ue5_2__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @epicgames-ps/lib-pixelstreamingfrontend-ue5.2 */ "./node_modules/@epicgames-ps/lib-pixelstreamingfrontend-ue5.2/dist/lib-pixelstreamingfrontend.esm.js");
/* harmony import */ var _epicgames_ps_lib_pixelstreamingfrontend_ui_ue5_2__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @epicgames-ps/lib-pixelstreamingfrontend-ui-ue5.2 */ "./node_modules/@epicgames-ps/lib-pixelstreamingfrontend-ui-ue5.2/dist/lib-pixelstreamingfrontend-ui.esm.js");
// Copyright Epic Games, Inc. All Rights Reserved.


var PixelStreamingApplicationStyles = new _epicgames_ps_lib_pixelstreamingfrontend_ui_ue5_2__WEBPACK_IMPORTED_MODULE_0__.PixelStreamingApplicationStyle();
PixelStreamingApplicationStyles.applyStyleSheet();
document.body.onload = function () {
    // Example of how to set the logger level
    // Logger.SetLoggerVerbosity(10);
    // Create a config object
    var config = new _epicgames_ps_lib_pixelstreamingfrontend_ue5_2__WEBPACK_IMPORTED_MODULE_1__.Config({ useUrlParams: true });
    // Create a Native DOM delegate instance that implements the Delegate interface class
    var stream = new _epicgames_ps_lib_pixelstreamingfrontend_ue5_2__WEBPACK_IMPORTED_MODULE_1__.PixelStreaming(config);
    var application = new _epicgames_ps_lib_pixelstreamingfrontend_ui_ue5_2__WEBPACK_IMPORTED_MODULE_0__.Application({
        stream: stream,
        onColorModeChanged: function (isLightMode) { return PixelStreamingApplicationStyles.setColorMode(isLightMode); }
    });
    // document.getElementById("centrebox").appendChild(application.rootElement);
    document.body.appendChild(application.rootElement);
};

})();

/******/ 	return __webpack_exports__;
/******/ })()
;
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsMEJBQTBCLDJCQUEyQjtBQUNyRCxzREFBc0Q7QUFDdEQ7QUFDQTs7QUFFQTtBQUNBOztBQUVBLDJDQUEyQztBQUMzQzs7QUFFQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsa0JBQWtCLDhFQUFRO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSyxnQkFBZ0I7QUFDckI7QUFDQTs7O0FBR0E7O0FBRUE7QUFDQTtBQUNBLE1BQU07QUFDTjs7O0FBR0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLG1DQUFtQyw4RUFBUSxHQUFHO0FBQzlDO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw0Q0FBNEM7QUFDNUM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sMEJBQTBCLDJCQUEyQjtBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxzQ0FBc0M7O0FBRXRDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esa0RBQWtEOztBQUVsRDtBQUNBO0FBQ0EsdURBQXVEOztBQUV2RDtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7OztBQUdSO0FBQ0E7QUFDQSx1Q0FBdUM7QUFDdkM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSx3QkFBd0IsMkJBQTJCO0FBQ25EO0FBQ0Esd0NBQXdDOztBQUV4QztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLDhFQUFRLEdBQUc7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCOztBQUUxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsNEJBQTRCO0FBQzVCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSx1Q0FBdUM7QUFDdkM7O0FBRUEsa0NBQWtDO0FBQ2xDOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsMENBQTBDO0FBQzFDOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxNQUFNO0FBQ047OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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Q0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsaURBQWlEO0FBQ2pEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixrQkFBa0IsT0FBTztBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLGtCQUFrQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixrQkFBa0I7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxJQUFJLElBQTBCO0FBQzlCO0FBQ0E7Ozs7Ozs7Ozs7Ozs7OztBQ2p5QkEsbUJBQW1CLGFBQW9CO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTs7QUFFQSxpRUFBZSxPQUFPLEVBQUM7Ozs7Ozs7Ozs7Ozs7OztBQ25CUjtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7OztBQ0wrQztBQUMvQztBQUNBLGtCQUFrQixrQkFBa0I7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsNkRBQWE7QUFDL0M7QUFDQTtBQUNlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7Ozs7Ozs7Ozs7Ozs7QUNqQmU7QUFDZjtBQUNBLG9CQUFvQixzQkFBc0I7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7O0FDYmlEO0FBQ2xDO0FBQ2Y7QUFDQTtBQUNBLEVBQUUsOERBQWM7QUFDaEI7Ozs7Ozs7Ozs7Ozs7O0FDTGU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsdUJBQXVCO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7QUNYZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7O0FDTmtDO0FBQ25CO0FBQ2YsTUFBTSxzREFBTztBQUNiO0FBQ0E7QUFDQTtBQUNBLFFBQVEsc0RBQU87QUFDZjtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7OztBQ1ZrQztBQUNTO0FBQzVCO0FBQ2YsWUFBWSwyREFBVztBQUN2QixTQUFTLHNEQUFPO0FBQ2hCOzs7Ozs7Ozs7Ozs7OztBQ0xlO0FBQ2Y7O0FBRUE7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLEdBQUc7QUFDSDs7Ozs7O1VDUkE7VUFDQTs7VUFFQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTs7VUFFQTtVQUNBOztVQUVBO1VBQ0E7VUFDQTs7Ozs7V0N0QkE7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBLGlDQUFpQyxXQUFXO1dBQzVDO1dBQ0E7Ozs7O1dDUEE7V0FDQTtXQUNBO1dBQ0E7V0FDQSx5Q0FBeUMsd0NBQXdDO1dBQ2pGO1dBQ0E7V0FDQTs7Ozs7V0NQQTs7Ozs7V0NBQTtXQUNBO1dBQ0E7V0FDQSx1REFBdUQsaUJBQWlCO1dBQ3hFO1dBQ0EsZ0RBQWdELGFBQWE7V0FDN0Q7Ozs7Ozs7Ozs7Ozs7QUNOQTtBQUN3RjtBQUN3QjtBQUNoSCwwQ0FBMEMsNkdBQThCO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsa0ZBQU0sR0FBRyxvQkFBb0I7QUFDbEQ7QUFDQSxxQkFBcUIsMEZBQWM7QUFDbkMsMEJBQTBCLDBGQUFXO0FBQ3JDO0FBQ0EscURBQXFEO0FBQ3JELEtBQUs7QUFDTDtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9lcGljZ2FtZXMtZnJvbnRlbmQvd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovL2VwaWNnYW1lcy1mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9AZXBpY2dhbWVzLXBzL2xpYi1waXhlbHN0cmVhbWluZ2Zyb250ZW5kLXVlNS4yL2Rpc3QvbGliLXBpeGVsc3RyZWFtaW5nZnJvbnRlbmQuZXNtLmpzIiwid2VicGFjazovL2VwaWNnYW1lcy1mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9AZXBpY2dhbWVzLXBzL2xpYi1waXhlbHN0cmVhbWluZ2Zyb250ZW5kLXVpLXVlNS4yL2Rpc3QvbGliLXBpeGVsc3RyZWFtaW5nZnJvbnRlbmQtdWkuZXNtLmpzIiwid2VicGFjazovL2VwaWNnYW1lcy1mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9oeXBoZW5hdGUtc3R5bGUtbmFtZS9pbmRleC5qcyIsIndlYnBhY2s6Ly9lcGljZ2FtZXMtZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvaXMtaW4tYnJvd3Nlci9kaXN0L21vZHVsZS5qcyIsIndlYnBhY2s6Ly9lcGljZ2FtZXMtZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvanNzLXBsdWdpbi1jYW1lbC1jYXNlL2Rpc3QvanNzLXBsdWdpbi1jYW1lbC1jYXNlLmVzbS5qcyIsIndlYnBhY2s6Ly9lcGljZ2FtZXMtZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvanNzLXBsdWdpbi1nbG9iYWwvZGlzdC9qc3MtcGx1Z2luLWdsb2JhbC5lc20uanMiLCJ3ZWJwYWNrOi8vZXBpY2dhbWVzLWZyb250ZW5kLy4vbm9kZV9tb2R1bGVzL2pzcy9kaXN0L2pzcy5lc20uanMiLCJ3ZWJwYWNrOi8vZXBpY2dhbWVzLWZyb250ZW5kLy4vbm9kZV9tb2R1bGVzL3NkcC9zZHAuanMiLCJ3ZWJwYWNrOi8vZXBpY2dhbWVzLWZyb250ZW5kLy4vbm9kZV9tb2R1bGVzL3Rpbnktd2FybmluZy9kaXN0L3Rpbnktd2FybmluZy5lc20uanMiLCJ3ZWJwYWNrOi8vZXBpY2dhbWVzLWZyb250ZW5kLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2Fzc2VydFRoaXNJbml0aWFsaXplZC5qcyIsIndlYnBhY2s6Ly9lcGljZ2FtZXMtZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MuanMiLCJ3ZWJwYWNrOi8vZXBpY2dhbWVzLWZyb250ZW5kLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2V4dGVuZHMuanMiLCJ3ZWJwYWNrOi8vZXBpY2dhbWVzLWZyb250ZW5kLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzTG9vc2UuanMiLCJ3ZWJwYWNrOi8vZXBpY2dhbWVzLWZyb250ZW5kLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UuanMiLCJ3ZWJwYWNrOi8vZXBpY2dhbWVzLWZyb250ZW5kLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3NldFByb3RvdHlwZU9mLmpzIiwid2VicGFjazovL2VwaWNnYW1lcy1mcm9udGVuZC8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90b1ByaW1pdGl2ZS5qcyIsIndlYnBhY2s6Ly9lcGljZ2FtZXMtZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Qcm9wZXJ0eUtleS5qcyIsIndlYnBhY2s6Ly9lcGljZ2FtZXMtZnJvbnRlbmQvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdHlwZW9mLmpzIiwid2VicGFjazovL2VwaWNnYW1lcy1mcm9udGVuZC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9lcGljZ2FtZXMtZnJvbnRlbmQvd2VicGFjay9ydW50aW1lL2NvbXBhdCBnZXQgZGVmYXVsdCBleHBvcnQiLCJ3ZWJwYWNrOi8vZXBpY2dhbWVzLWZyb250ZW5kL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9lcGljZ2FtZXMtZnJvbnRlbmQvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9lcGljZ2FtZXMtZnJvbnRlbmQvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly9lcGljZ2FtZXMtZnJvbnRlbmQvLi9zcmMvcGxheWVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcImVwaWNnYW1lcy1mcm9udGVuZFwiXSA9IGZhY3RvcnkoKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJlcGljZ2FtZXMtZnJvbnRlbmRcIl0gPSBmYWN0b3J5KCk7XG59KSh0aGlzLCAoKSA9PiB7XG5yZXR1cm4gIiwiaW1wb3J0KmFzIGUgZnJvbVwic2RwXCI7dmFyIHQscyxuPXtkOihlLHQpPT57Zm9yKHZhciBzIGluIHQpbi5vKHQscykmJiFuLm8oZSxzKSYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUscyx7ZW51bWVyYWJsZTohMCxnZXQ6dFtzXX0pfSxvOihlLHQpPT5PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSx0KX0scj17fTtuLmQocix7RHo6KCk9Pm1lLGckOigpPT5BLEx0OigpPT5rLFE5OigpPT54LHFmOigpPT5MLGhWOigpPT5NZSx6JDooKT0+VGUsSjA6KCk9PmZlLERlOigpPT5nZSwkQzooKT0+dWUsYWw6KCk9Pl8sX1c6KCk9PlcsdHo6KCk9PkIsTnU6KCk9PkNlLHpnOigpPT5PZSx2cDooKT0+bmUsdlU6KCk9PnJlLHdGOigpPT5xLHJ2OigpPT5wZSxOaDooKT0+dmUsc3M6KCk9PkZlLHFXOigpPT5KLFFMOigpPT5ZLGNmOigpPT5JZSxlTTooKT0+JCxZZDooKT0+aSxpTTooKT0+cCxxeTooKT0+byxjZTooKT0+dixzSzooKT0+b2UsT2s6KCk9PmNlLHE1OigpPT5FZSxnOigpPT52dCx4bDooKT0+TixJOigpPT5LLGJ4OigpPT5RLEliOigpPT5iLEF6OigpPT5NLEl3OigpPT53LHFZOigpPT5SLGRiOigpPT5QLG1SOigpPT5aLFRuOigpPT5DLHJWOigpPT5YLGdoOigpPT5WLGk1OigpPT5qLHhfOigpPT5sZSxBbTooKT0+ZHQsZVI6KCk9PkYscjg6KCk9PkgsdTM6KCk9PlVlLHZkOigpPT5PLGlWOigpPT5JLGpaOigpPT5VLFNXOigpPT56LFpIOigpPT5HLE5pOigpPT5odCxsaDooKT0+RCxicTooKT0+ZiwkZjooKT0+U3QsZXU6KCk9PnNlLEF4OigpPT50ZSxNYzooKT0+ZWV9KTtjbGFzcyBpe3N0YXRpYyBHZXRTdGFja1RyYWNlKCl7Y29uc3QgZT1uZXcgRXJyb3I7bGV0IHQ9XCJObyBTdGFjayBBdmFpbGFibGUgZm9yIHRoaXMgYnJvd3NlclwiO3JldHVybiBlLnN0YWNrJiYodD1lLnN0YWNrLnRvU3RyaW5nKCkucmVwbGFjZSgvRXJyb3IvZyxcIlwiKSksdH1zdGF0aWMgU2V0TG9nZ2VyVmVyYm9zaXR5KGUpe251bGwhPXRoaXMudmVyYm9zZUxvZ0xldmVsJiYodGhpcy52ZXJib3NlTG9nTGV2ZWw9ZSl9c3RhdGljIExvZyhlLHQscyl7aWYocz50aGlzLnZlcmJvc2VMb2dMZXZlbClyZXR1cm47Y29uc3Qgbj1gTGV2ZWw6IExvZ1xcbk1zZzogJHt0fVxcbkNhbGxlcjogJHtlfWA7Y29uc29sZS5sb2cobil9c3RhdGljIEluZm8oZSx0LHMpe2lmKHM+dGhpcy52ZXJib3NlTG9nTGV2ZWwpcmV0dXJuO2NvbnN0IG49YExldmVsOiBJbmZvXFxuTXNnOiAke3R9YDtjb25zb2xlLmluZm8obil9c3RhdGljIEVycm9yKGUsdCl7Y29uc3Qgcz1gTGV2ZWw6IEVycm9yXFxuTXNnOiAke3R9XFxuQ2FsbGVyOiAke2V9YDtjb25zb2xlLmVycm9yKHMpfXN0YXRpYyBXYXJuaW5nKGUsdCl7Y29uc3Qgcz1gTGV2ZWw6IFdhcm5pbmdcXG5DYWxsZXI6ICR7ZX1cXG5Nc2c6ICR7dH1gO2NvbnNvbGUud2FybihzKX19aS52ZXJib3NlTG9nTGV2ZWw9NSxmdW5jdGlvbihlKXtlLkxJU1RfU1RSRUFNRVJTPVwibGlzdFN0cmVhbWVyc1wiLGUuU1VCU0NSSUJFPVwic3Vic2NyaWJlXCIsZS5VTlNVQlNDUklCRT1cInVuc3Vic2NyaWJlXCIsZS5JQ0VfQ0FORElEQVRFPVwiaWNlQ2FuZGlkYXRlXCIsZS5PRkZFUj1cIm9mZmVyXCIsZS5BTlNXRVI9XCJhbnN3ZXJcIixlLkRBVEFDSEFOTkVMUkVRVUVTVD1cImRhdGFDaGFubmVsUmVxdWVzdFwiLGUuU0ZVUkVDVkRBVEFDSEFOTkVMUkVBRFk9XCJwZWVyRGF0YUNoYW5uZWxzUmVhZHlcIixlLlBPTkc9XCJwb25nXCJ9KHR8fCh0PXt9KSk7Y2xhc3Mgb3twYXlsb2FkKCl7cmV0dXJuIGkuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLFwiU2VuZGluZyA9PiBcXG5cIitKU09OLnN0cmluZ2lmeSh0aGlzLHZvaWQgMCw0KSw2KSxKU09OLnN0cmluZ2lmeSh0aGlzKX19Y2xhc3MgYSBleHRlbmRzIG97Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMudHlwZT10LkxJU1RfU1RSRUFNRVJTfX1jbGFzcyBsIGV4dGVuZHMgb3tjb25zdHJ1Y3RvcihlKXtzdXBlcigpLHRoaXMudHlwZT10LlNVQlNDUklCRSx0aGlzLnN0cmVhbWVySWQ9ZX19Y2xhc3MgZCBleHRlbmRzIG97Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMudHlwZT10LlVOU1VCU0NSSUJFfX1jbGFzcyBjIGV4dGVuZHMgb3tjb25zdHJ1Y3RvcihlKXtzdXBlcigpLHRoaXMudHlwZT10LlBPTkcsdGhpcy50aW1lPWV9fWNsYXNzIGggZXh0ZW5kcyBve2NvbnN0cnVjdG9yKGUpe3N1cGVyKCksdGhpcy50eXBlPXQuT0ZGRVIsZSYmKHRoaXMudHlwZT1lLnR5cGUsdGhpcy5zZHA9ZS5zZHApfX1jbGFzcyBnIGV4dGVuZHMgb3tjb25zdHJ1Y3RvcihlKXtzdXBlcigpLHRoaXMudHlwZT10LkFOU1dFUixlJiYodGhpcy50eXBlPWUudHlwZSx0aGlzLnNkcD1lLnNkcCl9fWNsYXNzIHUgZXh0ZW5kcyBve2NvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLnR5cGU9dC5EQVRBQ0hBTk5FTFJFUVVFU1R9fWNsYXNzIG0gZXh0ZW5kcyBve2NvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLnR5cGU9dC5TRlVSRUNWREFUQUNIQU5ORUxSRUFEWX19Y2xhc3MgU3tjb25zdHJ1Y3RvcihlKXt0aGlzLnR5cGU9dC5JQ0VfQ0FORElEQVRFLHRoaXMuY2FuZGlkYXRlPWV9cGF5bG9hZCgpe3JldHVybiBpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcIlNlbmRpbmcgPT4gXFxuXCIrSlNPTi5zdHJpbmdpZnkodGhpcyx2b2lkIDAsNCksNiksSlNPTi5zdHJpbmdpZnkodGhpcyl9fSFmdW5jdGlvbihlKXtlLkNPTkZJRz1cImNvbmZpZ1wiLGUuU1RSRUFNRVJfTElTVD1cInN0cmVhbWVyTGlzdFwiLGUuUExBWUVSX0NPVU5UPVwicGxheWVyQ291bnRcIixlLk9GRkVSPVwib2ZmZXJcIixlLkFOU1dFUj1cImFuc3dlclwiLGUuSUNFX0NBTkRJREFURT1cImljZUNhbmRpZGF0ZVwiLGUuUEVFUl9EQVRBX0NIQU5ORUxTPVwicGVlckRhdGFDaGFubmVsc1wiLGUuUElORz1cInBpbmdcIixlLldBUk5JTkc9XCJ3YXJuaW5nXCJ9KHN8fChzPXt9KSk7Y2xhc3MgcHt9Y2xhc3MgdiBleHRlbmRzIHB7fWNsYXNzIEN7Y29uc3RydWN0b3IoKXt0aGlzLkZyb21VRU1lc3NhZ2VIYW5kbGVycz1uZXcgTWFwfWFkZE1lc3NhZ2VIYW5kbGVyKGUsdCl7dGhpcy5Gcm9tVUVNZXNzYWdlSGFuZGxlcnMuc2V0KGUsdCl9aGFuZGxlTWVzc2FnZShlLHQpe3RoaXMuRnJvbVVFTWVzc2FnZUhhbmRsZXJzLmhhcyhlKT90aGlzLkZyb21VRU1lc3NhZ2VIYW5kbGVycy5nZXQoZSkodCk6aS5FcnJvcihpLkdldFN0YWNrVHJhY2UoKSxgTWVzc2FnZSB0eXBlIG9mICR7ZX0gZG9lcyBub3QgaGF2ZSBhIG1lc3NhZ2UgaGFuZGxlciByZWdpc3RlcmVkIG9uIHRoZSBmcm9udGVuZCAtIGlnbm9yaW5nIG1lc3NhZ2UuYCl9c3RhdGljIHNldHVwRGVmYXVsdEhhbmRsZXJzKGUpe2Uuc2lnbmFsbGluZ1Byb3RvY29sLmFkZE1lc3NhZ2VIYW5kbGVyKHMuUElORywodD0+e2NvbnN0IG49bmV3IGMoKG5ldyBEYXRlKS5nZXRUaW1lKCkpLnBheWxvYWQoKTtpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxzLlBJTkcrXCI6IFwiK3QsNiksZS53ZWJTb2NrZXQuc2VuZChuKX0pKSxlLnNpZ25hbGxpbmdQcm90b2NvbC5hZGRNZXNzYWdlSGFuZGxlcihzLkNPTkZJRywodD0+e2kuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLHMuQ09ORklHLDYpO2NvbnN0IG49SlNPTi5wYXJzZSh0KTtlLm9uQ29uZmlnKG4pfSkpLGUuc2lnbmFsbGluZ1Byb3RvY29sLmFkZE1lc3NhZ2VIYW5kbGVyKHMuU1RSRUFNRVJfTElTVCwodD0+e2kuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLHMuU1RSRUFNRVJfTElTVCw2KTtjb25zdCBuPUpTT04ucGFyc2UodCk7ZS5vblN0cmVhbWVyTGlzdChuKX0pKSxlLnNpZ25hbGxpbmdQcm90b2NvbC5hZGRNZXNzYWdlSGFuZGxlcihzLlBMQVlFUl9DT1VOVCwoZT0+e2kuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLHMuUExBWUVSX0NPVU5ULDYpO2NvbnN0IHQ9SlNPTi5wYXJzZShlKTtpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcIlBsYXllciBDb3VudDogXCIrdC5jb3VudCw2KX0pKSxlLnNpZ25hbGxpbmdQcm90b2NvbC5hZGRNZXNzYWdlSGFuZGxlcihzLkFOU1dFUiwodD0+e2kuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLHMuQU5TV0VSLDYpO2NvbnN0IG49SlNPTi5wYXJzZSh0KTtlLm9uV2ViUnRjQW5zd2VyKG4pfSkpLGUuc2lnbmFsbGluZ1Byb3RvY29sLmFkZE1lc3NhZ2VIYW5kbGVyKHMuT0ZGRVIsKHQ9PntpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxzLk9GRkVSLDYpO2NvbnN0IG49SlNPTi5wYXJzZSh0KTtlLm9uV2ViUnRjT2ZmZXIobil9KSksZS5zaWduYWxsaW5nUHJvdG9jb2wuYWRkTWVzc2FnZUhhbmRsZXIocy5JQ0VfQ0FORElEQVRFLCh0PT57aS5Mb2coaS5HZXRTdGFja1RyYWNlKCkscy5JQ0VfQ0FORElEQVRFLDYpO2NvbnN0IG49SlNPTi5wYXJzZSh0KTtlLm9uSWNlQ2FuZGlkYXRlKG4uY2FuZGlkYXRlKX0pKSxlLnNpZ25hbGxpbmdQcm90b2NvbC5hZGRNZXNzYWdlSGFuZGxlcihzLldBUk5JTkcsKGU9PntpLldhcm5pbmcoaS5HZXRTdGFja1RyYWNlKCksYFdhcm5pbmcgcmVjZWl2ZWQ6ICR7ZX1gKX0pKSxlLnNpZ25hbGxpbmdQcm90b2NvbC5hZGRNZXNzYWdlSGFuZGxlcihzLlBFRVJfREFUQV9DSEFOTkVMUywodD0+e2kuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLHMuUEVFUl9EQVRBX0NIQU5ORUxTLDYpO2NvbnN0IG49SlNPTi5wYXJzZSh0KTtlLm9uV2ViUnRjUGVlckRhdGFDaGFubmVscyhuKX0pKX19Y2xhc3MgZntjb25zdHJ1Y3Rvcigpe3RoaXMuV1NfT1BFTl9TVEFURT0xLHRoaXMub25PcGVuPW5ldyBFdmVudFRhcmdldCx0aGlzLm9uQ2xvc2U9bmV3IEV2ZW50VGFyZ2V0LHRoaXMuc2lnbmFsbGluZ1Byb3RvY29sPW5ldyBDLEMuc2V0dXBEZWZhdWx0SGFuZGxlcnModGhpcyl9Y29ubmVjdChlKXtpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxlLDYpO3RyeXtyZXR1cm4gdGhpcy53ZWJTb2NrZXQ9bmV3IFdlYlNvY2tldChlKSx0aGlzLndlYlNvY2tldC5vbm9wZW49ZT0+dGhpcy5oYW5kbGVPbk9wZW4oZSksdGhpcy53ZWJTb2NrZXQub25lcnJvcj0oKT0+dGhpcy5oYW5kbGVPbkVycm9yKCksdGhpcy53ZWJTb2NrZXQub25jbG9zZT1lPT50aGlzLmhhbmRsZU9uQ2xvc2UoZSksdGhpcy53ZWJTb2NrZXQub25tZXNzYWdlPWU9PnRoaXMuaGFuZGxlT25NZXNzYWdlKGUpLHRoaXMud2ViU29ja2V0Lm9ubWVzc2FnZWJpbmFyeT1lPT50aGlzLmhhbmRsZU9uTWVzc2FnZUJpbmFyeShlKSwhMH1jYXRjaChlKXtyZXR1cm4gaS5FcnJvcihlLGUpLCExfX1oYW5kbGVPbk1lc3NhZ2VCaW5hcnkoZSl7ZSYmZS5kYXRhJiZlLmRhdGEudGV4dCgpLnRoZW4oKGU9Pntjb25zdCB0PW5ldyBNZXNzYWdlRXZlbnQoXCJtZXNzYWdlRnJvbUJpbmFyeVwiLHtkYXRhOmV9KTt0aGlzLmhhbmRsZU9uTWVzc2FnZSh0KX0pKS5jYXRjaCgoZT0+e2kuRXJyb3IoaS5HZXRTdGFja1RyYWNlKCksYEZhaWxlZCB0byBwYXJzZSBiaW5hcnkgYmxvYiBmcm9tIHdlYnNvY2tldCwgcmVhc29uOiAke2V9YCl9KSl9aGFuZGxlT25NZXNzYWdlKGUpe2lmKGUuZGF0YSYmZS5kYXRhIGluc3RhbmNlb2YgQmxvYilyZXR1cm4gdm9pZCB0aGlzLmhhbmRsZU9uTWVzc2FnZUJpbmFyeShlKTtjb25zdCB0PUpTT04ucGFyc2UoZS5kYXRhKTtpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcInJlY2VpdmVkID0+IFxcblwiK0pTT04uc3RyaW5naWZ5KEpTT04ucGFyc2UoZS5kYXRhKSx2b2lkIDAsNCksNiksdGhpcy5zaWduYWxsaW5nUHJvdG9jb2wuaGFuZGxlTWVzc2FnZSh0LnR5cGUsZS5kYXRhKX1oYW5kbGVPbk9wZW4oZSl7aS5Mb2coaS5HZXRTdGFja1RyYWNlKCksXCJDb25uZWN0ZWQgdG8gdGhlIHNpZ25hbGxpbmcgc2VydmVyIHZpYSBXZWJTb2NrZXRcIiw2KSx0aGlzLm9uT3Blbi5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcIm9wZW5cIikpfWhhbmRsZU9uRXJyb3IoKXtpLkVycm9yKGkuR2V0U3RhY2tUcmFjZSgpLFwiV2ViU29ja2V0IGVycm9yXCIpfWhhbmRsZU9uQ2xvc2UoZSl7dGhpcy5vbldlYlNvY2tldE9uY2xvc2VPdmVybGF5TWVzc2FnZShlKSxpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcIkRpc2Nvbm5lY3RlZCB0byB0aGUgc2lnbmFsbGluZyBzZXJ2ZXIgdmlhIFdlYlNvY2tldDogXCIrSlNPTi5zdHJpbmdpZnkoZS5jb2RlKStcIiAtIFwiK2UucmVhc29uKSx0aGlzLm9uQ2xvc2UuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJjbG9zZVwiKSl9cmVxdWVzdFN0cmVhbWVyTGlzdCgpe2NvbnN0IGU9bmV3IGE7dGhpcy53ZWJTb2NrZXQuc2VuZChlLnBheWxvYWQoKSl9c2VuZFN1YnNjcmliZShlKXtjb25zdCB0PW5ldyBsKGUpO3RoaXMud2ViU29ja2V0LnNlbmQodC5wYXlsb2FkKCkpfXNlbmRVbnN1YnNjcmliZSgpe2NvbnN0IGU9bmV3IGQ7dGhpcy53ZWJTb2NrZXQuc2VuZChlLnBheWxvYWQoKSl9c2VuZFdlYlJ0Y09mZmVyKGUpe2NvbnN0IHQ9bmV3IGgoZSk7dGhpcy53ZWJTb2NrZXQuc2VuZCh0LnBheWxvYWQoKSl9c2VuZFdlYlJ0Y0Fuc3dlcihlKXtjb25zdCB0PW5ldyBnKGUpO3RoaXMud2ViU29ja2V0LnNlbmQodC5wYXlsb2FkKCkpfXNlbmRXZWJSdGNEYXRhY2hhbm5lbFJlcXVlc3QoKXtjb25zdCBlPW5ldyB1O3RoaXMud2ViU29ja2V0LnNlbmQoZS5wYXlsb2FkKCkpfXNlbmRTRlVSZWN2RGF0YUNoYW5uZWxSZWFkeSgpe2NvbnN0IGU9bmV3IG07dGhpcy53ZWJTb2NrZXQuc2VuZChlLnBheWxvYWQoKSl9c2VuZEljZUNhbmRpZGF0ZShlKXtpZihpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcIlNlbmRpbmcgSWNlIENhbmRpZGF0ZVwiKSx0aGlzLndlYlNvY2tldCYmdGhpcy53ZWJTb2NrZXQucmVhZHlTdGF0ZT09PXRoaXMuV1NfT1BFTl9TVEFURSl7Y29uc3QgdD1uZXcgUyhlKTt0aGlzLndlYlNvY2tldC5zZW5kKHQucGF5bG9hZCgpKX19Y2xvc2UoKXt2YXIgZTtudWxsPT09KGU9dGhpcy53ZWJTb2NrZXQpfHx2b2lkIDA9PT1lfHxlLmNsb3NlKCl9b25XZWJTb2NrZXRPbmNsb3NlT3ZlcmxheU1lc3NhZ2UoZSl7fW9uQ29uZmlnKGUpe31vblN0cmVhbWVyTGlzdChlKXt9b25JY2VDYW5kaWRhdGUoZSl7fW9uV2ViUnRjQW5zd2VyKGUpe31vbldlYlJ0Y09mZmVyKGUpe31vbldlYlJ0Y1BlZXJEYXRhQ2hhbm5lbHMoZSl7fX1jbGFzcyBUe2NvbnN0cnVjdG9yKGUpe3RoaXMudmlkZW9FbGVtZW50UHJvdmlkZXI9ZSx0aGlzLmF1ZGlvRWxlbWVudD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiQXVkaW9cIil9aGFuZGxlT25UcmFjayhlKXtpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcImhhbmRsZU9uVHJhY2sgXCIrSlNPTi5zdHJpbmdpZnkoZS5zdHJlYW1zKSw2KTtjb25zdCB0PXRoaXMudmlkZW9FbGVtZW50UHJvdmlkZXIuZ2V0VmlkZW9FbGVtZW50KCk7aWYoZS50cmFjayYmaS5Mb2coaS5HZXRTdGFja1RyYWNlKCksXCJHb3QgdHJhY2sgLSBcIitlLnRyYWNrLmtpbmQrXCIgaWQ9XCIrZS50cmFjay5pZCtcIiByZWFkeVN0YXRlPVwiK2UudHJhY2sucmVhZHlTdGF0ZSw2KSxcImF1ZGlvXCIhPWUudHJhY2sua2luZClyZXR1cm5cInZpZGVvXCI9PWUudHJhY2sua2luZCYmdC5zcmNPYmplY3QhPT1lLnN0cmVhbXNbMF0/KHQuc3JjT2JqZWN0PWUuc3RyZWFtc1swXSx2b2lkIGkuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLFwiU2V0IHZpZGVvIHNvdXJjZSBmcm9tIHZpZGVvIHRyYWNrIG9udHJhY2suXCIpKTp2b2lkIDA7dGhpcy5DcmVhdGVBdWRpb1RyYWNrKGUuc3RyZWFtc1swXSl9Q3JlYXRlQXVkaW9UcmFjayhlKXtjb25zdCB0PXRoaXMudmlkZW9FbGVtZW50UHJvdmlkZXIuZ2V0VmlkZW9FbGVtZW50KCk7dC5zcmNPYmplY3QhPWUmJnQuc3JjT2JqZWN0JiZ0LnNyY09iamVjdCE9PWUmJih0aGlzLmF1ZGlvRWxlbWVudC5zcmNPYmplY3Q9ZSxpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcIkNyZWF0ZWQgbmV3IGF1ZGlvIGVsZW1lbnQgdG8gcGxheSBzZXBhcmF0ZSBhdWRpbyBzdHJlYW0uXCIpKX19Y2xhc3MgRXtjb25zdHJ1Y3RvcihlKXt0aGlzLmZyZWV6ZUZyYW1lSGVpZ2h0PTAsdGhpcy5mcmVlemVGcmFtZVdpZHRoPTAsdGhpcy5yb290RGl2PWUsdGhpcy5yb290RWxlbWVudD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHRoaXMucm9vdEVsZW1lbnQuaWQ9XCJmcmVlemVGcmFtZVwiLHRoaXMucm9vdEVsZW1lbnQuc3R5bGUuZGlzcGxheT1cIm5vbmVcIix0aGlzLnJvb3RFbGVtZW50LnN0eWxlLnBvaW50ZXJFdmVudHM9XCJub25lXCIsdGhpcy5yb290RWxlbWVudC5zdHlsZS5wb3NpdGlvbj1cImFic29sdXRlXCIsdGhpcy5yb290RWxlbWVudC5zdHlsZS56SW5kZXg9XCIyMFwiLHRoaXMuaW1hZ2VFbGVtZW50PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIiksdGhpcy5pbWFnZUVsZW1lbnQuc3R5bGUucG9zaXRpb249XCJhYnNvbHV0ZVwiLHRoaXMucm9vdEVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5pbWFnZUVsZW1lbnQpLHRoaXMucm9vdERpdi5hcHBlbmRDaGlsZCh0aGlzLnJvb3RFbGVtZW50KX1zZXRFbGVtZW50Rm9yU2hvdygpe3RoaXMucm9vdEVsZW1lbnQuc3R5bGUuZGlzcGxheT1cImJsb2NrXCJ9c2V0RWxlbWVudEZvckhpZGUoKXt0aGlzLnJvb3RFbGVtZW50LnN0eWxlLmRpc3BsYXk9XCJub25lXCJ9dXBkYXRlSW1hZ2VFbGVtZW50U291cmNlKGUpe2NvbnN0IHQ9YnRvYShlLnJlZHVjZSgoKGUsdCk9PmUrU3RyaW5nLmZyb21DaGFyQ29kZSh0KSksXCJcIikpO3RoaXMuaW1hZ2VFbGVtZW50LnNyYz1cImRhdGE6aW1hZ2UvanBlZztiYXNlNjQsXCIrdH1zZXREaW1lbnNpb25zRnJvbUVsZW1lbnRBbmRSZXNpemUoKXt0aGlzLmZyZWV6ZUZyYW1lSGVpZ2h0PXRoaXMuaW1hZ2VFbGVtZW50Lm5hdHVyYWxIZWlnaHQsdGhpcy5mcmVlemVGcmFtZVdpZHRoPXRoaXMuaW1hZ2VFbGVtZW50Lm5hdHVyYWxXaWR0aCx0aGlzLnJlc2l6ZSgpfXJlc2l6ZSgpe2lmKDAhPT10aGlzLmZyZWV6ZUZyYW1lV2lkdGgmJjAhPT10aGlzLmZyZWV6ZUZyYW1lSGVpZ2h0KXtsZXQgZT0wLHQ9MCxzPTAsbj0wO2NvbnN0IHI9dGhpcy5yb290RGl2LmNsaWVudFdpZHRoL3RoaXMucm9vdERpdi5jbGllbnRIZWlnaHQsaT10aGlzLmZyZWV6ZUZyYW1lV2lkdGgvdGhpcy5mcmVlemVGcmFtZUhlaWdodDtyPGk/KGU9dGhpcy5yb290RGl2LmNsaWVudFdpZHRoLHQ9TWF0aC5mbG9vcih0aGlzLnJvb3REaXYuY2xpZW50V2lkdGgvaSkscz1NYXRoLmZsb29yKC41Kih0aGlzLnJvb3REaXYuY2xpZW50SGVpZ2h0LXQpKSxuPTApOihlPU1hdGguZmxvb3IodGhpcy5yb290RGl2LmNsaWVudEhlaWdodCppKSx0PXRoaXMucm9vdERpdi5jbGllbnRIZWlnaHQscz0wLG49TWF0aC5mbG9vciguNSoodGhpcy5yb290RGl2LmNsaWVudFdpZHRoLWUpKSksdGhpcy5yb290RWxlbWVudC5zdHlsZS53aWR0aD10aGlzLnJvb3REaXYub2Zmc2V0V2lkdGgrXCJweFwiLHRoaXMucm9vdEVsZW1lbnQuc3R5bGUuaGVpZ2h0PXRoaXMucm9vdERpdi5vZmZzZXRIZWlnaHQrXCJweFwiLHRoaXMucm9vdEVsZW1lbnQuc3R5bGUubGVmdD1cIjBweFwiLHRoaXMucm9vdEVsZW1lbnQuc3R5bGUudG9wPVwiMHB4XCIsdGhpcy5pbWFnZUVsZW1lbnQuc3R5bGUud2lkdGg9ZStcInB4XCIsdGhpcy5pbWFnZUVsZW1lbnQuc3R5bGUuaGVpZ2h0PXQrXCJweFwiLHRoaXMuaW1hZ2VFbGVtZW50LnN0eWxlLmxlZnQ9bitcInB4XCIsdGhpcy5pbWFnZUVsZW1lbnQuc3R5bGUudG9wPXMrXCJweFwifX19Y2xhc3MgeXtjb25zdHJ1Y3RvcihlKXt0aGlzLnJlY2VpdmluZz0hMSx0aGlzLnNpemU9MCx0aGlzLmpwZWc9dm9pZCAwLHRoaXMudmFsaWQ9ITEsdGhpcy5mcmVlemVGcmFtZURlbGF5PTUwLHRoaXMuZnJlZXplRnJhbWU9bmV3IEUoZSl9c2hvd0ZyZWV6ZUZyYW1lKCl7dGhpcy52YWxpZCYmdGhpcy5mcmVlemVGcmFtZS5zZXRFbGVtZW50Rm9yU2hvdygpfWhpZGVGcmVlemVGcmFtZSgpe3RoaXMudmFsaWQ9ITEsdGhpcy5mcmVlemVGcmFtZS5zZXRFbGVtZW50Rm9ySGlkZSgpfXVwZGF0ZUZyZWV6ZUZyYW1lQW5kU2hvdyhlLHQpe3RoaXMuZnJlZXplRnJhbWUudXBkYXRlSW1hZ2VFbGVtZW50U291cmNlKGUpLHRoaXMuZnJlZXplRnJhbWUuaW1hZ2VFbGVtZW50Lm9ubG9hZD0oKT0+e3RoaXMuZnJlZXplRnJhbWUuc2V0RGltZW5zaW9uc0Zyb21FbGVtZW50QW5kUmVzaXplKCksdCgpfX1wcm9jZXNzRnJlZXplRnJhbWVNZXNzYWdlKGUsdCl7dGhpcy5yZWNlaXZpbmd8fCh0aGlzLnJlY2VpdmluZz0hMCx0aGlzLnZhbGlkPSExLHRoaXMuc2l6ZT0wLHRoaXMuanBlZz12b2lkIDApLHRoaXMuc2l6ZT1uZXcgRGF0YVZpZXcoZS5zbGljZSgxLDUpLmJ1ZmZlcikuZ2V0SW50MzIoMCwhMCk7Y29uc3Qgcz1lLnNsaWNlKDUpO2lmKHRoaXMuanBlZyl7Y29uc3QgZT1uZXcgVWludDhBcnJheSh0aGlzLmpwZWcubGVuZ3RoK3MubGVuZ3RoKTtlLnNldCh0aGlzLmpwZWcsMCksZS5zZXQocyx0aGlzLmpwZWcubGVuZ3RoKSx0aGlzLmpwZWc9ZX1lbHNlIHRoaXMuanBlZz1zLHRoaXMucmVjZWl2aW5nPSEwLGkuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLGByZWNlaXZlZCBmaXJzdCBjaHVuayBvZiBmcmVlemUgZnJhbWU6ICR7dGhpcy5qcGVnLmxlbmd0aH0vJHt0aGlzLnNpemV9YCw2KTt0aGlzLmpwZWcubGVuZ3RoPT09dGhpcy5zaXplPyh0aGlzLnJlY2VpdmluZz0hMSx0aGlzLnZhbGlkPSEwLGkuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLGByZWNlaXZlZCBjb21wbGV0ZSBmcmVlemUgZnJhbWUgJHt0aGlzLnNpemV9YCw2KSx0aGlzLnVwZGF0ZUZyZWV6ZUZyYW1lQW5kU2hvdyh0aGlzLmpwZWcsdCkpOnRoaXMuanBlZy5sZW5ndGg+dGhpcy5zaXplJiYoaS5FcnJvcihpLkdldFN0YWNrVHJhY2UoKSxgcmVjZWl2ZWQgYmlnZ2VyIGZyZWV6ZSBmcmFtZSB0aGFuIGFkdmVydGlzZWQ6ICR7dGhpcy5qcGVnLmxlbmd0aH0vJHt0aGlzLnNpemV9YCksdGhpcy5qcGVnPXZvaWQgMCx0aGlzLnJlY2VpdmluZz0hMSl9fWNsYXNzIGJ7Y29uc3RydWN0b3IoZSx0LHMsbixyPSgoKT0+e30pKXt0aGlzLm9uQ2hhbmdlPXIsdGhpcy5vbkNoYW5nZUVtaXQ9KCk9Pnt9LHRoaXMuaWQ9ZSx0aGlzLmRlc2NyaXB0aW9uPXMsdGhpcy5sYWJlbD10LHRoaXMudmFsdWU9bn1zZXQgbGFiZWwoZSl7dGhpcy5fbGFiZWw9ZSx0aGlzLm9uQ2hhbmdlRW1pdCh0aGlzLl92YWx1ZSl9Z2V0IGxhYmVsKCl7cmV0dXJuIHRoaXMuX2xhYmVsfWdldCB2YWx1ZSgpe3JldHVybiB0aGlzLl92YWx1ZX1zZXQgdmFsdWUoZSl7dGhpcy5fdmFsdWU9ZSx0aGlzLm9uQ2hhbmdlKHRoaXMuX3ZhbHVlLHRoaXMpLHRoaXMub25DaGFuZ2VFbWl0KHRoaXMuX3ZhbHVlKX19Y2xhc3MgTSBleHRlbmRzIGJ7Y29uc3RydWN0b3IoZSx0LHMsbixyLGk9KCgpPT57fSkpe3N1cGVyKGUsdCxzLG4saSk7Y29uc3Qgbz1uZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpO2lmKHImJm8uaGFzKHRoaXMuaWQpKXtjb25zdCBlPXRoaXMuZ2V0VXJsUGFyYW1GbGFnKCk7dGhpcy5mbGFnPWV9ZWxzZSB0aGlzLmZsYWc9bjt0aGlzLnVzZVVybFBhcmFtcz1yfWdldFVybFBhcmFtRmxhZygpe2NvbnN0IGU9bmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKTtyZXR1cm4hIWUuaGFzKHRoaXMuaWQpJiZcImZhbHNlXCIhPT1lLmdldCh0aGlzLmlkKSYmXCJGYWxzZVwiIT09ZS5nZXQodGhpcy5pZCl9dXBkYXRlVVJMUGFyYW1zKCl7aWYodGhpcy51c2VVcmxQYXJhbXMpe2NvbnN0IGU9bmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKTshMD09PXRoaXMuZmxhZz9lLnNldCh0aGlzLmlkLFwidHJ1ZVwiKTplLnNldCh0aGlzLmlkLFwiZmFsc2VcIiksd2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKHt9LFwiXCIsXCJcIiE9PWUudG9TdHJpbmcoKT9gJHtsb2NhdGlvbi5wYXRobmFtZX0/JHtlfWA6YCR7bG9jYXRpb24ucGF0aG5hbWV9YCl9fWVuYWJsZSgpe3RoaXMuZmxhZz0hMH1nZXQgZmxhZygpe3JldHVybiEhdGhpcy52YWx1ZX1zZXQgZmxhZyhlKXt0aGlzLnZhbHVlPWV9fWNsYXNzIHcgZXh0ZW5kcyBie2NvbnN0cnVjdG9yKGUsdCxzLG4scixpLG8sYT0oKCk9Pnt9KSl7c3VwZXIoZSx0LHMsaSxhKSx0aGlzLl9taW49bix0aGlzLl9tYXg9cjtjb25zdCBsPW5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaCk7aWYobyYmbC5oYXModGhpcy5pZCkpe2NvbnN0IGU9TnVtYmVyLnBhcnNlSW50KGwuZ2V0KHRoaXMuaWQpKTt0aGlzLm51bWJlcj1OdW1iZXIuaXNOYU4oZSk/aTplfWVsc2UgdGhpcy5udW1iZXI9aTt0aGlzLnVzZVVybFBhcmFtcz1vfXVwZGF0ZVVSTFBhcmFtcygpe2lmKHRoaXMudXNlVXJsUGFyYW1zKXtjb25zdCBlPW5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaCk7ZS5zZXQodGhpcy5pZCx0aGlzLm51bWJlci50b1N0cmluZygpKSx3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUoe30sXCJcIixcIlwiIT09ZS50b1N0cmluZygpP2Ake2xvY2F0aW9uLnBhdGhuYW1lfT8ke2V9YDpgJHtsb2NhdGlvbi5wYXRobmFtZX1gKX19c2V0IG51bWJlcihlKXt0aGlzLnZhbHVlPXRoaXMuY2xhbXAoZSl9Z2V0IG51bWJlcigpe3JldHVybiB0aGlzLnZhbHVlfWNsYW1wKGUpe3JldHVybiBNYXRoLm1heChNYXRoLm1pbih0aGlzLl9tYXgsZSksdGhpcy5fbWluKX1nZXQgbWluKCl7cmV0dXJuIHRoaXMuX21pbn1nZXQgbWF4KCl7cmV0dXJuIHRoaXMuX21heH1hZGRPbkNoYW5nZWRMaXN0ZW5lcihlKXt0aGlzLm9uQ2hhbmdlPWV9fWNsYXNzIFAgZXh0ZW5kcyBie2NvbnN0cnVjdG9yKGUsdCxzLG4scixpPSgoKT0+e30pKXtzdXBlcihlLHQscyxuLGkpO2NvbnN0IG89bmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKTtpZihyJiZvLmhhcyh0aGlzLmlkKSl7Y29uc3QgZT10aGlzLmdldFVybFBhcmFtVGV4dCgpO3RoaXMudGV4dD1lfWVsc2UgdGhpcy50ZXh0PW47dGhpcy51c2VVcmxQYXJhbXM9cn1nZXRVcmxQYXJhbVRleHQoKXt2YXIgZTtjb25zdCB0PW5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaCk7cmV0dXJuIHQuaGFzKHRoaXMuaWQpJiZudWxsIT09KGU9dC5nZXQodGhpcy5pZCkpJiZ2b2lkIDAhPT1lP2U6XCJcIn11cGRhdGVVUkxQYXJhbXMoKXtpZih0aGlzLnVzZVVybFBhcmFtcyl7Y29uc3QgZT1uZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpO2Uuc2V0KHRoaXMuaWQsdGhpcy50ZXh0KSx3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUoe30sXCJcIixcIlwiIT09ZS50b1N0cmluZygpP2Ake2xvY2F0aW9uLnBhdGhuYW1lfT8ke2V9YDpgJHtsb2NhdGlvbi5wYXRobmFtZX1gKX19Z2V0IHRleHQoKXtyZXR1cm4gdGhpcy52YWx1ZX1zZXQgdGV4dChlKXt0aGlzLnZhbHVlPWV9fWNsYXNzIFIgZXh0ZW5kcyBie2NvbnN0cnVjdG9yKGUsdCxzLG4scixpLG89KCgpPT57fSkpe3N1cGVyKGUsdCxzLFtuLG5dLG8pLHRoaXMub3B0aW9ucz1yO2NvbnN0IGE9bmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKSxsPWkmJmEuaGFzKHRoaXMuaWQpP3RoaXMuZ2V0VXJsUGFyYW1UZXh0KCk6bjt0aGlzLnNlbGVjdGVkPWwsdGhpcy51c2VVcmxQYXJhbXM9aX1nZXRVcmxQYXJhbVRleHQoKXt2YXIgZTtjb25zdCB0PW5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaCk7cmV0dXJuIHQuaGFzKHRoaXMuaWQpJiZudWxsIT09KGU9dC5nZXQodGhpcy5pZCkpJiZ2b2lkIDAhPT1lP2U6XCJcIn11cGRhdGVVUkxQYXJhbXMoKXtpZih0aGlzLnVzZVVybFBhcmFtcyl7Y29uc3QgZT1uZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpO2Uuc2V0KHRoaXMuaWQsdGhpcy5zZWxlY3RlZCksd2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKHt9LFwiXCIsXCJcIiE9PWUudG9TdHJpbmcoKT9gJHtsb2NhdGlvbi5wYXRobmFtZX0/JHtlfWA6YCR7bG9jYXRpb24ucGF0aG5hbWV9YCl9fWFkZE9uQ2hhbmdlZExpc3RlbmVyKGUpe3RoaXMub25DaGFuZ2U9ZX1nZXQgb3B0aW9ucygpe3JldHVybiB0aGlzLl9vcHRpb25zfXNldCBvcHRpb25zKGUpe3RoaXMuX29wdGlvbnM9ZSx0aGlzLm9uQ2hhbmdlRW1pdCh0aGlzLnNlbGVjdGVkKX1nZXQgc2VsZWN0ZWQoKXtyZXR1cm4gdGhpcy52YWx1ZX1zZXQgc2VsZWN0ZWQoZSl7Y29uc3QgdD10aGlzLm9wdGlvbnMuZmlsdGVyKCh0PT4tMSE9PXQuaW5kZXhPZihlKSkpO3QubGVuZ3RoJiYodGhpcy52YWx1ZT10WzBdKX19Y2xhc3MgayBleHRlbmRzIEV2ZW50e2NvbnN0cnVjdG9yKGUpe3N1cGVyKFwiYWZrV2FybmluZ0FjdGl2YXRlXCIpLHRoaXMuZGF0YT1lfX1jbGFzcyBMIGV4dGVuZHMgRXZlbnR7Y29uc3RydWN0b3IoZSl7c3VwZXIoXCJhZmtXYXJuaW5nVXBkYXRlXCIpLHRoaXMuZGF0YT1lfX1jbGFzcyB4IGV4dGVuZHMgRXZlbnR7Y29uc3RydWN0b3IoKXtzdXBlcihcImFma1dhcm5pbmdEZWFjdGl2YXRlXCIpfX1jbGFzcyBBIGV4dGVuZHMgRXZlbnR7Y29uc3RydWN0b3IoKXtzdXBlcihcImFma1RpbWVkT3V0XCIpfX1jbGFzcyBGIGV4dGVuZHMgRXZlbnR7Y29uc3RydWN0b3IoZSl7c3VwZXIoXCJ2aWRlb0VuY29kZXJBdmdRUFwiKSx0aGlzLmRhdGE9ZX19Y2xhc3MgRCBleHRlbmRzIEV2ZW50e2NvbnN0cnVjdG9yKCl7c3VwZXIoXCJ3ZWJSdGNTZHBcIil9fWNsYXNzIE8gZXh0ZW5kcyBFdmVudHtjb25zdHJ1Y3Rvcigpe3N1cGVyKFwid2ViUnRjQXV0b0Nvbm5lY3RcIil9fWNsYXNzIFUgZXh0ZW5kcyBFdmVudHtjb25zdHJ1Y3Rvcigpe3N1cGVyKFwid2ViUnRjQ29ubmVjdGluZ1wiKX19Y2xhc3MgSSBleHRlbmRzIEV2ZW50e2NvbnN0cnVjdG9yKCl7c3VwZXIoXCJ3ZWJSdGNDb25uZWN0ZWRcIil9fWNsYXNzIEcgZXh0ZW5kcyBFdmVudHtjb25zdHJ1Y3Rvcigpe3N1cGVyKFwid2ViUnRjRmFpbGVkXCIpfX1jbGFzcyB6IGV4dGVuZHMgRXZlbnR7Y29uc3RydWN0b3IoZSl7c3VwZXIoXCJ3ZWJSdGNEaXNjb25uZWN0ZWRcIiksdGhpcy5kYXRhPWV9fWNsYXNzIEIgZXh0ZW5kcyBFdmVudHtjb25zdHJ1Y3RvcihlKXtzdXBlcihcImRhdGFDaGFubmVsT3BlblwiKSx0aGlzLmRhdGE9ZX19Y2xhc3MgXyBleHRlbmRzIEV2ZW50e2NvbnN0cnVjdG9yKGUpe3N1cGVyKFwiZGF0YUNoYW5uZWxDbG9zZVwiKSx0aGlzLmRhdGE9ZX19Y2xhc3MgVyBleHRlbmRzIEV2ZW50e2NvbnN0cnVjdG9yKGUpe3N1cGVyKFwiZGF0YUNoYW5uZWxFcnJvclwiKSx0aGlzLmRhdGE9ZX19Y2xhc3MgSCBleHRlbmRzIEV2ZW50e2NvbnN0cnVjdG9yKCl7c3VwZXIoXCJ2aWRlb0luaXRpYWxpemVkXCIpfX1jbGFzcyBWIGV4dGVuZHMgRXZlbnR7Y29uc3RydWN0b3IoKXtzdXBlcihcInN0cmVhbUxvYWRpbmdcIil9fWNsYXNzIE4gZXh0ZW5kcyBFdmVudHtjb25zdHJ1Y3RvcihlKXtzdXBlcihcInBsYXlTdHJlYW1FcnJvclwiKSx0aGlzLmRhdGE9ZX19Y2xhc3MgSyBleHRlbmRzIEV2ZW50e2NvbnN0cnVjdG9yKCl7c3VwZXIoXCJwbGF5U3RyZWFtXCIpfX1jbGFzcyBRIGV4dGVuZHMgRXZlbnR7Y29uc3RydWN0b3IoZSl7c3VwZXIoXCJwbGF5U3RyZWFtUmVqZWN0ZWRcIiksdGhpcy5kYXRhPWV9fWNsYXNzICQgZXh0ZW5kcyBFdmVudHtjb25zdHJ1Y3RvcihlKXtzdXBlcihcImxvYWRGcmVlemVGcmFtZVwiKSx0aGlzLmRhdGE9ZX19Y2xhc3MgcSBleHRlbmRzIEV2ZW50e2NvbnN0cnVjdG9yKCl7c3VwZXIoXCJoaWRlRnJlZXplRnJhbWVcIil9fWNsYXNzIFggZXh0ZW5kcyBFdmVudHtjb25zdHJ1Y3RvcihlKXtzdXBlcihcInN0YXRzUmVjZWl2ZWRcIiksdGhpcy5kYXRhPWV9fWNsYXNzIGogZXh0ZW5kcyBFdmVudHtjb25zdHJ1Y3RvcihlKXtzdXBlcihcInN0cmVhbWVyTGlzdE1lc3NhZ2VcIiksdGhpcy5kYXRhPWV9fWNsYXNzIFkgZXh0ZW5kcyBFdmVudHtjb25zdHJ1Y3RvcihlKXtzdXBlcihcImxhdGVuY3lUZXN0UmVzdWx0XCIpLHRoaXMuZGF0YT1lfX1jbGFzcyBKIGV4dGVuZHMgRXZlbnR7Y29uc3RydWN0b3IoZSl7c3VwZXIoXCJpbml0aWFsU2V0dGluZ3NcIiksdGhpcy5kYXRhPWV9fWNsYXNzIFogZXh0ZW5kcyBFdmVudHtjb25zdHJ1Y3RvcihlKXtzdXBlcihcInNldHRpbmdzQ2hhbmdlZFwiKSx0aGlzLmRhdGE9ZX19Y2xhc3MgZWUgZXh0ZW5kcyBFdmVudHtjb25zdHJ1Y3Rvcigpe3N1cGVyKFwieHJTZXNzaW9uU3RhcnRlZFwiKX19Y2xhc3MgdGUgZXh0ZW5kcyBFdmVudHtjb25zdHJ1Y3Rvcigpe3N1cGVyKFwieHJTZXNzaW9uRW5kZWRcIil9fWNsYXNzIHNlIGV4dGVuZHMgRXZlbnR7Y29uc3RydWN0b3IoZSl7c3VwZXIoXCJ4ckZyYW1lXCIpLHRoaXMuZGF0YT1lfX1jbGFzcyBuZSBleHRlbmRzIEV2ZW50VGFyZ2V0e2Rpc3BhdGNoRXZlbnQoZSl7cmV0dXJuIHN1cGVyLmRpc3BhdGNoRXZlbnQoZSl9YWRkRXZlbnRMaXN0ZW5lcihlLHQpe3N1cGVyLmFkZEV2ZW50TGlzdGVuZXIoZSx0KX1yZW1vdmVFdmVudExpc3RlbmVyKGUsdCl7c3VwZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcihlLHQpfX1jbGFzcyByZXt9cmUuQXV0b0Nvbm5lY3Q9XCJBdXRvQ29ubmVjdFwiLHJlLkF1dG9QbGF5VmlkZW89XCJBdXRvUGxheVZpZGVvXCIscmUuQUZLRGV0ZWN0aW9uPVwiVGltZW91dElmSWRsZVwiLHJlLkJyb3dzZXJTZW5kT2ZmZXI9XCJPZmZlclRvUmVjZWl2ZVwiLHJlLkhvdmVyaW5nTW91c2VNb2RlPVwiSG92ZXJpbmdNb3VzZVwiLHJlLkZvcmNlTW9ub0F1ZGlvPVwiRm9yY2VNb25vQXVkaW9cIixyZS5Gb3JjZVRVUk49XCJGb3JjZVRVUk5cIixyZS5GYWtlTW91c2VXaXRoVG91Y2hlcz1cIkZha2VNb3VzZVdpdGhUb3VjaGVzXCIscmUuSXNRdWFsaXR5Q29udHJvbGxlcj1cIkNvbnRyb2xzUXVhbGl0eVwiLHJlLk1hdGNoVmlld3BvcnRSZXNvbHV0aW9uPVwiTWF0Y2hWaWV3cG9ydFJlc1wiLHJlLlByZWZlclNGVT1cInByZWZlclNGVVwiLHJlLlN0YXJ0VmlkZW9NdXRlZD1cIlN0YXJ0VmlkZW9NdXRlZFwiLHJlLlN1cHByZXNzQnJvd3NlcktleXM9XCJTdXBwcmVzc0Jyb3dzZXJLZXlzXCIscmUuVXNlTWljPVwiVXNlTWljXCIscmUuS2V5Ym9hcmRJbnB1dD1cIktleWJvYXJkSW5wdXRcIixyZS5Nb3VzZUlucHV0PVwiTW91c2VJbnB1dFwiLHJlLlRvdWNoSW5wdXQ9XCJUb3VjaElucHV0XCIscmUuR2FtZXBhZElucHV0PVwiR2FtZXBhZElucHV0XCIscmUuWFJDb250cm9sbGVySW5wdXQ9XCJYUkNvbnRyb2xsZXJJbnB1dFwiO2NvbnN0IGllPWU9Pk9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHJlKS5zb21lKCh0PT5yZVt0XT09PWUpKTtjbGFzcyBvZXt9b2UuQUZLVGltZW91dFNlY3M9XCJBRktUaW1lb3V0XCIsb2UuTWluUVA9XCJNaW5RUFwiLG9lLk1heFFQPVwiTWF4UVBcIixvZS5XZWJSVENGUFM9XCJXZWJSVENGUFNcIixvZS5XZWJSVENNaW5CaXRyYXRlPVwiV2ViUlRDTWluQml0cmF0ZVwiLG9lLldlYlJUQ01heEJpdHJhdGU9XCJXZWJSVENNYXhCaXRyYXRlXCIsb2UuTWF4UmVjb25uZWN0QXR0ZW1wdHM9XCJNYXhSZWNvbm5lY3RBdHRlbXB0c1wiO2NvbnN0IGFlPWU9Pk9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKG9lKS5zb21lKCh0PT5vZVt0XT09PWUpKTtjbGFzcyBsZXt9bGUuU2lnbmFsbGluZ1NlcnZlclVybD1cInNzXCI7Y29uc3QgZGU9ZT0+T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMobGUpLnNvbWUoKHQ9PmxlW3RdPT09ZSkpO2NsYXNzIGNle31jZS5QcmVmZXJyZWRDb2RlYz1cIlByZWZlcnJlZENvZGVjXCIsY2UuU3RyZWFtZXJJZD1cIlN0cmVhbWVySWRcIjtjb25zdCBoZT1lPT5PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhjZSkuc29tZSgodD0+Y2VbdF09PT1lKSk7Y2xhc3MgZ2V7Y29uc3RydWN0b3IoZT17fSl7dGhpcy5mbGFncz1uZXcgTWFwLHRoaXMubnVtZXJpY1BhcmFtZXRlcnM9bmV3IE1hcCx0aGlzLnRleHRQYXJhbWV0ZXJzPW5ldyBNYXAsdGhpcy5vcHRpb25QYXJhbWV0ZXJzPW5ldyBNYXA7Y29uc3R7aW5pdGlhbFNldHRpbmdzOnQsdXNlVXJsUGFyYW1zOnN9PWU7dGhpcy5fdXNlVXJsUGFyYW1zPSEhcyx0aGlzLnBvcHVsYXRlRGVmYXVsdFNldHRpbmdzKHRoaXMuX3VzZVVybFBhcmFtcyksdCYmdGhpcy5zZXRTZXR0aW5ncyh0KX1nZXQgdXNlVXJsUGFyYW1zKCl7cmV0dXJuIHRoaXMuX3VzZVVybFBhcmFtc31wb3B1bGF0ZURlZmF1bHRTZXR0aW5ncyhlKXt0aGlzLnRleHRQYXJhbWV0ZXJzLnNldChsZS5TaWduYWxsaW5nU2VydmVyVXJsLG5ldyBQKGxlLlNpZ25hbGxpbmdTZXJ2ZXJVcmwsXCJTaWduYWxsaW5nIHVybFwiLFwiVXJsIG9mIHRoZSBzaWduYWxsaW5nIHNlcnZlclwiLChcImh0dHBzOlwiPT09bG9jYXRpb24ucHJvdG9jb2w/XCJ3c3M6Ly9cIjpcIndzOi8vXCIpK3dpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSsoXCI4MFwiPT09d2luZG93LmxvY2F0aW9uLnBvcnR8fFwiXCI9PT13aW5kb3cubG9jYXRpb24ucG9ydD9cIlwiOmA6JHt3aW5kb3cubG9jYXRpb24ucG9ydH1gKSxlKSksdGhpcy5vcHRpb25QYXJhbWV0ZXJzLnNldChjZS5TdHJlYW1lcklkLG5ldyBSKGNlLlN0cmVhbWVySWQsXCJTdHJlYW1lciBJRFwiLFwiVGhlIElEIG9mIHRoZSBzdHJlYW1lciB0byBzdHJlYW0uXCIsXCJcIixbXSxlKSksdGhpcy5vcHRpb25QYXJhbWV0ZXJzLnNldChjZS5QcmVmZXJyZWRDb2RlYyxuZXcgUihjZS5QcmVmZXJyZWRDb2RlYyxcIlByZWZlcnJlZCBDb2RlY1wiLFwiVGhlIHByZWZlcnJlZCBjb2RlYyB0byBiZSB1c2VkIGR1cmluZyBjb2RlYyBuZWdvdGlhdGlvblwiLFwiSDI2NCBsZXZlbC1hc3ltbWV0cnktYWxsb3dlZD0xO3BhY2tldGl6YXRpb24tbW9kZT0xO3Byb2ZpbGUtbGV2ZWwtaWQ9NDJlMDFmXCIsZnVuY3Rpb24oKXtjb25zdCBlPVtdO2lmKCFSVENSdHBSZWNlaXZlci5nZXRDYXBhYmlsaXRpZXMpcmV0dXJuIGUucHVzaChcIk9ubHkgYXZhaWxhYmxlIG9uIENocm9tZVwiKSxlO2NvbnN0IHQ9LyhWUFxcZHxIMjZcXGR8QVYxKS4qLztyZXR1cm4gUlRDUnRwUmVjZWl2ZXIuZ2V0Q2FwYWJpbGl0aWVzKFwidmlkZW9cIikuY29kZWNzLmZvckVhY2goKHM9Pntjb25zdCBuPXMubWltZVR5cGUuc3BsaXQoXCIvXCIpWzFdK1wiIFwiKyhzLnNkcEZtdHBMaW5lfHxcIlwiKTtudWxsIT09dC5leGVjKG4pJiZlLnB1c2gobil9KSksZX0oKSxlKSksdGhpcy5mbGFncy5zZXQocmUuQXV0b0Nvbm5lY3QsbmV3IE0ocmUuQXV0b0Nvbm5lY3QsXCJBdXRvIGNvbm5lY3QgdG8gc3RyZWFtXCIsXCJXaGV0aGVyIHdlIHNob3VsZCBhdHRlbXB0IHRvIGF1dG8gY29ubmVjdCB0byB0aGUgc2lnbmFsbGluZyBzZXJ2ZXIgb3Igc2hvdyBhIGNsaWNrIHRvIHN0YXJ0IHByb21wdC5cIiwhMSxlKSksdGhpcy5mbGFncy5zZXQocmUuQXV0b1BsYXlWaWRlbyxuZXcgTShyZS5BdXRvUGxheVZpZGVvLFwiQXV0byBwbGF5IHZpZGVvXCIsXCJXaGVuIHZpZGVvIGlzIHJlYWR5IGF1dG9tYXRpY2FsbHkgc3RhcnQgcGxheWluZyBpdCBhcyBvcHBvc2VkIHRvIHNob3dpbmcgYSBwbGF5IGJ1dHRvbi5cIiwhMCxlKSksdGhpcy5mbGFncy5zZXQocmUuQnJvd3NlclNlbmRPZmZlcixuZXcgTShyZS5Ccm93c2VyU2VuZE9mZmVyLFwiQnJvd3NlciBzZW5kIG9mZmVyXCIsXCJCcm93c2VyIHdpbGwgaW5pdGlhdGUgdGhlIFdlYlJUQyBoYW5kc2hha2UgYnkgc2VuZGluZyB0aGUgb2ZmZXIgdG8gdGhlIHN0cmVhbWVyXCIsITEsZSkpLHRoaXMuZmxhZ3Muc2V0KHJlLlVzZU1pYyxuZXcgTShyZS5Vc2VNaWMsXCJVc2UgbWljcm9waG9uZVwiLFwiTWFrZSBicm93c2VyIHJlcXVlc3QgbWljcm9waG9uZSBhY2Nlc3MgYW5kIG9wZW4gYW4gaW5wdXQgYXVkaW8gdHJhY2suXCIsITEsZSkpLHRoaXMuZmxhZ3Muc2V0KHJlLlN0YXJ0VmlkZW9NdXRlZCxuZXcgTShyZS5TdGFydFZpZGVvTXV0ZWQsXCJTdGFydCB2aWRlbyBtdXRlZFwiLFwiVmlkZW8gd2lsbCBzdGFydCBtdXRlZCBpZiB0cnVlLlwiLCExLGUpKSx0aGlzLmZsYWdzLnNldChyZS5TdXBwcmVzc0Jyb3dzZXJLZXlzLG5ldyBNKHJlLlN1cHByZXNzQnJvd3NlcktleXMsXCJTdXBwcmVzcyBicm93c2VyIGtleXNcIixcIlN1cHByZXNzIGNlcnRhaW4gYnJvd3NlciBrZXlzIHRoYXQgd2UgdXNlIGluIFVFLCBmb3IgZXhhbXBsZSBGNSB0byBzaG93IHNoYWRlciBjb21wbGV4aXR5IGluc3RlYWQgb2YgcmVmcmVzaCB0aGUgcGFnZS5cIiwhMCxlKSksdGhpcy5mbGFncy5zZXQocmUuUHJlZmVyU0ZVLG5ldyBNKHJlLlByZWZlclNGVSxcIlByZWZlciBTRlVcIixcIlRyeSB0byBjb25uZWN0IHRvIHRoZSBTRlUgaW5zdGVhZCBvZiBQMlAuXCIsITEsZSkpLHRoaXMuZmxhZ3Muc2V0KHJlLklzUXVhbGl0eUNvbnRyb2xsZXIsbmV3IE0ocmUuSXNRdWFsaXR5Q29udHJvbGxlcixcIklzIHF1YWxpdHkgY29udHJvbGxlcj9cIixcIlRydWUgaWYgdGhpcyBwZWVyIGNvbnRyb2xzIHN0cmVhbSBxdWFsaXR5XCIsITAsZSkpLHRoaXMuZmxhZ3Muc2V0KHJlLkZvcmNlTW9ub0F1ZGlvLG5ldyBNKHJlLkZvcmNlTW9ub0F1ZGlvLFwiRm9yY2UgbW9ubyBhdWRpb1wiLFwiRm9yY2UgYnJvd3NlciB0byByZXF1ZXN0IG1vbm8gYXVkaW8gaW4gdGhlIFNEUFwiLCExLGUpKSx0aGlzLmZsYWdzLnNldChyZS5Gb3JjZVRVUk4sbmV3IE0ocmUuRm9yY2VUVVJOLFwiRm9yY2UgVFVSTlwiLFwiT25seSBnZW5lcmF0ZSBUVVJOL1JlbGF5ZWQgSUNFIGNhbmRpZGF0ZXMuXCIsITEsZSkpLHRoaXMuZmxhZ3Muc2V0KHJlLkFGS0RldGVjdGlvbixuZXcgTShyZS5BRktEZXRlY3Rpb24sXCJBRksgaWYgaWRsZVwiLFwiVGltZW91dCB0aGUgZXhwZXJpZW5jZSBpZiB1c2VyIGlzIEFGSyBmb3IgYSBwZXJpb2QuXCIsITEsZSkpLHRoaXMuZmxhZ3Muc2V0KHJlLk1hdGNoVmlld3BvcnRSZXNvbHV0aW9uLG5ldyBNKHJlLk1hdGNoVmlld3BvcnRSZXNvbHV0aW9uLFwiTWF0Y2ggdmlld3BvcnQgcmVzb2x1dGlvblwiLFwiUGl4ZWwgU3RyZWFtaW5nIHdpbGwgYmUgaW5zdHJ1Y3RlZCB0byBkeW5hbWljYWxseSByZXNpemUgdGhlIHZpZGVvIHN0cmVhbSB0byBtYXRjaCB0aGUgc2l6ZSBvZiB0aGUgdmlkZW8gZWxlbWVudC5cIiwhMSxlKSksdGhpcy5mbGFncy5zZXQocmUuSG92ZXJpbmdNb3VzZU1vZGUsbmV3IE0ocmUuSG92ZXJpbmdNb3VzZU1vZGUsXCJDb250cm9sIFNjaGVtZTogTG9ja2VkIE1vdXNlXCIsXCJFaXRoZXIgbG9ja2VkIG1vdXNlLCB3aGVyZSB0aGUgcG9pbnRlciBpcyBjb25zdW1lZCBieSB0aGUgdmlkZW8gYW5kIGxvY2tlZCB0byBpdCwgb3IgaG92ZXJpbmcgbW91c2UsIHdoZXJlIHRoZSBtb3VzZSBpcyBub3QgY29uc3VtZWQuXCIsITEsZSwoKGUsdCk9Pnt0LmxhYmVsPWBDb250cm9sIFNjaGVtZTogJHtlP1wiSG92ZXJpbmdcIjpcIkxvY2tlZFwifSBNb3VzZWB9KSkpLHRoaXMuZmxhZ3Muc2V0KHJlLkZha2VNb3VzZVdpdGhUb3VjaGVzLG5ldyBNKHJlLkZha2VNb3VzZVdpdGhUb3VjaGVzLFwiRmFrZSBtb3VzZSB3aXRoIHRvdWNoZXNcIixcIkEgc2luZ2xlIGZpbmdlciB0b3VjaCBpcyBjb252ZXJ0ZWQgaW50byBhIG1vdXNlIGV2ZW50LiBUaGlzIGFsbG93cyBhIG5vbi10b3VjaCBhcHBsaWNhdGlvbiB0byBiZSBjb250cm9sbGVkIHBhcnRpYWxseSB2aWEgYSB0b3VjaCBkZXZpY2UuXCIsITEsZSkpLHRoaXMuZmxhZ3Muc2V0KHJlLktleWJvYXJkSW5wdXQsbmV3IE0ocmUuS2V5Ym9hcmRJbnB1dCxcIktleWJvYXJkIGlucHV0XCIsXCJJZiBlbmFibGVkLCBzZW5kIGtleWJvYXJkIGV2ZW50cyB0byBzdHJlYW1lclwiLCEwLGUpKSx0aGlzLmZsYWdzLnNldChyZS5Nb3VzZUlucHV0LG5ldyBNKHJlLk1vdXNlSW5wdXQsXCJNb3VzZSBpbnB1dFwiLFwiSWYgZW5hYmxlZCwgc2VuZCBtb3VzZSBldmVudHMgdG8gc3RyZWFtZXJcIiwhMCxlKSksdGhpcy5mbGFncy5zZXQocmUuVG91Y2hJbnB1dCxuZXcgTShyZS5Ub3VjaElucHV0LFwiVG91Y2ggaW5wdXRcIixcIklmIGVuYWJsZWQsIHNlbmQgdG91Y2ggZXZlbnRzIHRvIHN0cmVhbWVyXCIsITAsZSkpLHRoaXMuZmxhZ3Muc2V0KHJlLkdhbWVwYWRJbnB1dCxuZXcgTShyZS5HYW1lcGFkSW5wdXQsXCJHYW1lcGFkIGlucHV0XCIsXCJJZiBlbmFibGVkLCBzZW5kIGdhbWVwYWQgZXZlbnRzIHRvIHN0cmVhbWVyXCIsITAsZSkpLHRoaXMuZmxhZ3Muc2V0KHJlLlhSQ29udHJvbGxlcklucHV0LG5ldyBNKHJlLlhSQ29udHJvbGxlcklucHV0LFwiWFIgY29udHJvbGxlciBpbnB1dFwiLFwiSWYgZW5hYmxlZCwgc2VuZCBYUiBjb250cm9sbGVyIGV2ZW50cyB0byBzdHJlYW1lclwiLCEwLGUpKSx0aGlzLm51bWVyaWNQYXJhbWV0ZXJzLnNldChvZS5BRktUaW1lb3V0U2VjcyxuZXcgdyhvZS5BRktUaW1lb3V0U2VjcyxcIkFGSyB0aW1lb3V0XCIsXCJUaGUgdGltZSAoaW4gc2Vjb25kcykgaXQgdGFrZXMgZm9yIHRoZSBhcHBsaWNhdGlvbiB0byB0aW1lIG91dCBpZiBBRksgdGltZW91dCBpcyBlbmFibGVkLlwiLDAsNjAwLDEyMCxlKSksdGhpcy5udW1lcmljUGFyYW1ldGVycy5zZXQob2UuTWF4UmVjb25uZWN0QXR0ZW1wdHMsbmV3IHcob2UuTWF4UmVjb25uZWN0QXR0ZW1wdHMsXCJNYXggUmVjb25uZWN0c1wiLFwiTWF4aW11bSBudW1iZXIgb2YgcmVjb25uZWN0cyB0aGUgYXBwbGljYXRpb24gd2lsbCBhdHRlbXB0IHdoZW4gYSBzdHJlYW1lciBkaXNjb25uZWN0cy5cIiwwLDk5OSwzLGUpKSx0aGlzLm51bWVyaWNQYXJhbWV0ZXJzLnNldChvZS5NaW5RUCxuZXcgdyhvZS5NaW5RUCxcIk1pbiBRUFwiLFwiVGhlIGxvd2VyIGJvdW5kIGZvciB0aGUgcXVhbnRpemF0aW9uIHBhcmFtZXRlciAoUVApIG9mIHRoZSBlbmNvZGVyLiAwID0gQmVzdCBxdWFsaXR5LCA1MSA9IHdvcnN0IHF1YWxpdHkuXCIsMCw1MSwwLGUpKSx0aGlzLm51bWVyaWNQYXJhbWV0ZXJzLnNldChvZS5NYXhRUCxuZXcgdyhvZS5NYXhRUCxcIk1heCBRUFwiLFwiVGhlIHVwcGVyIGJvdW5kIGZvciB0aGUgcXVhbnRpemF0aW9uIHBhcmFtZXRlciAoUVApIG9mIHRoZSBlbmNvZGVyLiAwID0gQmVzdCBxdWFsaXR5LCA1MSA9IHdvcnN0IHF1YWxpdHkuXCIsMCw1MSw1MSxlKSksdGhpcy5udW1lcmljUGFyYW1ldGVycy5zZXQob2UuV2ViUlRDRlBTLG5ldyB3KG9lLldlYlJUQ0ZQUyxcIk1heCBGUFNcIixcIlRoZSBtYXhpbXVtIEZQUyB0aGF0IFdlYlJUQyB3aWxsIHRyeSB0byB0cmFuc21pdCBmcmFtZXMgYXQuXCIsMSw5OTksNjAsZSkpLHRoaXMubnVtZXJpY1BhcmFtZXRlcnMuc2V0KG9lLldlYlJUQ01pbkJpdHJhdGUsbmV3IHcob2UuV2ViUlRDTWluQml0cmF0ZSxcIk1pbiBCaXRyYXRlIChrYnBzKVwiLFwiVGhlIG1pbmltdW0gYml0cmF0ZSB0aGF0IFdlYlJUQyBzaG91bGQgdXNlLlwiLDAsNWU1LDAsZSkpLHRoaXMubnVtZXJpY1BhcmFtZXRlcnMuc2V0KG9lLldlYlJUQ01heEJpdHJhdGUsbmV3IHcob2UuV2ViUlRDTWF4Qml0cmF0ZSxcIk1heCBCaXRyYXRlIChrYnBzKVwiLFwiVGhlIG1heGltdW0gYml0cmF0ZSB0aGF0IFdlYlJUQyBzaG91bGQgdXNlLlwiLDAsNWU1LDAsZSkpfV9hZGRPbk51bWVyaWNTZXR0aW5nQ2hhbmdlZExpc3RlbmVyKGUsdCl7dGhpcy5udW1lcmljUGFyYW1ldGVycy5oYXMoZSkmJnRoaXMubnVtZXJpY1BhcmFtZXRlcnMuZ2V0KGUpLmFkZE9uQ2hhbmdlZExpc3RlbmVyKHQpfV9hZGRPbk9wdGlvblNldHRpbmdDaGFuZ2VkTGlzdGVuZXIoZSx0KXt0aGlzLm9wdGlvblBhcmFtZXRlcnMuaGFzKGUpJiZ0aGlzLm9wdGlvblBhcmFtZXRlcnMuZ2V0KGUpLmFkZE9uQ2hhbmdlZExpc3RlbmVyKHQpfWdldE51bWVyaWNTZXR0aW5nVmFsdWUoZSl7aWYodGhpcy5udW1lcmljUGFyYW1ldGVycy5oYXMoZSkpcmV0dXJuIHRoaXMubnVtZXJpY1BhcmFtZXRlcnMuZ2V0KGUpLm51bWJlcjt0aHJvdyBuZXcgRXJyb3IoYFRoZXJlIGlzIG5vIG51bWVyaWMgc2V0dGluZyB3aXRoIHRoZSBpZCBvZiAke2V9YCl9Z2V0VGV4dFNldHRpbmdWYWx1ZShlKXtpZih0aGlzLnRleHRQYXJhbWV0ZXJzLmhhcyhlKSlyZXR1cm4gdGhpcy50ZXh0UGFyYW1ldGVycy5nZXQoZSkudmFsdWU7dGhyb3cgbmV3IEVycm9yKGBUaGVyZSBpcyBubyBudW1lcmljIHNldHRpbmcgd2l0aCB0aGUgaWQgb2YgJHtlfWApfXNldE51bWVyaWNTZXR0aW5nKGUsdCl7aWYoIXRoaXMubnVtZXJpY1BhcmFtZXRlcnMuaGFzKGUpKXRocm93IG5ldyBFcnJvcihgVGhlcmUgaXMgbm8gbnVtZXJpYyBzZXR0aW5nIHdpdGggdGhlIGlkIG9mICR7ZX1gKTt0aGlzLm51bWVyaWNQYXJhbWV0ZXJzLmdldChlKS5udW1iZXI9dH1fYWRkT25TZXR0aW5nQ2hhbmdlZExpc3RlbmVyKGUsdCl7dGhpcy5mbGFncy5oYXMoZSkmJih0aGlzLmZsYWdzLmdldChlKS5vbkNoYW5nZT10KX1fYWRkT25UZXh0U2V0dGluZ0NoYW5nZWRMaXN0ZW5lcihlLHQpe3RoaXMudGV4dFBhcmFtZXRlcnMuaGFzKGUpJiYodGhpcy50ZXh0UGFyYW1ldGVycy5nZXQoZSkub25DaGFuZ2U9dCl9Z2V0U2V0dGluZ09wdGlvbihlKXtyZXR1cm4gdGhpcy5vcHRpb25QYXJhbWV0ZXJzLmdldChlKX1pc0ZsYWdFbmFibGVkKGUpe3JldHVybiB0aGlzLmZsYWdzLmdldChlKS5mbGFnfXNldEZsYWdFbmFibGVkKGUsdCl7dGhpcy5mbGFncy5oYXMoZSk/dGhpcy5mbGFncy5nZXQoZSkuZmxhZz10OmkuV2FybmluZyhpLkdldFN0YWNrVHJhY2UoKSxgQ2Fubm90IHRvZ2dsZSBmbGFnIGNhbGxlZCAke2V9IC0gaXQgZG9lcyBub3QgZXhpc3QgaW4gdGhlIENvbmZpZy5mbGFncyBtYXAuYCl9c2V0VGV4dFNldHRpbmcoZSx0KXt0aGlzLnRleHRQYXJhbWV0ZXJzLmhhcyhlKT90aGlzLnRleHRQYXJhbWV0ZXJzLmdldChlKS50ZXh0PXQ6aS5XYXJuaW5nKGkuR2V0U3RhY2tUcmFjZSgpLGBDYW5ub3Qgc2V0IHRleHQgc2V0dGluZyBjYWxsZWQgJHtlfSAtIGl0IGRvZXMgbm90IGV4aXN0IGluIHRoZSBDb25maWcudGV4dFBhcmFtZXRlcnMgbWFwLmApfXNldE9wdGlvblNldHRpbmdPcHRpb25zKGUsdCl7dGhpcy5vcHRpb25QYXJhbWV0ZXJzLmhhcyhlKT90aGlzLm9wdGlvblBhcmFtZXRlcnMuZ2V0KGUpLm9wdGlvbnM9dDppLldhcm5pbmcoaS5HZXRTdGFja1RyYWNlKCksYENhbm5vdCBzZXQgdGV4dCBzZXR0aW5nIGNhbGxlZCAke2V9IC0gaXQgZG9lcyBub3QgZXhpc3QgaW4gdGhlIENvbmZpZy5vcHRpb25QYXJhbWV0ZXJzIG1hcC5gKX1zZXRPcHRpb25TZXR0aW5nVmFsdWUoZSx0KXt0aGlzLm9wdGlvblBhcmFtZXRlcnMuaGFzKGUpP3RoaXMub3B0aW9uUGFyYW1ldGVycy5nZXQoZSkuc2VsZWN0ZWQ9dDppLldhcm5pbmcoaS5HZXRTdGFja1RyYWNlKCksYENhbm5vdCBzZXQgdGV4dCBzZXR0aW5nIGNhbGxlZCAke2V9IC0gaXQgZG9lcyBub3QgZXhpc3QgaW4gdGhlIENvbmZpZy5lbnVtUGFyYW1ldGVycyBtYXAuYCl9c2V0RmxhZ0xhYmVsKGUsdCl7dGhpcy5mbGFncy5oYXMoZSk/dGhpcy5mbGFncy5nZXQoZSkubGFiZWw9dDppLldhcm5pbmcoaS5HZXRTdGFja1RyYWNlKCksYENhbm5vdCBzZXQgbGFiZWwgZm9yIGZsYWcgY2FsbGVkICR7ZX0gLSBpdCBkb2VzIG5vdCBleGlzdCBpbiB0aGUgQ29uZmlnLmZsYWdzIG1hcC5gKX1zZXRTZXR0aW5ncyhlKXtmb3IoY29uc3QgdCBvZiBPYmplY3Qua2V5cyhlKSlpZSh0KT90aGlzLnNldEZsYWdFbmFibGVkKHQsZVt0XSk6YWUodCk/dGhpcy5zZXROdW1lcmljU2V0dGluZyh0LGVbdF0pOmRlKHQpP3RoaXMuc2V0VGV4dFNldHRpbmcodCxlW3RdKTpoZSh0KSYmdGhpcy5zZXRPcHRpb25TZXR0aW5nVmFsdWUodCxlW3RdKX1nZXRTZXR0aW5ncygpe2NvbnN0IGU9e307Zm9yKGNvbnN0W3Qsc11vZiB0aGlzLmZsYWdzLmVudHJpZXMoKSllW3RdPXMuZmxhZztmb3IoY29uc3RbdCxzXW9mIHRoaXMubnVtZXJpY1BhcmFtZXRlcnMuZW50cmllcygpKWVbdF09cy5udW1iZXI7Zm9yKGNvbnN0W3Qsc11vZiB0aGlzLnRleHRQYXJhbWV0ZXJzLmVudHJpZXMoKSllW3RdPXMudGV4dDtmb3IoY29uc3RbdCxzXW9mIHRoaXMub3B0aW9uUGFyYW1ldGVycy5lbnRyaWVzKCkpZVt0XT1zLnNlbGVjdGVkO3JldHVybiBlfWdldEZsYWdzKCl7cmV0dXJuIEFycmF5LmZyb20odGhpcy5mbGFncy52YWx1ZXMoKSl9Z2V0VGV4dFNldHRpbmdzKCl7cmV0dXJuIEFycmF5LmZyb20odGhpcy50ZXh0UGFyYW1ldGVycy52YWx1ZXMoKSl9Z2V0TnVtZXJpY1NldHRpbmdzKCl7cmV0dXJuIEFycmF5LmZyb20odGhpcy5udW1lcmljUGFyYW1ldGVycy52YWx1ZXMoKSl9Z2V0T3B0aW9uU2V0dGluZ3MoKXtyZXR1cm4gQXJyYXkuZnJvbSh0aGlzLm9wdGlvblBhcmFtZXRlcnMudmFsdWVzKCkpfV9yZWdpc3Rlck9uQ2hhbmdlRXZlbnRzKGUpe2Zvcihjb25zdCB0IG9mIHRoaXMuZmxhZ3Mua2V5cygpKXtjb25zdCBzPXRoaXMuZmxhZ3MuZ2V0KHQpO3MmJihzLm9uQ2hhbmdlRW1pdD10PT5lLmRpc3BhdGNoRXZlbnQobmV3IFooe2lkOnMuaWQsdHlwZTpcImZsYWdcIix2YWx1ZTp0LHRhcmdldDpzfSkpKX1mb3IoY29uc3QgdCBvZiB0aGlzLm51bWVyaWNQYXJhbWV0ZXJzLmtleXMoKSl7Y29uc3Qgcz10aGlzLm51bWVyaWNQYXJhbWV0ZXJzLmdldCh0KTtzJiYocy5vbkNoYW5nZUVtaXQ9dD0+ZS5kaXNwYXRjaEV2ZW50KG5ldyBaKHtpZDpzLmlkLHR5cGU6XCJudW1iZXJcIix2YWx1ZTp0LHRhcmdldDpzfSkpKX1mb3IoY29uc3QgdCBvZiB0aGlzLnRleHRQYXJhbWV0ZXJzLmtleXMoKSl7Y29uc3Qgcz10aGlzLnRleHRQYXJhbWV0ZXJzLmdldCh0KTtzJiYocy5vbkNoYW5nZUVtaXQ9dD0+ZS5kaXNwYXRjaEV2ZW50KG5ldyBaKHtpZDpzLmlkLHR5cGU6XCJ0ZXh0XCIsdmFsdWU6dCx0YXJnZXQ6c30pKSl9Zm9yKGNvbnN0IHQgb2YgdGhpcy5vcHRpb25QYXJhbWV0ZXJzLmtleXMoKSl7Y29uc3Qgcz10aGlzLm9wdGlvblBhcmFtZXRlcnMuZ2V0KHQpO3MmJihzLm9uQ2hhbmdlRW1pdD10PT5lLmRpc3BhdGNoRXZlbnQobmV3IFooe2lkOnMuaWQsdHlwZTpcIm9wdGlvblwiLHZhbHVlOnQsdGFyZ2V0OnN9KSkpfX19dmFyIHVlOyFmdW5jdGlvbihlKXtlW2UuTG9ja2VkTW91c2U9MF09XCJMb2NrZWRNb3VzZVwiLGVbZS5Ib3ZlcmluZ01vdXNlPTFdPVwiSG92ZXJpbmdNb3VzZVwifSh1ZXx8KHVlPXt9KSk7Y2xhc3MgbWV7Y29uc3RydWN0b3IoZSx0LHMpe3RoaXMuY2xvc2VUaW1lb3V0PTEwLHRoaXMuYWN0aXZlPSExLHRoaXMuY291bnRkb3duQWN0aXZlPSExLHRoaXMud2FyblRpbWVyPXZvaWQgMCx0aGlzLmNvdW50RG93bj0wLHRoaXMuY291bnREb3duVGltZXI9dm9pZCAwLHRoaXMuY29uZmlnPWUsdGhpcy5waXhlbFN0cmVhbWluZz10LHRoaXMub25EaXNtaXNzQWZrPXMsdGhpcy5vbkFGS1RpbWVkT3V0Q2FsbGJhY2s9KCk9Pntjb25zb2xlLmxvZyhcIkFGSyB0aW1lZCBvdXQsIGRpZCB5b3Ugd2FudCB0byBvdmVycmlkZSB0aGlzIGNhbGxiYWNrP1wiKX19b25BZmtDbGljaygpe2NsZWFySW50ZXJ2YWwodGhpcy5jb3VudERvd25UaW1lciksKHRoaXMuYWN0aXZlfHx0aGlzLmNvdW50ZG93bkFjdGl2ZSkmJih0aGlzLnN0YXJ0QWZrV2FybmluZ1RpbWVyKCksdGhpcy5waXhlbFN0cmVhbWluZy5kaXNwYXRjaEV2ZW50KG5ldyB4KSl9c3RhcnRBZmtXYXJuaW5nVGltZXIoKXt0aGlzLmNvbmZpZy5nZXROdW1lcmljU2V0dGluZ1ZhbHVlKG9lLkFGS1RpbWVvdXRTZWNzKT4wJiZ0aGlzLmNvbmZpZy5pc0ZsYWdFbmFibGVkKHJlLkFGS0RldGVjdGlvbik/dGhpcy5hY3RpdmU9ITA6dGhpcy5hY3RpdmU9ITEsdGhpcy5yZXNldEFma1dhcm5pbmdUaW1lcigpfXN0b3BBZmtXYXJuaW5nVGltZXIoKXt0aGlzLmFjdGl2ZT0hMSx0aGlzLmNvdW50ZG93bkFjdGl2ZT0hMSxjbGVhclRpbWVvdXQodGhpcy53YXJuVGltZXIpLGNsZWFySW50ZXJ2YWwodGhpcy5jb3VudERvd25UaW1lcil9cGF1c2VBZmtXYXJuaW5nVGltZXIoKXt0aGlzLmFjdGl2ZT0hMX1yZXNldEFma1dhcm5pbmdUaW1lcigpe3RoaXMuYWN0aXZlJiZ0aGlzLmNvbmZpZy5pc0ZsYWdFbmFibGVkKHJlLkFGS0RldGVjdGlvbikmJihjbGVhclRpbWVvdXQodGhpcy53YXJuVGltZXIpLHRoaXMud2FyblRpbWVyPXNldFRpbWVvdXQoKCgpPT50aGlzLmFjdGl2YXRlQWZrRXZlbnQoKSksMWUzKnRoaXMuY29uZmlnLmdldE51bWVyaWNTZXR0aW5nVmFsdWUob2UuQUZLVGltZW91dFNlY3MpKSl9YWN0aXZhdGVBZmtFdmVudCgpe3RoaXMucGF1c2VBZmtXYXJuaW5nVGltZXIoKSx0aGlzLnBpeGVsU3RyZWFtaW5nLmRpc3BhdGNoRXZlbnQobmV3IGsoe2NvdW50RG93bjp0aGlzLmNvdW50RG93bixkaXNtaXNzQWZrOnRoaXMub25EaXNtaXNzQWZrfSkpLHRoaXMuY291bnREb3duPXRoaXMuY2xvc2VUaW1lb3V0LHRoaXMuY291bnRkb3duQWN0aXZlPSEwLHRoaXMucGl4ZWxTdHJlYW1pbmcuZGlzcGF0Y2hFdmVudChuZXcgTCh7Y291bnREb3duOnRoaXMuY291bnREb3dufSkpLHRoaXMuY29uZmlnLmlzRmxhZ0VuYWJsZWQocmUuSG92ZXJpbmdNb3VzZU1vZGUpfHxkb2N1bWVudC5leGl0UG9pbnRlckxvY2smJmRvY3VtZW50LmV4aXRQb2ludGVyTG9jaygpLHRoaXMuY291bnREb3duVGltZXI9c2V0SW50ZXJ2YWwoKCgpPT57dGhpcy5jb3VudERvd24tLSwwPT10aGlzLmNvdW50RG93bj8odGhpcy5waXhlbFN0cmVhbWluZy5kaXNwYXRjaEV2ZW50KG5ldyBBKSx0aGlzLm9uQUZLVGltZWRPdXRDYWxsYmFjaygpLGkuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLFwiWW91IGhhdmUgYmVlbiBkaXNjb25uZWN0ZWQgZHVlIHRvIGluYWN0aXZpdHlcIiksdGhpcy5zdG9wQWZrV2FybmluZ1RpbWVyKCkpOnRoaXMucGl4ZWxTdHJlYW1pbmcuZGlzcGF0Y2hFdmVudChuZXcgTCh7Y291bnREb3duOnRoaXMuY291bnREb3dufSkpfSksMWUzKX19Y2xhc3MgU2V7Y29uc3RydWN0b3IoKXt0aGlzLmlzUmVjZWl2aW5nRnJlZXplRnJhbWU9ITF9Z2V0RGF0YUNoYW5uZWxJbnN0YW5jZSgpe3JldHVybiB0aGlzfWNyZWF0ZURhdGFDaGFubmVsKGUsdCxzKXt0aGlzLnBlZXJDb25uZWN0aW9uPWUsdGhpcy5sYWJlbD10LHRoaXMuZGF0YWNoYW5uZWxPcHRpb25zPXMsbnVsbD09cyYmKHRoaXMuZGF0YWNoYW5uZWxPcHRpb25zPXt9LHRoaXMuZGF0YWNoYW5uZWxPcHRpb25zLm9yZGVyZWQ9ITApLHRoaXMuZGF0YUNoYW5uZWw9dGhpcy5wZWVyQ29ubmVjdGlvbi5jcmVhdGVEYXRhQ2hhbm5lbCh0aGlzLmxhYmVsLHRoaXMuZGF0YWNoYW5uZWxPcHRpb25zKSx0aGlzLnNldHVwRGF0YUNoYW5uZWwoKX1zZXR1cERhdGFDaGFubmVsKCl7dGhpcy5kYXRhQ2hhbm5lbC5iaW5hcnlUeXBlPVwiYXJyYXlidWZmZXJcIix0aGlzLmRhdGFDaGFubmVsLm9ub3Blbj1lPT50aGlzLmhhbmRsZU9uT3BlbihlKSx0aGlzLmRhdGFDaGFubmVsLm9uY2xvc2U9ZT0+dGhpcy5oYW5kbGVPbkNsb3NlKGUpLHRoaXMuZGF0YUNoYW5uZWwub25tZXNzYWdlPWU9PnRoaXMuaGFuZGxlT25NZXNzYWdlKGUpLHRoaXMuZGF0YUNoYW5uZWwub25lcnJvcj1lPT50aGlzLmhhbmRsZU9uRXJyb3IoZSl9aGFuZGxlT25PcGVuKGUpe3ZhciB0O2kuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLGBEYXRhIENoYW5uZWwgKCR7dGhpcy5sYWJlbH0pIG9wZW5lZC5gLDcpLHRoaXMub25PcGVuKG51bGw9PT0odD10aGlzLmRhdGFDaGFubmVsKXx8dm9pZCAwPT09dD92b2lkIDA6dC5sYWJlbCxlKX1oYW5kbGVPbkNsb3NlKGUpe3ZhciB0O2kuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLGBEYXRhIENoYW5uZWwgKCR7dGhpcy5sYWJlbH0pIGNsb3NlZC5gLDcpLHRoaXMub25DbG9zZShudWxsPT09KHQ9dGhpcy5kYXRhQ2hhbm5lbCl8fHZvaWQgMD09PXQ/dm9pZCAwOnQubGFiZWwsZSl9aGFuZGxlT25NZXNzYWdlKGUpe2kuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLGBEYXRhIENoYW5uZWwgKCR7dGhpcy5sYWJlbH0pIG1lc3NhZ2U6ICR7ZX1gLDgpfWhhbmRsZU9uRXJyb3IoZSl7dmFyIHQ7aS5Mb2coaS5HZXRTdGFja1RyYWNlKCksYERhdGEgQ2hhbm5lbCAoJHt0aGlzLmxhYmVsfSkgZXJyb3I6ICR7ZX1gLDcpLHRoaXMub25FcnJvcihudWxsPT09KHQ9dGhpcy5kYXRhQ2hhbm5lbCl8fHZvaWQgMD09PXQ/dm9pZCAwOnQubGFiZWwsZSl9b25PcGVuKGUsdCl7fW9uQ2xvc2UoZSx0KXt9b25FcnJvcihlLHQpe319Y2xhc3MgcGV7fWNsYXNzIHZle31jbGFzcyBDZXt9Y2xhc3MgZmV7fWNsYXNzIFRle31jbGFzcyBFZXt9Y2xhc3MgeWV7fWNsYXNzIGJle31jbGFzcyBNZXtjb25zdHJ1Y3Rvcigpe3RoaXMuaW5ib3VuZFZpZGVvU3RhdHM9bmV3IHZlLHRoaXMuaW5ib3VuZEF1ZGlvU3RhdHM9bmV3IHBlLHRoaXMuY2FuZGlkYXRlUGFpcj1uZXcgVGUsdGhpcy5EYXRhQ2hhbm5lbFN0YXRzPW5ldyBDZSx0aGlzLm91dEJvdW5kVmlkZW9TdGF0cz1uZXcgRWUsdGhpcy5zZXNzaW9uU3RhdHM9bmV3IHllLHRoaXMuc3RyZWFtU3RhdHM9bmV3IGJlLHRoaXMuY29kZWNzPW5ldyBNYXB9cHJvY2Vzc1N0YXRzKGUpe3RoaXMubG9jYWxDYW5kaWRhdGVzPW5ldyBBcnJheSx0aGlzLnJlbW90ZUNhbmRpZGF0ZXM9bmV3IEFycmF5LGUuZm9yRWFjaCgoZT0+e3N3aXRjaChlLnR5cGUpe2Nhc2VcImNhbmRpZGF0ZS1wYWlyXCI6dGhpcy5oYW5kbGVDYW5kaWRhdGVQYWlyKGUpO2JyZWFrO2Nhc2VcImNlcnRpZmljYXRlXCI6Y2FzZVwibWVkaWEtc291cmNlXCI6Y2FzZVwib3V0Ym91bmQtcnRwXCI6Y2FzZVwicGVlci1jb25uZWN0aW9uXCI6Y2FzZVwicmVtb3RlLWluYm91bmQtcnRwXCI6Y2FzZVwidHJhbnNwb3J0XCI6YnJlYWs7Y2FzZVwiY29kZWNcIjp0aGlzLmhhbmRsZUNvZGVjKGUpO2JyZWFrO2Nhc2VcImRhdGEtY2hhbm5lbFwiOnRoaXMuaGFuZGxlRGF0YUNoYW5uZWwoZSk7YnJlYWs7Y2FzZVwiaW5ib3VuZC1ydHBcIjp0aGlzLmhhbmRsZUluQm91bmRSVFAoZSk7YnJlYWs7Y2FzZVwibG9jYWwtY2FuZGlkYXRlXCI6dGhpcy5oYW5kbGVMb2NhbENhbmRpZGF0ZShlKTticmVhaztjYXNlXCJyZW1vdGUtY2FuZGlkYXRlXCI6dGhpcy5oYW5kbGVSZW1vdGVDYW5kaWRhdGUoZSk7YnJlYWs7Y2FzZVwicmVtb3RlLW91dGJvdW5kLXJ0cFwiOnRoaXMuaGFuZGxlUmVtb3RlT3V0Qm91bmQoZSk7YnJlYWs7Y2FzZVwidHJhY2tcIjp0aGlzLmhhbmRsZVRyYWNrKGUpO2JyZWFrO2Nhc2VcInN0cmVhbVwiOnRoaXMuaGFuZGxlU3RyZWFtKGUpO2JyZWFrO2RlZmF1bHQ6aS5FcnJvcihpLkdldFN0YWNrVHJhY2UoKSxcInVuaGFuZGxlZCBTdGF0IFR5cGVcIiksaS5Mb2coaS5HZXRTdGFja1RyYWNlKCksZSl9fSkpfWhhbmRsZVN0cmVhbShlKXt0aGlzLnN0cmVhbVN0YXRzPWV9aGFuZGxlQ2FuZGlkYXRlUGFpcihlKXt0aGlzLmNhbmRpZGF0ZVBhaXIuYnl0ZXNSZWNlaXZlZD1lLmJ5dGVzUmVjZWl2ZWQsdGhpcy5jYW5kaWRhdGVQYWlyLmJ5dGVzU2VudD1lLmJ5dGVzU2VudCx0aGlzLmNhbmRpZGF0ZVBhaXIubG9jYWxDYW5kaWRhdGVJZD1lLmxvY2FsQ2FuZGlkYXRlSWQsdGhpcy5jYW5kaWRhdGVQYWlyLnJlbW90ZUNhbmRpZGF0ZUlkPWUucmVtb3RlQ2FuZGlkYXRlSWQsdGhpcy5jYW5kaWRhdGVQYWlyLm5vbWluYXRlZD1lLm5vbWluYXRlZCx0aGlzLmNhbmRpZGF0ZVBhaXIucmVhZGFibGU9ZS5yZWFkYWJsZSx0aGlzLmNhbmRpZGF0ZVBhaXIuc2VsZWN0ZWQ9ZS5zZWxlY3RlZCx0aGlzLmNhbmRpZGF0ZVBhaXIud3JpdGFibGU9ZS53cml0YWJsZSx0aGlzLmNhbmRpZGF0ZVBhaXIuc3RhdGU9ZS5zdGF0ZSx0aGlzLmNhbmRpZGF0ZVBhaXIuY3VycmVudFJvdW5kVHJpcFRpbWU9ZS5jdXJyZW50Um91bmRUcmlwVGltZX1oYW5kbGVEYXRhQ2hhbm5lbChlKXt0aGlzLkRhdGFDaGFubmVsU3RhdHMuYnl0ZXNSZWNlaXZlZD1lLmJ5dGVzUmVjZWl2ZWQsdGhpcy5EYXRhQ2hhbm5lbFN0YXRzLmJ5dGVzU2VudD1lLmJ5dGVzU2VudCx0aGlzLkRhdGFDaGFubmVsU3RhdHMuZGF0YUNoYW5uZWxJZGVudGlmaWVyPWUuZGF0YUNoYW5uZWxJZGVudGlmaWVyLHRoaXMuRGF0YUNoYW5uZWxTdGF0cy5pZD1lLmlkLHRoaXMuRGF0YUNoYW5uZWxTdGF0cy5sYWJlbD1lLmxhYmVsLHRoaXMuRGF0YUNoYW5uZWxTdGF0cy5tZXNzYWdlc1JlY2VpdmVkPWUubWVzc2FnZXNSZWNlaXZlZCx0aGlzLkRhdGFDaGFubmVsU3RhdHMubWVzc2FnZXNTZW50PWUubWVzc2FnZXNTZW50LHRoaXMuRGF0YUNoYW5uZWxTdGF0cy5wcm90b2NvbD1lLnByb3RvY29sLHRoaXMuRGF0YUNoYW5uZWxTdGF0cy5zdGF0ZT1lLnN0YXRlLHRoaXMuRGF0YUNoYW5uZWxTdGF0cy50aW1lc3RhbXA9ZS50aW1lc3RhbXB9aGFuZGxlTG9jYWxDYW5kaWRhdGUoZSl7Y29uc3QgdD1uZXcgZmU7dC5sYWJlbD1cImxvY2FsLWNhbmRpZGF0ZVwiLHQuYWRkcmVzcz1lLmFkZHJlc3MsdC5wb3J0PWUucG9ydCx0LnByb3RvY29sPWUucHJvdG9jb2wsdC5jYW5kaWRhdGVUeXBlPWUuY2FuZGlkYXRlVHlwZSx0LmlkPWUuaWQsdGhpcy5sb2NhbENhbmRpZGF0ZXMucHVzaCh0KX1oYW5kbGVSZW1vdGVDYW5kaWRhdGUoZSl7Y29uc3QgdD1uZXcgZmU7dC5sYWJlbD1cImxvY2FsLWNhbmRpZGF0ZVwiLHQuYWRkcmVzcz1lLmFkZHJlc3MsdC5wb3J0PWUucG9ydCx0LnByb3RvY29sPWUucHJvdG9jb2wsdC5pZD1lLmlkLHQuY2FuZGlkYXRlVHlwZT1lLmNhbmRpZGF0ZVR5cGUsdGhpcy5yZW1vdGVDYW5kaWRhdGVzLnB1c2godCl9aGFuZGxlSW5Cb3VuZFJUUChlKXtzd2l0Y2goZS5raW5kKXtjYXNlXCJ2aWRlb1wiOnRoaXMuaW5ib3VuZFZpZGVvU3RhdHM9ZSxudWxsIT10aGlzLmxhc3RWaWRlb1N0YXRzJiYodGhpcy5pbmJvdW5kVmlkZW9TdGF0cy5iaXRyYXRlPTgqKHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMuYnl0ZXNSZWNlaXZlZC10aGlzLmxhc3RWaWRlb1N0YXRzLmJ5dGVzUmVjZWl2ZWQpLyh0aGlzLmluYm91bmRWaWRlb1N0YXRzLnRpbWVzdGFtcC10aGlzLmxhc3RWaWRlb1N0YXRzLnRpbWVzdGFtcCksdGhpcy5pbmJvdW5kVmlkZW9TdGF0cy5iaXRyYXRlPU1hdGguZmxvb3IodGhpcy5pbmJvdW5kVmlkZW9TdGF0cy5iaXRyYXRlKSksdGhpcy5sYXN0VmlkZW9TdGF0cz1PYmplY3QuYXNzaWduKHt9LHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMpO2JyZWFrO2Nhc2VcImF1ZGlvXCI6dGhpcy5pbmJvdW5kQXVkaW9TdGF0cz1lLG51bGwhPXRoaXMubGFzdEF1ZGlvU3RhdHMmJih0aGlzLmluYm91bmRBdWRpb1N0YXRzLmJpdHJhdGU9OCoodGhpcy5pbmJvdW5kQXVkaW9TdGF0cy5ieXRlc1JlY2VpdmVkLXRoaXMubGFzdEF1ZGlvU3RhdHMuYnl0ZXNSZWNlaXZlZCkvKHRoaXMuaW5ib3VuZEF1ZGlvU3RhdHMudGltZXN0YW1wLXRoaXMubGFzdEF1ZGlvU3RhdHMudGltZXN0YW1wKSx0aGlzLmluYm91bmRBdWRpb1N0YXRzLmJpdHJhdGU9TWF0aC5mbG9vcih0aGlzLmluYm91bmRBdWRpb1N0YXRzLmJpdHJhdGUpKSx0aGlzLmxhc3RBdWRpb1N0YXRzPU9iamVjdC5hc3NpZ24oe30sdGhpcy5pbmJvdW5kQXVkaW9TdGF0cyk7YnJlYWs7ZGVmYXVsdDppLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcIktpbmQgaXMgbm90IGhhbmRsZWRcIil9fWhhbmRsZVJlbW90ZU91dEJvdW5kKGUpe1widmlkZW9cIj09PWUua2luZCYmKHRoaXMub3V0Qm91bmRWaWRlb1N0YXRzLmJ5dGVzU2VudD1lLmJ5dGVzU2VudCx0aGlzLm91dEJvdW5kVmlkZW9TdGF0cy5pZD1lLmlkLHRoaXMub3V0Qm91bmRWaWRlb1N0YXRzLmxvY2FsSWQ9ZS5sb2NhbElkLHRoaXMub3V0Qm91bmRWaWRlb1N0YXRzLnBhY2tldHNTZW50PWUucGFja2V0c1NlbnQsdGhpcy5vdXRCb3VuZFZpZGVvU3RhdHMucmVtb3RlVGltZXN0YW1wPWUucmVtb3RlVGltZXN0YW1wLHRoaXMub3V0Qm91bmRWaWRlb1N0YXRzLnRpbWVzdGFtcD1lLnRpbWVzdGFtcCl9aGFuZGxlVHJhY2soZSl7XCJ0cmFja1wiIT09ZS50eXBlfHxcInZpZGVvX2xhYmVsXCIhPT1lLnRyYWNrSWRlbnRpZmllciYmXCJ2aWRlb1wiIT09ZS5raW5kfHwodGhpcy5pbmJvdW5kVmlkZW9TdGF0cy5mcmFtZXNEcm9wcGVkPWUuZnJhbWVzRHJvcHBlZCx0aGlzLmluYm91bmRWaWRlb1N0YXRzLmZyYW1lc1JlY2VpdmVkPWUuZnJhbWVzUmVjZWl2ZWQsdGhpcy5pbmJvdW5kVmlkZW9TdGF0cy5mcmFtZUhlaWdodD1lLmZyYW1lSGVpZ2h0LHRoaXMuaW5ib3VuZFZpZGVvU3RhdHMuZnJhbWVXaWR0aD1lLmZyYW1lV2lkdGgpfWhhbmRsZUNvZGVjKGUpe2NvbnN0IHQ9ZS5pZCxzPWAke2UubWltZVR5cGUucmVwbGFjZShcInZpZGVvL1wiLFwiXCIpLnJlcGxhY2UoXCJhdWRpby9cIixcIlwiKX0ke2Uuc2RwRm10cExpbmU/YCAke2Uuc2RwRm10cExpbmV9YDpcIlwifWA7dGhpcy5jb2RlY3Muc2V0KHQscyl9aGFuZGxlU2Vzc2lvblN0YXRpc3RpY3MoZSx0LHMpe2NvbnN0IG49RGF0ZS5ub3coKS1lO3RoaXMuc2Vzc2lvblN0YXRzLnJ1blRpbWU9bmV3IERhdGUobikudG9JU09TdHJpbmcoKS5zdWJzdHIoMTEsOCkudG9TdHJpbmcoKTtjb25zdCByPW51bGw9PT10P1wiTm90IHNlbnQgeWV0XCI6dD9cInRydWVcIjpcImZhbHNlXCI7dGhpcy5zZXNzaW9uU3RhdHMuY29udHJvbHNTdHJlYW1JbnB1dD1yLHRoaXMuc2Vzc2lvblN0YXRzLnZpZGVvRW5jb2RlckF2Z1FQPXN9aXNOdW1iZXIoZSl7cmV0dXJuXCJudW1iZXJcIj09dHlwZW9mIGUmJmlzRmluaXRlKGUpfX1jb25zdCB3ZT0oUGU9e3BhcnNlUnRwUGFyYW1ldGVyczooKT0+ZS5wYXJzZVJ0cFBhcmFtZXRlcnMsc3BsaXRTZWN0aW9uczooKT0+ZS5zcGxpdFNlY3Rpb25zfSxSZT17fSxuLmQoUmUsUGUpLFJlKTt2YXIgUGUsUmUsa2UsTGUseGU9ZnVuY3Rpb24oZSx0LHMsbil7cmV0dXJuIG5ldyhzfHwocz1Qcm9taXNlKSkoKGZ1bmN0aW9uKHIsaSl7ZnVuY3Rpb24gbyhlKXt0cnl7bChuLm5leHQoZSkpfWNhdGNoKGUpe2koZSl9fWZ1bmN0aW9uIGEoZSl7dHJ5e2wobi50aHJvdyhlKSl9Y2F0Y2goZSl7aShlKX19ZnVuY3Rpb24gbChlKXt2YXIgdDtlLmRvbmU/cihlLnZhbHVlKToodD1lLnZhbHVlLHQgaW5zdGFuY2VvZiBzP3Q6bmV3IHMoKGZ1bmN0aW9uKGUpe2UodCl9KSkpLnRoZW4obyxhKX1sKChuPW4uYXBwbHkoZSx0fHxbXSkpLm5leHQoKSl9KSl9O2NsYXNzIEFle2NvbnN0cnVjdG9yKGUsdCxzKXt0aGlzLmNvbmZpZz10LHRoaXMuY3JlYXRlUGVlckNvbm5lY3Rpb24oZSxzKX1jcmVhdGVQZWVyQ29ubmVjdGlvbihlLHQpe3RoaXMuY29uZmlnLmlzRmxhZ0VuYWJsZWQocmUuRm9yY2VUVVJOKSYmKGUuaWNlVHJhbnNwb3J0UG9saWN5PVwicmVsYXlcIixpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcIkZvcmNpbmcgVFVSTiB1c2FnZSBieSBzZXR0aW5nIElDRSBUcmFuc3BvcnQgUG9saWN5IGluIHBlZXIgY29ubmVjdGlvbiBjb25maWcuXCIpKSx0aGlzLnBlZXJDb25uZWN0aW9uPW5ldyBSVENQZWVyQ29ubmVjdGlvbihlKSx0aGlzLnBlZXJDb25uZWN0aW9uLm9uc2lnbmFsaW5nc3RhdGVjaGFuZ2U9ZT0+dGhpcy5oYW5kbGVTaWduYWxTdGF0ZUNoYW5nZShlKSx0aGlzLnBlZXJDb25uZWN0aW9uLm9uaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlPWU9PnRoaXMuaGFuZGxlSWNlQ29ubmVjdGlvblN0YXRlQ2hhbmdlKGUpLHRoaXMucGVlckNvbm5lY3Rpb24ub25pY2VnYXRoZXJpbmdzdGF0ZWNoYW5nZT1lPT50aGlzLmhhbmRsZUljZUdhdGhlcmluZ1N0YXRlQ2hhbmdlKGUpLHRoaXMucGVlckNvbm5lY3Rpb24ub250cmFjaz1lPT50aGlzLmhhbmRsZU9uVHJhY2soZSksdGhpcy5wZWVyQ29ubmVjdGlvbi5vbmljZWNhbmRpZGF0ZT1lPT50aGlzLmhhbmRsZUljZUNhbmRpZGF0ZShlKSx0aGlzLnBlZXJDb25uZWN0aW9uLm9uZGF0YWNoYW5uZWw9ZT0+dGhpcy5oYW5kbGVEYXRhQ2hhbm5lbChlKSx0aGlzLmFnZ3JlZ2F0ZWRTdGF0cz1uZXcgTWUsdGhpcy5wcmVmZXJyZWRDb2RlYz10LHRoaXMudXBkYXRlQ29kZWNTZWxlY3Rpb249ITB9Y3JlYXRlT2ZmZXIoZSx0KXtyZXR1cm4geGUodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcIkNyZWF0ZSBPZmZlclwiLDYpO2NvbnN0IHM9XCJsb2NhbGhvc3RcIj09PWxvY2F0aW9uLmhvc3RuYW1lfHxcIjEyNy4wLjAuMVwiPT09bG9jYXRpb24uaG9zdG5hbWUsbj1cImh0dHBzOlwiPT09bG9jYXRpb24ucHJvdG9jb2w7bGV0IHI9dC5pc0ZsYWdFbmFibGVkKHJlLlVzZU1pYyk7IXJ8fHN8fG58fChyPSExLGkuRXJyb3IoaS5HZXRTdGFja1RyYWNlKCksXCJNaWNyb3Bob25lIGFjY2VzcyBpbiB0aGUgYnJvd3NlciB3aWxsIG5vdCB3b3JrIGlmIHlvdSBhcmUgbm90IG9uIEhUVFBTIG9yIGxvY2FsaG9zdC4gRGlzYWJsaW5nIG1pYyBhY2Nlc3MuXCIpLGkuRXJyb3IoaS5HZXRTdGFja1RyYWNlKCksXCJGb3IgdGVzdGluZyB5b3UgY2FuIGVuYWJsZSBIVFRQIG1pY3JvcGhvbmUgYWNjZXNzIENocm9tZSBieSB2aXNpdGluZyBjaHJvbWU6Ly9mbGFncy8gYW5kIGVuYWJsaW5nICd1bnNhZmVseS10cmVhdC1pbnNlY3VyZS1vcmlnaW4tYXMtc2VjdXJlJ1wiKSksdGhpcy5zZXR1cFRyYW5zY2VpdmVyc0FzeW5jKHIpLmZpbmFsbHkoKCgpPT57dmFyIHQ7bnVsbD09PSh0PXRoaXMucGVlckNvbm5lY3Rpb24pfHx2b2lkIDA9PT10fHx0LmNyZWF0ZU9mZmVyKGUpLnRoZW4oKGU9Pnt2YXIgdDt0aGlzLnNob3dUZXh0T3ZlcmxheUNvbm5lY3RpbmcoKSxlLnNkcD10aGlzLm11bmdlU0RQKGUuc2RwLHIpLG51bGw9PT0odD10aGlzLnBlZXJDb25uZWN0aW9uKXx8dm9pZCAwPT09dHx8dC5zZXRMb2NhbERlc2NyaXB0aW9uKGUpLHRoaXMub25TZW5kV2ViUlRDT2ZmZXIoZSl9KSkuY2F0Y2goKCgpPT57dGhpcy5zaG93VGV4dE92ZXJsYXlTZXR1cEZhaWx1cmUoKX0pKX0pKX0pKX1yZWNlaXZlT2ZmZXIoZSx0KXt2YXIgcztyZXR1cm4geGUodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcIlJlY2VpdmUgT2ZmZXJcIiw2KSxudWxsPT09KHM9dGhpcy5wZWVyQ29ubmVjdGlvbil8fHZvaWQgMD09PXN8fHMuc2V0UmVtb3RlRGVzY3JpcHRpb24oZSkudGhlbigoKCk9Pntjb25zdCBlPVwibG9jYWxob3N0XCI9PT1sb2NhdGlvbi5ob3N0bmFtZXx8XCIxMjcuMC4wLjFcIj09PWxvY2F0aW9uLmhvc3RuYW1lLHM9XCJodHRwczpcIj09PWxvY2F0aW9uLnByb3RvY29sO2xldCBuPXQuaXNGbGFnRW5hYmxlZChyZS5Vc2VNaWMpOyFufHxlfHxzfHwobj0hMSxpLkVycm9yKGkuR2V0U3RhY2tUcmFjZSgpLFwiTWljcm9waG9uZSBhY2Nlc3MgaW4gdGhlIGJyb3dzZXIgd2lsbCBub3Qgd29yayBpZiB5b3UgYXJlIG5vdCBvbiBIVFRQUyBvciBsb2NhbGhvc3QuIERpc2FibGluZyBtaWMgYWNjZXNzLlwiKSxpLkVycm9yKGkuR2V0U3RhY2tUcmFjZSgpLFwiRm9yIHRlc3RpbmcgeW91IGNhbiBlbmFibGUgSFRUUCBtaWNyb3Bob25lIGFjY2VzcyBDaHJvbWUgYnkgdmlzaXRpbmcgY2hyb21lOi8vZmxhZ3MvIGFuZCBlbmFibGluZyAndW5zYWZlbHktdHJlYXQtaW5zZWN1cmUtb3JpZ2luLWFzLXNlY3VyZSdcIikpLHRoaXMuc2V0dXBUcmFuc2NlaXZlcnNBc3luYyhuKS5maW5hbGx5KCgoKT0+e3ZhciBlO251bGw9PT0oZT10aGlzLnBlZXJDb25uZWN0aW9uKXx8dm9pZCAwPT09ZXx8ZS5jcmVhdGVBbnN3ZXIoKS50aGVuKChlPT57dmFyIHQ7cmV0dXJuIGUuc2RwPXRoaXMubXVuZ2VTRFAoZS5zZHAsbiksbnVsbD09PSh0PXRoaXMucGVlckNvbm5lY3Rpb24pfHx2b2lkIDA9PT10P3ZvaWQgMDp0LnNldExvY2FsRGVzY3JpcHRpb24oZSl9KSkudGhlbigoKCk9Pnt2YXIgZTt0aGlzLm9uU2VuZFdlYlJUQ0Fuc3dlcihudWxsPT09KGU9dGhpcy5wZWVyQ29ubmVjdGlvbil8fHZvaWQgMD09PWU/dm9pZCAwOmUuY3VycmVudExvY2FsRGVzY3JpcHRpb24pfSkpLmNhdGNoKCgoKT0+e2kuRXJyb3IoaS5HZXRTdGFja1RyYWNlKCksXCJjcmVhdGVBbnN3ZXIoKSBmYWlsZWRcIil9KSl9KSl9KSksdGhpcy5jb25maWcuc2V0T3B0aW9uU2V0dGluZ09wdGlvbnMoY2UuUHJlZmVycmVkQ29kZWMsdGhpcy5wYXJzZUF2YWlsYWJsZUNvZGVjcyhlKS5maWx0ZXIoKGU9PnRoaXMuY29uZmlnLmdldFNldHRpbmdPcHRpb24oY2UuUHJlZmVycmVkQ29kZWMpLm9wdGlvbnMuaW5jbHVkZXMoZSkpKSl9KSl9cmVjZWl2ZUFuc3dlcihlKXt2YXIgdDtudWxsPT09KHQ9dGhpcy5wZWVyQ29ubmVjdGlvbil8fHZvaWQgMD09PXR8fHQuc2V0UmVtb3RlRGVzY3JpcHRpb24oZSksdGhpcy5jb25maWcuc2V0T3B0aW9uU2V0dGluZ09wdGlvbnMoY2UuUHJlZmVycmVkQ29kZWMsdGhpcy5wYXJzZUF2YWlsYWJsZUNvZGVjcyhlKS5maWx0ZXIoKGU9PnRoaXMuY29uZmlnLmdldFNldHRpbmdPcHRpb24oY2UuUHJlZmVycmVkQ29kZWMpLm9wdGlvbnMuaW5jbHVkZXMoZSkpKSl9Z2VuZXJhdGVTdGF0cygpe3ZhciBlO251bGw9PT0oZT10aGlzLnBlZXJDb25uZWN0aW9uKXx8dm9pZCAwPT09ZXx8ZS5nZXRTdGF0cyhudWxsKS50aGVuKChlPT57dGhpcy5hZ2dyZWdhdGVkU3RhdHMucHJvY2Vzc1N0YXRzKGUpLHRoaXMub25WaWRlb1N0YXRzKHRoaXMuYWdncmVnYXRlZFN0YXRzKSx0aGlzLnVwZGF0ZUNvZGVjU2VsZWN0aW9uJiZ0aGlzLmNvbmZpZy5zZXRPcHRpb25TZXR0aW5nVmFsdWUoY2UuUHJlZmVycmVkQ29kZWMsdGhpcy5hZ2dyZWdhdGVkU3RhdHMuY29kZWNzLmdldCh0aGlzLmFnZ3JlZ2F0ZWRTdGF0cy5pbmJvdW5kVmlkZW9TdGF0cy5jb2RlY0lkKSl9KSl9Y2xvc2UoKXt0aGlzLnBlZXJDb25uZWN0aW9uJiYodGhpcy5wZWVyQ29ubmVjdGlvbi5jbG9zZSgpLHRoaXMucGVlckNvbm5lY3Rpb249bnVsbCl9bXVuZ2VTRFAoZSx0KXtjb25zdCBzPWU7cy5yZXBsYWNlKC8oYT1mbXRwOlxcZCsgLipsZXZlbC1hc3ltbWV0cnktYWxsb3dlZD0uKilcXHJcXG4vZ20sXCIkMTt4LWdvb2dsZS1zdGFydC1iaXRyYXRlPTEwMDAwO3gtZ29vZ2xlLW1heC1iaXRyYXRlPTEwMDAwMFxcclxcblwiKTtsZXQgbj1cIlwiO3JldHVybiBuKz1cIm1heGF2ZXJhZ2ViaXRyYXRlPTUxMDAwMDtcIix0JiYobis9XCJzcHJvcC1tYXhjYXB0dXJlcmF0ZT00ODAwMDtcIiksbis9dGhpcy5jb25maWcuaXNGbGFnRW5hYmxlZChyZS5Gb3JjZU1vbm9BdWRpbyk/XCJzdGVyZW89MDtcIjpcInN0ZXJlbz0xO1wiLG4rPVwidXNlaW5iYW5kZmVjPTFcIixzLnJlcGxhY2UoXCJ1c2VpbmJhbmRmZWM9MVwiLG4pLHN9aGFuZGxlT25JY2UoZSl7dmFyIHQ7aS5Mb2coaS5HZXRTdGFja1RyYWNlKCksXCJwZWVyY29ubmVjdGlvbiBoYW5kbGVPbkljZVwiLDYpLHRoaXMuY29uZmlnLmlzRmxhZ0VuYWJsZWQocmUuRm9yY2VUVVJOKSYmZS5jYW5kaWRhdGUuaW5kZXhPZihcInJlbGF5XCIpPDA/aS5JbmZvKGkuR2V0U3RhY2tUcmFjZSgpLGBEcm9wcGluZyBjYW5kaWRhdGUgYmVjYXVzZSBpdCB3YXMgbm90IFRVUk4gcmVsYXkuIHwgVHlwZT0gJHtlLnR5cGV9IHwgUHJvdG9jb2w9ICR7ZS5wcm90b2NvbH0gfCBBZGRyZXNzPSR7ZS5hZGRyZXNzfSB8IFBvcnQ9JHtlLnBvcnR9IHxgLDYpOm51bGw9PT0odD10aGlzLnBlZXJDb25uZWN0aW9uKXx8dm9pZCAwPT09dHx8dC5hZGRJY2VDYW5kaWRhdGUoZSl9aGFuZGxlU2lnbmFsU3RhdGVDaGFuZ2UoZSl7aS5Mb2coaS5HZXRTdGFja1RyYWNlKCksXCJzaWduYWxpbmcgc3RhdGUgY2hhbmdlOiBcIitlLDYpfWhhbmRsZUljZUNvbm5lY3Rpb25TdGF0ZUNoYW5nZShlKXtpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcImljZSBjb25uZWN0aW9uIHN0YXRlIGNoYW5nZTogXCIrZSw2KSx0aGlzLm9uSWNlQ29ubmVjdGlvblN0YXRlQ2hhbmdlKGUpfWhhbmRsZUljZUdhdGhlcmluZ1N0YXRlQ2hhbmdlKGUpe2kuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLFwiaWNlIGdhdGhlcmluZyBzdGF0ZSBjaGFuZ2U6IFwiK0pTT04uc3RyaW5naWZ5KGUpLDYpfWhhbmRsZU9uVHJhY2soZSl7dGhpcy5vblRyYWNrKGUpfWhhbmRsZUljZUNhbmRpZGF0ZShlKXt0aGlzLm9uUGVlckljZUNhbmRpZGF0ZShlKX1oYW5kbGVEYXRhQ2hhbm5lbChlKXt0aGlzLm9uRGF0YUNoYW5uZWwoZSl9b25UcmFjayhlKXt9b25JY2VDb25uZWN0aW9uU3RhdGVDaGFuZ2UoZSl7fW9uUGVlckljZUNhbmRpZGF0ZShlKXt9b25EYXRhQ2hhbm5lbChlKXt9c2V0dXBUcmFuc2NlaXZlcnNBc3luYyhlKXt2YXIgdCxzLG4scixpLG8sYSxsLGQ7cmV0dXJuIHhlKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3QgYz0obnVsbD09PSh0PXRoaXMucGVlckNvbm5lY3Rpb24pfHx2b2lkIDA9PT10P3ZvaWQgMDp0LmdldFRyYW5zY2VpdmVycygpLmxlbmd0aCk+MDtpZihudWxsPT09KHM9dGhpcy5wZWVyQ29ubmVjdGlvbil8fHZvaWQgMD09PXN8fHMuYWRkVHJhbnNjZWl2ZXIoXCJ2aWRlb1wiLHtkaXJlY3Rpb246XCJyZWN2b25seVwifSksUlRDUnRwUmVjZWl2ZXIuZ2V0Q2FwYWJpbGl0aWVzJiZcIlwiIT10aGlzLnByZWZlcnJlZENvZGVjKWZvcihjb25zdCBlIG9mIG51bGwhPT0ocj1udWxsPT09KG49dGhpcy5wZWVyQ29ubmVjdGlvbil8fHZvaWQgMD09PW4/dm9pZCAwOm4uZ2V0VHJhbnNjZWl2ZXJzKCkpJiZ2b2lkIDAhPT1yP3I6W10paWYoZSYmZS5yZWNlaXZlciYmZS5yZWNlaXZlci50cmFjayYmXCJ2aWRlb1wiPT09ZS5yZWNlaXZlci50cmFjay5raW5kKXtjb25zdCB0PXRoaXMucHJlZmVycmVkQ29kZWMuc3BsaXQoXCIgXCIpLHM9W3ttaW1lVHlwZTpcInZpZGVvL1wiK3RbMF0sY2xvY2tSYXRlOjllNCxzZHBGbXRwTGluZTp0WzFdP3RbMV06XCJcIn1dO3RoaXMuY29uZmlnLmdldFNldHRpbmdPcHRpb24oY2UuUHJlZmVycmVkQ29kZWMpLm9wdGlvbnMuZmlsdGVyKChlPT5lIT10aGlzLnByZWZlcnJlZENvZGVjKSkuZm9yRWFjaCgoZT0+e2NvbnN0IHQ9ZS5zcGxpdChcIiBcIik7cy5wdXNoKHttaW1lVHlwZTpcInZpZGVvL1wiK3RbMF0sY2xvY2tSYXRlOjllNCxzZHBGbXRwTGluZTp0WzFdP3RbMV06XCJcIn0pfSkpO2Zvcihjb25zdCBlIG9mIHMpXCJcIj09PWUuc2RwRm10cExpbmUmJmRlbGV0ZSBlLnNkcEZtdHBMaW5lO2Uuc2V0Q29kZWNQcmVmZXJlbmNlcyhzKX1pZihlKXtjb25zdCB0PXt2aWRlbzohMSxhdWRpbzohIWUmJnthdXRvR2FpbkNvbnRyb2w6ITEsY2hhbm5lbENvdW50OjEsZWNob0NhbmNlbGxhdGlvbjohMSxsYXRlbmN5OjAsbm9pc2VTdXBwcmVzc2lvbjohMSxzYW1wbGVSYXRlOjQ4ZTMsc2FtcGxlU2l6ZToxNix2b2x1bWU6MX19LHM9eWllbGQgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEodCk7aWYocylpZihjKXtmb3IoY29uc3QgZSBvZiBudWxsIT09KGE9bnVsbD09PShvPXRoaXMucGVlckNvbm5lY3Rpb24pfHx2b2lkIDA9PT1vP3ZvaWQgMDpvLmdldFRyYW5zY2VpdmVycygpKSYmdm9pZCAwIT09YT9hOltdKWlmKGUmJmUucmVjZWl2ZXImJmUucmVjZWl2ZXIudHJhY2smJlwiYXVkaW9cIj09PWUucmVjZWl2ZXIudHJhY2sua2luZClmb3IoY29uc3QgdCBvZiBzLmdldFRyYWNrcygpKXQua2luZCYmXCJhdWRpb1wiPT10LmtpbmQmJihlLnNlbmRlci5yZXBsYWNlVHJhY2sodCksZS5kaXJlY3Rpb249XCJzZW5kcmVjdlwiKX1lbHNlIGZvcihjb25zdCBlIG9mIHMuZ2V0VHJhY2tzKCkpZS5raW5kJiZcImF1ZGlvXCI9PWUua2luZCYmKG51bGw9PT0obD10aGlzLnBlZXJDb25uZWN0aW9uKXx8dm9pZCAwPT09bHx8bC5hZGRUcmFuc2NlaXZlcihlLHtkaXJlY3Rpb246XCJzZW5kcmVjdlwifSkpO2Vsc2UgbnVsbD09PShkPXRoaXMucGVlckNvbm5lY3Rpb24pfHx2b2lkIDA9PT1kfHxkLmFkZFRyYW5zY2VpdmVyKFwiYXVkaW9cIix7ZGlyZWN0aW9uOlwicmVjdm9ubHlcIn0pfWVsc2UgbnVsbD09PShpPXRoaXMucGVlckNvbm5lY3Rpb24pfHx2b2lkIDA9PT1pfHxpLmFkZFRyYW5zY2VpdmVyKFwiYXVkaW9cIix7ZGlyZWN0aW9uOlwicmVjdm9ubHlcIn0pfSkpfW9uVmlkZW9TdGF0cyhlKXt9b25TZW5kV2ViUlRDT2ZmZXIoZSl7fW9uU2VuZFdlYlJUQ0Fuc3dlcihlKXt9c2hvd1RleHRPdmVybGF5Q29ubmVjdGluZygpe31zaG93VGV4dE92ZXJsYXlTZXR1cEZhaWx1cmUoKXt9cGFyc2VBdmFpbGFibGVDb2RlY3MoZSl7aWYoIVJUQ1J0cFJlY2VpdmVyLmdldENhcGFiaWxpdGllcylyZXR1cm5bXCJPbmx5IGF2YWlsYWJsZSBvbiBDaHJvbWVcIl07Y29uc3QgdD1bXSxzPSgwLHdlLnNwbGl0U2VjdGlvbnMpKGUuc2RwKTtyZXR1cm4gcy5zaGlmdCgpLHMuZm9yRWFjaCgoZT0+e2NvbnN0e2NvZGVjczpzfT0oMCx3ZS5wYXJzZVJ0cFBhcmFtZXRlcnMpKGUpLG49LyhWUFxcZHxIMjZcXGR8QVYxKS4qLztzLmZvckVhY2goKGU9Pntjb25zdCBzPWUubmFtZStcIiBcIitPYmplY3Qua2V5cyhlLnBhcmFtZXRlcnN8fHt9KS5tYXAoKHQ9PnQrXCI9XCIrZS5wYXJhbWV0ZXJzW3RdKSkuam9pbihcIjtcIik7aWYobnVsbCE9PW4uZXhlYyhzKSl7XCJWUDlcIj09ZS5uYW1lJiYoZS5wYXJhbWV0ZXJzPXtcInByb2ZpbGUtaWRcIjpcIjBcIn0pO2NvbnN0IHM9ZS5uYW1lK1wiIFwiK09iamVjdC5rZXlzKGUucGFyYW1ldGVyc3x8e30pLm1hcCgodD0+dCtcIj1cIitlLnBhcmFtZXRlcnNbdF0pKS5qb2luKFwiO1wiKTt0LnB1c2gocyl9fSkpfSkpLHR9fWNsYXNzIEZle2NvbnN0cnVjdG9yKCl7dGhpcy5QaXhlbFN0cmVhbWluZ1NldHRpbmdzPW5ldyBEZSx0aGlzLkVuY29kZXJTZXR0aW5ncz1uZXcgT2UsdGhpcy5XZWJSVENTZXR0aW5ncz1uZXcgVWV9dWVDb21wYXRpYmxlKCl7bnVsbCE9dGhpcy5XZWJSVENTZXR0aW5ncy5NYXhGUFMmJih0aGlzLldlYlJUQ1NldHRpbmdzLkZQUz10aGlzLldlYlJUQ1NldHRpbmdzLk1heEZQUyl9fWNsYXNzIERle31jbGFzcyBPZXt9Y2xhc3MgVWV7fWNsYXNzIElle2NvbnN0cnVjdG9yKCl7dGhpcy5SZWNlaXB0VGltZU1zPW51bGwsdGhpcy5UcmFuc21pc3Npb25UaW1lTXM9bnVsbCx0aGlzLlByZUNhcHR1cmVUaW1lTXM9bnVsbCx0aGlzLlBvc3RDYXB0dXJlVGltZU1zPW51bGwsdGhpcy5QcmVFbmNvZGVUaW1lTXM9bnVsbCx0aGlzLlBvc3RFbmNvZGVUaW1lTXM9bnVsbCx0aGlzLkVuY29kZU1zPW51bGwsdGhpcy5DYXB0dXJlVG9TZW5kTXM9bnVsbCx0aGlzLnRlc3RTdGFydFRpbWVNcz0wLHRoaXMuYnJvd3NlclJlY2VpcHRUaW1lTXM9MCx0aGlzLmxhdGVuY3lFeGNsdWRpbmdEZWNvZGU9MCx0aGlzLnRlc3REdXJhdGlvbj0wLHRoaXMubmV0d29ya0xhdGVuY3k9MCx0aGlzLmJyb3dzZXJTZW5kTGF0ZW5jeT0wLHRoaXMuZnJhbWVEaXNwbGF5RGVsdGFUaW1lTXM9MCx0aGlzLmVuZFRvRW5kTGF0ZW5jeT0wLHRoaXMuZW5jb2RlTGF0ZW5jeT0wfXNldEZyYW1lRGlzcGxheURlbHRhVGltZShlKXswPT10aGlzLmZyYW1lRGlzcGxheURlbHRhVGltZU1zJiYodGhpcy5mcmFtZURpc3BsYXlEZWx0YVRpbWVNcz1NYXRoLnJvdW5kKGUpKX1wcm9jZXNzRmllbGRzKCl7bnVsbCE9dGhpcy5FbmNvZGVNc3x8bnVsbD09dGhpcy5QcmVFbmNvZGVUaW1lTXMmJm51bGw9PXRoaXMuUG9zdEVuY29kZVRpbWVNc3x8KGkuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLGBTZXR0aW5nIEVuY29kZSBNcyBcXG4gJHt0aGlzLlBvc3RFbmNvZGVUaW1lTXN9IFxcbiAke3RoaXMuUHJlRW5jb2RlVGltZU1zfWAsNiksdGhpcy5FbmNvZGVNcz10aGlzLlBvc3RFbmNvZGVUaW1lTXMtdGhpcy5QcmVFbmNvZGVUaW1lTXMpLG51bGwhPXRoaXMuQ2FwdHVyZVRvU2VuZE1zfHxudWxsPT10aGlzLlByZUNhcHR1cmVUaW1lTXMmJm51bGw9PXRoaXMuUG9zdENhcHR1cmVUaW1lTXN8fChpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxgU2V0dGluZyBDYXB0dXJlVG9TZW5kTXMgTXMgXFxuICR7dGhpcy5Qb3N0Q2FwdHVyZVRpbWVNc30gXFxuICR7dGhpcy5QcmVDYXB0dXJlVGltZU1zfWAsNiksdGhpcy5DYXB0dXJlVG9TZW5kTXM9dGhpcy5Qb3N0Q2FwdHVyZVRpbWVNcy10aGlzLlByZUNhcHR1cmVUaW1lTXMpfX1jbGFzcyBHZXtzdGF0aWMgc2V0RXh0ZW5zaW9uRnJvbUJ5dGVzKGUsdCl7dC5yZWNlaXZpbmd8fCh0Lm1pbWV0eXBlPVwiXCIsdC5leHRlbnNpb249XCJcIix0LnJlY2VpdmluZz0hMCx0LnZhbGlkPSExLHQuc2l6ZT0wLHQuZGF0YT1bXSx0LnRpbWVzdGFtcFN0YXJ0PShuZXcgRGF0ZSkuZ2V0VGltZSgpLGkuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLFwiUmVjZWl2ZWQgZmlyc3QgY2h1bmsgb2YgZmlsZVwiLDYpKTtjb25zdCBzPW5ldyBUZXh0RGVjb2RlcihcInV0Zi0xNlwiKS5kZWNvZGUoZS5zbGljZSgxKSk7aS5Mb2coaS5HZXRTdGFja1RyYWNlKCkscyw2KSx0LmV4dGVuc2lvbj1zfXN0YXRpYyBzZXRNaW1lVHlwZUZyb21CeXRlcyhlLHQpe3QucmVjZWl2aW5nfHwodC5taW1ldHlwZT1cIlwiLHQuZXh0ZW5zaW9uPVwiXCIsdC5yZWNlaXZpbmc9ITAsdC52YWxpZD0hMSx0LnNpemU9MCx0LmRhdGE9W10sdC50aW1lc3RhbXBTdGFydD0obmV3IERhdGUpLmdldFRpbWUoKSxpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcIlJlY2VpdmVkIGZpcnN0IGNodW5rIG9mIGZpbGVcIiw2KSk7Y29uc3Qgcz1uZXcgVGV4dERlY29kZXIoXCJ1dGYtMTZcIikuZGVjb2RlKGUuc2xpY2UoMSkpO2kuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLHMsNiksdC5taW1ldHlwZT1zfXN0YXRpYyBzZXRDb250ZW50c0Zyb21CeXRlcyhlLHQpe2lmKCF0LnJlY2VpdmluZylyZXR1cm47dC5zaXplPU1hdGguY2VpbChuZXcgRGF0YVZpZXcoZS5zbGljZSgxLDUpLmJ1ZmZlcikuZ2V0SW50MzIoMCwhMCkvMTYzNzkpO2NvbnN0IHM9ZS5zbGljZSg1KTtpZih0LmRhdGEucHVzaChzKSxpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxgUmVjZWl2ZWQgZmlsZSBjaHVuazogJHt0LmRhdGEubGVuZ3RofS8ke3Quc2l6ZX1gLDYpLHQuZGF0YS5sZW5ndGg9PT10LnNpemUpe3QucmVjZWl2aW5nPSExLHQudmFsaWQ9ITAsaS5Mb2coaS5HZXRTdGFja1RyYWNlKCksXCJSZWNlaXZlZCBjb21wbGV0ZSBmaWxlXCIsNik7Y29uc3QgZT0obmV3IERhdGUpLmdldFRpbWUoKS10LnRpbWVzdGFtcFN0YXJ0LHM9TWF0aC5yb3VuZCgxNip0LnNpemUqMTAyNC9lKTtpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxgQXZlcmFnZSB0cmFuc2ZlciBiaXRyYXRlOiAke3N9a2IvcyBvdmVyICR7ZS8xZTN9IHNlY29uZHNgLDYpO2NvbnN0IG49bmV3IEJsb2IodC5kYXRhLHt0eXBlOnQubWltZXR5cGV9KSxyPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO3Iuc2V0QXR0cmlidXRlKFwiaHJlZlwiLFVSTC5jcmVhdGVPYmplY3RVUkwobikpLHIuc2V0QXR0cmlidXRlKFwiZG93bmxvYWRcIixgdHJhbnNmZXIuJHt0LmV4dGVuc2lvbn1gKSxkb2N1bWVudC5ib2R5LmFwcGVuZChyKSxyLnJlbW92ZSgpfWVsc2UgdC5kYXRhLmxlbmd0aD50LnNpemUmJih0LnJlY2VpdmluZz0hMSxpLkVycm9yKGkuR2V0U3RhY2tUcmFjZSgpLGBSZWNlaXZlZCBiaWdnZXIgZmlsZSB0aGFuIGFkdmVydGlzZWQ6ICR7dC5kYXRhLmxlbmd0aH0vJHt0LnNpemV9YCkpfX1jbGFzcyB6ZXtjb25zdHJ1Y3Rvcigpe3RoaXMubWltZXR5cGU9XCJcIix0aGlzLmV4dGVuc2lvbj1cIlwiLHRoaXMucmVjZWl2aW5nPSExLHRoaXMuc2l6ZT0wLHRoaXMuZGF0YT1bXSx0aGlzLnZhbGlkPSExfX1jbGFzcyBCZXt9QmUubWFpbkJ1dHRvbj0wLEJlLmF1eGlsaWFyeUJ1dHRvbj0xLEJlLnNlY29uZGFyeUJ1dHRvbj0yLEJlLmZvdXJ0aEJ1dHRvbj0zLEJlLmZpZnRoQnV0dG9uPTQ7Y2xhc3MgX2V7fV9lLnByaW1hcnlCdXR0b249MSxfZS5zZWNvbmRhcnlCdXR0b249MixfZS5hdXhpbGlhcnlCdXR0b249NCxfZS5mb3VydGhCdXR0b249OCxfZS5maWZ0aEJ1dHRvbj0xNjtjbGFzcyBXZXtjb25zdHJ1Y3Rvcigpe3RoaXMudW5yZWdpc3RlckNhbGxiYWNrcz1bXX1hZGRVbnJlZ2lzdGVyQ2FsbGJhY2soZSl7dGhpcy51bnJlZ2lzdGVyQ2FsbGJhY2tzLnB1c2goZSl9dW5yZWdpc3RlckFsbCgpe2Zvcihjb25zdCBlIG9mIHRoaXMudW5yZWdpc3RlckNhbGxiYWNrcyllKCk7dGhpcy51bnJlZ2lzdGVyQ2FsbGJhY2tzPVtdfX1jbGFzcyBIZXtjb25zdHJ1Y3RvcihlLHQscyl7dGhpcy50b3VjaEV2ZW50TGlzdGVuZXJUcmFja2VyPW5ldyBXZSx0aGlzLnRvU3RyZWFtZXJNZXNzYWdlc1Byb3ZpZGVyPWUsdGhpcy52aWRlb0VsZW1lbnRQcm92aWRlcj10LHRoaXMuY29vcmRpbmF0ZUNvbnZlcnRlcj1zO2NvbnN0IG49ZT0+dGhpcy5vblRvdWNoU3RhcnQoZSkscj1lPT50aGlzLm9uVG91Y2hFbmQoZSksaT1lPT50aGlzLm9uVG91Y2hNb3ZlKGUpO2RvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsbix7cGFzc2l2ZTohMX0pLGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLHIse3Bhc3NpdmU6ITF9KSxkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsaSx7cGFzc2l2ZTohMX0pLHRoaXMudG91Y2hFdmVudExpc3RlbmVyVHJhY2tlci5hZGRVbnJlZ2lzdGVyQ2FsbGJhY2soKCgpPT5kb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLG4pKSksdGhpcy50b3VjaEV2ZW50TGlzdGVuZXJUcmFja2VyLmFkZFVucmVnaXN0ZXJDYWxsYmFjaygoKCk9PmRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLHIpKSksdGhpcy50b3VjaEV2ZW50TGlzdGVuZXJUcmFja2VyLmFkZFVucmVnaXN0ZXJDYWxsYmFjaygoKCk9PmRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIixpKSkpfXVucmVnaXN0ZXJUb3VjaEV2ZW50cygpe3RoaXMudG91Y2hFdmVudExpc3RlbmVyVHJhY2tlci51bnJlZ2lzdGVyQWxsKCl9c2V0VmlkZW9FbGVtZW50UGFyZW50Q2xpZW50UmVjdChlKXt0aGlzLnZpZGVvRWxlbWVudFBhcmVudENsaWVudFJlY3Q9ZX1vblRvdWNoU3RhcnQoZSl7aWYodGhpcy52aWRlb0VsZW1lbnRQcm92aWRlci5pc1ZpZGVvUmVhZHkoKSl7aWYobnVsbD09dGhpcy5mYWtlVG91Y2hGaW5nZXIpe2NvbnN0IHQ9ZS5jaGFuZ2VkVG91Y2hlc1swXTt0aGlzLmZha2VUb3VjaEZpbmdlcj1uZXcgVmUodC5pZGVudGlmaWVyLHQuY2xpZW50WC10aGlzLnZpZGVvRWxlbWVudFBhcmVudENsaWVudFJlY3QubGVmdCx0LmNsaWVudFktdGhpcy52aWRlb0VsZW1lbnRQYXJlbnRDbGllbnRSZWN0LnRvcCk7Y29uc3Qgcz10aGlzLnZpZGVvRWxlbWVudFByb3ZpZGVyLmdldFZpZGVvUGFyZW50RWxlbWVudCgpLG49bmV3IE1vdXNlRXZlbnQoXCJtb3VzZWVudGVyXCIsdCk7cy5kaXNwYXRjaEV2ZW50KG4pO2NvbnN0IHI9dGhpcy5jb29yZGluYXRlQ29udmVydGVyLm5vcm1hbGl6ZUFuZFF1YW50aXplVW5zaWduZWQodGhpcy5mYWtlVG91Y2hGaW5nZXIueCx0aGlzLmZha2VUb3VjaEZpbmdlci55KTt0aGlzLnRvU3RyZWFtZXJNZXNzYWdlc1Byb3ZpZGVyLnRvU3RyZWFtZXJIYW5kbGVycy5nZXQoXCJNb3VzZURvd25cIikoW0JlLm1haW5CdXR0b24sci54LHIueV0pfWUucHJldmVudERlZmF1bHQoKX19b25Ub3VjaEVuZChlKXtpZighdGhpcy52aWRlb0VsZW1lbnRQcm92aWRlci5pc1ZpZGVvUmVhZHkoKSlyZXR1cm47Y29uc3QgdD10aGlzLnZpZGVvRWxlbWVudFByb3ZpZGVyLmdldFZpZGVvUGFyZW50RWxlbWVudCgpLHM9dGhpcy50b1N0cmVhbWVyTWVzc2FnZXNQcm92aWRlci50b1N0cmVhbWVySGFuZGxlcnM7Zm9yKGxldCBuPTA7bjxlLmNoYW5nZWRUb3VjaGVzLmxlbmd0aDtuKyspe2NvbnN0IHI9ZS5jaGFuZ2VkVG91Y2hlc1tuXTtpZihyLmlkZW50aWZpZXI9PT10aGlzLmZha2VUb3VjaEZpbmdlci5pZCl7Y29uc3QgZT1yLmNsaWVudFgtdGhpcy52aWRlb0VsZW1lbnRQYXJlbnRDbGllbnRSZWN0LmxlZnQsbj1yLmNsaWVudFktdGhpcy52aWRlb0VsZW1lbnRQYXJlbnRDbGllbnRSZWN0LnRvcCxpPXRoaXMuY29vcmRpbmF0ZUNvbnZlcnRlci5ub3JtYWxpemVBbmRRdWFudGl6ZVVuc2lnbmVkKGUsbik7cy5nZXQoXCJNb3VzZVVwXCIpKFtCZS5tYWluQnV0dG9uLGkueCxpLnldKTtjb25zdCBvPW5ldyBNb3VzZUV2ZW50KFwibW91c2VsZWF2ZVwiLHIpO3QuZGlzcGF0Y2hFdmVudChvKSx0aGlzLmZha2VUb3VjaEZpbmdlcj1udWxsO2JyZWFrfX1lLnByZXZlbnREZWZhdWx0KCl9b25Ub3VjaE1vdmUoZSl7aWYoIXRoaXMudmlkZW9FbGVtZW50UHJvdmlkZXIuaXNWaWRlb1JlYWR5KCkpcmV0dXJuO2NvbnN0IHQ9dGhpcy50b1N0cmVhbWVyTWVzc2FnZXNQcm92aWRlci50b1N0cmVhbWVySGFuZGxlcnM7Zm9yKGxldCBzPTA7czxlLnRvdWNoZXMubGVuZ3RoO3MrKyl7Y29uc3Qgbj1lLnRvdWNoZXNbc107aWYobi5pZGVudGlmaWVyPT09dGhpcy5mYWtlVG91Y2hGaW5nZXIuaWQpe2NvbnN0IGU9bi5jbGllbnRYLXRoaXMudmlkZW9FbGVtZW50UGFyZW50Q2xpZW50UmVjdC5sZWZ0LHM9bi5jbGllbnRZLXRoaXMudmlkZW9FbGVtZW50UGFyZW50Q2xpZW50UmVjdC50b3Ascj10aGlzLmNvb3JkaW5hdGVDb252ZXJ0ZXIubm9ybWFsaXplQW5kUXVhbnRpemVVbnNpZ25lZChlLHMpLGk9dGhpcy5jb29yZGluYXRlQ29udmVydGVyLm5vcm1hbGl6ZUFuZFF1YW50aXplU2lnbmVkKGUtdGhpcy5mYWtlVG91Y2hGaW5nZXIueCxzLXRoaXMuZmFrZVRvdWNoRmluZ2VyLnkpO3QuZ2V0KFwiTW91c2VNb3ZlXCIpKFtyLngsci55LGkueCxpLnldKSx0aGlzLmZha2VUb3VjaEZpbmdlci54PWUsdGhpcy5mYWtlVG91Y2hGaW5nZXIueT1zO2JyZWFrfX1lLnByZXZlbnREZWZhdWx0KCl9fWNsYXNzIFZle2NvbnN0cnVjdG9yKGUsdCxzKXt0aGlzLmlkPWUsdGhpcy54PXQsdGhpcy55PXN9fWNsYXNzIE5le31OZS5iYWNrU3BhY2U9OCxOZS5zaGlmdD0xNixOZS5jb250cm9sPTE3LE5lLmFsdD0xOCxOZS5yaWdodFNoaWZ0PTI1MyxOZS5yaWdodENvbnRyb2w9MjU0LE5lLnJpZ2h0QWx0PTI1NTtjbGFzcyBLZXtjb25zdHJ1Y3RvcihlLHQscyl7dGhpcy5rZXlib2FyZEV2ZW50TGlzdGVuZXJUcmFja2VyPW5ldyBXZSx0aGlzLkNvZGVUb0tleUNvZGU9e0VzY2FwZToyNyxEaWdpdDA6NDgsRGlnaXQxOjQ5LERpZ2l0Mjo1MCxEaWdpdDM6NTEsRGlnaXQ0OjUyLERpZ2l0NTo1MyxEaWdpdDY6NTQsRGlnaXQ3OjU1LERpZ2l0ODo1NixEaWdpdDk6NTcsTWludXM6MTczLEVxdWFsOjE4NyxCYWNrc3BhY2U6OCxUYWI6OSxLZXlROjgxLEtleVc6ODcsS2V5RTo2OSxLZXlSOjgyLEtleVQ6ODQsS2V5WTo4OSxLZXlVOjg1LEtleUk6NzMsS2V5Tzo3OSxLZXlQOjgwLEJyYWNrZXRMZWZ0OjIxOSxCcmFja2V0UmlnaHQ6MjIxLEVudGVyOjEzLENvbnRyb2xMZWZ0OjE3LEtleUE6NjUsS2V5Uzo4MyxLZXlEOjY4LEtleUY6NzAsS2V5Rzo3MSxLZXlIOjcyLEtleUo6NzQsS2V5Szo3NSxLZXlMOjc2LFNlbWljb2xvbjoxODYsUXVvdGU6MjIyLEJhY2txdW90ZToxOTIsU2hpZnRMZWZ0OjE2LEJhY2tzbGFzaDoyMjAsS2V5Wjo5MCxLZXlYOjg4LEtleUM6NjcsS2V5Vjo4NixLZXlCOjY2LEtleU46NzgsS2V5TTo3NyxDb21tYToxODgsUGVyaW9kOjE5MCxTbGFzaDoxOTEsU2hpZnRSaWdodDoyNTMsQWx0TGVmdDoxOCxTcGFjZTozMixDYXBzTG9jazoyMCxGMToxMTIsRjI6MTEzLEYzOjExNCxGNDoxMTUsRjU6MTE2LEY2OjExNyxGNzoxMTgsRjg6MTE5LEY5OjEyMCxGMTA6MTIxLEYxMToxMjIsRjEyOjEyMyxQYXVzZToxOSxTY3JvbGxMb2NrOjE0NSxOdW1wYWREaXZpZGU6MTExLE51bXBhZE11bHRpcGx5OjEwNixOdW1wYWRTdWJ0cmFjdDoxMDksTnVtcGFkQWRkOjEwNyxOdW1wYWREZWNpbWFsOjExMCxOdW1wYWQ5OjEwNSxOdW1wYWQ4OjEwNCxOdW1wYWQ3OjEwMyxOdW1wYWQ2OjEwMixOdW1wYWQ1OjEwMSxOdW1wYWQ0OjEwMCxOdW1wYWQzOjk5LE51bXBhZDI6OTgsTnVtcGFkMTo5NyxOdW1wYWQwOjk2LE51bUxvY2s6MTQ0LENvbnRyb2xSaWdodDoyNTQsQWx0UmlnaHQ6MjU1LEhvbWU6MzYsRW5kOjM1LEFycm93VXA6MzgsQXJyb3dMZWZ0OjM3LEFycm93UmlnaHQ6MzksQXJyb3dEb3duOjQwLFBhZ2VVcDozMyxQYWdlRG93bjozNCxJbnNlcnQ6NDUsRGVsZXRlOjQ2LENvbnRleHRNZW51OjkzfSx0aGlzLnRvU3RyZWFtZXJNZXNzYWdlc1Byb3ZpZGVyPWUsdGhpcy5jb25maWc9dCx0aGlzLmFjdGl2ZUtleXNQcm92aWRlcj1zfXJlZ2lzdGVyS2V5Qm9hcmRFdmVudHMoKXtjb25zdCBlPWU9PnRoaXMuaGFuZGxlT25LZXlEb3duKGUpLHQ9ZT0+dGhpcy5oYW5kbGVPbktleVVwKGUpLHM9ZT0+dGhpcy5oYW5kbGVPbktleVByZXNzKGUpO2RvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsZSksZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsdCksZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXByZXNzXCIscyksdGhpcy5rZXlib2FyZEV2ZW50TGlzdGVuZXJUcmFja2VyLmFkZFVucmVnaXN0ZXJDYWxsYmFjaygoKCk9PmRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsZSkpKSx0aGlzLmtleWJvYXJkRXZlbnRMaXN0ZW5lclRyYWNrZXIuYWRkVW5yZWdpc3RlckNhbGxiYWNrKCgoKT0+ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsdCkpKSx0aGlzLmtleWJvYXJkRXZlbnRMaXN0ZW5lclRyYWNrZXIuYWRkVW5yZWdpc3RlckNhbGxiYWNrKCgoKT0+ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleXByZXNzXCIscykpKX11bnJlZ2lzdGVyS2V5Qm9hcmRFdmVudHMoKXt0aGlzLmtleWJvYXJkRXZlbnRMaXN0ZW5lclRyYWNrZXIudW5yZWdpc3RlckFsbCgpfWhhbmRsZU9uS2V5RG93bihlKXtjb25zdCB0PXRoaXMuZ2V0S2V5Y29kZShlKTt0JiYoaS5Mb2coaS5HZXRTdGFja1RyYWNlKCksYGtleSBkb3duICR7dH0sIHJlcGVhdCA9ICR7ZS5yZXBlYXR9YCw2KSx0aGlzLnRvU3RyZWFtZXJNZXNzYWdlc1Byb3ZpZGVyLnRvU3RyZWFtZXJIYW5kbGVycy5nZXQoXCJLZXlEb3duXCIpKFt0aGlzLmdldEtleWNvZGUoZSksZS5yZXBlYXQ/MTowXSksdGhpcy5hY3RpdmVLZXlzUHJvdmlkZXIuZ2V0QWN0aXZlS2V5cygpLnB1c2godCksdD09PU5lLmJhY2tTcGFjZSYmZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChuZXcgS2V5Ym9hcmRFdmVudChcImtleXByZXNzXCIse2NoYXJDb2RlOk5lLmJhY2tTcGFjZX0pKSx0aGlzLmNvbmZpZy5pc0ZsYWdFbmFibGVkKHJlLlN1cHByZXNzQnJvd3NlcktleXMpJiZ0aGlzLmlzS2V5Q29kZUJyb3dzZXJLZXkodCkmJmUucHJldmVudERlZmF1bHQoKSl9aGFuZGxlT25LZXlVcChlKXtjb25zdCB0PXRoaXMuZ2V0S2V5Y29kZShlKTt0JiYoaS5Mb2coaS5HZXRTdGFja1RyYWNlKCksYGtleSB1cCAke3R9YCw2KSx0aGlzLnRvU3RyZWFtZXJNZXNzYWdlc1Byb3ZpZGVyLnRvU3RyZWFtZXJIYW5kbGVycy5nZXQoXCJLZXlVcFwiKShbdCxlLnJlcGVhdD8xOjBdKSx0aGlzLmNvbmZpZy5pc0ZsYWdFbmFibGVkKHJlLlN1cHByZXNzQnJvd3NlcktleXMpJiZ0aGlzLmlzS2V5Q29kZUJyb3dzZXJLZXkodCkmJmUucHJldmVudERlZmF1bHQoKSl9aGFuZGxlT25LZXlQcmVzcyhlKXtpZighKFwiY2hhckNvZGVcImluIGUpKXJldHVybiB2b2lkIGkuV2FybmluZyhpLkdldFN0YWNrVHJhY2UoKSxcIktleWJvYXJkRXZlbnQuY2hhckNvZGUgaXMgZGVwcmVjYXRlZCBpbiB0aGlzIGJyb3dzZXIsIGNhbm5vdCBzZW5kIGtleSBwcmVzcy5cIik7Y29uc3QgdD1lLmNoYXJDb2RlO2kuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLGBrZXkgcHJlc3MgJHt0fWAsNiksdGhpcy50b1N0cmVhbWVyTWVzc2FnZXNQcm92aWRlci50b1N0cmVhbWVySGFuZGxlcnMuZ2V0KFwiS2V5UHJlc3NcIikoW3RdKX1nZXRLZXljb2RlKGUpe2lmKCEoXCJrZXlDb2RlXCJpbiBlKSl7Y29uc3QgdD1lO3JldHVybiB0LmNvZGUgaW4gdGhpcy5Db2RlVG9LZXlDb2RlP3RoaXMuQ29kZVRvS2V5Q29kZVt0LmNvZGVdOihpLldhcm5pbmcoaS5HZXRTdGFja1RyYWNlKCksYEtleWJvYXJkIGNvZGUgb2YgJHt0LmNvZGV9IGlzIG5vdCBzdXBwb3J0ZWQgaW4gb3VyIG1hcHBpbmcsIGlnbm9yaW5nIHRoaXMga2V5LmApLG51bGwpfXJldHVybiBlLmtleUNvZGU9PT1OZS5zaGlmdCYmXCJTaGlmdFJpZ2h0XCI9PT1lLmNvZGU/TmUucmlnaHRTaGlmdDplLmtleUNvZGU9PT1OZS5jb250cm9sJiZcIkNvbnRyb2xSaWdodFwiPT09ZS5jb2RlP05lLnJpZ2h0Q29udHJvbDplLmtleUNvZGU9PT1OZS5hbHQmJlwiQWx0UmlnaHRcIj09PWUuY29kZT9OZS5yaWdodEFsdDplLmtleUNvZGV9aXNLZXlDb2RlQnJvd3NlcktleShlKXtyZXR1cm4gZT49MTEyJiZlPD0xMjN8fDk9PT1lfX1jbGFzcyBRZXtjb25zdHJ1Y3RvcihlLHQscyl7dGhpcy54PTAsdGhpcy55PTAsdGhpcy51cGRhdGVNb3VzZU1vdmVQb3NpdGlvbkV2ZW50PWU9Pnt0aGlzLnVwZGF0ZU1vdXNlTW92ZVBvc2l0aW9uKGUpfSx0aGlzLm1vdXNlRXZlbnRMaXN0ZW5lclRyYWNrZXI9bmV3IFdlLHRoaXMudmlkZW9FbGVtZW50UHJvdmlkZXI9ZSx0aGlzLm1vdXNlQ29udHJvbGxlcj10LHRoaXMuYWN0aXZlS2V5c1Byb3ZpZGVyPXM7Y29uc3Qgbj10aGlzLnZpZGVvRWxlbWVudFByb3ZpZGVyLmdldFZpZGVvUGFyZW50RWxlbWVudCgpO3RoaXMueD1uLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoLzIsdGhpcy55PW4uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0LzIsdGhpcy5jb29yZD10aGlzLm1vdXNlQ29udHJvbGxlci5jb29yZGluYXRlQ29udmVydGVyLm5vcm1hbGl6ZUFuZFF1YW50aXplVW5zaWduZWQodGhpcy54LHRoaXMueSl9dW5yZWdpc3Rlck1vdXNlRXZlbnRzKCl7dGhpcy5tb3VzZUV2ZW50TGlzdGVuZXJUcmFja2VyLnVucmVnaXN0ZXJBbGwoKX1sb2NrU3RhdGVDaGFuZ2UoKXtjb25zdCBlPXRoaXMudmlkZW9FbGVtZW50UHJvdmlkZXIuZ2V0VmlkZW9QYXJlbnRFbGVtZW50KCksdD10aGlzLm1vdXNlQ29udHJvbGxlci50b1N0cmVhbWVyTWVzc2FnZXNQcm92aWRlci50b1N0cmVhbWVySGFuZGxlcnM7aWYoZG9jdW1lbnQucG9pbnRlckxvY2tFbGVtZW50PT09ZXx8ZG9jdW1lbnQubW96UG9pbnRlckxvY2tFbGVtZW50PT09ZSlpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcIlBvaW50ZXIgbG9ja2VkXCIsNiksZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLHRoaXMudXBkYXRlTW91c2VNb3ZlUG9zaXRpb25FdmVudCwhMSksdGhpcy5tb3VzZUV2ZW50TGlzdGVuZXJUcmFja2VyLmFkZFVucmVnaXN0ZXJDYWxsYmFjaygoKCk9PmRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIix0aGlzLnVwZGF0ZU1vdXNlTW92ZVBvc2l0aW9uRXZlbnQsITEpKSk7ZWxzZXtpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcIlRoZSBwb2ludGVyIGxvY2sgc3RhdHVzIGlzIG5vdyB1bmxvY2tlZFwiLDYpLGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIix0aGlzLnVwZGF0ZU1vdXNlTW92ZVBvc2l0aW9uRXZlbnQsITEpO2xldCBlPXRoaXMuYWN0aXZlS2V5c1Byb3ZpZGVyLmdldEFjdGl2ZUtleXMoKTtjb25zdCBzPW5ldyBTZXQoZSksbj1bXTtzLmZvckVhY2goKGU9PntuW2VdfSkpLG4uZm9yRWFjaCgoZT0+e3QuZ2V0KFwiS2V5VXBcIikoW2VdKX0pKSxlPVtdfX11cGRhdGVNb3VzZU1vdmVQb3NpdGlvbihlKXtpZighdGhpcy52aWRlb0VsZW1lbnRQcm92aWRlci5pc1ZpZGVvUmVhZHkoKSlyZXR1cm47Y29uc3QgdD10aGlzLm1vdXNlQ29udHJvbGxlci50b1N0cmVhbWVyTWVzc2FnZXNQcm92aWRlci50b1N0cmVhbWVySGFuZGxlcnMscz10aGlzLnZpZGVvRWxlbWVudFByb3ZpZGVyLmdldFZpZGVvUGFyZW50RWxlbWVudCgpLmNsaWVudFdpZHRoLG49dGhpcy52aWRlb0VsZW1lbnRQcm92aWRlci5nZXRWaWRlb1BhcmVudEVsZW1lbnQoKS5jbGllbnRIZWlnaHQ7dGhpcy54Kz1lLm1vdmVtZW50WCx0aGlzLnkrPWUubW92ZW1lbnRZLHRoaXMueD5zJiYodGhpcy54LT1zKSx0aGlzLnk+biYmKHRoaXMueS09biksdGhpcy54PDAmJih0aGlzLng9cyt0aGlzLngpLHRoaXMueTwwJiYodGhpcy55PW4tdGhpcy55KSx0aGlzLmNvb3JkPXRoaXMubW91c2VDb250cm9sbGVyLmNvb3JkaW5hdGVDb252ZXJ0ZXIubm9ybWFsaXplQW5kUXVhbnRpemVVbnNpZ25lZCh0aGlzLngsdGhpcy55KTtjb25zdCByPXRoaXMubW91c2VDb250cm9sbGVyLmNvb3JkaW5hdGVDb252ZXJ0ZXIubm9ybWFsaXplQW5kUXVhbnRpemVTaWduZWQoZS5tb3ZlbWVudFgsZS5tb3ZlbWVudFkpO3QuZ2V0KFwiTW91c2VNb3ZlXCIpKFt0aGlzLmNvb3JkLngsdGhpcy5jb29yZC55LHIueCxyLnldKX1oYW5kbGVNb3VzZURvd24oZSl7dGhpcy52aWRlb0VsZW1lbnRQcm92aWRlci5pc1ZpZGVvUmVhZHkoKSYmdGhpcy5tb3VzZUNvbnRyb2xsZXIudG9TdHJlYW1lck1lc3NhZ2VzUHJvdmlkZXIudG9TdHJlYW1lckhhbmRsZXJzLmdldChcIk1vdXNlRG93blwiKShbZS5idXR0b24sdGhpcy5jb29yZC54LHRoaXMuY29vcmQueV0pfWhhbmRsZU1vdXNlVXAoZSl7dGhpcy52aWRlb0VsZW1lbnRQcm92aWRlci5pc1ZpZGVvUmVhZHkoKSYmdGhpcy5tb3VzZUNvbnRyb2xsZXIudG9TdHJlYW1lck1lc3NhZ2VzUHJvdmlkZXIudG9TdHJlYW1lckhhbmRsZXJzLmdldChcIk1vdXNlVXBcIikoW2UuYnV0dG9uLHRoaXMuY29vcmQueCx0aGlzLmNvb3JkLnldKX1oYW5kbGVNb3VzZVdoZWVsKGUpe3RoaXMudmlkZW9FbGVtZW50UHJvdmlkZXIuaXNWaWRlb1JlYWR5KCkmJnRoaXMubW91c2VDb250cm9sbGVyLnRvU3RyZWFtZXJNZXNzYWdlc1Byb3ZpZGVyLnRvU3RyZWFtZXJIYW5kbGVycy5nZXQoXCJNb3VzZVdoZWVsXCIpKFtlLndoZWVsRGVsdGEsdGhpcy5jb29yZC54LHRoaXMuY29vcmQueV0pfWhhbmRsZU1vdXNlRG91YmxlKGUpe3RoaXMudmlkZW9FbGVtZW50UHJvdmlkZXIuaXNWaWRlb1JlYWR5KCkmJnRoaXMubW91c2VDb250cm9sbGVyLnRvU3RyZWFtZXJNZXNzYWdlc1Byb3ZpZGVyLnRvU3RyZWFtZXJIYW5kbGVycy5nZXQoXCJNb3VzZURvdWJsZVwiKShbZS5idXR0b24sdGhpcy5jb29yZC54LHRoaXMuY29vcmQueV0pfWhhbmRsZVByZXNzTW91c2VCdXR0b25zKGUpe3RoaXMudmlkZW9FbGVtZW50UHJvdmlkZXIuaXNWaWRlb1JlYWR5KCkmJnRoaXMubW91c2VDb250cm9sbGVyLnByZXNzTW91c2VCdXR0b25zKGUuYnV0dG9ucyx0aGlzLngsdGhpcy55KX1oYW5kbGVSZWxlYXNlTW91c2VCdXR0b25zKGUpe3RoaXMudmlkZW9FbGVtZW50UHJvdmlkZXIuaXNWaWRlb1JlYWR5KCkmJnRoaXMubW91c2VDb250cm9sbGVyLnJlbGVhc2VNb3VzZUJ1dHRvbnMoZS5idXR0b25zLHRoaXMueCx0aGlzLnkpfX1jbGFzcyAkZXtjb25zdHJ1Y3RvcihlKXt0aGlzLm1vdXNlQ29udHJvbGxlcj1lfXVucmVnaXN0ZXJNb3VzZUV2ZW50cygpe311cGRhdGVNb3VzZU1vdmVQb3NpdGlvbihlKXtpZighdGhpcy5tb3VzZUNvbnRyb2xsZXIudmlkZW9FbGVtZW50UHJvdmlkZXIuaXNWaWRlb1JlYWR5KCkpcmV0dXJuO2kuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLFwiTW91c2VNb3ZlXCIsNik7Y29uc3QgdD10aGlzLm1vdXNlQ29udHJvbGxlci5jb29yZGluYXRlQ29udmVydGVyLm5vcm1hbGl6ZUFuZFF1YW50aXplVW5zaWduZWQoZS5vZmZzZXRYLGUub2Zmc2V0WSkscz10aGlzLm1vdXNlQ29udHJvbGxlci5jb29yZGluYXRlQ29udmVydGVyLm5vcm1hbGl6ZUFuZFF1YW50aXplU2lnbmVkKGUubW92ZW1lbnRYLGUubW92ZW1lbnRZKTt0aGlzLm1vdXNlQ29udHJvbGxlci50b1N0cmVhbWVyTWVzc2FnZXNQcm92aWRlci50b1N0cmVhbWVySGFuZGxlcnMuZ2V0KFwiTW91c2VNb3ZlXCIpKFt0LngsdC55LHMueCxzLnldKSxlLnByZXZlbnREZWZhdWx0KCl9aGFuZGxlTW91c2VEb3duKGUpe2lmKCF0aGlzLm1vdXNlQ29udHJvbGxlci52aWRlb0VsZW1lbnRQcm92aWRlci5pc1ZpZGVvUmVhZHkoKSlyZXR1cm47aS5Mb2coaS5HZXRTdGFja1RyYWNlKCksXCJvbk1vdXNlIERvd25cIiw2KTtjb25zdCB0PXRoaXMubW91c2VDb250cm9sbGVyLmNvb3JkaW5hdGVDb252ZXJ0ZXIubm9ybWFsaXplQW5kUXVhbnRpemVVbnNpZ25lZChlLm9mZnNldFgsZS5vZmZzZXRZKTt0aGlzLm1vdXNlQ29udHJvbGxlci50b1N0cmVhbWVyTWVzc2FnZXNQcm92aWRlci50b1N0cmVhbWVySGFuZGxlcnMuZ2V0KFwiTW91c2VEb3duXCIpKFtlLmJ1dHRvbix0LngsdC55XSksZS5wcmV2ZW50RGVmYXVsdCgpfWhhbmRsZU1vdXNlVXAoZSl7aWYoIXRoaXMubW91c2VDb250cm9sbGVyLnZpZGVvRWxlbWVudFByb3ZpZGVyLmlzVmlkZW9SZWFkeSgpKXJldHVybjtjb25zdCB0PXRoaXMubW91c2VDb250cm9sbGVyLmNvb3JkaW5hdGVDb252ZXJ0ZXIubm9ybWFsaXplQW5kUXVhbnRpemVVbnNpZ25lZChlLm9mZnNldFgsZS5vZmZzZXRZKTt0aGlzLm1vdXNlQ29udHJvbGxlci50b1N0cmVhbWVyTWVzc2FnZXNQcm92aWRlci50b1N0cmVhbWVySGFuZGxlcnMuZ2V0KFwiTW91c2VVcFwiKShbZS5idXR0b24sdC54LHQueV0pLGUucHJldmVudERlZmF1bHQoKX1oYW5kbGVDb250ZXh0TWVudShlKXtpZighdGhpcy5tb3VzZUNvbnRyb2xsZXIudmlkZW9FbGVtZW50UHJvdmlkZXIuaXNWaWRlb1JlYWR5KCkpcmV0dXJuO2NvbnN0IHQ9dGhpcy5tb3VzZUNvbnRyb2xsZXIuY29vcmRpbmF0ZUNvbnZlcnRlci5ub3JtYWxpemVBbmRRdWFudGl6ZVVuc2lnbmVkKGUub2Zmc2V0WCxlLm9mZnNldFkpO3RoaXMubW91c2VDb250cm9sbGVyLnRvU3RyZWFtZXJNZXNzYWdlc1Byb3ZpZGVyLnRvU3RyZWFtZXJIYW5kbGVycy5nZXQoXCJNb3VzZVVwXCIpKFtlLmJ1dHRvbix0LngsdC55XSksZS5wcmV2ZW50RGVmYXVsdCgpfWhhbmRsZU1vdXNlV2hlZWwoZSl7aWYoIXRoaXMubW91c2VDb250cm9sbGVyLnZpZGVvRWxlbWVudFByb3ZpZGVyLmlzVmlkZW9SZWFkeSgpKXJldHVybjtjb25zdCB0PXRoaXMubW91c2VDb250cm9sbGVyLmNvb3JkaW5hdGVDb252ZXJ0ZXIubm9ybWFsaXplQW5kUXVhbnRpemVVbnNpZ25lZChlLm9mZnNldFgsZS5vZmZzZXRZKTt0aGlzLm1vdXNlQ29udHJvbGxlci50b1N0cmVhbWVyTWVzc2FnZXNQcm92aWRlci50b1N0cmVhbWVySGFuZGxlcnMuZ2V0KFwiTW91c2VXaGVlbFwiKShbZS53aGVlbERlbHRhLHQueCx0LnldKSxlLnByZXZlbnREZWZhdWx0KCl9aGFuZGxlTW91c2VEb3VibGUoZSl7aWYoIXRoaXMubW91c2VDb250cm9sbGVyLnZpZGVvRWxlbWVudFByb3ZpZGVyLmlzVmlkZW9SZWFkeSgpKXJldHVybjtjb25zdCB0PXRoaXMubW91c2VDb250cm9sbGVyLmNvb3JkaW5hdGVDb252ZXJ0ZXIubm9ybWFsaXplQW5kUXVhbnRpemVVbnNpZ25lZChlLm9mZnNldFgsZS5vZmZzZXRZKTt0aGlzLm1vdXNlQ29udHJvbGxlci50b1N0cmVhbWVyTWVzc2FnZXNQcm92aWRlci50b1N0cmVhbWVySGFuZGxlcnMuZ2V0KFwiTW91c2VEb3VibGVcIikoW2UuYnV0dG9uLHQueCx0LnldKX1oYW5kbGVQcmVzc01vdXNlQnV0dG9ucyhlKXt0aGlzLm1vdXNlQ29udHJvbGxlci52aWRlb0VsZW1lbnRQcm92aWRlci5pc1ZpZGVvUmVhZHkoKSYmdGhpcy5tb3VzZUNvbnRyb2xsZXIucHJlc3NNb3VzZUJ1dHRvbnMoZS5idXR0b25zLGUub2Zmc2V0WCxlLm9mZnNldFkpfWhhbmRsZVJlbGVhc2VNb3VzZUJ1dHRvbnMoZSl7dGhpcy5tb3VzZUNvbnRyb2xsZXIudmlkZW9FbGVtZW50UHJvdmlkZXIuaXNWaWRlb1JlYWR5KCkmJnRoaXMubW91c2VDb250cm9sbGVyLnJlbGVhc2VNb3VzZUJ1dHRvbnMoZS5idXR0b25zLGUub2Zmc2V0WCxlLm9mZnNldFkpfX1jbGFzcyBxZXtjb25zdHJ1Y3RvcihlLHQscyxuKXt0aGlzLm1vdXNlRXZlbnRMaXN0ZW5lclRyYWNrZXI9bmV3IFdlLHRoaXMudG9TdHJlYW1lck1lc3NhZ2VzUHJvdmlkZXI9ZSx0aGlzLmNvb3JkaW5hdGVDb252ZXJ0ZXI9cyx0aGlzLnZpZGVvRWxlbWVudFByb3ZpZGVyPXQsdGhpcy5hY3RpdmVLZXlzUHJvdmlkZXI9bix0aGlzLnJlZ2lzdGVyTW91c2VFbnRlckFuZExlYXZlRXZlbnRzKCl9dW5yZWdpc3Rlck1vdXNlRXZlbnRzKCl7dGhpcy5tb3VzZUV2ZW50TGlzdGVuZXJUcmFja2VyLnVucmVnaXN0ZXJBbGwoKX1yZWdpc3RlckxvY2tlZE1vdXNlRXZlbnRzKGUpe2NvbnN0IHQ9dGhpcy52aWRlb0VsZW1lbnRQcm92aWRlci5nZXRWaWRlb1BhcmVudEVsZW1lbnQoKSxzPW5ldyBRZSh0aGlzLnZpZGVvRWxlbWVudFByb3ZpZGVyLGUsdGhpcy5hY3RpdmVLZXlzUHJvdmlkZXIpO2lmKHQucmVxdWVzdFBvaW50ZXJMb2NrPXQucmVxdWVzdFBvaW50ZXJMb2NrfHx0Lm1velJlcXVlc3RQb2ludGVyTG9jayxkb2N1bWVudC5leGl0UG9pbnRlckxvY2s9ZG9jdW1lbnQuZXhpdFBvaW50ZXJMb2NrfHxkb2N1bWVudC5tb3pFeGl0UG9pbnRlckxvY2ssdC5yZXF1ZXN0UG9pbnRlckxvY2spe2NvbnN0IGU9KCk9Pnt0LnJlcXVlc3RQb2ludGVyTG9jaygpfTt0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLGUpLHRoaXMubW91c2VFdmVudExpc3RlbmVyVHJhY2tlci5hZGRVbnJlZ2lzdGVyQ2FsbGJhY2soKCgpPT50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLGUpKSl9Y29uc3Qgbj0oKT0+cy5sb2NrU3RhdGVDaGFuZ2UoKTtkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcmxvY2tjaGFuZ2VcIixuLCExKSxkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW96cG9pbnRlcmxvY2tjaGFuZ2VcIixuLCExKSx0aGlzLm1vdXNlRXZlbnRMaXN0ZW5lclRyYWNrZXIuYWRkVW5yZWdpc3RlckNhbGxiYWNrKCgoKT0+ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJsb2NrY2hhbmdlXCIsbiwhMSkpKSx0aGlzLm1vdXNlRXZlbnRMaXN0ZW5lclRyYWNrZXIuYWRkVW5yZWdpc3RlckNhbGxiYWNrKCgoKT0+ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1venBvaW50ZXJsb2NrY2hhbmdlXCIsbiwhMSkpKTtjb25zdCByPWU9PnMuaGFuZGxlTW91c2VEb3duKGUpLGk9ZT0+cy5oYW5kbGVNb3VzZVVwKGUpLG89ZT0+cy5oYW5kbGVNb3VzZVdoZWVsKGUpLGE9ZT0+cy5oYW5kbGVNb3VzZURvdWJsZShlKTt0LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIixyKSx0LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsaSksdC5hZGRFdmVudExpc3RlbmVyKFwid2hlZWxcIixvKSx0LmFkZEV2ZW50TGlzdGVuZXIoXCJkYmxjbGlja1wiLGEpLHRoaXMubW91c2VFdmVudExpc3RlbmVyVHJhY2tlci5hZGRVbnJlZ2lzdGVyQ2FsbGJhY2soKCgpPT50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIixyKSkpLHRoaXMubW91c2VFdmVudExpc3RlbmVyVHJhY2tlci5hZGRVbnJlZ2lzdGVyQ2FsbGJhY2soKCgpPT50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsaSkpKSx0aGlzLm1vdXNlRXZlbnRMaXN0ZW5lclRyYWNrZXIuYWRkVW5yZWdpc3RlckNhbGxiYWNrKCgoKT0+dC5yZW1vdmVFdmVudExpc3RlbmVyKFwid2hlZWxcIixvKSkpLHRoaXMubW91c2VFdmVudExpc3RlbmVyVHJhY2tlci5hZGRVbnJlZ2lzdGVyQ2FsbGJhY2soKCgpPT50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJkYmxjbGlja1wiLGEpKSksdGhpcy5tb3VzZUV2ZW50TGlzdGVuZXJUcmFja2VyLmFkZFVucmVnaXN0ZXJDYWxsYmFjaygoKCk9PnMudW5yZWdpc3Rlck1vdXNlRXZlbnRzKCkpKSx0aGlzLm1vdXNlRXZlbnRMaXN0ZW5lclRyYWNrZXIuYWRkVW5yZWdpc3RlckNhbGxiYWNrKCgoKT0+eyFkb2N1bWVudC5leGl0UG9pbnRlckxvY2t8fGRvY3VtZW50LnBvaW50ZXJMb2NrRWxlbWVudCE9PXQmJmRvY3VtZW50Lm1velBvaW50ZXJMb2NrRWxlbWVudCE9PXR8fGRvY3VtZW50LmV4aXRQb2ludGVyTG9jaygpfSkpfXJlZ2lzdGVySG92ZXJpbmdNb3VzZUV2ZW50cyhlKXtjb25zdCB0PXRoaXMudmlkZW9FbGVtZW50UHJvdmlkZXIuZ2V0VmlkZW9QYXJlbnRFbGVtZW50KCkscz1uZXcgJGUoZSksbj1lPT5zLnVwZGF0ZU1vdXNlTW92ZVBvc2l0aW9uKGUpLHI9ZT0+cy5oYW5kbGVNb3VzZURvd24oZSksaT1lPT5zLmhhbmRsZU1vdXNlVXAoZSksbz1lPT5zLmhhbmRsZUNvbnRleHRNZW51KGUpLGE9ZT0+cy5oYW5kbGVNb3VzZVdoZWVsKGUpLGw9ZT0+cy5oYW5kbGVNb3VzZURvdWJsZShlKTt0LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIixuKSx0LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIixyKSx0LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsaSksdC5hZGRFdmVudExpc3RlbmVyKFwiY29udGV4dG1lbnVcIixvKSx0LmFkZEV2ZW50TGlzdGVuZXIoXCJ3aGVlbFwiLGEpLHQuYWRkRXZlbnRMaXN0ZW5lcihcImRibGNsaWNrXCIsbCksdGhpcy5tb3VzZUV2ZW50TGlzdGVuZXJUcmFja2VyLmFkZFVucmVnaXN0ZXJDYWxsYmFjaygoKCk9PnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLG4pKSksdGhpcy5tb3VzZUV2ZW50TGlzdGVuZXJUcmFja2VyLmFkZFVucmVnaXN0ZXJDYWxsYmFjaygoKCk9PnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLHIpKSksdGhpcy5tb3VzZUV2ZW50TGlzdGVuZXJUcmFja2VyLmFkZFVucmVnaXN0ZXJDYWxsYmFjaygoKCk9PnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIixpKSkpLHRoaXMubW91c2VFdmVudExpc3RlbmVyVHJhY2tlci5hZGRVbnJlZ2lzdGVyQ2FsbGJhY2soKCgpPT50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjb250ZXh0bWVudVwiLG8pKSksdGhpcy5tb3VzZUV2ZW50TGlzdGVuZXJUcmFja2VyLmFkZFVucmVnaXN0ZXJDYWxsYmFjaygoKCk9PnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIndoZWVsXCIsYSkpKSx0aGlzLm1vdXNlRXZlbnRMaXN0ZW5lclRyYWNrZXIuYWRkVW5yZWdpc3RlckNhbGxiYWNrKCgoKT0+dC5yZW1vdmVFdmVudExpc3RlbmVyKFwiZGJsY2xpY2tcIixsKSkpLHRoaXMubW91c2VFdmVudExpc3RlbmVyVHJhY2tlci5hZGRVbnJlZ2lzdGVyQ2FsbGJhY2soKCgpPT5zLnVucmVnaXN0ZXJNb3VzZUV2ZW50cygpKSl9cmVnaXN0ZXJNb3VzZUVudGVyQW5kTGVhdmVFdmVudHMoKXtjb25zdCBlPXRoaXMudmlkZW9FbGVtZW50UHJvdmlkZXIuZ2V0VmlkZW9QYXJlbnRFbGVtZW50KCksdD1lPT57dGhpcy52aWRlb0VsZW1lbnRQcm92aWRlci5pc1ZpZGVvUmVhZHkoKSYmKGkuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLFwiTW91c2UgRW50ZXJlZFwiLDYpLHRoaXMuc2VuZE1vdXNlRW50ZXIoKSx0aGlzLnByZXNzTW91c2VCdXR0b25zKGUuYnV0dG9ucyxlLngsZS55KSl9LHM9ZT0+e3RoaXMudmlkZW9FbGVtZW50UHJvdmlkZXIuaXNWaWRlb1JlYWR5KCkmJihpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcIk1vdXNlIExlZnRcIiw2KSx0aGlzLnNlbmRNb3VzZUxlYXZlKCksdGhpcy5yZWxlYXNlTW91c2VCdXR0b25zKGUuYnV0dG9ucyxlLngsZS55KSl9O2UuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZW50ZXJcIix0KSxlLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWxlYXZlXCIscyksdGhpcy5tb3VzZUV2ZW50TGlzdGVuZXJUcmFja2VyLmFkZFVucmVnaXN0ZXJDYWxsYmFjaygoKCk9PmUucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZW50ZXJcIix0KSkpLHRoaXMubW91c2VFdmVudExpc3RlbmVyVHJhY2tlci5hZGRVbnJlZ2lzdGVyQ2FsbGJhY2soKCgpPT5lLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWxlYXZlXCIscykpKX1yZWxlYXNlTW91c2VCdXR0b25zKGUsdCxzKXtjb25zdCBuPXRoaXMuY29vcmRpbmF0ZUNvbnZlcnRlci5ub3JtYWxpemVBbmRRdWFudGl6ZVVuc2lnbmVkKHQscyk7ZSZfZS5wcmltYXJ5QnV0dG9uJiZ0aGlzLnNlbmRNb3VzZVVwKEJlLm1haW5CdXR0b24sbi54LG4ueSksZSZfZS5zZWNvbmRhcnlCdXR0b24mJnRoaXMuc2VuZE1vdXNlVXAoQmUuc2Vjb25kYXJ5QnV0dG9uLG4ueCxuLnkpLGUmX2UuYXV4aWxpYXJ5QnV0dG9uJiZ0aGlzLnNlbmRNb3VzZVVwKEJlLmF1eGlsaWFyeUJ1dHRvbixuLngsbi55KSxlJl9lLmZvdXJ0aEJ1dHRvbiYmdGhpcy5zZW5kTW91c2VVcChCZS5mb3VydGhCdXR0b24sbi54LG4ueSksZSZfZS5maWZ0aEJ1dHRvbiYmdGhpcy5zZW5kTW91c2VVcChCZS5maWZ0aEJ1dHRvbixuLngsbi55KX1wcmVzc01vdXNlQnV0dG9ucyhlLHQscyl7aWYoIXRoaXMudmlkZW9FbGVtZW50UHJvdmlkZXIuaXNWaWRlb1JlYWR5KCkpcmV0dXJuO2NvbnN0IG49dGhpcy5jb29yZGluYXRlQ29udmVydGVyLm5vcm1hbGl6ZUFuZFF1YW50aXplVW5zaWduZWQodCxzKTtlJl9lLnByaW1hcnlCdXR0b24mJnRoaXMuc2VuZE1vdXNlRG93bihCZS5tYWluQnV0dG9uLG4ueCxuLnkpLGUmX2Uuc2Vjb25kYXJ5QnV0dG9uJiZ0aGlzLnNlbmRNb3VzZURvd24oQmUuc2Vjb25kYXJ5QnV0dG9uLG4ueCxuLnkpLGUmX2UuYXV4aWxpYXJ5QnV0dG9uJiZ0aGlzLnNlbmRNb3VzZURvd24oQmUuYXV4aWxpYXJ5QnV0dG9uLG4ueCxuLnkpLGUmX2UuZm91cnRoQnV0dG9uJiZ0aGlzLnNlbmRNb3VzZURvd24oQmUuZm91cnRoQnV0dG9uLG4ueCxuLnkpLGUmX2UuZmlmdGhCdXR0b24mJnRoaXMuc2VuZE1vdXNlRG93bihCZS5maWZ0aEJ1dHRvbixuLngsbi55KX1zZW5kTW91c2VFbnRlcigpe3RoaXMudmlkZW9FbGVtZW50UHJvdmlkZXIuaXNWaWRlb1JlYWR5KCkmJnRoaXMudG9TdHJlYW1lck1lc3NhZ2VzUHJvdmlkZXIudG9TdHJlYW1lckhhbmRsZXJzLmdldChcIk1vdXNlRW50ZXJcIikoKX1zZW5kTW91c2VMZWF2ZSgpe3RoaXMudmlkZW9FbGVtZW50UHJvdmlkZXIuaXNWaWRlb1JlYWR5KCkmJnRoaXMudG9TdHJlYW1lck1lc3NhZ2VzUHJvdmlkZXIudG9TdHJlYW1lckhhbmRsZXJzLmdldChcIk1vdXNlTGVhdmVcIikoKX1zZW5kTW91c2VEb3duKGUsdCxzKXt0aGlzLnZpZGVvRWxlbWVudFByb3ZpZGVyLmlzVmlkZW9SZWFkeSgpJiYoaS5Mb2coaS5HZXRTdGFja1RyYWNlKCksYG1vdXNlIGJ1dHRvbiAke2V9IGRvd24gYXQgKCR7dH0sICR7c30pYCw2KSx0aGlzLnRvU3RyZWFtZXJNZXNzYWdlc1Byb3ZpZGVyLnRvU3RyZWFtZXJIYW5kbGVycy5nZXQoXCJNb3VzZURvd25cIikoW2UsdCxzXSkpfXNlbmRNb3VzZVVwKGUsdCxzKXtpZighdGhpcy52aWRlb0VsZW1lbnRQcm92aWRlci5pc1ZpZGVvUmVhZHkoKSlyZXR1cm47aS5Mb2coaS5HZXRTdGFja1RyYWNlKCksYG1vdXNlIGJ1dHRvbiAke2V9IHVwIGF0ICgke3R9LCAke3N9KWAsNik7Y29uc3Qgbj10aGlzLmNvb3JkaW5hdGVDb252ZXJ0ZXIubm9ybWFsaXplQW5kUXVhbnRpemVVbnNpZ25lZCh0LHMpO3RoaXMudG9TdHJlYW1lck1lc3NhZ2VzUHJvdmlkZXIudG9TdHJlYW1lckhhbmRsZXJzLmdldChcIk1vdXNlVXBcIikoW2Usbi54LG4ueV0pfX1jbGFzcyBYZXtjb25zdHJ1Y3RvcihlLHQscyl7dGhpcy5maW5nZXJzPVs5LDgsNyw2LDUsNCwzLDIsMSwwXSx0aGlzLmZpbmdlcklkcz1uZXcgTWFwLHRoaXMubWF4Qnl0ZVZhbHVlPTI1NSx0aGlzLnRvdWNoRXZlbnRMaXN0ZW5lclRyYWNrZXI9bmV3IFdlLHRoaXMudG9TdHJlYW1lck1lc3NhZ2VzUHJvdmlkZXI9ZSx0aGlzLnZpZGVvRWxlbWVudFByb3ZpZGVyPXQsdGhpcy5jb29yZGluYXRlQ29udmVydGVyPXMsdGhpcy52aWRlb0VsZW1lbnRQYXJlbnQ9dC5nZXRWaWRlb0VsZW1lbnQoKTtjb25zdCBuPWU9PnRoaXMub25Ub3VjaFN0YXJ0KGUpLHI9ZT0+dGhpcy5vblRvdWNoRW5kKGUpLG89ZT0+dGhpcy5vblRvdWNoTW92ZShlKTt0aGlzLnZpZGVvRWxlbWVudFBhcmVudC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLG4se3Bhc3NpdmU6ITF9KSx0aGlzLnZpZGVvRWxlbWVudFBhcmVudC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIixyLHtwYXNzaXZlOiExfSksdGhpcy52aWRlb0VsZW1lbnRQYXJlbnQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLG8se3Bhc3NpdmU6ITF9KSx0aGlzLnRvdWNoRXZlbnRMaXN0ZW5lclRyYWNrZXIuYWRkVW5yZWdpc3RlckNhbGxiYWNrKCgoKT0+dGhpcy52aWRlb0VsZW1lbnRQYXJlbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIixuKSkpLHRoaXMudG91Y2hFdmVudExpc3RlbmVyVHJhY2tlci5hZGRVbnJlZ2lzdGVyQ2FsbGJhY2soKCgpPT50aGlzLnZpZGVvRWxlbWVudFBhcmVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIixyKSkpLHRoaXMudG91Y2hFdmVudExpc3RlbmVyVHJhY2tlci5hZGRVbnJlZ2lzdGVyQ2FsbGJhY2soKCgpPT50aGlzLnZpZGVvRWxlbWVudFBhcmVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsbykpKSxpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcIlRvdWNoIEV2ZW50cyBSZWdpc3RlcmVkXCIsNik7Y29uc3QgYT1lPT57ZS5wcmV2ZW50RGVmYXVsdCgpfTtkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsYSx7cGFzc2l2ZTohMX0pLHRoaXMudG91Y2hFdmVudExpc3RlbmVyVHJhY2tlci5hZGRVbnJlZ2lzdGVyQ2FsbGJhY2soKCgpPT5kb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsYSkpKX11bnJlZ2lzdGVyVG91Y2hFdmVudHMoKXt0aGlzLnRvdWNoRXZlbnRMaXN0ZW5lclRyYWNrZXIudW5yZWdpc3RlckFsbCgpfXJlbWVtYmVyVG91Y2goZSl7Y29uc3QgdD10aGlzLmZpbmdlcnMucG9wKCk7dm9pZCAwPT09dCYmaS5Mb2coaS5HZXRTdGFja1RyYWNlKCksXCJleGhhdXN0ZWQgdG91Y2ggaWRlbnRpZmllcnNcIiw2KSx0aGlzLmZpbmdlcklkcy5zZXQoZS5pZGVudGlmaWVyLHQpfWZvcmdldFRvdWNoKGUpe3RoaXMuZmluZ2Vycy5wdXNoKHRoaXMuZmluZ2VySWRzLmdldChlLmlkZW50aWZpZXIpKSx0aGlzLmZpbmdlcnMuc29ydCgoZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC1lfSkpLHRoaXMuZmluZ2VySWRzLmRlbGV0ZShlLmlkZW50aWZpZXIpfW9uVG91Y2hTdGFydChlKXtpZih0aGlzLnZpZGVvRWxlbWVudFByb3ZpZGVyLmlzVmlkZW9SZWFkeSgpKXtmb3IobGV0IHQ9MDt0PGUuY2hhbmdlZFRvdWNoZXMubGVuZ3RoO3QrKyl0aGlzLnJlbWVtYmVyVG91Y2goZS5jaGFuZ2VkVG91Y2hlc1t0XSk7aS5Mb2coaS5HZXRTdGFja1RyYWNlKCksXCJ0b3VjaCBzdGFydFwiLDYpLHRoaXMuZW1pdFRvdWNoRGF0YShcIlRvdWNoU3RhcnRcIixlLmNoYW5nZWRUb3VjaGVzKSxlLnByZXZlbnREZWZhdWx0KCl9fW9uVG91Y2hFbmQoZSl7aWYodGhpcy52aWRlb0VsZW1lbnRQcm92aWRlci5pc1ZpZGVvUmVhZHkoKSl7aS5Mb2coaS5HZXRTdGFja1RyYWNlKCksXCJ0b3VjaCBlbmRcIiw2KSx0aGlzLmVtaXRUb3VjaERhdGEoXCJUb3VjaEVuZFwiLGUuY2hhbmdlZFRvdWNoZXMpO2ZvcihsZXQgdD0wO3Q8ZS5jaGFuZ2VkVG91Y2hlcy5sZW5ndGg7dCsrKXRoaXMuZm9yZ2V0VG91Y2goZS5jaGFuZ2VkVG91Y2hlc1t0XSk7ZS5wcmV2ZW50RGVmYXVsdCgpfX1vblRvdWNoTW92ZShlKXt0aGlzLnZpZGVvRWxlbWVudFByb3ZpZGVyLmlzVmlkZW9SZWFkeSgpJiYoaS5Mb2coaS5HZXRTdGFja1RyYWNlKCksXCJ0b3VjaCBtb3ZlXCIsNiksdGhpcy5lbWl0VG91Y2hEYXRhKFwiVG91Y2hNb3ZlXCIsZS50b3VjaGVzKSxlLnByZXZlbnREZWZhdWx0KCkpfWVtaXRUb3VjaERhdGEoZSx0KXtpZighdGhpcy52aWRlb0VsZW1lbnRQcm92aWRlci5pc1ZpZGVvUmVhZHkoKSlyZXR1cm47Y29uc3Qgcz10aGlzLnZpZGVvRWxlbWVudFByb3ZpZGVyLmdldFZpZGVvUGFyZW50RWxlbWVudCgpLG49dGhpcy50b1N0cmVhbWVyTWVzc2FnZXNQcm92aWRlci50b1N0cmVhbWVySGFuZGxlcnM7Zm9yKGxldCByPTA7cjx0Lmxlbmd0aDtyKyspe2NvbnN0IG89MSxhPXRbcl0sbD1hLmNsaWVudFgtcy5vZmZzZXRMZWZ0LGQ9YS5jbGllbnRZLXMub2Zmc2V0VG9wO2kuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLGBGJHt0aGlzLmZpbmdlcklkcy5nZXQoYS5pZGVudGlmaWVyKX09KCR7bH0sICR7ZH0pYCw2KTtjb25zdCBjPXRoaXMuY29vcmRpbmF0ZUNvbnZlcnRlci5ub3JtYWxpemVBbmRRdWFudGl6ZVVuc2lnbmVkKGwsZCk7c3dpdGNoKGUpe2Nhc2VcIlRvdWNoU3RhcnRcIjpuLmdldChcIlRvdWNoU3RhcnRcIikoW28sYy54LGMueSx0aGlzLmZpbmdlcklkcy5nZXQoYS5pZGVudGlmaWVyKSx0aGlzLm1heEJ5dGVWYWx1ZSphLmZvcmNlLGMuaW5SYW5nZT8xOjBdKTticmVhaztjYXNlXCJUb3VjaEVuZFwiOm4uZ2V0KFwiVG91Y2hFbmRcIikoW28sYy54LGMueSx0aGlzLmZpbmdlcklkcy5nZXQoYS5pZGVudGlmaWVyKSx0aGlzLm1heEJ5dGVWYWx1ZSphLmZvcmNlLGMuaW5SYW5nZT8xOjBdKTticmVhaztjYXNlXCJUb3VjaE1vdmVcIjpuLmdldChcIlRvdWNoTW92ZVwiKShbbyxjLngsYy55LHRoaXMuZmluZ2VySWRzLmdldChhLmlkZW50aWZpZXIpLHRoaXMubWF4Qnl0ZVZhbHVlKmEuZm9yY2UsYy5pblJhbmdlPzE6MF0pfX19fWNsYXNzIGple2NvbnN0cnVjdG9yKGUpe3RoaXMuZ2FtZVBhZEV2ZW50TGlzdGVuZXJUcmFja2VyPW5ldyBXZSx0aGlzLnRvU3RyZWFtZXJNZXNzYWdlc1Byb3ZpZGVyPWUsdGhpcy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU9KHdpbmRvdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHdpbmRvdy53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUpLmJpbmQod2luZG93KTtjb25zdCB0PXdpbmRvdztpZihcIkdhbWVwYWRFdmVudFwiaW4gdCl7Y29uc3QgZT1lPT50aGlzLmdhbWVQYWRDb25uZWN0SGFuZGxlcihlKSx0PWU9PnRoaXMuZ2FtZVBhZERpc2Nvbm5lY3RIYW5kbGVyKGUpO3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiZ2FtZXBhZGNvbm5lY3RlZFwiLGUpLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiZ2FtZXBhZGRpc2Nvbm5lY3RlZFwiLHQpLHRoaXMuZ2FtZVBhZEV2ZW50TGlzdGVuZXJUcmFja2VyLmFkZFVucmVnaXN0ZXJDYWxsYmFjaygoKCk9PndpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwiZ2FtZXBhZGNvbm5lY3RlZFwiLGUpKSksdGhpcy5nYW1lUGFkRXZlbnRMaXN0ZW5lclRyYWNrZXIuYWRkVW5yZWdpc3RlckNhbGxiYWNrKCgoKT0+d2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJnYW1lcGFkZGlzY29ubmVjdGVkXCIsdCkpKX1lbHNlIGlmKFwiV2ViS2l0R2FtZXBhZEV2ZW50XCJpbiB0KXtjb25zdCBlPWU9PnRoaXMuZ2FtZVBhZENvbm5lY3RIYW5kbGVyKGUpLHQ9ZT0+dGhpcy5nYW1lUGFkRGlzY29ubmVjdEhhbmRsZXIoZSk7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJ3ZWJraXRnYW1lcGFkY29ubmVjdGVkXCIsZSksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJ3ZWJraXRnYW1lcGFkZGlzY29ubmVjdGVkXCIsdCksdGhpcy5nYW1lUGFkRXZlbnRMaXN0ZW5lclRyYWNrZXIuYWRkVW5yZWdpc3RlckNhbGxiYWNrKCgoKT0+d2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ3ZWJraXRnYW1lcGFkY29ubmVjdGVkXCIsZSkpKSx0aGlzLmdhbWVQYWRFdmVudExpc3RlbmVyVHJhY2tlci5hZGRVbnJlZ2lzdGVyQ2FsbGJhY2soKCgpPT53aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIndlYmtpdGdhbWVwYWRkaXNjb25uZWN0ZWRcIix0KSkpfWlmKHRoaXMuY29udHJvbGxlcnM9W10sbmF2aWdhdG9yLmdldEdhbWVwYWRzKWZvcihjb25zdCBlIG9mIG5hdmlnYXRvci5nZXRHYW1lcGFkcygpKWUmJnRoaXMuZ2FtZVBhZENvbm5lY3RIYW5kbGVyKG5ldyBHYW1lcGFkRXZlbnQoXCJnYW1lcGFkY29ubmVjdGVkXCIse2dhbWVwYWQ6ZX0pKX11bnJlZ2lzdGVyR2FtZVBhZEV2ZW50cygpe3RoaXMuZ2FtZVBhZEV2ZW50TGlzdGVuZXJUcmFja2VyLnVucmVnaXN0ZXJBbGwoKTtmb3IoY29uc3QgZSBvZiB0aGlzLmNvbnRyb2xsZXJzKXZvaWQgMCE9PWUuaWQmJnRoaXMub25HYW1lcGFkRGlzY29ubmVjdGVkKGUuaWQpO3RoaXMuY29udHJvbGxlcnM9W10sdGhpcy5vbkdhbWVwYWRDb25uZWN0ZWQ9KCk9Pnt9LHRoaXMub25HYW1lcGFkRGlzY29ubmVjdGVkPSgpPT57fX1nYW1lUGFkQ29ubmVjdEhhbmRsZXIoZSl7aS5Mb2coaS5HZXRTdGFja1RyYWNlKCksXCJHYW1lcGFkIGNvbm5lY3QgaGFuZGxlclwiLDYpO2NvbnN0IHQ9ZS5nYW1lcGFkLHM9e2N1cnJlbnRTdGF0ZTp0LHByZXZTdGF0ZTp0LGlkOnZvaWQgMH07dGhpcy5jb250cm9sbGVycy5wdXNoKHMpLHRoaXMuY29udHJvbGxlcnNbdC5pbmRleF0uY3VycmVudFN0YXRlPXQsdGhpcy5jb250cm9sbGVyc1t0LmluZGV4XS5wcmV2U3RhdGU9dCxpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcImdhbWVwYWQ6IFwiK3QuaWQrXCIgY29ubmVjdGVkXCIsNiksd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKCk9PnRoaXMudXBkYXRlU3RhdHVzKCkpKSx0aGlzLm9uR2FtZXBhZENvbm5lY3RlZCgpfWdhbWVQYWREaXNjb25uZWN0SGFuZGxlcihlKXtpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcIkdhbWVwYWQgZGlzY29ubmVjdCBoYW5kbGVyXCIsNiksaS5Mb2coaS5HZXRTdGFja1RyYWNlKCksXCJnYW1lcGFkOiBcIitlLmdhbWVwYWQuaWQrXCIgZGlzY29ubmVjdGVkXCIsNik7Y29uc3QgdD10aGlzLmNvbnRyb2xsZXJzW2UuZ2FtZXBhZC5pbmRleF07ZGVsZXRlIHRoaXMuY29udHJvbGxlcnNbZS5nYW1lcGFkLmluZGV4XSx0aGlzLmNvbnRyb2xsZXJzPXRoaXMuY29udHJvbGxlcnMuZmlsdGVyKChlPT52b2lkIDAhPT1lKSksdGhpcy5vbkdhbWVwYWREaXNjb25uZWN0ZWQodC5pZCl9c2NhbkdhbWVQYWRzKCl7Y29uc3QgZT1uYXZpZ2F0b3IuZ2V0R2FtZXBhZHM/bmF2aWdhdG9yLmdldEdhbWVwYWRzKCk6bmF2aWdhdG9yLndlYmtpdEdldEdhbWVwYWRzP25hdmlnYXRvci53ZWJraXRHZXRHYW1lcGFkcygpOltdO2ZvcihsZXQgdD0wO3Q8ZS5sZW5ndGg7dCsrKWVbdF0mJmVbdF0uaW5kZXggaW4gdGhpcy5jb250cm9sbGVycyYmKHRoaXMuY29udHJvbGxlcnNbZVt0XS5pbmRleF0uY3VycmVudFN0YXRlPWVbdF0pfXVwZGF0ZVN0YXR1cygpe3RoaXMuc2NhbkdhbWVQYWRzKCk7Y29uc3QgZT10aGlzLnRvU3RyZWFtZXJNZXNzYWdlc1Byb3ZpZGVyLnRvU3RyZWFtZXJIYW5kbGVycztmb3IoY29uc3QgdCBvZiB0aGlzLmNvbnRyb2xsZXJzKXtjb25zdCBzPXZvaWQgMD09PXQuaWQ/dGhpcy5jb250cm9sbGVycy5pbmRleE9mKHQpOnQuaWQsbj10LmN1cnJlbnRTdGF0ZTtmb3IobGV0IG49MDtuPHQuY3VycmVudFN0YXRlLmJ1dHRvbnMubGVuZ3RoO24rKyl7Y29uc3Qgcj10LmN1cnJlbnRTdGF0ZS5idXR0b25zW25dLGk9dC5wcmV2U3RhdGUuYnV0dG9uc1tuXTtyLnByZXNzZWQ/bj09a2UuTGVmdFRyaWdnZXI/ZS5nZXQoXCJHYW1lcGFkQW5hbG9nXCIpKFtzLDUsci52YWx1ZV0pOm49PWtlLlJpZ2h0VHJpZ2dlcj9lLmdldChcIkdhbWVwYWRBbmFsb2dcIikoW3MsNixyLnZhbHVlXSk6ZS5nZXQoXCJHYW1lcGFkQnV0dG9uUHJlc3NlZFwiKShbcyxuLGkucHJlc3NlZD8xOjBdKTohci5wcmVzc2VkJiZpLnByZXNzZWQmJihuPT1rZS5MZWZ0VHJpZ2dlcj9lLmdldChcIkdhbWVwYWRBbmFsb2dcIikoW3MsNSwwXSk6bj09a2UuUmlnaHRUcmlnZ2VyP2UuZ2V0KFwiR2FtZXBhZEFuYWxvZ1wiKShbcyw2LDBdKTplLmdldChcIkdhbWVwYWRCdXR0b25SZWxlYXNlZFwiKShbcyxuXSkpfWZvcihsZXQgdD0wO3Q8bi5heGVzLmxlbmd0aDt0Kz0yKXtjb25zdCByPXBhcnNlRmxvYXQobi5heGVzW3RdLnRvRml4ZWQoNCkpLGk9LXBhcnNlRmxvYXQobi5heGVzW3QrMV0udG9GaXhlZCg0KSk7ZS5nZXQoXCJHYW1lcGFkQW5hbG9nXCIpKFtzLHQrMSxyXSksZS5nZXQoXCJHYW1lcGFkQW5hbG9nXCIpKFtzLHQrMixpXSl9dGhpcy5jb250cm9sbGVyc1tzXS5wcmV2U3RhdGU9bn10aGlzLmNvbnRyb2xsZXJzLmxlbmd0aD4wJiZ0aGlzLnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKCk9PnRoaXMudXBkYXRlU3RhdHVzKCkpKX1vbkdhbWVwYWRSZXNwb25zZVJlY2VpdmVkKGUpe2Zvcihjb25zdCB0IG9mIHRoaXMuY29udHJvbGxlcnMpaWYodm9pZCAwPT09dC5pZCl7dC5pZD1lO2JyZWFrfX1vbkdhbWVwYWRDb25uZWN0ZWQoKXt9b25HYW1lcGFkRGlzY29ubmVjdGVkKGUpe319IWZ1bmN0aW9uKGUpe2VbZS5SaWdodENsdXN0ZXJCb3R0b21CdXR0b249MF09XCJSaWdodENsdXN0ZXJCb3R0b21CdXR0b25cIixlW2UuUmlnaHRDbHVzdGVyUmlnaHRCdXR0b249MV09XCJSaWdodENsdXN0ZXJSaWdodEJ1dHRvblwiLGVbZS5SaWdodENsdXN0ZXJMZWZ0QnV0dG9uPTJdPVwiUmlnaHRDbHVzdGVyTGVmdEJ1dHRvblwiLGVbZS5SaWdodENsdXN0ZXJUb3BCdXR0b249M109XCJSaWdodENsdXN0ZXJUb3BCdXR0b25cIixlW2UuTGVmdFNob3VsZGVyPTRdPVwiTGVmdFNob3VsZGVyXCIsZVtlLlJpZ2h0U2hvdWxkZXI9NV09XCJSaWdodFNob3VsZGVyXCIsZVtlLkxlZnRUcmlnZ2VyPTZdPVwiTGVmdFRyaWdnZXJcIixlW2UuUmlnaHRUcmlnZ2VyPTddPVwiUmlnaHRUcmlnZ2VyXCIsZVtlLlNlbGVjdE9yQmFjaz04XT1cIlNlbGVjdE9yQmFja1wiLGVbZS5TdGFydE9yRm9yd2FyZD05XT1cIlN0YXJ0T3JGb3J3YXJkXCIsZVtlLkxlZnRBbmFsb2dQcmVzcz0xMF09XCJMZWZ0QW5hbG9nUHJlc3NcIixlW2UuUmlnaHRBbmFsb2dQcmVzcz0xMV09XCJSaWdodEFuYWxvZ1ByZXNzXCIsZVtlLkxlZnRDbHVzdGVyVG9wQnV0dG9uPTEyXT1cIkxlZnRDbHVzdGVyVG9wQnV0dG9uXCIsZVtlLkxlZnRDbHVzdGVyQm90dG9tQnV0dG9uPTEzXT1cIkxlZnRDbHVzdGVyQm90dG9tQnV0dG9uXCIsZVtlLkxlZnRDbHVzdGVyTGVmdEJ1dHRvbj0xNF09XCJMZWZ0Q2x1c3RlckxlZnRCdXR0b25cIixlW2UuTGVmdENsdXN0ZXJSaWdodEJ1dHRvbj0xNV09XCJMZWZ0Q2x1c3RlclJpZ2h0QnV0dG9uXCIsZVtlLkNlbnRyZUJ1dHRvbj0xNl09XCJDZW50cmVCdXR0b25cIixlW2UuTGVmdFN0aWNrSG9yaXpvbnRhbD0wXT1cIkxlZnRTdGlja0hvcml6b250YWxcIixlW2UuTGVmdFN0aWNrVmVydGljYWw9MV09XCJMZWZ0U3RpY2tWZXJ0aWNhbFwiLGVbZS5SaWdodFN0aWNrSG9yaXpvbnRhbD0yXT1cIlJpZ2h0U3RpY2tIb3Jpem9udGFsXCIsZVtlLlJpZ2h0U3RpY2tWZXJ0aWNhbD0zXT1cIlJpZ2h0U3RpY2tWZXJ0aWNhbFwifShrZXx8KGtlPXt9KSk7Y2xhc3MgWWV7Y29uc3RydWN0b3IoZSx0LHMpe3RoaXMuYWN0aXZlS2V5cz1uZXcgSmUsdGhpcy50b1N0cmVhbWVyTWVzc2FnZXNQcm92aWRlcj1lLHRoaXMudmlkZW9FbGVtZW50UHJvdmlkZXI9dCx0aGlzLmNvb3JkaW5hdGVDb252ZXJ0ZXI9c31yZWdpc3RlcktleUJvYXJkKGUpe2kuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLFwiUmVnaXN0ZXIgS2V5Ym9hcmQgRXZlbnRzXCIsNyk7Y29uc3QgdD1uZXcgS2UodGhpcy50b1N0cmVhbWVyTWVzc2FnZXNQcm92aWRlcixlLHRoaXMuYWN0aXZlS2V5cyk7cmV0dXJuIHQucmVnaXN0ZXJLZXlCb2FyZEV2ZW50cygpLHR9cmVnaXN0ZXJNb3VzZShlKXtpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcIlJlZ2lzdGVyIE1vdXNlIEV2ZW50c1wiLDcpO2NvbnN0IHQ9bmV3IHFlKHRoaXMudG9TdHJlYW1lck1lc3NhZ2VzUHJvdmlkZXIsdGhpcy52aWRlb0VsZW1lbnRQcm92aWRlcix0aGlzLmNvb3JkaW5hdGVDb252ZXJ0ZXIsdGhpcy5hY3RpdmVLZXlzKTtzd2l0Y2goZSl7Y2FzZSB1ZS5Mb2NrZWRNb3VzZTp0LnJlZ2lzdGVyTG9ja2VkTW91c2VFdmVudHModCk7YnJlYWs7Y2FzZSB1ZS5Ib3ZlcmluZ01vdXNlOnQucmVnaXN0ZXJIb3ZlcmluZ01vdXNlRXZlbnRzKHQpO2JyZWFrO2RlZmF1bHQ6aS5JbmZvKGkuR2V0U3RhY2tUcmFjZSgpLFwidW5rbm93biBDb250cm9sIFNjaGVtZSBUeXBlIERlZmF1bHRpbmcgdG8gTG9ja2VkIE1vdXNlIEV2ZW50c1wiKSx0LnJlZ2lzdGVyTG9ja2VkTW91c2VFdmVudHModCl9cmV0dXJuIHR9cmVnaXN0ZXJUb3VjaChlLHQpe2lmKGkuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLFwiUmVnaXN0ZXJpbmcgVG91Y2hcIiw2KSxlKXtjb25zdCBlPW5ldyBIZSh0aGlzLnRvU3RyZWFtZXJNZXNzYWdlc1Byb3ZpZGVyLHRoaXMudmlkZW9FbGVtZW50UHJvdmlkZXIsdGhpcy5jb29yZGluYXRlQ29udmVydGVyKTtyZXR1cm4gZS5zZXRWaWRlb0VsZW1lbnRQYXJlbnRDbGllbnRSZWN0KHQpLGV9cmV0dXJuIG5ldyBYZSh0aGlzLnRvU3RyZWFtZXJNZXNzYWdlc1Byb3ZpZGVyLHRoaXMudmlkZW9FbGVtZW50UHJvdmlkZXIsdGhpcy5jb29yZGluYXRlQ29udmVydGVyKX1yZWdpc3RlckdhbWVQYWQoKXtyZXR1cm4gaS5Mb2coaS5HZXRTdGFja1RyYWNlKCksXCJSZWdpc3RlciBHYW1lIFBhZFwiLDcpLG5ldyBqZSh0aGlzLnRvU3RyZWFtZXJNZXNzYWdlc1Byb3ZpZGVyKX19Y2xhc3MgSmV7Y29uc3RydWN0b3IoKXt0aGlzLmFjdGl2ZUtleXM9W10sdGhpcy5hY3RpdmVLZXlzPVtdfWdldEFjdGl2ZUtleXMoKXtyZXR1cm4gdGhpcy5hY3RpdmVLZXlzfX1jbGFzcyBaZXtjb25zdHJ1Y3RvcihlLHQpe3RoaXMubGFzdFRpbWVSZXNpemVkPShuZXcgRGF0ZSkuZ2V0VGltZSgpLHRoaXMudmlkZW9FbGVtZW50PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ2aWRlb1wiKSx0aGlzLmNvbmZpZz10LHRoaXMudmlkZW9FbGVtZW50LmlkPVwic3RyZWFtaW5nVmlkZW9cIix0aGlzLnZpZGVvRWxlbWVudC5kaXNhYmxlUGljdHVyZUluUGljdHVyZT0hMCx0aGlzLnZpZGVvRWxlbWVudC5wbGF5c0lubGluZT0hMCx0aGlzLnZpZGVvRWxlbWVudC5zdHlsZS53aWR0aD1cIjEwMCVcIix0aGlzLnZpZGVvRWxlbWVudC5zdHlsZS5oZWlnaHQ9XCIxMDAlXCIsdGhpcy52aWRlb0VsZW1lbnQuc3R5bGUucG9zaXRpb249XCJhYnNvbHV0ZVwiLHRoaXMudmlkZW9FbGVtZW50LnN0eWxlLnBvaW50ZXJFdmVudHM9XCJhbGxcIixlLmFwcGVuZENoaWxkKHRoaXMudmlkZW9FbGVtZW50KSx0aGlzLm9uUmVzaXplUGxheWVyQ2FsbGJhY2s9KCk9Pntjb25zb2xlLmxvZyhcIlJlc29sdXRpb24gY2hhbmdlZCwgcmVzdHlsaW5nIHBsYXllciwgZGlkIHlvdSBmb3JnZXQgdG8gb3ZlcnJpZGUgdGhpcyBmdW5jdGlvbj9cIil9LHRoaXMub25NYXRjaFZpZXdwb3J0UmVzb2x1dGlvbkNhbGxiYWNrPSgpPT57Y29uc29sZS5sb2coXCJSZXNvbHV0aW9uIGNoYW5nZWQgYW5kIG1hdGNoIHZpZXdwb3J0IHJlc29sdXRpb24gaXMgdHVybmVkIG9uLCBkaWQgeW91IGZvcmdldCB0byBvdmVycmlkZSB0aGlzIGZ1bmN0aW9uP1wiKX0sdGhpcy52aWRlb0VsZW1lbnQub25jbGljaz0oKT0+e3RoaXMudmlkZW9FbGVtZW50LnBhdXNlZCYmdGhpcy52aWRlb0VsZW1lbnQucGxheSgpfSx0aGlzLnZpZGVvRWxlbWVudC5vbmxvYWRlZG1ldGFkYXRhPSgpPT57dGhpcy5vblZpZGVvSW5pdGlhbGl6ZWQoKX0sd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwoKCk9PnRoaXMucmVzaXplUGxheWVyU3R5bGUoKSksITApLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwib3JpZW50YXRpb25jaGFuZ2VcIiwoKCk9PnRoaXMub25PcmllbnRhdGlvbkNoYW5nZSgpKSl9cGxheSgpe3JldHVybiB0aGlzLnZpZGVvRWxlbWVudC5tdXRlZD10aGlzLmNvbmZpZy5pc0ZsYWdFbmFibGVkKHJlLlN0YXJ0VmlkZW9NdXRlZCksdGhpcy52aWRlb0VsZW1lbnQuYXV0b3BsYXk9dGhpcy5jb25maWcuaXNGbGFnRW5hYmxlZChyZS5BdXRvUGxheVZpZGVvKSx0aGlzLnZpZGVvRWxlbWVudC5wbGF5KCl9aXNQYXVzZWQoKXtyZXR1cm4gdGhpcy52aWRlb0VsZW1lbnQucGF1c2VkfWlzVmlkZW9SZWFkeSgpe3JldHVybiB2b2lkIDAhPT10aGlzLnZpZGVvRWxlbWVudC5yZWFkeVN0YXRlJiZ0aGlzLnZpZGVvRWxlbWVudC5yZWFkeVN0YXRlPjB9aGFzVmlkZW9Tb3VyY2UoKXtyZXR1cm4gdm9pZCAwIT09dGhpcy52aWRlb0VsZW1lbnQuc3JjT2JqZWN0JiZudWxsIT09dGhpcy52aWRlb0VsZW1lbnQuc3JjT2JqZWN0fWdldFZpZGVvRWxlbWVudCgpe3JldHVybiB0aGlzLnZpZGVvRWxlbWVudH1nZXRWaWRlb1BhcmVudEVsZW1lbnQoKXtyZXR1cm4gdGhpcy52aWRlb0VsZW1lbnQucGFyZW50RWxlbWVudH1zZXRWaWRlb0VuYWJsZWQoZSl7dGhpcy52aWRlb0VsZW1lbnQuc3JjT2JqZWN0LmdldFRyYWNrcygpLmZvckVhY2goKHQ9PnQuZW5hYmxlZD1lKSl9b25WaWRlb0luaXRpYWxpemVkKCl7fW9uT3JpZW50YXRpb25DaGFuZ2UoKXtjbGVhclRpbWVvdXQodGhpcy5vcmllbnRhdGlvbkNoYW5nZVRpbWVvdXQpLHRoaXMub3JpZW50YXRpb25DaGFuZ2VUaW1lb3V0PXdpbmRvdy5zZXRUaW1lb3V0KCgoKT0+e3RoaXMucmVzaXplUGxheWVyU3R5bGUoKX0pLDUwMCl9cmVzaXplUGxheWVyU3R5bGUoKXtjb25zdCBlPXRoaXMuZ2V0VmlkZW9QYXJlbnRFbGVtZW50KCk7ZSYmKHRoaXMudXBkYXRlVmlkZW9TdHJlYW1TaXplKCksZS5jbGFzc0xpc3QuY29udGFpbnMoXCJmaXhlZC1zaXplXCIpfHx0aGlzLnJlc2l6ZVBsYXllclN0eWxlVG9GaWxsUGFyZW50RWxlbWVudCgpLHRoaXMub25SZXNpemVQbGF5ZXJDYWxsYmFjaygpKX1yZXNpemVQbGF5ZXJTdHlsZVRvRmlsbFBhcmVudEVsZW1lbnQoKXt0aGlzLmdldFZpZGVvUGFyZW50RWxlbWVudCgpLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsXCJ0b3A6IDBweDsgbGVmdDogMHB4OyB3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMDAlOyBjdXJzb3I6IGRlZmF1bHQ7XCIpfXVwZGF0ZVZpZGVvU3RyZWFtU2l6ZSgpe2lmKHRoaXMuY29uZmlnLmlzRmxhZ0VuYWJsZWQocmUuTWF0Y2hWaWV3cG9ydFJlc29sdXRpb24pKWlmKChuZXcgRGF0ZSkuZ2V0VGltZSgpLXRoaXMubGFzdFRpbWVSZXNpemVkPjFlMyl7Y29uc3QgZT10aGlzLmdldFZpZGVvUGFyZW50RWxlbWVudCgpO2lmKCFlKXJldHVybjt0aGlzLm9uTWF0Y2hWaWV3cG9ydFJlc29sdXRpb25DYWxsYmFjayhlLmNsaWVudFdpZHRoLGUuY2xpZW50SGVpZ2h0KSx0aGlzLmxhc3RUaW1lUmVzaXplZD0obmV3IERhdGUpLmdldFRpbWUoKX1lbHNlIGkuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLFwiUmVzaXppbmcgdG9vIG9mdGVuIC0gc2tpcHBpbmdcIiw2KSxjbGVhclRpbWVvdXQodGhpcy5yZXNpemVUaW1lb3V0SGFuZGxlKSx0aGlzLnJlc2l6ZVRpbWVvdXRIYW5kbGU9d2luZG93LnNldFRpbWVvdXQoKCgpPT50aGlzLnVwZGF0ZVZpZGVvU3RyZWFtU2l6ZSksMWUzKX19Y2xhc3MgZXR7Y29uc3RydWN0b3IoKXt0aGlzLm1hcD1uZXcgTWFwLHRoaXMucmV2ZXJzZU1hcD1uZXcgTWFwfWdldEZyb21LZXkoZSl7cmV0dXJuIHRoaXMubWFwLmdldChlKX1nZXRGcm9tVmFsdWUoZSl7cmV0dXJuIHRoaXMucmV2ZXJzZU1hcC5nZXQoZSl9YWRkKGUsdCl7dGhpcy5tYXAuc2V0KGUsdCksdGhpcy5yZXZlcnNlTWFwLnNldCh0LGUpfXJlbW92ZShlLHQpe3RoaXMubWFwLmRlbGV0ZShlKSx0aGlzLnJldmVyc2VNYXAuZGVsZXRlKHQpfX1jbGFzcyB0dHtjb25zdHJ1Y3Rvcigpe3RoaXMudG9TdHJlYW1lckhhbmRsZXJzPW5ldyBNYXAsdGhpcy5mcm9tU3RyZWFtZXJIYW5kbGVycz1uZXcgTWFwLHRoaXMudG9TdHJlYW1lck1lc3NhZ2VzPW5ldyBldCx0aGlzLmZyb21TdHJlYW1lck1lc3NhZ2VzPW5ldyBldH1wb3B1bGF0ZURlZmF1bHRQcm90b2NvbCgpe3RoaXMudG9TdHJlYW1lck1lc3NhZ2VzLmFkZChcIklGcmFtZVJlcXVlc3RcIix7aWQ6MCxieXRlTGVuZ3RoOjAsc3RydWN0dXJlOltdfSksdGhpcy50b1N0cmVhbWVyTWVzc2FnZXMuYWRkKFwiUmVxdWVzdFF1YWxpdHlDb250cm9sXCIse2lkOjEsYnl0ZUxlbmd0aDowLHN0cnVjdHVyZTpbXX0pLHRoaXMudG9TdHJlYW1lck1lc3NhZ2VzLmFkZChcIkZwc1JlcXVlc3RcIix7aWQ6MixieXRlTGVuZ3RoOjAsc3RydWN0dXJlOltdfSksdGhpcy50b1N0cmVhbWVyTWVzc2FnZXMuYWRkKFwiQXZlcmFnZUJpdHJhdGVSZXF1ZXN0XCIse2lkOjMsYnl0ZUxlbmd0aDowLHN0cnVjdHVyZTpbXX0pLHRoaXMudG9TdHJlYW1lck1lc3NhZ2VzLmFkZChcIlN0YXJ0U3RyZWFtaW5nXCIse2lkOjQsYnl0ZUxlbmd0aDowLHN0cnVjdHVyZTpbXX0pLHRoaXMudG9TdHJlYW1lck1lc3NhZ2VzLmFkZChcIlN0b3BTdHJlYW1pbmdcIix7aWQ6NSxieXRlTGVuZ3RoOjAsc3RydWN0dXJlOltdfSksdGhpcy50b1N0cmVhbWVyTWVzc2FnZXMuYWRkKFwiTGF0ZW5jeVRlc3RcIix7aWQ6NixieXRlTGVuZ3RoOjAsc3RydWN0dXJlOltdfSksdGhpcy50b1N0cmVhbWVyTWVzc2FnZXMuYWRkKFwiUmVxdWVzdEluaXRpYWxTZXR0aW5nc1wiLHtpZDo3LGJ5dGVMZW5ndGg6MCxzdHJ1Y3R1cmU6W119KSx0aGlzLnRvU3RyZWFtZXJNZXNzYWdlcy5hZGQoXCJUZXN0RWNob1wiLHtpZDo4LGJ5dGVMZW5ndGg6MCxzdHJ1Y3R1cmU6W119KSx0aGlzLnRvU3RyZWFtZXJNZXNzYWdlcy5hZGQoXCJVSUludGVyYWN0aW9uXCIse2lkOjUwLGJ5dGVMZW5ndGg6MCxzdHJ1Y3R1cmU6W119KSx0aGlzLnRvU3RyZWFtZXJNZXNzYWdlcy5hZGQoXCJDb21tYW5kXCIse2lkOjUxLGJ5dGVMZW5ndGg6MCxzdHJ1Y3R1cmU6W119KSx0aGlzLnRvU3RyZWFtZXJNZXNzYWdlcy5hZGQoXCJLZXlEb3duXCIse2lkOjYwLGJ5dGVMZW5ndGg6MixzdHJ1Y3R1cmU6W1widWludDhcIixcInVpbnQ4XCJdfSksdGhpcy50b1N0cmVhbWVyTWVzc2FnZXMuYWRkKFwiS2V5VXBcIix7aWQ6NjEsYnl0ZUxlbmd0aDoxLHN0cnVjdHVyZTpbXCJ1aW50OFwiXX0pLHRoaXMudG9TdHJlYW1lck1lc3NhZ2VzLmFkZChcIktleVByZXNzXCIse2lkOjYyLGJ5dGVMZW5ndGg6MixzdHJ1Y3R1cmU6W1widWludDE2XCJdfSksdGhpcy50b1N0cmVhbWVyTWVzc2FnZXMuYWRkKFwiTW91c2VFbnRlclwiLHtpZDo3MCxieXRlTGVuZ3RoOjAsc3RydWN0dXJlOltdfSksdGhpcy50b1N0cmVhbWVyTWVzc2FnZXMuYWRkKFwiTW91c2VMZWF2ZVwiLHtpZDo3MSxieXRlTGVuZ3RoOjAsc3RydWN0dXJlOltdfSksdGhpcy50b1N0cmVhbWVyTWVzc2FnZXMuYWRkKFwiTW91c2VEb3duXCIse2lkOjcyLGJ5dGVMZW5ndGg6NSxzdHJ1Y3R1cmU6W1widWludDhcIixcInVpbnQxNlwiLFwidWludDE2XCJdfSksdGhpcy50b1N0cmVhbWVyTWVzc2FnZXMuYWRkKFwiTW91c2VVcFwiLHtpZDo3MyxieXRlTGVuZ3RoOjUsc3RydWN0dXJlOltcInVpbnQ4XCIsXCJ1aW50MTZcIixcInVpbnQxNlwiXX0pLHRoaXMudG9TdHJlYW1lck1lc3NhZ2VzLmFkZChcIk1vdXNlTW92ZVwiLHtpZDo3NCxieXRlTGVuZ3RoOjgsc3RydWN0dXJlOltcInVpbnQxNlwiLFwidWludDE2XCIsXCJpbnQxNlwiLFwiaW50MTZcIl19KSx0aGlzLnRvU3RyZWFtZXJNZXNzYWdlcy5hZGQoXCJNb3VzZVdoZWVsXCIse2lkOjc1LGJ5dGVMZW5ndGg6NixzdHJ1Y3R1cmU6W1wiaW50MTZcIixcInVpbnQxNlwiLFwidWludDE2XCJdfSksdGhpcy50b1N0cmVhbWVyTWVzc2FnZXMuYWRkKFwiTW91c2VEb3VibGVcIix7aWQ6NzYsYnl0ZUxlbmd0aDo1LHN0cnVjdHVyZTpbXCJ1aW50OFwiLFwidWludDE2XCIsXCJ1aW50MTZcIl19KSx0aGlzLnRvU3RyZWFtZXJNZXNzYWdlcy5hZGQoXCJUb3VjaFN0YXJ0XCIse2lkOjgwLGJ5dGVMZW5ndGg6OCxzdHJ1Y3R1cmU6W1widWludDhcIixcInVpbnQxNlwiLFwidWludDE2XCIsXCJ1aW50OFwiLFwidWludDhcIixcInVpbnQ4XCJdfSksdGhpcy50b1N0cmVhbWVyTWVzc2FnZXMuYWRkKFwiVG91Y2hFbmRcIix7aWQ6ODEsYnl0ZUxlbmd0aDo4LHN0cnVjdHVyZTpbXCJ1aW50OFwiLFwidWludDE2XCIsXCJ1aW50MTZcIixcInVpbnQ4XCIsXCJ1aW50OFwiLFwidWludDhcIl19KSx0aGlzLnRvU3RyZWFtZXJNZXNzYWdlcy5hZGQoXCJUb3VjaE1vdmVcIix7aWQ6ODIsYnl0ZUxlbmd0aDo4LHN0cnVjdHVyZTpbXCJ1aW50OFwiLFwidWludDE2XCIsXCJ1aW50MTZcIixcInVpbnQ4XCIsXCJ1aW50OFwiLFwidWludDhcIl19KSx0aGlzLnRvU3RyZWFtZXJNZXNzYWdlcy5hZGQoXCJHYW1lcGFkQ29ubmVjdGVkXCIse2lkOjkzLGJ5dGVMZW5ndGg6MCxzdHJ1Y3R1cmU6W119KSx0aGlzLnRvU3RyZWFtZXJNZXNzYWdlcy5hZGQoXCJHYW1lcGFkQnV0dG9uUHJlc3NlZFwiLHtpZDo5MCxieXRlTGVuZ3RoOjMsc3RydWN0dXJlOltcInVpbnQ4XCIsXCJ1aW50OFwiLFwidWludDhcIl19KSx0aGlzLnRvU3RyZWFtZXJNZXNzYWdlcy5hZGQoXCJHYW1lcGFkQnV0dG9uUmVsZWFzZWRcIix7aWQ6OTEsYnl0ZUxlbmd0aDozLHN0cnVjdHVyZTpbXCJ1aW50OFwiLFwidWludDhcIixcInVpbnQ4XCJdfSksdGhpcy50b1N0cmVhbWVyTWVzc2FnZXMuYWRkKFwiR2FtZXBhZEFuYWxvZ1wiLHtpZDo5MixieXRlTGVuZ3RoOjEwLHN0cnVjdHVyZTpbXCJ1aW50OFwiLFwidWludDhcIixcImRvdWJsZVwiXX0pLHRoaXMudG9TdHJlYW1lck1lc3NhZ2VzLmFkZChcIkdhbWVwYWREaXNjb25uZWN0ZWRcIix7aWQ6OTQsYnl0ZUxlbmd0aDoxLHN0cnVjdHVyZTpbXCJ1aW50OFwiXX0pLHRoaXMuZnJvbVN0cmVhbWVyTWVzc2FnZXMuYWRkKFwiUXVhbGl0eUNvbnRyb2xPd25lcnNoaXBcIiwwKSx0aGlzLmZyb21TdHJlYW1lck1lc3NhZ2VzLmFkZChcIlJlc3BvbnNlXCIsMSksdGhpcy5mcm9tU3RyZWFtZXJNZXNzYWdlcy5hZGQoXCJDb21tYW5kXCIsMiksdGhpcy5mcm9tU3RyZWFtZXJNZXNzYWdlcy5hZGQoXCJGcmVlemVGcmFtZVwiLDMpLHRoaXMuZnJvbVN0cmVhbWVyTWVzc2FnZXMuYWRkKFwiVW5mcmVlemVGcmFtZVwiLDQpLHRoaXMuZnJvbVN0cmVhbWVyTWVzc2FnZXMuYWRkKFwiVmlkZW9FbmNvZGVyQXZnUVBcIiw1KSx0aGlzLmZyb21TdHJlYW1lck1lc3NhZ2VzLmFkZChcIkxhdGVuY3lUZXN0XCIsNiksdGhpcy5mcm9tU3RyZWFtZXJNZXNzYWdlcy5hZGQoXCJJbml0aWFsU2V0dGluZ3NcIiw3KSx0aGlzLmZyb21TdHJlYW1lck1lc3NhZ2VzLmFkZChcIkZpbGVFeHRlbnNpb25cIiw4KSx0aGlzLmZyb21TdHJlYW1lck1lc3NhZ2VzLmFkZChcIkZpbGVNaW1lVHlwZVwiLDkpLHRoaXMuZnJvbVN0cmVhbWVyTWVzc2FnZXMuYWRkKFwiRmlsZUNvbnRlbnRzXCIsMTApLHRoaXMuZnJvbVN0cmVhbWVyTWVzc2FnZXMuYWRkKFwiVGVzdEVjaG9cIiwxMSksdGhpcy5mcm9tU3RyZWFtZXJNZXNzYWdlcy5hZGQoXCJJbnB1dENvbnRyb2xPd25lcnNoaXBcIiwxMiksdGhpcy5mcm9tU3RyZWFtZXJNZXNzYWdlcy5hZGQoXCJHYW1lcGFkUmVzcG9uc2VcIiwxMyksdGhpcy5mcm9tU3RyZWFtZXJNZXNzYWdlcy5hZGQoXCJQcm90b2NvbFwiLDI1NSl9cmVnaXN0ZXJNZXNzYWdlSGFuZGxlcihlLHQscyl7c3dpdGNoKGUpe2Nhc2UgTGUuVG9TdHJlYW1lcjp0aGlzLnRvU3RyZWFtZXJIYW5kbGVycy5zZXQodCxzKTticmVhaztjYXNlIExlLkZyb21TdHJlYW1lcjp0aGlzLmZyb21TdHJlYW1lckhhbmRsZXJzLnNldCh0LHMpO2JyZWFrO2RlZmF1bHQ6aS5Mb2coaS5HZXRTdGFja1RyYWNlKCksYFVua25vd24gbWVzc2FnZSBkaXJlY3Rpb24gJHtlfWApfX19IWZ1bmN0aW9uKGUpe2VbZS5Ub1N0cmVhbWVyPTBdPVwiVG9TdHJlYW1lclwiLGVbZS5Gcm9tU3RyZWFtZXI9MV09XCJGcm9tU3RyZWFtZXJcIn0oTGV8fChMZT17fSkpO2NsYXNzIHN0e2NvbnN0cnVjdG9yKCl7dGhpcy5yZXNwb25zZUV2ZW50TGlzdGVuZXJzPW5ldyBNYXB9YWRkUmVzcG9uc2VFdmVudExpc3RlbmVyKGUsdCl7dGhpcy5yZXNwb25zZUV2ZW50TGlzdGVuZXJzLnNldChlLHQpfXJlbW92ZVJlc3BvbnNlRXZlbnRMaXN0ZW5lcihlKXt0aGlzLnJlc3BvbnNlRXZlbnRMaXN0ZW5lcnMuZGVsZXRlKGUpfW9uUmVzcG9uc2UoZSl7aS5Mb2coaS5HZXRTdGFja1RyYWNlKCksXCJEYXRhQ2hhbm5lbFJlY2VpdmVNZXNzYWdlVHlwZS5SZXNwb25zZVwiLDYpO2NvbnN0IHQ9bmV3IFRleHREZWNvZGVyKFwidXRmLTE2XCIpLmRlY29kZShlLnNsaWNlKDEpKTtpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSx0LDYpLHRoaXMucmVzcG9uc2VFdmVudExpc3RlbmVycy5mb3JFYWNoKChlPT57ZSh0KX0pKX19Y2xhc3MgbnR7Y29uc3RydWN0b3IoZSx0KXt0aGlzLmRhdGFDaGFubmVsU2VuZGVyPWUsdGhpcy50b1N0cmVhbWVyTWVzc2FnZXNNYXBQcm92aWRlcj10fXNlbmRMYXRlbmN5VGVzdChlKXt0aGlzLnNlbmREZXNjcmlwdG9yKFwiTGF0ZW5jeVRlc3RcIixlKX1lbWl0Q29tbWFuZChlKXt0aGlzLnNlbmREZXNjcmlwdG9yKFwiQ29tbWFuZFwiLGUpfWVtaXRVSUludGVyYWN0aW9uKGUpe3RoaXMuc2VuZERlc2NyaXB0b3IoXCJVSUludGVyYWN0aW9uXCIsZSl9c2VuZERlc2NyaXB0b3IoZSx0KXtjb25zdCBzPUpTT04uc3RyaW5naWZ5KHQpLG49dGhpcy50b1N0cmVhbWVyTWVzc2FnZXNNYXBQcm92aWRlci50b1N0cmVhbWVyTWVzc2FnZXMuZ2V0RnJvbUtleShlKTt2b2lkIDA9PT1uJiZpLkVycm9yKGkuR2V0U3RhY2tUcmFjZSgpLGBBdHRlbXB0ZWQgdG8gZW1pdCBkZXNjcmlwdG9yIHdpdGggbWVzc2FnZSB0eXBlOiAke2V9LCBidXQgdGhlIGZyb250ZW5kIGhhc24ndCBiZWVuIGNvbmZpZ3VyZWQgdG8gc2VuZCBzdWNoIGEgbWVzc2FnZS4gQ2hlY2sgeW91J3ZlIGFkZGVkIHRoZSBtZXNzYWdlIHR5cGUgaW4geW91ciBjcHBgKSxpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcIlNlbmRpbmc6IFwiK3QsNik7Y29uc3Qgcj1uZXcgRGF0YVZpZXcobmV3IEFycmF5QnVmZmVyKDMrMipzLmxlbmd0aCkpO2xldCBvPTA7ci5zZXRVaW50OChvLG4uaWQpLG8rKyxyLnNldFVpbnQxNihvLHMubGVuZ3RoLCEwKSxvKz0yO2ZvcihsZXQgZT0wO2U8cy5sZW5ndGg7ZSsrKXIuc2V0VWludDE2KG8scy5jaGFyQ29kZUF0KGUpLCEwKSxvKz0yO3RoaXMuZGF0YUNoYW5uZWxTZW5kZXIuY2FuU2VuZCgpP3RoaXMuZGF0YUNoYW5uZWxTZW5kZXIuc2VuZERhdGEoci5idWZmZXIpOmkuSW5mbyhpLkdldFN0YWNrVHJhY2UoKSxgRGF0YSBjaGFubmVsIGNhbm5vdCBzZW5kIHlldCwgc2tpcHBpbmcgc2VuZGluZyBkZXNjcmlwdG9yIG1lc3NhZ2U6ICR7ZX0gLSAke3N9YCl9fWNsYXNzIHJ0e2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5kYXRhQ2hhbm5lbFNlbmRlcj1lLHRoaXMudG9TdHJlYW1lck1lc3NhZ2VzTWFwUHJvdmlkZXI9dH1zZW5kTWVzc2FnZVRvU3RyZWFtZXIoZSx0KXt2b2lkIDA9PT10JiYodD1bXSk7Y29uc3Qgcz10aGlzLnRvU3RyZWFtZXJNZXNzYWdlc01hcFByb3ZpZGVyLnRvU3RyZWFtZXJNZXNzYWdlcy5nZXRGcm9tS2V5KGUpO2lmKHZvaWQgMD09PXMpcmV0dXJuIHZvaWQgaS5FcnJvcihpLkdldFN0YWNrVHJhY2UoKSxgQXR0ZW1wdGVkIHRvIHNlbmQgYSBtZXNzYWdlIHRvIHRoZSBzdHJlYW1lciB3aXRoIG1lc3NhZ2UgdHlwZTogJHtlfSwgYnV0IHRoZSBmcm9udGVuZCBoYXNuJ3QgYmVlbiBjb25maWd1cmVkIHRvIHNlbmQgc3VjaCBhIG1lc3NhZ2UuIENoZWNrIHlvdSd2ZSBhZGRlZCB0aGUgbWVzc2FnZSB0eXBlIGluIHlvdXIgY3BwYCk7Y29uc3Qgbj1uZXcgRGF0YVZpZXcobmV3IEFycmF5QnVmZmVyKHMuYnl0ZUxlbmd0aCsxKSk7bi5zZXRVaW50OCgwLHMuaWQpO2xldCByPTE7dC5mb3JFYWNoKCgoZSx0KT0+e3N3aXRjaChzLnN0cnVjdHVyZVt0XSl7Y2FzZVwidWludDhcIjpuLnNldFVpbnQ4KHIsZSkscis9MTticmVhaztjYXNlXCJ1aW50MTZcIjpuLnNldFVpbnQxNihyLGUsITApLHIrPTI7YnJlYWs7Y2FzZVwiaW50MTZcIjpuLnNldEludDE2KHIsZSwhMCkscis9MjticmVhaztjYXNlXCJmbG9hdFwiOm4uc2V0RmxvYXQzMihyLGUsITApLHIrPTQ7YnJlYWs7Y2FzZVwiZG91YmxlXCI6bi5zZXRGbG9hdDY0KHIsZSwhMCkscis9OH19KSksdGhpcy5kYXRhQ2hhbm5lbFNlbmRlci5jYW5TZW5kKCk/dGhpcy5kYXRhQ2hhbm5lbFNlbmRlci5zZW5kRGF0YShuLmJ1ZmZlcik6aS5JbmZvKGkuR2V0U3RhY2tUcmFjZSgpLGBEYXRhIGNoYW5uZWwgY2Fubm90IHNlbmQgeWV0LCBza2lwcGluZyBzZW5kaW5nIG1lc3NhZ2U6ICR7ZX0gLSAke25ldyBVaW50OEFycmF5KG4uYnVmZmVyKX1gKX19Y2xhc3MgaXR7Y29uc3RydWN0b3IoZSl7dGhpcy5zZW5kTWVzc2FnZUNvbnRyb2xsZXI9ZX1TZW5kUmVxdWVzdFF1YWxpdHlDb250cm9sKCl7dGhpcy5zZW5kTWVzc2FnZUNvbnRyb2xsZXIuc2VuZE1lc3NhZ2VUb1N0cmVhbWVyKFwiUmVxdWVzdFF1YWxpdHlDb250cm9sXCIpfVNlbmRNYXhGcHNSZXF1ZXN0KCl7dGhpcy5zZW5kTWVzc2FnZUNvbnRyb2xsZXIuc2VuZE1lc3NhZ2VUb1N0cmVhbWVyKFwiRnBzUmVxdWVzdFwiKX1TZW5kQXZlcmFnZUJpdHJhdGVSZXF1ZXN0KCl7dGhpcy5zZW5kTWVzc2FnZUNvbnRyb2xsZXIuc2VuZE1lc3NhZ2VUb1N0cmVhbWVyKFwiQXZlcmFnZUJpdHJhdGVSZXF1ZXN0XCIpfVNlbmRTdGFydFN0cmVhbWluZygpe3RoaXMuc2VuZE1lc3NhZ2VDb250cm9sbGVyLnNlbmRNZXNzYWdlVG9TdHJlYW1lcihcIlN0YXJ0U3RyZWFtaW5nXCIpfVNlbmRTdG9wU3RyZWFtaW5nKCl7dGhpcy5zZW5kTWVzc2FnZUNvbnRyb2xsZXIuc2VuZE1lc3NhZ2VUb1N0cmVhbWVyKFwiU3RvcFN0cmVhbWluZ1wiKX1TZW5kUmVxdWVzdEluaXRpYWxTZXR0aW5ncygpe3RoaXMuc2VuZE1lc3NhZ2VDb250cm9sbGVyLnNlbmRNZXNzYWdlVG9TdHJlYW1lcihcIlJlcXVlc3RJbml0aWFsU2V0dGluZ3NcIil9fWNsYXNzIG90e2NvbnN0cnVjdG9yKGUpe3RoaXMuZGF0YUNoYW5uZWxQcm92aWRlcj1lfWNhblNlbmQoKXtyZXR1cm4gdm9pZCAwIT09dGhpcy5kYXRhQ2hhbm5lbFByb3ZpZGVyLmdldERhdGFDaGFubmVsSW5zdGFuY2UoKS5kYXRhQ2hhbm5lbCYmXCJvcGVuXCI9PXRoaXMuZGF0YUNoYW5uZWxQcm92aWRlci5nZXREYXRhQ2hhbm5lbEluc3RhbmNlKCkuZGF0YUNoYW5uZWwucmVhZHlTdGF0ZX1zZW5kRGF0YShlKXtjb25zdCB0PXRoaXMuZGF0YUNoYW5uZWxQcm92aWRlci5nZXREYXRhQ2hhbm5lbEluc3RhbmNlKCk7XCJvcGVuXCI9PXQuZGF0YUNoYW5uZWwucmVhZHlTdGF0ZT8odC5kYXRhQ2hhbm5lbC5zZW5kKGUpLGkuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLGBNZXNzYWdlIFNlbnQ6ICR7bmV3IFVpbnQ4QXJyYXkoZSl9YCw2KSx0aGlzLnJlc2V0QWZrV2FybmluZ1RpbWVyT25EYXRhU2VuZCgpKTppLkVycm9yKGkuR2V0U3RhY2tUcmFjZSgpLGBNZXNzYWdlIEZhaWxlZDogJHtuZXcgVWludDhBcnJheShlKX1gKX1yZXNldEFma1dhcm5pbmdUaW1lck9uRGF0YVNlbmQoKXt9fWNsYXNzIGF0e2NvbnN0cnVjdG9yKGUpe3RoaXMudmlkZW9FbGVtZW50UHJvdmlkZXI9ZSx0aGlzLm5vcm1hbGl6ZUFuZFF1YW50aXplVW5zaWduZWRGdW5jPSgpPT57dGhyb3cgbmV3IEVycm9yKFwiTm9ybWFsaXplIGFuZCBxdWFudGl6ZSB1bnNpZ25lZCwgbWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIil9LHRoaXMubm9ybWFsaXplQW5kUXVhbnRpemVTaWduZWRGdW5jPSgpPT57dGhyb3cgbmV3IEVycm9yKFwiTm9ybWFsaXplIGFuZCB1bnF1YW50aXplIHNpZ25lZCwgbWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIil9LHRoaXMuZGVub3JtYWxpemVBbmRVbnF1YW50aXplVW5zaWduZWRGdW5jPSgpPT57dGhyb3cgbmV3IEVycm9yKFwiRGVub3JtYWxpemUgYW5kIHVucXVhbnRpemUgdW5zaWduZWQsIG1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpfX1ub3JtYWxpemVBbmRRdWFudGl6ZVVuc2lnbmVkKGUsdCl7cmV0dXJuIHRoaXMubm9ybWFsaXplQW5kUXVhbnRpemVVbnNpZ25lZEZ1bmMoZSx0KX11bnF1YW50aXplQW5kRGVub3JtYWxpemVVbnNpZ25lZChlLHQpe3JldHVybiB0aGlzLmRlbm9ybWFsaXplQW5kVW5xdWFudGl6ZVVuc2lnbmVkRnVuYyhlLHQpfW5vcm1hbGl6ZUFuZFF1YW50aXplU2lnbmVkKGUsdCl7cmV0dXJuIHRoaXMubm9ybWFsaXplQW5kUXVhbnRpemVTaWduZWRGdW5jKGUsdCl9c2V0dXBOb3JtYWxpemVBbmRRdWFudGl6ZSgpe2lmKHRoaXMudmlkZW9FbGVtZW50UGFyZW50PXRoaXMudmlkZW9FbGVtZW50UHJvdmlkZXIuZ2V0VmlkZW9QYXJlbnRFbGVtZW50KCksdGhpcy52aWRlb0VsZW1lbnQ9dGhpcy52aWRlb0VsZW1lbnRQcm92aWRlci5nZXRWaWRlb0VsZW1lbnQoKSx0aGlzLnZpZGVvRWxlbWVudFBhcmVudCYmdGhpcy52aWRlb0VsZW1lbnQpe2NvbnN0IGU9dGhpcy52aWRlb0VsZW1lbnRQYXJlbnQuY2xpZW50SGVpZ2h0L3RoaXMudmlkZW9FbGVtZW50UGFyZW50LmNsaWVudFdpZHRoLHQ9dGhpcy52aWRlb0VsZW1lbnQudmlkZW9IZWlnaHQvdGhpcy52aWRlb0VsZW1lbnQudmlkZW9XaWR0aDtlPnQ/KGkuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLFwiU2V0dXAgTm9ybWFsaXplIGFuZCBRdWFudGl6ZSBmb3IgcGxheWVyQXNwZWN0UmF0aW8gPiB2aWRlb0FzcGVjdFJhdGlvXCIsNiksdGhpcy5yYXRpbz1lL3QsdGhpcy5ub3JtYWxpemVBbmRRdWFudGl6ZVVuc2lnbmVkRnVuYz0oZSx0KT0+dGhpcy5ub3JtYWxpemVBbmRRdWFudGl6ZVVuc2lnbmVkUGxheWVyQmlnZ2VyKGUsdCksdGhpcy5ub3JtYWxpemVBbmRRdWFudGl6ZVNpZ25lZEZ1bmM9KGUsdCk9PnRoaXMubm9ybWFsaXplQW5kUXVhbnRpemVTaWduZWRQbGF5ZXJCaWdnZXIoZSx0KSx0aGlzLmRlbm9ybWFsaXplQW5kVW5xdWFudGl6ZVVuc2lnbmVkRnVuYz0oZSx0KT0+dGhpcy5kZW5vcm1hbGl6ZUFuZFVucXVhbnRpemVVbnNpZ25lZFBsYXllckJpZ2dlcihlLHQpKTooaS5Mb2coaS5HZXRTdGFja1RyYWNlKCksXCJTZXR1cCBOb3JtYWxpemUgYW5kIFF1YW50aXplIGZvciBwbGF5ZXJBc3BlY3RSYXRpbyA8PSB2aWRlb0FzcGVjdFJhdGlvXCIsNiksdGhpcy5yYXRpbz10L2UsdGhpcy5ub3JtYWxpemVBbmRRdWFudGl6ZVVuc2lnbmVkRnVuYz0oZSx0KT0+dGhpcy5ub3JtYWxpemVBbmRRdWFudGl6ZVVuc2lnbmVkUGxheWVyU21hbGxlcihlLHQpLHRoaXMubm9ybWFsaXplQW5kUXVhbnRpemVTaWduZWRGdW5jPShlLHQpPT50aGlzLm5vcm1hbGl6ZUFuZFF1YW50aXplU2lnbmVkUGxheWVyU21hbGxlcihlLHQpLHRoaXMuZGVub3JtYWxpemVBbmRVbnF1YW50aXplVW5zaWduZWRGdW5jPShlLHQpPT50aGlzLmRlbm9ybWFsaXplQW5kVW5xdWFudGl6ZVVuc2lnbmVkUGxheWVyU21hbGxlcihlLHQpKX19bm9ybWFsaXplQW5kUXVhbnRpemVVbnNpZ25lZFBsYXllckJpZ2dlcihlLHQpe2NvbnN0IHM9ZS90aGlzLnZpZGVvRWxlbWVudFBhcmVudC5jbGllbnRXaWR0aCxuPXRoaXMucmF0aW8qKHQvdGhpcy52aWRlb0VsZW1lbnRQYXJlbnQuY2xpZW50SGVpZ2h0LS41KSsuNTtyZXR1cm4gczwwfHxzPjF8fG48MHx8bj4xP25ldyBsdCghMSw2NTUzNSw2NTUzNSk6bmV3IGx0KCEwLDY1NTM2KnMsNjU1MzYqbil9ZGVub3JtYWxpemVBbmRVbnF1YW50aXplVW5zaWduZWRQbGF5ZXJCaWdnZXIoZSx0KXtjb25zdCBzPWUvNjU1MzYsbj0odC82NTUzNi0uNSkvdGhpcy5yYXRpbysuNTtyZXR1cm4gbmV3IGR0KHMqdGhpcy52aWRlb0VsZW1lbnRQYXJlbnQuY2xpZW50V2lkdGgsbip0aGlzLnZpZGVvRWxlbWVudFBhcmVudC5jbGllbnRIZWlnaHQpfW5vcm1hbGl6ZUFuZFF1YW50aXplU2lnbmVkUGxheWVyQmlnZ2VyKGUsdCl7Y29uc3Qgcz1lLyguNSp0aGlzLnZpZGVvRWxlbWVudFBhcmVudC5jbGllbnRXaWR0aCksbj10aGlzLnJhdGlvKnQvKC41KnRoaXMudmlkZW9FbGVtZW50UGFyZW50LmNsaWVudEhlaWdodCk7cmV0dXJuIG5ldyBjdCgzMjc2NypzLDMyNzY3Km4pfW5vcm1hbGl6ZUFuZFF1YW50aXplVW5zaWduZWRQbGF5ZXJTbWFsbGVyKGUsdCl7Y29uc3Qgcz10aGlzLnJhdGlvKihlL3RoaXMudmlkZW9FbGVtZW50UGFyZW50LmNsaWVudFdpZHRoLS41KSsuNSxuPXQvdGhpcy52aWRlb0VsZW1lbnRQYXJlbnQuY2xpZW50SGVpZ2h0O3JldHVybiBzPDB8fHM+MXx8bjwwfHxuPjE/bmV3IGx0KCExLDY1NTM1LDY1NTM1KTpuZXcgbHQoITAsNjU1MzYqcyw2NTUzNipuKX1kZW5vcm1hbGl6ZUFuZFVucXVhbnRpemVVbnNpZ25lZFBsYXllclNtYWxsZXIoZSx0KXtjb25zdCBzPShlLzY1NTM2LS41KS90aGlzLnJhdGlvKy41LG49dC82NTUzNjtyZXR1cm4gbmV3IGR0KHMqdGhpcy52aWRlb0VsZW1lbnRQYXJlbnQuY2xpZW50V2lkdGgsbip0aGlzLnZpZGVvRWxlbWVudFBhcmVudC5jbGllbnRIZWlnaHQpfW5vcm1hbGl6ZUFuZFF1YW50aXplU2lnbmVkUGxheWVyU21hbGxlcihlLHQpe2NvbnN0IHM9dGhpcy5yYXRpbyplLyguNSp0aGlzLnZpZGVvRWxlbWVudFBhcmVudC5jbGllbnRXaWR0aCksbj10LyguNSp0aGlzLnZpZGVvRWxlbWVudFBhcmVudC5jbGllbnRIZWlnaHQpO3JldHVybiBuZXcgY3QoMzI3NjcqcywzMjc2NypuKX19Y2xhc3MgbHR7Y29uc3RydWN0b3IoZSx0LHMpe3RoaXMuaW5SYW5nZT1lLHRoaXMueD10LHRoaXMueT1zfX1jbGFzcyBkdHtjb25zdHJ1Y3RvcihlLHQpe3RoaXMueD1lLHRoaXMueT10fX1jbGFzcyBjdHtjb25zdHJ1Y3RvcihlLHQpe3RoaXMueD1lLHRoaXMueT10fX1jbGFzcyBodHtjb25zdHJ1Y3RvcihlLHQpe3RoaXMuc2hvdWxkU2hvd1BsYXlPdmVybGF5PSEwLHRoaXMuY29uZmlnPWUsdGhpcy5waXhlbFN0cmVhbWluZz10LHRoaXMucmVzcG9uc2VDb250cm9sbGVyPW5ldyBzdCx0aGlzLmZpbGU9bmV3IHplLHRoaXMuc2RwQ29uc3RyYWludHM9e29mZmVyVG9SZWNlaXZlQXVkaW86ITAsb2ZmZXJUb1JlY2VpdmVWaWRlbzohMH0sdGhpcy5hZmtDb250cm9sbGVyPW5ldyBtZSh0aGlzLmNvbmZpZyx0aGlzLnBpeGVsU3RyZWFtaW5nLHRoaXMub25BZmtUcmlnZ2VyZWQuYmluZCh0aGlzKSksdGhpcy5hZmtDb250cm9sbGVyLm9uQUZLVGltZWRPdXRDYWxsYmFjaz0oKT0+e3RoaXMuc2V0RGlzY29ubmVjdE1lc3NhZ2VPdmVycmlkZShcIllvdSBoYXZlIGJlZW4gZGlzY29ubmVjdGVkIGR1ZSB0byBpbmFjdGl2aXR5XCIpLHRoaXMuY2xvc2VTaWduYWxpbmdTZXJ2ZXIoKX0sdGhpcy5mcmVlemVGcmFtZUNvbnRyb2xsZXI9bmV3IHkodGhpcy5waXhlbFN0cmVhbWluZy52aWRlb0VsZW1lbnRQYXJlbnQpLHRoaXMudmlkZW9QbGF5ZXI9bmV3IFplKHRoaXMucGl4ZWxTdHJlYW1pbmcudmlkZW9FbGVtZW50UGFyZW50LHRoaXMuY29uZmlnKSx0aGlzLnZpZGVvUGxheWVyLm9uVmlkZW9Jbml0aWFsaXplZD0oKT0+dGhpcy5oYW5kbGVWaWRlb0luaXRpYWxpemVkKCksdGhpcy52aWRlb1BsYXllci5vbk1hdGNoVmlld3BvcnRSZXNvbHV0aW9uQ2FsbGJhY2s9KGUsdCk9Pntjb25zdCBzPXtcIlJlc29sdXRpb24uV2lkdGhcIjplLFwiUmVzb2x1dGlvbi5IZWlnaHRcIjp0fTt0aGlzLnNlbmREZXNjcmlwdG9yQ29udHJvbGxlci5lbWl0Q29tbWFuZChzKX0sdGhpcy52aWRlb1BsYXllci5vblJlc2l6ZVBsYXllckNhbGxiYWNrPSgpPT57dGhpcy5zZXRVcE1vdXNlQW5kRnJlZXplRnJhbWUoKX0sdGhpcy5zdHJlYW1Db250cm9sbGVyPW5ldyBUKHRoaXMudmlkZW9QbGF5ZXIpLHRoaXMuY29vcmRpbmF0ZUNvbnZlcnRlcj1uZXcgYXQodGhpcy52aWRlb1BsYXllciksdGhpcy5zZW5kcmVjdkRhdGFDaGFubmVsQ29udHJvbGxlcj1uZXcgU2UsdGhpcy5yZWN2RGF0YUNoYW5uZWxDb250cm9sbGVyPW5ldyBTZSx0aGlzLnJlZ2lzdGVyRGF0YUNoYW5uZWxFdmVudEVtaXR0ZXJzKHRoaXMuc2VuZHJlY3ZEYXRhQ2hhbm5lbENvbnRyb2xsZXIpLHRoaXMucmVnaXN0ZXJEYXRhQ2hhbm5lbEV2ZW50RW1pdHRlcnModGhpcy5yZWN2RGF0YUNoYW5uZWxDb250cm9sbGVyKSx0aGlzLmRhdGFDaGFubmVsU2VuZGVyPW5ldyBvdCh0aGlzLnNlbmRyZWN2RGF0YUNoYW5uZWxDb250cm9sbGVyKSx0aGlzLmRhdGFDaGFubmVsU2VuZGVyLnJlc2V0QWZrV2FybmluZ1RpbWVyT25EYXRhU2VuZD0oKT0+dGhpcy5hZmtDb250cm9sbGVyLnJlc2V0QWZrV2FybmluZ1RpbWVyKCksdGhpcy5zdHJlYW1NZXNzYWdlQ29udHJvbGxlcj1uZXcgdHQsdGhpcy53ZWJTb2NrZXRDb250cm9sbGVyPW5ldyBmLHRoaXMud2ViU29ja2V0Q29udHJvbGxlci5vbkNvbmZpZz1lPT50aGlzLmhhbmRsZU9uQ29uZmlnTWVzc2FnZShlKSx0aGlzLndlYlNvY2tldENvbnRyb2xsZXIub25TdHJlYW1lckxpc3Q9ZT0+dGhpcy5oYW5kbGVTdHJlYW1lckxpc3RNZXNzYWdlKGUpLHRoaXMud2ViU29ja2V0Q29udHJvbGxlci5vbldlYlNvY2tldE9uY2xvc2VPdmVybGF5TWVzc2FnZT1lPT57dGhpcy5waXhlbFN0cmVhbWluZy5fb25EaXNjb25uZWN0KGBXZWJzb2NrZXQgZGlzY29ubmVjdCAoJHtlLmNvZGV9KSAke1wiXCIhPWUucmVhc29uP1wiLSBcIitlLnJlYXNvbjpcIlwifWApLHRoaXMuc2V0VmlkZW9FbmNvZGVyQXZnUVAoMCl9LHRoaXMud2ViU29ja2V0Q29udHJvbGxlci5vbk9wZW4uYWRkRXZlbnRMaXN0ZW5lcihcIm9wZW5cIiwoKCk9Pnt0aGlzLmNvbmZpZy5pc0ZsYWdFbmFibGVkKHJlLkJyb3dzZXJTZW5kT2ZmZXIpfHx0aGlzLndlYlNvY2tldENvbnRyb2xsZXIucmVxdWVzdFN0cmVhbWVyTGlzdCgpfSkpLHRoaXMud2ViU29ja2V0Q29udHJvbGxlci5vbkNsb3NlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbG9zZVwiLCgoKT0+e3RoaXMuYWZrQ29udHJvbGxlci5zdG9wQWZrV2FybmluZ1RpbWVyKCksdGhpcy5zdGF0c1RpbWVySGFuZGxlJiZ2b2lkIDAhPT10aGlzLnN0YXRzVGltZXJIYW5kbGUmJndpbmRvdy5jbGVhckludGVydmFsKHRoaXMuc3RhdHNUaW1lckhhbmRsZSksdGhpcy5zZXRUb3VjaElucHV0RW5hYmxlZCghMSksdGhpcy5zZXRNb3VzZUlucHV0RW5hYmxlZCghMSksdGhpcy5zZXRLZXlib2FyZElucHV0RW5hYmxlZCghMSksdGhpcy5zZXRHYW1lUGFkSW5wdXRFbmFibGVkKCExKSx0aGlzLnNob3VsZFJlY29ubmVjdCYmdGhpcy5jb25maWcuZ2V0TnVtZXJpY1NldHRpbmdWYWx1ZShvZS5NYXhSZWNvbm5lY3RBdHRlbXB0cyk+MCYmKHRoaXMuaXNSZWNvbm5lY3Rpbmc9ITAsdGhpcy5yZWNvbm5lY3RBdHRlbXB0KyssdGhpcy5yZXN0YXJ0U3RyZWFtQXV0b21hdGljYWxseSgpKX0pKSx0aGlzLnNlbmREZXNjcmlwdG9yQ29udHJvbGxlcj1uZXcgbnQodGhpcy5kYXRhQ2hhbm5lbFNlbmRlcix0aGlzLnN0cmVhbU1lc3NhZ2VDb250cm9sbGVyKSx0aGlzLnNlbmRNZXNzYWdlQ29udHJvbGxlcj1uZXcgcnQodGhpcy5kYXRhQ2hhbm5lbFNlbmRlcix0aGlzLnN0cmVhbU1lc3NhZ2VDb250cm9sbGVyKSx0aGlzLnRvU3RyZWFtZXJNZXNzYWdlc0NvbnRyb2xsZXI9bmV3IGl0KHRoaXMuc2VuZE1lc3NhZ2VDb250cm9sbGVyKSx0aGlzLnJlZ2lzdGVyTWVzc2FnZUhhbmRsZXJzKCksdGhpcy5zdHJlYW1NZXNzYWdlQ29udHJvbGxlci5wb3B1bGF0ZURlZmF1bHRQcm90b2NvbCgpLHRoaXMuaW5wdXRDbGFzc2VzRmFjdG9yeT1uZXcgWWUodGhpcy5zdHJlYW1NZXNzYWdlQ29udHJvbGxlcix0aGlzLnZpZGVvUGxheWVyLHRoaXMuY29vcmRpbmF0ZUNvbnZlcnRlciksdGhpcy5pc1VzaW5nU0ZVPSExLHRoaXMuaXNRdWFsaXR5Q29udHJvbGxlcj0hMSx0aGlzLnByZWZlcnJlZENvZGVjPVwiXCIsdGhpcy5zaG91bGRSZWNvbm5lY3Q9ITAsdGhpcy5pc1JlY29ubmVjdGluZz0hMSx0aGlzLnJlY29ubmVjdEF0dGVtcHQ9MCx0aGlzLmNvbmZpZy5fYWRkT25PcHRpb25TZXR0aW5nQ2hhbmdlZExpc3RlbmVyKGNlLlN0cmVhbWVySWQsKGU9PntcIlwiIT09ZSYmKHRoaXMucGVlckNvbm5lY3Rpb25Db250cm9sbGVyLnBlZXJDb25uZWN0aW9uLmNsb3NlKCksdGhpcy5wZWVyQ29ubmVjdGlvbkNvbnRyb2xsZXIuY3JlYXRlUGVlckNvbm5lY3Rpb24odGhpcy5wZWVyQ29uZmlnLHRoaXMucHJlZmVycmVkQ29kZWMpLHRoaXMuc3Vic2NyaWJlZFN0cmVhbT1lLHRoaXMud2ViU29ja2V0Q29udHJvbGxlci5zZW5kU3Vic2NyaWJlKGUpKX0pKSx0aGlzLnNldFZpZGVvRW5jb2RlckF2Z1FQKC0xKSx0aGlzLnNpZ25hbGxpbmdVcmxCdWlsZGVyPSgpPT57bGV0IGU9dGhpcy5jb25maWcuZ2V0VGV4dFNldHRpbmdWYWx1ZShsZS5TaWduYWxsaW5nU2VydmVyVXJsKTtyZXR1cm4gdGhpcy5jb25maWcuaXNGbGFnRW5hYmxlZChyZS5Ccm93c2VyU2VuZE9mZmVyKSYmKGUrPVwiP1wiK3JlLkJyb3dzZXJTZW5kT2ZmZXIrXCI9dHJ1ZVwiKSxlfX1yZXF1ZXN0VW5xdWFudGl6ZWRBbmREZW5vcm1hbGl6ZVVuc2lnbmVkKGUsdCl7cmV0dXJuIHRoaXMuY29vcmRpbmF0ZUNvbnZlcnRlci51bnF1YW50aXplQW5kRGVub3JtYWxpemVVbnNpZ25lZChlLHQpfWhhbmRsZU9uTWVzc2FnZShlKXtjb25zdCB0PW5ldyBVaW50OEFycmF5KGUuZGF0YSk7aS5Mb2coaS5HZXRTdGFja1RyYWNlKCksXCJNZXNzYWdlIGluY29taW5nOlwiK3QsNik7Y29uc3Qgcz10aGlzLnN0cmVhbU1lc3NhZ2VDb250cm9sbGVyLmZyb21TdHJlYW1lck1lc3NhZ2VzLmdldEZyb21WYWx1ZSh0WzBdKTt0aGlzLnN0cmVhbU1lc3NhZ2VDb250cm9sbGVyLmZyb21TdHJlYW1lckhhbmRsZXJzLmdldChzKShlLmRhdGEpfXJlZ2lzdGVyTWVzc2FnZUhhbmRsZXJzKCl7dGhpcy5zdHJlYW1NZXNzYWdlQ29udHJvbGxlci5yZWdpc3Rlck1lc3NhZ2VIYW5kbGVyKExlLkZyb21TdHJlYW1lcixcIlF1YWxpdHlDb250cm9sT3duZXJzaGlwXCIsKGU9PnRoaXMub25RdWFsaXR5Q29udHJvbE93bmVyc2hpcChlKSkpLHRoaXMuc3RyZWFtTWVzc2FnZUNvbnRyb2xsZXIucmVnaXN0ZXJNZXNzYWdlSGFuZGxlcihMZS5Gcm9tU3RyZWFtZXIsXCJSZXNwb25zZVwiLChlPT50aGlzLnJlc3BvbnNlQ29udHJvbGxlci5vblJlc3BvbnNlKGUpKSksdGhpcy5zdHJlYW1NZXNzYWdlQ29udHJvbGxlci5yZWdpc3Rlck1lc3NhZ2VIYW5kbGVyKExlLkZyb21TdHJlYW1lcixcIkNvbW1hbmRcIiwoZT0+e3RoaXMub25Db21tYW5kKGUpfSkpLHRoaXMuc3RyZWFtTWVzc2FnZUNvbnRyb2xsZXIucmVnaXN0ZXJNZXNzYWdlSGFuZGxlcihMZS5Gcm9tU3RyZWFtZXIsXCJGcmVlemVGcmFtZVwiLChlPT50aGlzLm9uRnJlZXplRnJhbWVNZXNzYWdlKGUpKSksdGhpcy5zdHJlYW1NZXNzYWdlQ29udHJvbGxlci5yZWdpc3Rlck1lc3NhZ2VIYW5kbGVyKExlLkZyb21TdHJlYW1lcixcIlVuZnJlZXplRnJhbWVcIiwoKCk9PnRoaXMuaW52YWxpZGF0ZUZyZWV6ZUZyYW1lQW5kRW5hYmxlVmlkZW8oKSkpLHRoaXMuc3RyZWFtTWVzc2FnZUNvbnRyb2xsZXIucmVnaXN0ZXJNZXNzYWdlSGFuZGxlcihMZS5Gcm9tU3RyZWFtZXIsXCJWaWRlb0VuY29kZXJBdmdRUFwiLChlPT50aGlzLmhhbmRsZVZpZGVvRW5jb2RlckF2Z1FQKGUpKSksdGhpcy5zdHJlYW1NZXNzYWdlQ29udHJvbGxlci5yZWdpc3Rlck1lc3NhZ2VIYW5kbGVyKExlLkZyb21TdHJlYW1lcixcIkxhdGVuY3lUZXN0XCIsKGU9PnRoaXMuaGFuZGxlTGF0ZW5jeVRlc3RSZXN1bHQoZSkpKSx0aGlzLnN0cmVhbU1lc3NhZ2VDb250cm9sbGVyLnJlZ2lzdGVyTWVzc2FnZUhhbmRsZXIoTGUuRnJvbVN0cmVhbWVyLFwiSW5pdGlhbFNldHRpbmdzXCIsKGU9PnRoaXMuaGFuZGxlSW5pdGlhbFNldHRpbmdzKGUpKSksdGhpcy5zdHJlYW1NZXNzYWdlQ29udHJvbGxlci5yZWdpc3Rlck1lc3NhZ2VIYW5kbGVyKExlLkZyb21TdHJlYW1lcixcIkZpbGVFeHRlbnNpb25cIiwoZT0+dGhpcy5vbkZpbGVFeHRlbnNpb24oZSkpKSx0aGlzLnN0cmVhbU1lc3NhZ2VDb250cm9sbGVyLnJlZ2lzdGVyTWVzc2FnZUhhbmRsZXIoTGUuRnJvbVN0cmVhbWVyLFwiRmlsZU1pbWVUeXBlXCIsKGU9PnRoaXMub25GaWxlTWltZVR5cGUoZSkpKSx0aGlzLnN0cmVhbU1lc3NhZ2VDb250cm9sbGVyLnJlZ2lzdGVyTWVzc2FnZUhhbmRsZXIoTGUuRnJvbVN0cmVhbWVyLFwiRmlsZUNvbnRlbnRzXCIsKGU9PnRoaXMub25GaWxlQ29udGVudHMoZSkpKSx0aGlzLnN0cmVhbU1lc3NhZ2VDb250cm9sbGVyLnJlZ2lzdGVyTWVzc2FnZUhhbmRsZXIoTGUuRnJvbVN0cmVhbWVyLFwiVGVzdEVjaG9cIiwoKCk9Pnt9KSksdGhpcy5zdHJlYW1NZXNzYWdlQ29udHJvbGxlci5yZWdpc3Rlck1lc3NhZ2VIYW5kbGVyKExlLkZyb21TdHJlYW1lcixcIklucHV0Q29udHJvbE93bmVyc2hpcFwiLChlPT50aGlzLm9uSW5wdXRDb250cm9sT3duZXJzaGlwKGUpKSksdGhpcy5zdHJlYW1NZXNzYWdlQ29udHJvbGxlci5yZWdpc3Rlck1lc3NhZ2VIYW5kbGVyKExlLkZyb21TdHJlYW1lcixcIkdhbWVwYWRSZXNwb25zZVwiLChlPT50aGlzLm9uR2FtZXBhZFJlc3BvbnNlKGUpKSksdGhpcy5zdHJlYW1NZXNzYWdlQ29udHJvbGxlci5yZWdpc3Rlck1lc3NhZ2VIYW5kbGVyKExlLkZyb21TdHJlYW1lcixcIlByb3RvY29sXCIsKGU9PnRoaXMub25Qcm90b2NvbE1lc3NhZ2UoZSkpKSx0aGlzLnN0cmVhbU1lc3NhZ2VDb250cm9sbGVyLnJlZ2lzdGVyTWVzc2FnZUhhbmRsZXIoTGUuVG9TdHJlYW1lcixcIklGcmFtZVJlcXVlc3RcIiwoKCk9PnRoaXMuc2VuZE1lc3NhZ2VDb250cm9sbGVyLnNlbmRNZXNzYWdlVG9TdHJlYW1lcihcIklGcmFtZVJlcXVlc3RcIikpKSx0aGlzLnN0cmVhbU1lc3NhZ2VDb250cm9sbGVyLnJlZ2lzdGVyTWVzc2FnZUhhbmRsZXIoTGUuVG9TdHJlYW1lcixcIlJlcXVlc3RRdWFsaXR5Q29udHJvbFwiLCgoKT0+dGhpcy5zZW5kTWVzc2FnZUNvbnRyb2xsZXIuc2VuZE1lc3NhZ2VUb1N0cmVhbWVyKFwiUmVxdWVzdFF1YWxpdHlDb250cm9sXCIpKSksdGhpcy5zdHJlYW1NZXNzYWdlQ29udHJvbGxlci5yZWdpc3Rlck1lc3NhZ2VIYW5kbGVyKExlLlRvU3RyZWFtZXIsXCJGcHNSZXF1ZXN0XCIsKCgpPT50aGlzLnNlbmRNZXNzYWdlQ29udHJvbGxlci5zZW5kTWVzc2FnZVRvU3RyZWFtZXIoXCJGcHNSZXF1ZXN0XCIpKSksdGhpcy5zdHJlYW1NZXNzYWdlQ29udHJvbGxlci5yZWdpc3Rlck1lc3NhZ2VIYW5kbGVyKExlLlRvU3RyZWFtZXIsXCJBdmVyYWdlQml0cmF0ZVJlcXVlc3RcIiwoKCk9PnRoaXMuc2VuZE1lc3NhZ2VDb250cm9sbGVyLnNlbmRNZXNzYWdlVG9TdHJlYW1lcihcIkF2ZXJhZ2VCaXRyYXRlUmVxdWVzdFwiKSkpLHRoaXMuc3RyZWFtTWVzc2FnZUNvbnRyb2xsZXIucmVnaXN0ZXJNZXNzYWdlSGFuZGxlcihMZS5Ub1N0cmVhbWVyLFwiU3RhcnRTdHJlYW1pbmdcIiwoKCk9PnRoaXMuc2VuZE1lc3NhZ2VDb250cm9sbGVyLnNlbmRNZXNzYWdlVG9TdHJlYW1lcihcIlN0YXJ0U3RyZWFtaW5nXCIpKSksdGhpcy5zdHJlYW1NZXNzYWdlQ29udHJvbGxlci5yZWdpc3Rlck1lc3NhZ2VIYW5kbGVyKExlLlRvU3RyZWFtZXIsXCJTdG9wU3RyZWFtaW5nXCIsKCgpPT50aGlzLnNlbmRNZXNzYWdlQ29udHJvbGxlci5zZW5kTWVzc2FnZVRvU3RyZWFtZXIoXCJTdG9wU3RyZWFtaW5nXCIpKSksdGhpcy5zdHJlYW1NZXNzYWdlQ29udHJvbGxlci5yZWdpc3Rlck1lc3NhZ2VIYW5kbGVyKExlLlRvU3RyZWFtZXIsXCJMYXRlbmN5VGVzdFwiLCgoKT0+dGhpcy5zZW5kTWVzc2FnZUNvbnRyb2xsZXIuc2VuZE1lc3NhZ2VUb1N0cmVhbWVyKFwiTGF0ZW5jeVRlc3RcIikpKSx0aGlzLnN0cmVhbU1lc3NhZ2VDb250cm9sbGVyLnJlZ2lzdGVyTWVzc2FnZUhhbmRsZXIoTGUuVG9TdHJlYW1lcixcIlJlcXVlc3RJbml0aWFsU2V0dGluZ3NcIiwoKCk9PnRoaXMuc2VuZE1lc3NhZ2VDb250cm9sbGVyLnNlbmRNZXNzYWdlVG9TdHJlYW1lcihcIlJlcXVlc3RJbml0aWFsU2V0dGluZ3NcIikpKSx0aGlzLnN0cmVhbU1lc3NhZ2VDb250cm9sbGVyLnJlZ2lzdGVyTWVzc2FnZUhhbmRsZXIoTGUuVG9TdHJlYW1lcixcIlRlc3RFY2hvXCIsKCgpPT57fSkpLHRoaXMuc3RyZWFtTWVzc2FnZUNvbnRyb2xsZXIucmVnaXN0ZXJNZXNzYWdlSGFuZGxlcihMZS5Ub1N0cmVhbWVyLFwiVUlJbnRlcmFjdGlvblwiLChlPT50aGlzLnNlbmREZXNjcmlwdG9yQ29udHJvbGxlci5lbWl0VUlJbnRlcmFjdGlvbihlKSkpLHRoaXMuc3RyZWFtTWVzc2FnZUNvbnRyb2xsZXIucmVnaXN0ZXJNZXNzYWdlSGFuZGxlcihMZS5Ub1N0cmVhbWVyLFwiQ29tbWFuZFwiLChlPT50aGlzLnNlbmREZXNjcmlwdG9yQ29udHJvbGxlci5lbWl0Q29tbWFuZChlKSkpLHRoaXMuc3RyZWFtTWVzc2FnZUNvbnRyb2xsZXIucmVnaXN0ZXJNZXNzYWdlSGFuZGxlcihMZS5Ub1N0cmVhbWVyLFwiS2V5RG93blwiLChlPT50aGlzLnNlbmRNZXNzYWdlQ29udHJvbGxlci5zZW5kTWVzc2FnZVRvU3RyZWFtZXIoXCJLZXlEb3duXCIsZSkpKSx0aGlzLnN0cmVhbU1lc3NhZ2VDb250cm9sbGVyLnJlZ2lzdGVyTWVzc2FnZUhhbmRsZXIoTGUuVG9TdHJlYW1lcixcIktleVVwXCIsKGU9PnRoaXMuc2VuZE1lc3NhZ2VDb250cm9sbGVyLnNlbmRNZXNzYWdlVG9TdHJlYW1lcihcIktleVVwXCIsZSkpKSx0aGlzLnN0cmVhbU1lc3NhZ2VDb250cm9sbGVyLnJlZ2lzdGVyTWVzc2FnZUhhbmRsZXIoTGUuVG9TdHJlYW1lcixcIktleVByZXNzXCIsKGU9PnRoaXMuc2VuZE1lc3NhZ2VDb250cm9sbGVyLnNlbmRNZXNzYWdlVG9TdHJlYW1lcihcIktleVByZXNzXCIsZSkpKSx0aGlzLnN0cmVhbU1lc3NhZ2VDb250cm9sbGVyLnJlZ2lzdGVyTWVzc2FnZUhhbmRsZXIoTGUuVG9TdHJlYW1lcixcIk1vdXNlRW50ZXJcIiwoZT0+dGhpcy5zZW5kTWVzc2FnZUNvbnRyb2xsZXIuc2VuZE1lc3NhZ2VUb1N0cmVhbWVyKFwiTW91c2VFbnRlclwiLGUpKSksdGhpcy5zdHJlYW1NZXNzYWdlQ29udHJvbGxlci5yZWdpc3Rlck1lc3NhZ2VIYW5kbGVyKExlLlRvU3RyZWFtZXIsXCJNb3VzZUxlYXZlXCIsKGU9PnRoaXMuc2VuZE1lc3NhZ2VDb250cm9sbGVyLnNlbmRNZXNzYWdlVG9TdHJlYW1lcihcIk1vdXNlTGVhdmVcIixlKSkpLHRoaXMuc3RyZWFtTWVzc2FnZUNvbnRyb2xsZXIucmVnaXN0ZXJNZXNzYWdlSGFuZGxlcihMZS5Ub1N0cmVhbWVyLFwiTW91c2VEb3duXCIsKGU9PnRoaXMuc2VuZE1lc3NhZ2VDb250cm9sbGVyLnNlbmRNZXNzYWdlVG9TdHJlYW1lcihcIk1vdXNlRG93blwiLGUpKSksdGhpcy5zdHJlYW1NZXNzYWdlQ29udHJvbGxlci5yZWdpc3Rlck1lc3NhZ2VIYW5kbGVyKExlLlRvU3RyZWFtZXIsXCJNb3VzZVVwXCIsKGU9PnRoaXMuc2VuZE1lc3NhZ2VDb250cm9sbGVyLnNlbmRNZXNzYWdlVG9TdHJlYW1lcihcIk1vdXNlVXBcIixlKSkpLHRoaXMuc3RyZWFtTWVzc2FnZUNvbnRyb2xsZXIucmVnaXN0ZXJNZXNzYWdlSGFuZGxlcihMZS5Ub1N0cmVhbWVyLFwiTW91c2VNb3ZlXCIsKGU9PnRoaXMuc2VuZE1lc3NhZ2VDb250cm9sbGVyLnNlbmRNZXNzYWdlVG9TdHJlYW1lcihcIk1vdXNlTW92ZVwiLGUpKSksdGhpcy5zdHJlYW1NZXNzYWdlQ29udHJvbGxlci5yZWdpc3Rlck1lc3NhZ2VIYW5kbGVyKExlLlRvU3RyZWFtZXIsXCJNb3VzZVdoZWVsXCIsKGU9PnRoaXMuc2VuZE1lc3NhZ2VDb250cm9sbGVyLnNlbmRNZXNzYWdlVG9TdHJlYW1lcihcIk1vdXNlV2hlZWxcIixlKSkpLHRoaXMuc3RyZWFtTWVzc2FnZUNvbnRyb2xsZXIucmVnaXN0ZXJNZXNzYWdlSGFuZGxlcihMZS5Ub1N0cmVhbWVyLFwiTW91c2VEb3VibGVcIiwoZT0+dGhpcy5zZW5kTWVzc2FnZUNvbnRyb2xsZXIuc2VuZE1lc3NhZ2VUb1N0cmVhbWVyKFwiTW91c2VEb3VibGVcIixlKSkpLHRoaXMuc3RyZWFtTWVzc2FnZUNvbnRyb2xsZXIucmVnaXN0ZXJNZXNzYWdlSGFuZGxlcihMZS5Ub1N0cmVhbWVyLFwiVG91Y2hTdGFydFwiLChlPT50aGlzLnNlbmRNZXNzYWdlQ29udHJvbGxlci5zZW5kTWVzc2FnZVRvU3RyZWFtZXIoXCJUb3VjaFN0YXJ0XCIsZSkpKSx0aGlzLnN0cmVhbU1lc3NhZ2VDb250cm9sbGVyLnJlZ2lzdGVyTWVzc2FnZUhhbmRsZXIoTGUuVG9TdHJlYW1lcixcIlRvdWNoRW5kXCIsKGU9PnRoaXMuc2VuZE1lc3NhZ2VDb250cm9sbGVyLnNlbmRNZXNzYWdlVG9TdHJlYW1lcihcIlRvdWNoRW5kXCIsZSkpKSx0aGlzLnN0cmVhbU1lc3NhZ2VDb250cm9sbGVyLnJlZ2lzdGVyTWVzc2FnZUhhbmRsZXIoTGUuVG9TdHJlYW1lcixcIlRvdWNoTW92ZVwiLChlPT50aGlzLnNlbmRNZXNzYWdlQ29udHJvbGxlci5zZW5kTWVzc2FnZVRvU3RyZWFtZXIoXCJUb3VjaE1vdmVcIixlKSkpLHRoaXMuc3RyZWFtTWVzc2FnZUNvbnRyb2xsZXIucmVnaXN0ZXJNZXNzYWdlSGFuZGxlcihMZS5Ub1N0cmVhbWVyLFwiR2FtZXBhZENvbm5lY3RlZFwiLCgoKT0+dGhpcy5zZW5kTWVzc2FnZUNvbnRyb2xsZXIuc2VuZE1lc3NhZ2VUb1N0cmVhbWVyKFwiR2FtZXBhZENvbm5lY3RlZFwiKSkpLHRoaXMuc3RyZWFtTWVzc2FnZUNvbnRyb2xsZXIucmVnaXN0ZXJNZXNzYWdlSGFuZGxlcihMZS5Ub1N0cmVhbWVyLFwiR2FtZXBhZEJ1dHRvblByZXNzZWRcIiwoZT0+dGhpcy5zZW5kTWVzc2FnZUNvbnRyb2xsZXIuc2VuZE1lc3NhZ2VUb1N0cmVhbWVyKFwiR2FtZXBhZEJ1dHRvblByZXNzZWRcIixlKSkpLHRoaXMuc3RyZWFtTWVzc2FnZUNvbnRyb2xsZXIucmVnaXN0ZXJNZXNzYWdlSGFuZGxlcihMZS5Ub1N0cmVhbWVyLFwiR2FtZXBhZEJ1dHRvblJlbGVhc2VkXCIsKGU9PnRoaXMuc2VuZE1lc3NhZ2VDb250cm9sbGVyLnNlbmRNZXNzYWdlVG9TdHJlYW1lcihcIkdhbWVwYWRCdXR0b25SZWxlYXNlZFwiLGUpKSksdGhpcy5zdHJlYW1NZXNzYWdlQ29udHJvbGxlci5yZWdpc3Rlck1lc3NhZ2VIYW5kbGVyKExlLlRvU3RyZWFtZXIsXCJHYW1lcGFkQW5hbG9nXCIsKGU9PnRoaXMuc2VuZE1lc3NhZ2VDb250cm9sbGVyLnNlbmRNZXNzYWdlVG9TdHJlYW1lcihcIkdhbWVwYWRBbmFsb2dcIixlKSkpLHRoaXMuc3RyZWFtTWVzc2FnZUNvbnRyb2xsZXIucmVnaXN0ZXJNZXNzYWdlSGFuZGxlcihMZS5Ub1N0cmVhbWVyLFwiR2FtZXBhZERpc2Nvbm5lY3RlZFwiLChlPT50aGlzLnNlbmRNZXNzYWdlQ29udHJvbGxlci5zZW5kTWVzc2FnZVRvU3RyZWFtZXIoXCJHYW1lcGFkRGlzY29ubmVjdGVkXCIsZSkpKSx0aGlzLnN0cmVhbU1lc3NhZ2VDb250cm9sbGVyLnJlZ2lzdGVyTWVzc2FnZUhhbmRsZXIoTGUuVG9TdHJlYW1lcixcIlhSSE1EVHJhbnNmb3JtXCIsKGU9PnRoaXMuc2VuZE1lc3NhZ2VDb250cm9sbGVyLnNlbmRNZXNzYWdlVG9TdHJlYW1lcihcIlhSSE1EVHJhbnNmb3JtXCIsZSkpKSx0aGlzLnN0cmVhbU1lc3NhZ2VDb250cm9sbGVyLnJlZ2lzdGVyTWVzc2FnZUhhbmRsZXIoTGUuVG9TdHJlYW1lcixcIlhSQ29udHJvbGxlclRyYW5zZm9ybVwiLChlPT50aGlzLnNlbmRNZXNzYWdlQ29udHJvbGxlci5zZW5kTWVzc2FnZVRvU3RyZWFtZXIoXCJYUkNvbnRyb2xsZXJUcmFuc2Zvcm1cIixlKSkpLHRoaXMuc3RyZWFtTWVzc2FnZUNvbnRyb2xsZXIucmVnaXN0ZXJNZXNzYWdlSGFuZGxlcihMZS5Ub1N0cmVhbWVyLFwiWFJTeXN0ZW1cIiwoZT0+dGhpcy5zZW5kTWVzc2FnZUNvbnRyb2xsZXIuc2VuZE1lc3NhZ2VUb1N0cmVhbWVyKFwiWFJTeXN0ZW1cIixlKSkpLHRoaXMuc3RyZWFtTWVzc2FnZUNvbnRyb2xsZXIucmVnaXN0ZXJNZXNzYWdlSGFuZGxlcihMZS5Ub1N0cmVhbWVyLFwiWFJCdXR0b25Ub3VjaGVkXCIsKGU9PnRoaXMuc2VuZE1lc3NhZ2VDb250cm9sbGVyLnNlbmRNZXNzYWdlVG9TdHJlYW1lcihcIlhSQnV0dG9uVG91Y2hlZFwiLGUpKSksdGhpcy5zdHJlYW1NZXNzYWdlQ29udHJvbGxlci5yZWdpc3Rlck1lc3NhZ2VIYW5kbGVyKExlLlRvU3RyZWFtZXIsXCJYUkJ1dHRvblByZXNzZWRcIiwoZT0+dGhpcy5zZW5kTWVzc2FnZUNvbnRyb2xsZXIuc2VuZE1lc3NhZ2VUb1N0cmVhbWVyKFwiWFJCdXR0b25QcmVzc2VkXCIsZSkpKSx0aGlzLnN0cmVhbU1lc3NhZ2VDb250cm9sbGVyLnJlZ2lzdGVyTWVzc2FnZUhhbmRsZXIoTGUuVG9TdHJlYW1lcixcIlhSQnV0dG9uUmVsZWFzZWRcIiwoZT0+dGhpcy5zZW5kTWVzc2FnZUNvbnRyb2xsZXIuc2VuZE1lc3NhZ2VUb1N0cmVhbWVyKFwiWFJCdXR0b25SZWxlYXNlZFwiLGUpKSksdGhpcy5zdHJlYW1NZXNzYWdlQ29udHJvbGxlci5yZWdpc3Rlck1lc3NhZ2VIYW5kbGVyKExlLlRvU3RyZWFtZXIsXCJYUkFuYWxvZ1wiLChlPT50aGlzLnNlbmRNZXNzYWdlQ29udHJvbGxlci5zZW5kTWVzc2FnZVRvU3RyZWFtZXIoXCJYUkFuYWxvZ1wiLGUpKSl9b25Db21tYW5kKGUpe2kuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLFwiRGF0YUNoYW5uZWxSZWNlaXZlTWVzc2FnZVR5cGUuQ29tbWFuZFwiLDYpO2NvbnN0IHQ9bmV3IFRleHREZWNvZGVyKFwidXRmLTE2XCIpLmRlY29kZShlLnNsaWNlKDEpKTtpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcIkRhdGEgQ2hhbm5lbCBDb21tYW5kOiBcIit0LDYpO2NvbnN0IHM9SlNPTi5wYXJzZSh0KTtcIm9uU2NyZWVuS2V5Ym9hcmRcIj09PXMuY29tbWFuZCYmdGhpcy5waXhlbFN0cmVhbWluZy5fYWN0aXZhdGVPblNjcmVlbktleWJvYXJkKHMpfW9uUHJvdG9jb2xNZXNzYWdlKGUpe3RyeXtjb25zdCB0PW5ldyBUZXh0RGVjb2RlcihcInV0Zi0xNlwiKS5kZWNvZGUoZS5zbGljZSgxKSkscz1KU09OLnBhcnNlKHQpO09iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLFwiRGlyZWN0aW9uXCIpfHxpLkVycm9yKGkuR2V0U3RhY2tUcmFjZSgpLFwiTWFsZm9ybWVkIHByb3RvY29sIHJlY2VpdmVkLiBFbnN1cmUgdGhlIHByb3RvY29sIG1lc3NhZ2UgY29udGFpbnMgYSBkaXJlY3Rpb25cIik7Y29uc3Qgbj1zLkRpcmVjdGlvbjtkZWxldGUgcy5EaXJlY3Rpb24saS5Mb2coaS5HZXRTdGFja1RyYWNlKCksYFJlY2VpdmVkIG5ldyAke249PUxlLkZyb21TdHJlYW1lcj9cIkZyb21TdHJlYW1lclwiOlwiVG9TdHJlYW1lclwifSBwcm90b2NvbC4gVXBkYXRpbmcgZXhpc3RpbmcgcHJvdG9jb2wuLi5gKSxPYmplY3Qua2V5cyhzKS5mb3JFYWNoKChlPT57Y29uc3QgdD1zW2VdO3N3aXRjaChuKXtjYXNlIExlLlRvU3RyZWFtZXI6aWYoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LFwiaWRcIil8fCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxcImJ5dGVMZW5ndGhcIikpcmV0dXJuIHZvaWQgaS5FcnJvcihpLkdldFN0YWNrVHJhY2UoKSxgVG9TdHJlYW1lci0+JHtlfSBwcm90b2NvbCBkZWZpbml0aW9uIHdhcyBtYWxmb3JtZWQgYXMgaXQgZGlkbid0IGNvbnRhaW4gYXQgbGVhc3QgYW4gaWQgYW5kIGEgYnl0ZUxlbmd0aFxcblxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWZpbml0aW9uIHdhczogJHtKU09OLnN0cmluZ2lmeSh0LG51bGwsMil9YCk7aWYodC5ieXRlTGVuZ3RoPjAmJiFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxcInN0cnVjdHVyZVwiKSlyZXR1cm4gdm9pZCBpLkVycm9yKGkuR2V0U3RhY2tUcmFjZSgpLGBUb1N0cmVhbWVyLT4ke2V9IHByb3RvY29sIGRlZmluaXRpb24gd2FzIG1hbGZvcm1lZCBhcyBpdCBzcGVjaWZpZWQgYSBieXRlTGVuZ3RoIGJ1dCBubyBhY2NvbXBhbnlpbmcgc3RydWN0dXJlYCk7dGhpcy5zdHJlYW1NZXNzYWdlQ29udHJvbGxlci50b1N0cmVhbWVySGFuZGxlcnMuZ2V0KGUpP3RoaXMuc3RyZWFtTWVzc2FnZUNvbnRyb2xsZXIudG9TdHJlYW1lck1lc3NhZ2VzLmFkZChlLHQpOmkuRXJyb3IoaS5HZXRTdGFja1RyYWNlKCksYFRoZXJlIHdhcyBubyByZWdpc3RlcmVkIGhhbmRsZXIgZm9yIFwiJHtlfVwiIC0gdHJ5IGFkZGluZyBvbmUgdXNpbmcgcmVnaXN0ZXJNZXNzYWdlSGFuZGxlcihNZXNzYWdlRGlyZWN0aW9uLlRvU3RyZWFtZXIsIFwiJHtlfVwiLCBteUhhbmRsZXIpYCk7YnJlYWs7Y2FzZSBMZS5Gcm9tU3RyZWFtZXI6aWYoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LFwiaWRcIikpcmV0dXJuIHZvaWQgaS5FcnJvcihpLkdldFN0YWNrVHJhY2UoKSxgRnJvbVN0cmVhbWVyLT4ke2V9IHByb3RvY29sIGRlZmluaXRpb24gd2FzIG1hbGZvcm1lZCBhcyBpdCBkaWRuJ3QgY29udGFpbiBhdCBsZWFzdCBhbiBpZFxcblxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWZpbml0aW9uIHdhczogJHtKU09OLnN0cmluZ2lmeSh0LG51bGwsMil9YCk7dGhpcy5zdHJlYW1NZXNzYWdlQ29udHJvbGxlci5mcm9tU3RyZWFtZXJIYW5kbGVycy5nZXQoZSk/dGhpcy5zdHJlYW1NZXNzYWdlQ29udHJvbGxlci5mcm9tU3RyZWFtZXJNZXNzYWdlcy5hZGQoZSx0LmlkKTppLkVycm9yKGkuR2V0U3RhY2tUcmFjZSgpLGBUaGVyZSB3YXMgbm8gcmVnaXN0ZXJlZCBoYW5kbGVyIGZvciBcIiR7dH1cIiAtIHRyeSBhZGRpbmcgb25lIHVzaW5nIHJlZ2lzdGVyTWVzc2FnZUhhbmRsZXIoTWVzc2FnZURpcmVjdGlvbi5Gcm9tU3RyZWFtZXIsIFwiJHtlfVwiLCBteUhhbmRsZXIpYCk7YnJlYWs7ZGVmYXVsdDppLkVycm9yKGkuR2V0U3RhY2tUcmFjZSgpLGBVbmtub3duIGRpcmVjdGlvbjogJHtufWApfX0pKSx0aGlzLnRvU3RyZWFtZXJNZXNzYWdlc0NvbnRyb2xsZXIuU2VuZFJlcXVlc3RJbml0aWFsU2V0dGluZ3MoKSx0aGlzLnRvU3RyZWFtZXJNZXNzYWdlc0NvbnRyb2xsZXIuU2VuZFJlcXVlc3RRdWFsaXR5Q29udHJvbCgpfWNhdGNoKGUpe2kuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLGUpfX1vbklucHV0Q29udHJvbE93bmVyc2hpcChlKXtjb25zdCB0PW5ldyBVaW50OEFycmF5KGUpO2kuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLFwiRGF0YUNoYW5uZWxSZWNlaXZlTWVzc2FnZVR5cGUuSW5wdXRDb250cm9sT3duZXJzaGlwXCIsNik7Y29uc3Qgcz1uZXcgQm9vbGVhbih0WzFdKS52YWx1ZU9mKCk7aS5Mb2coaS5HZXRTdGFja1RyYWNlKCksYFJlY2VpdmVkIGlucHV0IGNvbnRyb2xsZXIgbWVzc2FnZSAtIHdpbGwgeW91ciBpbnB1dCBjb250cm9sIHRoZSBzdHJlYW06ICR7c31gKSx0aGlzLnBpeGVsU3RyZWFtaW5nLl9vbklucHV0Q29udHJvbE93bmVyc2hpcChzKX1vbkdhbWVwYWRSZXNwb25zZShlKXtjb25zdCB0PW5ldyBUZXh0RGVjb2RlcihcInV0Zi0xNlwiKS5kZWNvZGUoZS5zbGljZSgxKSkscz1KU09OLnBhcnNlKHQpO3RoaXMuZ2FtZVBhZENvbnRyb2xsZXIub25HYW1lcGFkUmVzcG9uc2VSZWNlaXZlZChzLmNvbnRyb2xsZXJJZCl9b25BZmtUcmlnZ2VyZWQoKXt0aGlzLmFma0NvbnRyb2xsZXIub25BZmtDbGljaygpLHRoaXMudmlkZW9QbGF5ZXIuaXNQYXVzZWQoKSYmdGhpcy52aWRlb1BsYXllci5oYXNWaWRlb1NvdXJjZSgpJiZ0aGlzLnBsYXlTdHJlYW0oKX1zZXRBZmtFbmFibGVkKGUpe2U/dGhpcy5vbkFma1RyaWdnZXJlZCgpOnRoaXMuYWZrQ29udHJvbGxlci5zdG9wQWZrV2FybmluZ1RpbWVyKCl9cmVzdGFydFN0cmVhbUF1dG9tYXRpY2FsbHkoKXtpZih0aGlzLndlYlNvY2tldENvbnRyb2xsZXIpaWYodGhpcy53ZWJTb2NrZXRDb250cm9sbGVyLndlYlNvY2tldCYmdGhpcy53ZWJTb2NrZXRDb250cm9sbGVyLndlYlNvY2tldC5yZWFkeVN0YXRlIT09V2ViU29ja2V0LkNMT1NFRCl7dGhpcy5waXhlbFN0cmVhbWluZy5fc2hvd0FjdGlvbk9yRXJyb3JPbkRpc2Nvbm5lY3Q9ITEsdGhpcy5zZXREaXNjb25uZWN0TWVzc2FnZU92ZXJyaWRlKFwiUmVzdGFydGluZyBzdHJlYW0uLi5cIiksdGhpcy5jbG9zZVNpZ25hbGluZ1NlcnZlcigpO2NvbnN0IGU9c2V0VGltZW91dCgoKCk9Pnt0aGlzLnBpeGVsU3RyZWFtaW5nLl9vbldlYlJ0Y0F1dG9Db25uZWN0KCksdGhpcy5jb25uZWN0VG9TaWduYWxsaW5nU2VydmVyKCksY2xlYXJUaW1lb3V0KGUpfSksM2UzKX1lbHNlIGkuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLFwiQSB3ZWJzb2NrZXQgY29ubmVjdGlvbiBoYXMgbm90IGJlZW4gbWFkZSB5ZXQgc28gd2Ugd2lsbCBzdGFydCB0aGUgc3RyZWFtXCIpLHRoaXMucGl4ZWxTdHJlYW1pbmcuX29uV2ViUnRjQXV0b0Nvbm5lY3QoKSx0aGlzLmNvbm5lY3RUb1NpZ25hbGxpbmdTZXJ2ZXIoKTtlbHNlIGkuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLFwiVGhlIFdlYiBTb2NrZXQgQ29udHJvbGxlciBkb2VzIG5vdCBleGlzdCBzbyB0aGlzIHdpbGwgbm90IHdvcmsgcmlnaHQgbm93LlwiKX1sb2FkRnJlZXplRnJhbWVPclNob3dQbGF5T3ZlcmxheSgpe3RoaXMucGl4ZWxTdHJlYW1pbmcuZGlzcGF0Y2hFdmVudChuZXcgJCh7c2hvdWxkU2hvd1BsYXlPdmVybGF5OnRoaXMuc2hvdWxkU2hvd1BsYXlPdmVybGF5LGlzVmFsaWQ6dGhpcy5mcmVlemVGcmFtZUNvbnRyb2xsZXIudmFsaWQsanBlZ0RhdGE6dGhpcy5mcmVlemVGcmFtZUNvbnRyb2xsZXIuanBlZ30pKSwhMD09PXRoaXMuc2hvdWxkU2hvd1BsYXlPdmVybGF5PyhpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcInNob3dpbmcgcGxheSBvdmVybGF5XCIpLHRoaXMucmVzaXplUGxheWVyU3R5bGUoKSk6KGkuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLFwic2hvd2luZyBmcmVlemUgZnJhbWVcIiksdGhpcy5mcmVlemVGcmFtZUNvbnRyb2xsZXIuc2hvd0ZyZWV6ZUZyYW1lKCkpLHNldFRpbWVvdXQoKCgpPT57dGhpcy52aWRlb1BsYXllci5zZXRWaWRlb0VuYWJsZWQoITEpfSksdGhpcy5mcmVlemVGcmFtZUNvbnRyb2xsZXIuZnJlZXplRnJhbWVEZWxheSl9b25GcmVlemVGcmFtZU1lc3NhZ2UoZSl7aS5Mb2coaS5HZXRTdGFja1RyYWNlKCksXCJEYXRhQ2hhbm5lbFJlY2VpdmVNZXNzYWdlVHlwZS5GcmVlemVGcmFtZVwiLDYpO2NvbnN0IHQ9bmV3IFVpbnQ4QXJyYXkoZSk7dGhpcy5mcmVlemVGcmFtZUNvbnRyb2xsZXIucHJvY2Vzc0ZyZWV6ZUZyYW1lTWVzc2FnZSh0LCgoKT0+dGhpcy5sb2FkRnJlZXplRnJhbWVPclNob3dQbGF5T3ZlcmxheSgpKSl9aW52YWxpZGF0ZUZyZWV6ZUZyYW1lQW5kRW5hYmxlVmlkZW8oKXtpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcIkRhdGFDaGFubmVsUmVjZWl2ZU1lc3NhZ2VUeXBlLkZyZWV6ZUZyYW1lXCIsNiksc2V0VGltZW91dCgoKCk9Pnt0aGlzLnBpeGVsU3RyZWFtaW5nLmRpc3BhdGNoRXZlbnQobmV3IHEpLHRoaXMuZnJlZXplRnJhbWVDb250cm9sbGVyLmhpZGVGcmVlemVGcmFtZSgpfSksdGhpcy5mcmVlemVGcmFtZUNvbnRyb2xsZXIuZnJlZXplRnJhbWVEZWxheSksdGhpcy52aWRlb1BsYXllci5nZXRWaWRlb0VsZW1lbnQoKSYmdGhpcy52aWRlb1BsYXllci5zZXRWaWRlb0VuYWJsZWQoITApfW9uRmlsZUV4dGVuc2lvbihlKXtjb25zdCB0PW5ldyBVaW50OEFycmF5KGUpO0dlLnNldEV4dGVuc2lvbkZyb21CeXRlcyh0LHRoaXMuZmlsZSl9b25GaWxlTWltZVR5cGUoZSl7Y29uc3QgdD1uZXcgVWludDhBcnJheShlKTtHZS5zZXRNaW1lVHlwZUZyb21CeXRlcyh0LHRoaXMuZmlsZSl9b25GaWxlQ29udGVudHMoZSl7Y29uc3QgdD1uZXcgVWludDhBcnJheShlKTtHZS5zZXRDb250ZW50c0Zyb21CeXRlcyh0LHRoaXMuZmlsZSl9cGxheVN0cmVhbSgpe2lmKCF0aGlzLnZpZGVvUGxheWVyLmdldFZpZGVvRWxlbWVudCgpKXtjb25zdCBlPVwiQ291bGQgbm90IHBsYXkgdmlkZW8gc3RyZWFtIGJlY2F1c2UgdGhlIHZpZGVvIHBsYXllciB3YXMgbm90IGluaXRpYWxpemVkIGNvcnJlY3RseS5cIjtyZXR1cm4gdGhpcy5waXhlbFN0cmVhbWluZy5kaXNwYXRjaEV2ZW50KG5ldyBOKHttZXNzYWdlOmV9KSksaS5FcnJvcihpLkdldFN0YWNrVHJhY2UoKSxlKSx0aGlzLnNldERpc2Nvbm5lY3RNZXNzYWdlT3ZlcnJpZGUoXCJTdHJlYW0gbm90IGluaXRpYWxpemVkIGNvcnJlY3RseVwiKSx2b2lkIHRoaXMuY2xvc2VTaWduYWxpbmdTZXJ2ZXIoKX10aGlzLnZpZGVvUGxheWVyLmhhc1ZpZGVvU291cmNlKCk/KHRoaXMuc2V0VG91Y2hJbnB1dEVuYWJsZWQodGhpcy5jb25maWcuaXNGbGFnRW5hYmxlZChyZS5Ub3VjaElucHV0KSksdGhpcy5waXhlbFN0cmVhbWluZy5kaXNwYXRjaEV2ZW50KG5ldyBLKSx0aGlzLnN0cmVhbUNvbnRyb2xsZXIuYXVkaW9FbGVtZW50LnNyY09iamVjdD8odGhpcy5zdHJlYW1Db250cm9sbGVyLmF1ZGlvRWxlbWVudC5tdXRlZD10aGlzLmNvbmZpZy5pc0ZsYWdFbmFibGVkKHJlLlN0YXJ0VmlkZW9NdXRlZCksdGhpcy5zdHJlYW1Db250cm9sbGVyLmF1ZGlvRWxlbWVudC5wbGF5KCkudGhlbigoKCk9Pnt0aGlzLnBsYXlWaWRlbygpfSkpLmNhdGNoKChlPT57aS5Mb2coaS5HZXRTdGFja1RyYWNlKCksZSksaS5Mb2coaS5HZXRTdGFja1RyYWNlKCksXCJCcm93c2VyIGRvZXMgbm90IHN1cHBvcnQgYXV0b3BsYXlpbmcgdmlkZW8gd2l0aG91dCBpbnRlcmFjdGlvbiAtIHRvIHJlc29sdmUgdGhpcyB3ZSBhcmUgZ29pbmcgdG8gc2hvdyB0aGUgcGxheSBidXR0b24gb3ZlcmxheS5cIiksdGhpcy5waXhlbFN0cmVhbWluZy5kaXNwYXRjaEV2ZW50KG5ldyBRKHtyZWFzb246ZX0pKX0pKSk6dGhpcy5wbGF5VmlkZW8oKSx0aGlzLnNob3VsZFNob3dQbGF5T3ZlcmxheT0hMSx0aGlzLmZyZWV6ZUZyYW1lQ29udHJvbGxlci5zaG93RnJlZXplRnJhbWUoKSk6aS5XYXJuaW5nKGkuR2V0U3RhY2tUcmFjZSgpLFwiQ2Fubm90IHBsYXkgc3RyZWFtLCB0aGUgdmlkZW8gZWxlbWVudCBoYXMgbm8gc3JjT2JqZWN0IHRvIHBsYXkuXCIpfXBsYXlWaWRlbygpe3RoaXMudmlkZW9QbGF5ZXIucGxheSgpLmNhdGNoKChlPT57dGhpcy5zdHJlYW1Db250cm9sbGVyLmF1ZGlvRWxlbWVudC5zcmNPYmplY3QmJnRoaXMuc3RyZWFtQ29udHJvbGxlci5hdWRpb0VsZW1lbnQucGF1c2UoKSxpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxlKSxpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcIkJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCBhdXRvcGxheWluZyB2aWRlbyB3aXRob3V0IGludGVyYWN0aW9uIC0gdG8gcmVzb2x2ZSB0aGlzIHdlIGFyZSBnb2luZyB0byBzaG93IHRoZSBwbGF5IGJ1dHRvbiBvdmVybGF5LlwiKSx0aGlzLnBpeGVsU3RyZWFtaW5nLmRpc3BhdGNoRXZlbnQobmV3IFEoe3JlYXNvbjplfSkpfSkpfWF1dG9QbGF5VmlkZW9PclNldFVwUGxheU92ZXJsYXkoKXt0aGlzLmNvbmZpZy5pc0ZsYWdFbmFibGVkKHJlLkF1dG9QbGF5VmlkZW8pJiZ0aGlzLnBsYXlTdHJlYW0oKSx0aGlzLnJlc2l6ZVBsYXllclN0eWxlKCl9Y29ubmVjdFRvU2lnbmFsbGluZ1NlcnZlcigpe2NvbnN0IGU9dGhpcy5zaWduYWxsaW5nVXJsQnVpbGRlcigpO3RoaXMud2ViU29ja2V0Q29udHJvbGxlci5jb25uZWN0KGUpfXN0YXJ0U2Vzc2lvbihlKXtpZih0aGlzLnBlZXJDb25maWc9ZSx0aGlzLmNvbmZpZy5pc0ZsYWdFbmFibGVkKHJlLkZvcmNlVFVSTikmJiF0aGlzLmNoZWNrVHVyblNlcnZlckF2YWlsYWJpbGl0eShlKSlyZXR1cm4gaS5JbmZvKGkuR2V0U3RhY2tUcmFjZSgpLFwiTm8gdHVybiBzZXJ2ZXIgd2FzIGZvdW5kIGluIHRoZSBQZWVyIENvbm5lY3Rpb24gT3B0aW9ucy4gVFVSTiBjYW5ub3QgYmUgZm9yY2VkLCBjbG9zaW5nIGNvbm5lY3Rpb24uIFBsZWFzZSB1c2UgU1RVTiBpbnN0ZWFkXCIpLHRoaXMuc2V0RGlzY29ubmVjdE1lc3NhZ2VPdmVycmlkZShcIlRVUk4gY2Fubm90IGJlIGZvcmNlZCwgY2xvc2luZyBjb25uZWN0aW9uLiBQbGVhc2UgdXNlIFNUVU4gaW5zdGVhZC5cIiksdm9pZCB0aGlzLmNsb3NlU2lnbmFsaW5nU2VydmVyKCk7dGhpcy5wZWVyQ29ubmVjdGlvbkNvbnRyb2xsZXI9bmV3IEFlKHRoaXMucGVlckNvbmZpZyx0aGlzLmNvbmZpZyx0aGlzLnByZWZlcnJlZENvZGVjKSx0aGlzLnBlZXJDb25uZWN0aW9uQ29udHJvbGxlci5vblZpZGVvU3RhdHM9ZT0+dGhpcy5oYW5kbGVWaWRlb1N0YXRzKGUpLHRoaXMucGVlckNvbm5lY3Rpb25Db250cm9sbGVyLm9uU2VuZFdlYlJUQ09mZmVyPWU9PnRoaXMuaGFuZGxlU2VuZFdlYlJUQ09mZmVyKGUpLHRoaXMucGVlckNvbm5lY3Rpb25Db250cm9sbGVyLm9uU2VuZFdlYlJUQ0Fuc3dlcj1lPT50aGlzLmhhbmRsZVNlbmRXZWJSVENBbnN3ZXIoZSksdGhpcy5wZWVyQ29ubmVjdGlvbkNvbnRyb2xsZXIub25QZWVySWNlQ2FuZGlkYXRlPWU9PnRoaXMuaGFuZGxlU2VuZEljZUNhbmRpZGF0ZShlKSx0aGlzLnBlZXJDb25uZWN0aW9uQ29udHJvbGxlci5vbkRhdGFDaGFubmVsPWU9PnRoaXMuaGFuZGxlRGF0YUNoYW5uZWwoZSksdGhpcy5wZWVyQ29ubmVjdGlvbkNvbnRyb2xsZXIuc2hvd1RleHRPdmVybGF5Q29ubmVjdGluZz0oKT0+dGhpcy5waXhlbFN0cmVhbWluZy5fb25XZWJSdGNDb25uZWN0aW5nKCksdGhpcy5wZWVyQ29ubmVjdGlvbkNvbnRyb2xsZXIuc2hvd1RleHRPdmVybGF5U2V0dXBGYWlsdXJlPSgpPT50aGlzLnBpeGVsU3RyZWFtaW5nLl9vbldlYlJ0Y0ZhaWxlZCgpO2xldCB0PSExO3RoaXMucGVlckNvbm5lY3Rpb25Db250cm9sbGVyLm9uSWNlQ29ubmVjdGlvblN0YXRlQ2hhbmdlPSgpPT57IXQmJltcImNvbm5lY3RlZFwiLFwiY29tcGxldGVkXCJdLmluY2x1ZGVzKHRoaXMucGVlckNvbm5lY3Rpb25Db250cm9sbGVyLnBlZXJDb25uZWN0aW9uLmljZUNvbm5lY3Rpb25TdGF0ZSkmJih0aGlzLnBpeGVsU3RyZWFtaW5nLl9vbldlYlJ0Y0Nvbm5lY3RlZCgpLHQ9ITApfSx0aGlzLnBlZXJDb25uZWN0aW9uQ29udHJvbGxlci5vblRyYWNrPWU9PnRoaXMuc3RyZWFtQ29udHJvbGxlci5oYW5kbGVPblRyYWNrKGUpLHRoaXMuY29uZmlnLmlzRmxhZ0VuYWJsZWQocmUuQnJvd3NlclNlbmRPZmZlcikmJih0aGlzLnNlbmRyZWN2RGF0YUNoYW5uZWxDb250cm9sbGVyLmNyZWF0ZURhdGFDaGFubmVsKHRoaXMucGVlckNvbm5lY3Rpb25Db250cm9sbGVyLnBlZXJDb25uZWN0aW9uLFwiY2lycnVzXCIsdGhpcy5kYXRhY2hhbm5lbE9wdGlvbnMpLHRoaXMuc2VuZHJlY3ZEYXRhQ2hhbm5lbENvbnRyb2xsZXIuaGFuZGxlT25NZXNzYWdlPWU9PnRoaXMuaGFuZGxlT25NZXNzYWdlKGUpLHRoaXMucGVlckNvbm5lY3Rpb25Db250cm9sbGVyLmNyZWF0ZU9mZmVyKHRoaXMuc2RwQ29uc3RyYWludHMsdGhpcy5jb25maWcpKX1jaGVja1R1cm5TZXJ2ZXJBdmFpbGFiaWxpdHkoZSl7aWYoIWUuaWNlU2VydmVycylyZXR1cm4gaS5JbmZvKGkuR2V0U3RhY2tUcmFjZSgpLFwiQSB0dXJuIHNldmVyIHdhcyBub3QgZm91bmRcIiksITE7Zm9yKGNvbnN0IHQgb2YgZS5pY2VTZXJ2ZXJzKWZvcihjb25zdCBlIG9mIHQudXJscylpZihlLmluY2x1ZGVzKFwidHVyblwiKSlyZXR1cm4gaS5Mb2coaS5HZXRTdGFja1RyYWNlKCksYEEgdHVybiBzZXZlciB3YXMgZm91bmQgYXQgJHtlfWApLCEwO3JldHVybiBpLkluZm8oaS5HZXRTdGFja1RyYWNlKCksXCJBIHR1cm4gc2V2ZXIgd2FzIG5vdCBmb3VuZFwiKSwhMX1oYW5kbGVPbkNvbmZpZ01lc3NhZ2UoZSl7dGhpcy5yZXNpemVQbGF5ZXJTdHlsZSgpLHRoaXMuc3RhcnRTZXNzaW9uKGUucGVlckNvbm5lY3Rpb25PcHRpb25zKSx0aGlzLndlYlNvY2tldENvbnRyb2xsZXIub25XZWJSdGNBbnN3ZXI9ZT0+dGhpcy5oYW5kbGVXZWJSdGNBbnN3ZXIoZSksdGhpcy53ZWJTb2NrZXRDb250cm9sbGVyLm9uV2ViUnRjT2ZmZXI9ZT0+dGhpcy5oYW5kbGVXZWJSdGNPZmZlcihlKSx0aGlzLndlYlNvY2tldENvbnRyb2xsZXIub25XZWJSdGNQZWVyRGF0YUNoYW5uZWxzPWU9PnRoaXMuaGFuZGxlV2ViUnRjU0ZVUGVlckRhdGFjaGFubmVscyhlKSx0aGlzLndlYlNvY2tldENvbnRyb2xsZXIub25JY2VDYW5kaWRhdGU9ZT0+dGhpcy5oYW5kbGVJY2VDYW5kaWRhdGUoZSl9aGFuZGxlU3RyZWFtZXJMaXN0TWVzc2FnZShlKXtpZihpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxgR290IHN0cmVhbWVyIGxpc3QgJHtlLmlkc31gLDYpLHRoaXMuaXNSZWNvbm5lY3RpbmcpZS5pZHMuaW5jbHVkZXModGhpcy5zdWJzY3JpYmVkU3RyZWFtKT8odGhpcy5pc1JlY29ubmVjdGluZz0hMSx0aGlzLnJlY29ubmVjdEF0dGVtcHQ9MCx0aGlzLndlYlNvY2tldENvbnRyb2xsZXIuc2VuZFN1YnNjcmliZSh0aGlzLnN1YnNjcmliZWRTdHJlYW0pKTp0aGlzLnJlY29ubmVjdEF0dGVtcHQ8dGhpcy5jb25maWcuZ2V0TnVtZXJpY1NldHRpbmdWYWx1ZShvZS5NYXhSZWNvbm5lY3RBdHRlbXB0cyk/KHRoaXMucmVjb25uZWN0QXR0ZW1wdCsrLHNldFRpbWVvdXQoKCgpPT57dGhpcy53ZWJTb2NrZXRDb250cm9sbGVyLnJlcXVlc3RTdHJlYW1lckxpc3QoKX0pLDJlMykpOih0aGlzLnJlY29ubmVjdEF0dGVtcHQ9MCx0aGlzLmlzUmVjb25uZWN0aW5nPSExLHRoaXMuc2hvdWxkUmVjb25uZWN0PSExLHRoaXMud2ViU29ja2V0Q29udHJvbGxlci5jbG9zZSgpLHRoaXMuY29uZmlnLnNldE9wdGlvblNldHRpbmdWYWx1ZShjZS5TdHJlYW1lcklkLFwiXCIpLHRoaXMuY29uZmlnLnNldE9wdGlvblNldHRpbmdPcHRpb25zKGNlLlN0cmVhbWVySWQsW10pKTtlbHNle2NvbnN0IHQ9Wy4uLmUuaWRzXTt0LnVuc2hpZnQoXCJcIiksdGhpcy5jb25maWcuc2V0T3B0aW9uU2V0dGluZ09wdGlvbnMoY2UuU3RyZWFtZXJJZCx0KTtjb25zdCBzPW5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaCk7bGV0IG49bnVsbDsxPT1lLmlkcy5sZW5ndGg/bj1lLmlkc1swXTp0aGlzLmNvbmZpZy5pc0ZsYWdFbmFibGVkKHJlLlByZWZlclNGVSkmJmUuaWRzLmluY2x1ZGVzKFwiU0ZVXCIpP249XCJTRlVcIjpzLmhhcyhjZS5TdHJlYW1lcklkKSYmZS5pZHMuaW5jbHVkZXMocy5nZXQoY2UuU3RyZWFtZXJJZCkpJiYobj1zLmdldChjZS5TdHJlYW1lcklkKSksbnVsbCE9PW4mJnRoaXMuY29uZmlnLnNldE9wdGlvblNldHRpbmdWYWx1ZShjZS5TdHJlYW1lcklkLG4pLHRoaXMucGl4ZWxTdHJlYW1pbmcuZGlzcGF0Y2hFdmVudChuZXcgaih7bWVzc2FnZVN0cmVhbWVyTGlzdDplLGF1dG9TZWxlY3RlZFN0cmVhbWVySWQ6bn0pKX19aGFuZGxlV2ViUnRjQW5zd2VyKGUpe2kuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLGBHb3QgYW5zd2VyIHNkcCAke2Uuc2RwfWAsNik7Y29uc3QgdD17c2RwOmUuc2RwLHR5cGU6XCJhbnN3ZXJcIn07dGhpcy5wZWVyQ29ubmVjdGlvbkNvbnRyb2xsZXIucmVjZWl2ZUFuc3dlcih0KSx0aGlzLmhhbmRsZVBvc3RXZWJydGNOZWdvdGlhdGlvbigpfWhhbmRsZVdlYlJ0Y09mZmVyKGUpe2kuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLGBHb3Qgb2ZmZXIgc2RwICR7ZS5zZHB9YCw2KSx0aGlzLmlzVXNpbmdTRlU9ISFlLnNmdSYmZS5zZnUsdGhpcy5pc1VzaW5nU0ZVJiYodGhpcy5wZWVyQ29ubmVjdGlvbkNvbnRyb2xsZXIucHJlZmVycmVkQ29kZWM9XCJcIik7Y29uc3QgdD17c2RwOmUuc2RwLHR5cGU6XCJvZmZlclwifTt0aGlzLnBlZXJDb25uZWN0aW9uQ29udHJvbGxlci5yZWNlaXZlT2ZmZXIodCx0aGlzLmNvbmZpZyksdGhpcy5oYW5kbGVQb3N0V2VicnRjTmVnb3RpYXRpb24oKX1oYW5kbGVXZWJSdGNTRlVQZWVyRGF0YWNoYW5uZWxzKGUpe2NvbnN0IHQ9e29yZGVyZWQ6ITAsbmVnb3RpYXRlZDohMCxpZDplLnNlbmRTdHJlYW1JZH0scz1lLnNlbmRTdHJlYW1JZCE9ZS5yZWN2U3RyZWFtSWQ7aWYodGhpcy5zZW5kcmVjdkRhdGFDaGFubmVsQ29udHJvbGxlci5jcmVhdGVEYXRhQ2hhbm5lbCh0aGlzLnBlZXJDb25uZWN0aW9uQ29udHJvbGxlci5wZWVyQ29ubmVjdGlvbixzP1wic2VuZC1kYXRhY2hhbm5lbFwiOlwiZGF0YWNoYW5uZWxcIix0KSxzKXtjb25zdCB0PXtvcmRlcmVkOiEwLG5lZ290aWF0ZWQ6ITAsaWQ6ZS5yZWN2U3RyZWFtSWR9O3RoaXMucmVjdkRhdGFDaGFubmVsQ29udHJvbGxlci5jcmVhdGVEYXRhQ2hhbm5lbCh0aGlzLnBlZXJDb25uZWN0aW9uQ29udHJvbGxlci5wZWVyQ29ubmVjdGlvbixcInJlY3YtZGF0YWNoYW5uZWxcIix0KSx0aGlzLnJlY3ZEYXRhQ2hhbm5lbENvbnRyb2xsZXIuaGFuZGxlT25PcGVuPSgpPT50aGlzLndlYlNvY2tldENvbnRyb2xsZXIuc2VuZFNGVVJlY3ZEYXRhQ2hhbm5lbFJlYWR5KCksdGhpcy5yZWN2RGF0YUNoYW5uZWxDb250cm9sbGVyLmhhbmRsZU9uTWVzc2FnZT1lPT50aGlzLmhhbmRsZU9uTWVzc2FnZShlKX1lbHNlIHRoaXMuc2VuZHJlY3ZEYXRhQ2hhbm5lbENvbnRyb2xsZXIuaGFuZGxlT25NZXNzYWdlPWU9PnRoaXMuaGFuZGxlT25NZXNzYWdlKGUpfWhhbmRsZVBvc3RXZWJydGNOZWdvdGlhdGlvbigpe3RoaXMuYWZrQ29udHJvbGxlci5zdGFydEFma1dhcm5pbmdUaW1lcigpLHRoaXMucGl4ZWxTdHJlYW1pbmcuX29uV2ViUnRjU2RwKCksdGhpcy5zdGF0c1RpbWVySGFuZGxlJiZ2b2lkIDAhPT10aGlzLnN0YXRzVGltZXJIYW5kbGUmJndpbmRvdy5jbGVhckludGVydmFsKHRoaXMuc3RhdHNUaW1lckhhbmRsZSksdGhpcy5zdGF0c1RpbWVySGFuZGxlPXdpbmRvdy5zZXRJbnRlcnZhbCgoKCk9PnRoaXMuZ2V0U3RhdHMoKSksMWUzKSx0aGlzLnNldE1vdXNlSW5wdXRFbmFibGVkKHRoaXMuY29uZmlnLmlzRmxhZ0VuYWJsZWQocmUuTW91c2VJbnB1dCkpLHRoaXMuc2V0S2V5Ym9hcmRJbnB1dEVuYWJsZWQodGhpcy5jb25maWcuaXNGbGFnRW5hYmxlZChyZS5LZXlib2FyZElucHV0KSksdGhpcy5zZXRHYW1lUGFkSW5wdXRFbmFibGVkKHRoaXMuY29uZmlnLmlzRmxhZ0VuYWJsZWQocmUuR2FtZXBhZElucHV0KSl9aGFuZGxlSWNlQ2FuZGlkYXRlKGUpe2kuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLFwiV2ViIFJUQyBDb250cm9sbGVyOiBvbldlYlJ0Y0ljZVwiLDYpO2NvbnN0IHQ9bmV3IFJUQ0ljZUNhbmRpZGF0ZShlKTt0aGlzLnBlZXJDb25uZWN0aW9uQ29udHJvbGxlci5oYW5kbGVPbkljZSh0KX1oYW5kbGVTZW5kSWNlQ2FuZGlkYXRlKGUpe2kuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLFwiT25JY2VDYW5kaWRhdGVcIiw2KSxlLmNhbmRpZGF0ZSYmZS5jYW5kaWRhdGUuY2FuZGlkYXRlJiZ0aGlzLndlYlNvY2tldENvbnRyb2xsZXIuc2VuZEljZUNhbmRpZGF0ZShlLmNhbmRpZGF0ZSl9aGFuZGxlRGF0YUNoYW5uZWwoZSl7aS5Mb2coaS5HZXRTdGFja1RyYWNlKCksXCJEYXRhIGNoYW5uZWwgY3JlYXRlZCBmb3IgdXMgYnkgYnJvd3NlciBhcyB3ZSBhcmUgYSByZWNlaXZpbmcgcGVlci5cIiw2KSx0aGlzLnNlbmRyZWN2RGF0YUNoYW5uZWxDb250cm9sbGVyLmRhdGFDaGFubmVsPWUuY2hhbm5lbCx0aGlzLnNlbmRyZWN2RGF0YUNoYW5uZWxDb250cm9sbGVyLnNldHVwRGF0YUNoYW5uZWwoKSx0aGlzLnNlbmRyZWN2RGF0YUNoYW5uZWxDb250cm9sbGVyLmhhbmRsZU9uTWVzc2FnZT1lPT50aGlzLmhhbmRsZU9uTWVzc2FnZShlKX1oYW5kbGVTZW5kV2ViUlRDT2ZmZXIoZSl7aS5Mb2coaS5HZXRTdGFja1RyYWNlKCksXCJTZW5kaW5nIHRoZSBvZmZlciB0byB0aGUgU2VydmVyXCIsNiksdGhpcy53ZWJTb2NrZXRDb250cm9sbGVyLnNlbmRXZWJSdGNPZmZlcihlKX1oYW5kbGVTZW5kV2ViUlRDQW5zd2VyKGUpe2kuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLFwiU2VuZGluZyB0aGUgYW5zd2VyIHRvIHRoZSBTZXJ2ZXJcIiw2KSx0aGlzLndlYlNvY2tldENvbnRyb2xsZXIuc2VuZFdlYlJ0Y0Fuc3dlcihlKSx0aGlzLmlzVXNpbmdTRlUmJnRoaXMud2ViU29ja2V0Q29udHJvbGxlci5zZW5kV2ViUnRjRGF0YWNoYW5uZWxSZXF1ZXN0KCl9c2V0VXBNb3VzZUFuZEZyZWV6ZUZyYW1lKCl7dGhpcy52aWRlb0VsZW1lbnRQYXJlbnRDbGllbnRSZWN0PXRoaXMudmlkZW9QbGF5ZXIuZ2V0VmlkZW9QYXJlbnRFbGVtZW50KCkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksdGhpcy5jb29yZGluYXRlQ29udmVydGVyLnNldHVwTm9ybWFsaXplQW5kUXVhbnRpemUoKSx0aGlzLmZyZWV6ZUZyYW1lQ29udHJvbGxlci5mcmVlemVGcmFtZS5yZXNpemUoKX1jbG9zZVNpZ25hbGluZ1NlcnZlcigpe3ZhciBlO3RoaXMuc2hvdWxkUmVjb25uZWN0PSExLG51bGw9PT0oZT10aGlzLndlYlNvY2tldENvbnRyb2xsZXIpfHx2b2lkIDA9PT1lfHxlLmNsb3NlKCl9Y2xvc2VQZWVyQ29ubmVjdGlvbigpe3ZhciBlO251bGw9PT0oZT10aGlzLnBlZXJDb25uZWN0aW9uQ29udHJvbGxlcil8fHZvaWQgMD09PWV8fGUuY2xvc2UoKX1jbG9zZSgpe3RoaXMuY2xvc2VTaWduYWxpbmdTZXJ2ZXIoKSx0aGlzLmNsb3NlUGVlckNvbm5lY3Rpb24oKX1nZXRTdGF0cygpe3RoaXMucGVlckNvbm5lY3Rpb25Db250cm9sbGVyLmdlbmVyYXRlU3RhdHMoKX1zZW5kTGF0ZW5jeVRlc3QoKXt0aGlzLmxhdGVuY3lTdGFydFRpbWU9RGF0ZS5ub3coKSx0aGlzLnNlbmREZXNjcmlwdG9yQ29udHJvbGxlci5zZW5kTGF0ZW5jeVRlc3Qoe1N0YXJ0VGltZTp0aGlzLmxhdGVuY3lTdGFydFRpbWV9KX1zZW5kRW5jb2Rlck1pblFQKGUpe2kuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLGBNaW5RUD0ke2V9XFxuYCw2KSxudWxsIT1lJiZ0aGlzLnNlbmREZXNjcmlwdG9yQ29udHJvbGxlci5lbWl0Q29tbWFuZCh7XCJFbmNvZGVyLk1pblFQXCI6ZX0pfXNlbmRFbmNvZGVyTWF4UVAoZSl7aS5Mb2coaS5HZXRTdGFja1RyYWNlKCksYE1heFFQPSR7ZX1cXG5gLDYpLG51bGwhPWUmJnRoaXMuc2VuZERlc2NyaXB0b3JDb250cm9sbGVyLmVtaXRDb21tYW5kKHtcIkVuY29kZXIuTWF4UVBcIjplfSl9c2VuZFdlYlJUQ01pbkJpdHJhdGUoZSl7aS5Mb2coaS5HZXRTdGFja1RyYWNlKCksYFdlYlJUQyBNaW4gQml0cmF0ZT0ke2V9YCw2KSxudWxsIT1lJiZ0aGlzLnNlbmREZXNjcmlwdG9yQ29udHJvbGxlci5lbWl0Q29tbWFuZCh7XCJXZWJSVEMuTWluQml0cmF0ZVwiOmV9KX1zZW5kV2ViUlRDTWF4Qml0cmF0ZShlKXtpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxgV2ViUlRDIE1heCBCaXRyYXRlPSR7ZX1gLDYpLG51bGwhPWUmJnRoaXMuc2VuZERlc2NyaXB0b3JDb250cm9sbGVyLmVtaXRDb21tYW5kKHtcIldlYlJUQy5NYXhCaXRyYXRlXCI6ZX0pfXNlbmRXZWJSVENGcHMoZSl7aS5Mb2coaS5HZXRTdGFja1RyYWNlKCksYFdlYlJUQyBGUFM9JHtlfWAsNiksbnVsbCE9ZSYmKHRoaXMuc2VuZERlc2NyaXB0b3JDb250cm9sbGVyLmVtaXRDb21tYW5kKHtcIldlYlJUQy5GcHNcIjplfSksdGhpcy5zZW5kRGVzY3JpcHRvckNvbnRyb2xsZXIuZW1pdENvbW1hbmQoe1wiV2ViUlRDLk1heEZwc1wiOmV9KSl9c2VuZFNob3dGcHMoKXtpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcIi0tLS0gICBTZW5kaW5nIHNob3cgc3RhdCB0byBVRSAgIC0tLS1cIiw2KSx0aGlzLnNlbmREZXNjcmlwdG9yQ29udHJvbGxlci5lbWl0Q29tbWFuZCh7XCJzdGF0LmZwc1wiOlwiXCJ9KX1zZW5kSWZyYW1lUmVxdWVzdCgpe2kuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLFwiLS0tLSAgIFNlbmRpbmcgUmVxdWVzdCBmb3IgYW4gSUZyYW1lICAtLS0tXCIsNiksdGhpcy5zdHJlYW1NZXNzYWdlQ29udHJvbGxlci50b1N0cmVhbWVySGFuZGxlcnMuZ2V0KFwiSUZyYW1lUmVxdWVzdFwiKSgpfWVtaXRVSUludGVyYWN0aW9uKGUpe2kuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLFwiLS0tLSAgIFNlbmRpbmcgY3VzdG9tIFVJSW50ZXJhY3Rpb24gbWVzc2FnZSAgIC0tLS1cIiw2KSx0aGlzLnNlbmREZXNjcmlwdG9yQ29udHJvbGxlci5lbWl0VUlJbnRlcmFjdGlvbihlKX1lbWl0Q29tbWFuZChlKXtpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcIi0tLS0gICBTZW5kaW5nIGN1c3RvbSBDb21tYW5kIG1lc3NhZ2UgICAtLS0tXCIsNiksdGhpcy5zZW5kRGVzY3JpcHRvckNvbnRyb2xsZXIuZW1pdENvbW1hbmQoZSl9ZW1pdENvbnNvbGVDb21tYW5kKGUpe2kuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLFwiLS0tLSAgIFNlbmRpbmcgY3VzdG9tIENvbW1hbmQ6Q29uc29sZUNvbW1hbmQgbWVzc2FnZSAgIC0tLS1cIiw2KSx0aGlzLnNlbmREZXNjcmlwdG9yQ29udHJvbGxlci5lbWl0Q29tbWFuZCh7Q29uc29sZUNvbW1hbmQ6ZX0pfXNlbmRSZXF1ZXN0UXVhbGl0eUNvbnRyb2xPd25lcnNoaXAoKXtpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcIi0tLS0gICBTZW5kaW5nIFJlcXVlc3QgdG8gQ29udHJvbCBRdWFsaXR5ICAtLS0tXCIsNiksdGhpcy50b1N0cmVhbWVyTWVzc2FnZXNDb250cm9sbGVyLlNlbmRSZXF1ZXN0UXVhbGl0eUNvbnRyb2woKX1oYW5kbGVMYXRlbmN5VGVzdFJlc3VsdChlKXtpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcIkRhdGFDaGFubmVsUmVjZWl2ZU1lc3NhZ2VUeXBlLmxhdGVuY3lUZXN0XCIsNik7Y29uc3QgdD1uZXcgVGV4dERlY29kZXIoXCJ1dGYtMTZcIikuZGVjb2RlKGUuc2xpY2UoMSkpLHM9bmV3IEllO09iamVjdC5hc3NpZ24ocyxKU09OLnBhcnNlKHQpKSxzLnByb2Nlc3NGaWVsZHMoKSxzLnRlc3RTdGFydFRpbWVNcz10aGlzLmxhdGVuY3lTdGFydFRpbWUscy5icm93c2VyUmVjZWlwdFRpbWVNcz1EYXRlLm5vdygpLHMubGF0ZW5jeUV4Y2x1ZGluZ0RlY29kZT1+fihzLmJyb3dzZXJSZWNlaXB0VGltZU1zLXMudGVzdFN0YXJ0VGltZU1zKSxzLnRlc3REdXJhdGlvbj1+fihzLlRyYW5zbWlzc2lvblRpbWVNcy1zLlJlY2VpcHRUaW1lTXMpLHMubmV0d29ya0xhdGVuY3k9fn4ocy5sYXRlbmN5RXhjbHVkaW5nRGVjb2RlLXMudGVzdER1cmF0aW9uKSxzLmZyYW1lRGlzcGxheURlbHRhVGltZU1zJiZzLmJyb3dzZXJSZWNlaXB0VGltZU1zJiYocy5lbmRUb0VuZExhdGVuY3k9KHMuZnJhbWVEaXNwbGF5RGVsdGFUaW1lTXMscy5uZXR3b3JrTGF0ZW5jeSx+fitzLkNhcHR1cmVUb1NlbmRNcykpLHRoaXMucGl4ZWxTdHJlYW1pbmcuX29uTGF0ZW5jeVRlc3RSZXN1bHQocyl9aGFuZGxlSW5pdGlhbFNldHRpbmdzKGUpe2kuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLFwiRGF0YUNoYW5uZWxSZWNlaXZlTWVzc2FnZVR5cGUuSW5pdGlhbFNldHRpbmdzXCIsNik7Y29uc3QgdD1uZXcgVGV4dERlY29kZXIoXCJ1dGYtMTZcIikuZGVjb2RlKGUuc2xpY2UoMSkpLHM9SlNPTi5wYXJzZSh0KSxuPW5ldyBGZTtzLkVuY29kZXImJihuLkVuY29kZXJTZXR0aW5ncz1zLkVuY29kZXIpLHMuV2ViUlRDJiYobi5XZWJSVENTZXR0aW5ncz1zLldlYlJUQykscy5QaXhlbFN0cmVhbWluZyYmKG4uUGl4ZWxTdHJlYW1pbmdTZXR0aW5ncz1zLlBpeGVsU3RyZWFtaW5nKSxzLkNvbmZpZ09wdGlvbnMmJnRoaXMuY29uZmlnLnNldEZsYWdFbmFibGVkKHJlLkhvdmVyaW5nTW91c2VNb2RlLCEhcy5Db25maWdPcHRpb25zLkRlZmF1bHRUb0hvdmVyKSxuLnVlQ29tcGF0aWJsZSgpLGkuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLHQsNiksdGhpcy5waXhlbFN0cmVhbWluZy5fb25Jbml0aWFsU2V0dGluZ3Mobil9aGFuZGxlVmlkZW9FbmNvZGVyQXZnUVAoZSl7aS5Mb2coaS5HZXRTdGFja1RyYWNlKCksXCJEYXRhQ2hhbm5lbFJlY2VpdmVNZXNzYWdlVHlwZS5WaWRlb0VuY29kZXJBdmdRUFwiLDYpO2NvbnN0IHQ9TnVtYmVyKG5ldyBUZXh0RGVjb2RlcihcInV0Zi0xNlwiKS5kZWNvZGUoZS5zbGljZSgxKSkpO3RoaXMuc2V0VmlkZW9FbmNvZGVyQXZnUVAodCl9aGFuZGxlVmlkZW9Jbml0aWFsaXplZCgpe3RoaXMucGl4ZWxTdHJlYW1pbmcuX29uVmlkZW9Jbml0aWFsaXplZCgpLHRoaXMuYXV0b1BsYXlWaWRlb09yU2V0VXBQbGF5T3ZlcmxheSgpLHRoaXMucmVzaXplUGxheWVyU3R5bGUoKSx0aGlzLnZpZGVvUGxheWVyLnVwZGF0ZVZpZGVvU3RyZWFtU2l6ZSgpfW9uUXVhbGl0eUNvbnRyb2xPd25lcnNoaXAoZSl7Y29uc3QgdD1uZXcgVWludDhBcnJheShlKTtpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcIkRhdGFDaGFubmVsUmVjZWl2ZU1lc3NhZ2VUeXBlLlF1YWxpdHlDb250cm9sT3duZXJzaGlwXCIsNiksdGhpcy5pc1F1YWxpdHlDb250cm9sbGVyPW5ldyBCb29sZWFuKHRbMV0pLnZhbHVlT2YoKSxpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxgUmVjZWl2ZWQgcXVhbGl0eSBjb250cm9sbGVyIG1lc3NhZ2UsIHdpbGwgY29udHJvbCBxdWFsaXR5OiAke3RoaXMuaXNRdWFsaXR5Q29udHJvbGxlcn1gKSx0aGlzLnBpeGVsU3RyZWFtaW5nLl9vblF1YWxpdHlDb250cm9sT3duZXJzaGlwKHRoaXMuaXNRdWFsaXR5Q29udHJvbGxlcil9aGFuZGxlVmlkZW9TdGF0cyhlKXt0aGlzLnBpeGVsU3RyZWFtaW5nLl9vblZpZGVvU3RhdHMoZSl9cmVzaXplUGxheWVyU3R5bGUoKXt0aGlzLnZpZGVvUGxheWVyLnJlc2l6ZVBsYXllclN0eWxlKCl9Z2V0RGlzY29ubmVjdE1lc3NhZ2VPdmVycmlkZSgpe3JldHVybiB0aGlzLmRpc2Nvbm5lY3RNZXNzYWdlT3ZlcnJpZGV9c2V0RGlzY29ubmVjdE1lc3NhZ2VPdmVycmlkZShlKXt0aGlzLmRpc2Nvbm5lY3RNZXNzYWdlT3ZlcnJpZGU9ZX1zZXRQcmVmZXJyZWRDb2RlYyhlKXt0aGlzLnByZWZlcnJlZENvZGVjPWUsdGhpcy5wZWVyQ29ubmVjdGlvbkNvbnRyb2xsZXImJih0aGlzLnBlZXJDb25uZWN0aW9uQ29udHJvbGxlci5wcmVmZXJyZWRDb2RlYz1lLHRoaXMucGVlckNvbm5lY3Rpb25Db250cm9sbGVyLnVwZGF0ZUNvZGVjU2VsZWN0aW9uPSExKX1zZXRWaWRlb0VuY29kZXJBdmdRUChlKXt0aGlzLnZpZGVvQXZnUXA9ZSx0aGlzLnBpeGVsU3RyZWFtaW5nLl9vblZpZGVvRW5jb2RlckF2Z1FQKHRoaXMudmlkZW9BdmdRcCl9c2V0S2V5Ym9hcmRJbnB1dEVuYWJsZWQoZSl7dmFyIHQ7bnVsbD09PSh0PXRoaXMua2V5Ym9hcmRDb250cm9sbGVyKXx8dm9pZCAwPT09dHx8dC51bnJlZ2lzdGVyS2V5Qm9hcmRFdmVudHMoKSxlJiYodGhpcy5rZXlib2FyZENvbnRyb2xsZXI9dGhpcy5pbnB1dENsYXNzZXNGYWN0b3J5LnJlZ2lzdGVyS2V5Qm9hcmQodGhpcy5jb25maWcpKX1zZXRNb3VzZUlucHV0RW5hYmxlZChlKXt2YXIgdDtpZihudWxsPT09KHQ9dGhpcy5tb3VzZUNvbnRyb2xsZXIpfHx2b2lkIDA9PT10fHx0LnVucmVnaXN0ZXJNb3VzZUV2ZW50cygpLGUpe2NvbnN0IGU9dGhpcy5jb25maWcuaXNGbGFnRW5hYmxlZChyZS5Ib3ZlcmluZ01vdXNlTW9kZSk/dWUuSG92ZXJpbmdNb3VzZTp1ZS5Mb2NrZWRNb3VzZTt0aGlzLm1vdXNlQ29udHJvbGxlcj10aGlzLmlucHV0Q2xhc3Nlc0ZhY3RvcnkucmVnaXN0ZXJNb3VzZShlKX19c2V0VG91Y2hJbnB1dEVuYWJsZWQoZSl7dmFyIHQ7bnVsbD09PSh0PXRoaXMudG91Y2hDb250cm9sbGVyKXx8dm9pZCAwPT09dHx8dC51bnJlZ2lzdGVyVG91Y2hFdmVudHMoKSxlJiYodGhpcy50b3VjaENvbnRyb2xsZXI9dGhpcy5pbnB1dENsYXNzZXNGYWN0b3J5LnJlZ2lzdGVyVG91Y2godGhpcy5jb25maWcuaXNGbGFnRW5hYmxlZChyZS5GYWtlTW91c2VXaXRoVG91Y2hlcyksdGhpcy52aWRlb0VsZW1lbnRQYXJlbnRDbGllbnRSZWN0KSl9c2V0R2FtZVBhZElucHV0RW5hYmxlZChlKXt2YXIgdDtudWxsPT09KHQ9dGhpcy5nYW1lUGFkQ29udHJvbGxlcil8fHZvaWQgMD09PXR8fHQudW5yZWdpc3RlckdhbWVQYWRFdmVudHMoKSxlJiYodGhpcy5nYW1lUGFkQ29udHJvbGxlcj10aGlzLmlucHV0Q2xhc3Nlc0ZhY3RvcnkucmVnaXN0ZXJHYW1lUGFkKCksdGhpcy5nYW1lUGFkQ29udHJvbGxlci5vbkdhbWVwYWRDb25uZWN0ZWQ9KCk9Pnt0aGlzLnN0cmVhbU1lc3NhZ2VDb250cm9sbGVyLnRvU3RyZWFtZXJIYW5kbGVycy5nZXQoXCJHYW1lcGFkQ29ubmVjdGVkXCIpKCl9LHRoaXMuZ2FtZVBhZENvbnRyb2xsZXIub25HYW1lcGFkRGlzY29ubmVjdGVkPWU9Pnt0aGlzLnN0cmVhbU1lc3NhZ2VDb250cm9sbGVyLnRvU3RyZWFtZXJIYW5kbGVycy5nZXQoXCJHYW1lcGFkRGlzY29ubmVjdGVkXCIpKFtlXSl9KX1yZWdpc3RlckRhdGFDaGFubmVsRXZlbnRFbWl0dGVycyhlKXtlLm9uT3Blbj0oZSx0KT0+dGhpcy5waXhlbFN0cmVhbWluZy5kaXNwYXRjaEV2ZW50KG5ldyBCKHtsYWJlbDplLGV2ZW50OnR9KSksZS5vbkNsb3NlPShlLHQpPT50aGlzLnBpeGVsU3RyZWFtaW5nLmRpc3BhdGNoRXZlbnQobmV3IF8oe2xhYmVsOmUsZXZlbnQ6dH0pKSxlLm9uRXJyb3I9KGUsdCk9PnRoaXMucGl4ZWxTdHJlYW1pbmcuZGlzcGF0Y2hFdmVudChuZXcgVyh7bGFiZWw6ZSxldmVudDp0fSkpfX1jbGFzcyBndHtzdGF0aWMgdmVydGV4U2hhZGVyKCl7cmV0dXJuXCJcXG5cXHRcXHRhdHRyaWJ1dGUgdmVjMiBhX3Bvc2l0aW9uO1xcblxcdFxcdGF0dHJpYnV0ZSB2ZWMyIGFfdGV4Q29vcmQ7XFxuXFxuXFx0XFx0Ly8gaW5wdXRcXG5cXHRcXHR1bmlmb3JtIHZlYzIgdV9yZXNvbHV0aW9uO1xcblxcdFxcdHVuaWZvcm0gdmVjNCB1X29mZnNldDtcXG5cXG5cXHRcXHQvL1xcblxcdFxcdHZhcnlpbmcgdmVjMiB2X3RleENvb3JkO1xcblxcblxcdFxcdHZvaWQgbWFpbigpIHtcXG5cXHRcXHQgICAvLyBjb252ZXJ0IHRoZSByZWN0YW5nbGUgZnJvbSBwaXhlbHMgdG8gMC4wIHRvIDEuMFxcblxcdFxcdCAgIHZlYzIgemVyb1RvT25lID0gYV9wb3NpdGlvbiAvIHVfcmVzb2x1dGlvbjtcXG5cXG5cXHRcXHQgICAvLyBjb252ZXJ0IGZyb20gMC0+MSB0byAwLT4yXFxuXFx0XFx0ICAgdmVjMiB6ZXJvVG9Ud28gPSB6ZXJvVG9PbmUgKiAyLjA7XFxuXFxuXFx0XFx0ICAgLy8gY29udmVydCBmcm9tIDAtPjIgdG8gLTEtPisxIChjbGlwc3BhY2UpXFxuXFx0XFx0ICAgdmVjMiBjbGlwU3BhY2UgPSB6ZXJvVG9Ud28gLSAxLjA7XFxuXFxuXFx0XFx0ICAgZ2xfUG9zaXRpb24gPSB2ZWM0KGNsaXBTcGFjZSAqIHZlYzIoMSwgLTEpLCAwLCAxKTtcXG5cXHRcXHQgICAvLyBwYXNzIHRoZSB0ZXhDb29yZCB0byB0aGUgZnJhZ21lbnQgc2hhZGVyXFxuXFx0XFx0ICAgLy8gVGhlIEdQVSB3aWxsIGludGVycG9sYXRlIHRoaXMgdmFsdWUgYmV0d2VlbiBwb2ludHMuXFxuXFx0XFx0ICAgdl90ZXhDb29yZCA9IChhX3RleENvb3JkICogdV9vZmZzZXQueHkpICsgdV9vZmZzZXQuenc7XFxuXFx0XFx0fVxcblxcdFxcdFwifXN0YXRpYyBmcmFnbWVudFNoYWRlcigpe3JldHVyblwiXFxuXFx0XFx0cHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7XFxuXFxuXFx0XFx0Ly8gb3VyIHRleHR1cmVcXG5cXHRcXHR1bmlmb3JtIHNhbXBsZXIyRCB1X2ltYWdlO1xcblxcblxcdFxcdC8vIHRoZSB0ZXhDb29yZHMgcGFzc2VkIGluIGZyb20gdGhlIHZlcnRleCBzaGFkZXIuXFxuXFx0XFx0dmFyeWluZyB2ZWMyIHZfdGV4Q29vcmQ7XFxuXFxuXFx0XFx0dm9pZCBtYWluKCkge1xcblxcdFxcdCAgIGdsX0ZyYWdDb2xvciA9IHRleHR1cmUyRCh1X2ltYWdlLCB2X3RleENvb3JkKTtcXG5cXHRcXHR9XFxuXFx0XFx0XCJ9fWNsYXNzIHV0e3N0YXRpYyBkZWVwQ29weUdhbWVwYWQoZSl7cmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoe2J1dHRvbnM6ZS5idXR0b25zLm1hcCgoZT0+SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh7cHJlc3NlZDplLnByZXNzZWQsdG91Y2hlZDplLnRvdWNoZWR9KSkpKSxheGVzOmUuYXhlc30pKX19Y2xhc3MgbXR7Y29uc3RydWN0b3IoZSl7dGhpcy50b1N0cmVhbWVyTWVzc2FnZXNQcm92aWRlcj1lLHRoaXMuY29udHJvbGxlcnM9W119dXBkYXRlU3RhdHVzKGUsdCxzKXtpZihlLmdhbWVwYWQpe2NvbnN0IG49dC5nZXRQb3NlKGUuZ3JpcFNwYWNlLHMpO2lmKCFuKXJldHVybjtsZXQgcj0wO2UucHJvZmlsZXMuaW5jbHVkZXMoXCJodGMtdml2ZVwiKT9yPTE6ZS5wcm9maWxlcy5pbmNsdWRlcyhcIm9jdWx1cy10b3VjaFwiKSYmKHI9MiksdGhpcy50b1N0cmVhbWVyTWVzc2FnZXNQcm92aWRlci50b1N0cmVhbWVySGFuZGxlcnMuZ2V0KFwiWFJTeXN0ZW1cIikoW3JdKTtsZXQgaT0yO3N3aXRjaChlLmhhbmRlZG5lc3Mpe2Nhc2VcImxlZnRcIjppPTA7YnJlYWs7Y2FzZVwicmlnaHRcIjppPTF9Y29uc3Qgbz1uLnRyYW5zZm9ybS5tYXRyaXgsYT1bXTtmb3IobGV0IGU9MDtlPDE2O2UrKylhW2VdPW5ldyBGbG9hdDMyQXJyYXkoW29bZV1dKVswXTt0aGlzLnRvU3RyZWFtZXJNZXNzYWdlc1Byb3ZpZGVyLnRvU3RyZWFtZXJIYW5kbGVycy5nZXQoXCJYUkNvbnRyb2xsZXJUcmFuc2Zvcm1cIikoW2FbMF0sYVs0XSxhWzhdLGFbMTJdLGFbMV0sYVs1XSxhWzldLGFbMTNdLGFbMl0sYVs2XSxhWzEwXSxhWzE0XSxhWzNdLGFbN10sYVsxMV0sYVsxNV0saV0pLHZvaWQgMD09PXRoaXMuY29udHJvbGxlcnNbaV0mJih0aGlzLmNvbnRyb2xsZXJzW2ldPXtwcmV2U3RhdGU6dm9pZCAwLGN1cnJlbnRTdGF0ZTp2b2lkIDAsaWQ6dm9pZCAwfSx0aGlzLmNvbnRyb2xsZXJzW2ldLnByZXZTdGF0ZT11dC5kZWVwQ29weUdhbWVwYWQoZS5nYW1lcGFkKSksdGhpcy5jb250cm9sbGVyc1tpXS5jdXJyZW50U3RhdGU9dXQuZGVlcENvcHlHYW1lcGFkKGUuZ2FtZXBhZCk7Y29uc3QgbD10aGlzLmNvbnRyb2xsZXJzW2ldLGQ9bC5jdXJyZW50U3RhdGUsYz1sLnByZXZTdGF0ZTtmb3IobGV0IGU9MDtlPGQuYnV0dG9ucy5sZW5ndGg7ZSsrKXtjb25zdCB0PWQuYnV0dG9uc1tlXSxzPWMuYnV0dG9uc1tlXTt0LnByZXNzZWQ/dGhpcy50b1N0cmVhbWVyTWVzc2FnZXNQcm92aWRlci50b1N0cmVhbWVySGFuZGxlcnMuZ2V0KFwiWFJCdXR0b25QcmVzc2VkXCIpKFtpLGUscy5wcmVzc2VkPzE6MF0pOiF0LnByZXNzZWQmJnMucHJlc3NlZCYmdGhpcy50b1N0cmVhbWVyTWVzc2FnZXNQcm92aWRlci50b1N0cmVhbWVySGFuZGxlcnMuZ2V0KFwiWFJCdXR0b25SZWxlYXNlZFwiKShbaSxlLDBdKSx0LnRvdWNoZWQmJiF0LnByZXNzZWQ/dGhpcy50b1N0cmVhbWVyTWVzc2FnZXNQcm92aWRlci50b1N0cmVhbWVySGFuZGxlcnMuZ2V0KFwiWFJCdXR0b25QcmVzc2VkXCIpKFtpLDMscy50b3VjaGVkPzE6MF0pOiF0LnRvdWNoZWQmJnMudG91Y2hlZCYmdGhpcy50b1N0cmVhbWVyTWVzc2FnZXNQcm92aWRlci50b1N0cmVhbWVySGFuZGxlcnMuZ2V0KFwiWFJCdXR0b25SZWxlYXNlZFwiKShbaSwzLDBdKX1mb3IobGV0IGU9MDtlPGQuYXhlcy5sZW5ndGg7ZSsrKXRoaXMudG9TdHJlYW1lck1lc3NhZ2VzUHJvdmlkZXIudG9TdHJlYW1lckhhbmRsZXJzLmdldChcIlhSQW5hbG9nXCIpKFtpLGUsZC5heGVzW2VdXSk7dGhpcy5jb250cm9sbGVyc1tpXS5wcmV2U3RhdGU9ZH19fWNsYXNzIFN0e2NvbnN0cnVjdG9yKGUpe3RoaXMueHJTZXNzaW9uPW51bGwsdGhpcy53ZWJSdGNDb250cm9sbGVyPWUsdGhpcy54ckNvbnRyb2xsZXJzPVtdLHRoaXMueHJHYW1lcGFkQ29udHJvbGxlcj1uZXcgbXQodGhpcy53ZWJSdGNDb250cm9sbGVyLnN0cmVhbU1lc3NhZ2VDb250cm9sbGVyKSx0aGlzLm9uU2Vzc2lvbkVuZGVkPW5ldyBFdmVudFRhcmdldCx0aGlzLm9uU2Vzc2lvblN0YXJ0ZWQ9bmV3IEV2ZW50VGFyZ2V0LHRoaXMub25GcmFtZT1uZXcgRXZlbnRUYXJnZXR9eHJDbGlja2VkKCl7dGhpcy54clNlc3Npb24/dGhpcy54clNlc3Npb24uZW5kKCk6bmF2aWdhdG9yLnhyLnJlcXVlc3RTZXNzaW9uKFwiaW1tZXJzaXZlLXZyXCIpLnRoZW4oKGU9Pnt0aGlzLm9uWHJTZXNzaW9uU3RhcnRlZChlKX0pKX1vblhyU2Vzc2lvbkVuZGVkKCl7aS5Mb2coaS5HZXRTdGFja1RyYWNlKCksXCJYUiBTZXNzaW9uIGVuZGVkXCIpLHRoaXMueHJTZXNzaW9uPW51bGwsdGhpcy5vblNlc3Npb25FbmRlZC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcInhyU2Vzc2lvbkVuZGVkXCIpKX1vblhyU2Vzc2lvblN0YXJ0ZWQoZSl7aS5Mb2coaS5HZXRTdGFja1RyYWNlKCksXCJYUiBTZXNzaW9uIHN0YXJ0ZWRcIiksdGhpcy54clNlc3Npb249ZSx0aGlzLnhyU2Vzc2lvbi5hZGRFdmVudExpc3RlbmVyKFwiZW5kXCIsKCgpPT57dGhpcy5vblhyU2Vzc2lvbkVuZGVkKCl9KSk7Y29uc3QgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO3RoaXMuZ2w9dC5nZXRDb250ZXh0KFwid2ViZ2wyXCIse3hyQ29tcGF0aWJsZTohMH0pLHRoaXMueHJTZXNzaW9uLnVwZGF0ZVJlbmRlclN0YXRlKHtiYXNlTGF5ZXI6bmV3IFhSV2ViR0xMYXllcih0aGlzLnhyU2Vzc2lvbix0aGlzLmdsKX0pO2NvbnN0IHM9dGhpcy5nbC5jcmVhdGVTaGFkZXIodGhpcy5nbC5WRVJURVhfU0hBREVSKTt0aGlzLmdsLnNoYWRlclNvdXJjZShzLGd0LnZlcnRleFNoYWRlcigpKSx0aGlzLmdsLmNvbXBpbGVTaGFkZXIocyk7Y29uc3Qgbj10aGlzLmdsLmNyZWF0ZVNoYWRlcih0aGlzLmdsLkZSQUdNRU5UX1NIQURFUik7dGhpcy5nbC5zaGFkZXJTb3VyY2UobixndC5mcmFnbWVudFNoYWRlcigpKSx0aGlzLmdsLmNvbXBpbGVTaGFkZXIobik7Y29uc3Qgcj10aGlzLmdsLmNyZWF0ZVByb2dyYW0oKTt0aGlzLmdsLmF0dGFjaFNoYWRlcihyLHMpLHRoaXMuZ2wuYXR0YWNoU2hhZGVyKHIsbiksdGhpcy5nbC5saW5rUHJvZ3JhbShyKSx0aGlzLmdsLnVzZVByb2dyYW0ociksdGhpcy5wb3NpdGlvbkxvY2F0aW9uPXRoaXMuZ2wuZ2V0QXR0cmliTG9jYXRpb24ocixcImFfcG9zaXRpb25cIiksdGhpcy50ZXhjb29yZExvY2F0aW9uPXRoaXMuZ2wuZ2V0QXR0cmliTG9jYXRpb24ocixcImFfdGV4Q29vcmRcIiksdGhpcy5wb3NpdGlvbkJ1ZmZlcj10aGlzLmdsLmNyZWF0ZUJ1ZmZlcigpLHRoaXMuZ2wuYmluZEJ1ZmZlcih0aGlzLmdsLkFSUkFZX0JVRkZFUix0aGlzLnBvc2l0aW9uQnVmZmVyKSx0aGlzLmdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KHRoaXMucG9zaXRpb25Mb2NhdGlvbik7Y29uc3Qgbz10aGlzLmdsLmNyZWF0ZVRleHR1cmUoKTt0aGlzLmdsLmJpbmRUZXh0dXJlKHRoaXMuZ2wuVEVYVFVSRV8yRCxvKSx0aGlzLmdsLnRleFBhcmFtZXRlcmkodGhpcy5nbC5URVhUVVJFXzJELHRoaXMuZ2wuVEVYVFVSRV9XUkFQX1MsdGhpcy5nbC5DTEFNUF9UT19FREdFKSx0aGlzLmdsLnRleFBhcmFtZXRlcmkodGhpcy5nbC5URVhUVVJFXzJELHRoaXMuZ2wuVEVYVFVSRV9XUkFQX1QsdGhpcy5nbC5DTEFNUF9UT19FREdFKSx0aGlzLmdsLnRleFBhcmFtZXRlcmkodGhpcy5nbC5URVhUVVJFXzJELHRoaXMuZ2wuVEVYVFVSRV9NSU5fRklMVEVSLHRoaXMuZ2wuTkVBUkVTVCksdGhpcy5nbC50ZXhQYXJhbWV0ZXJpKHRoaXMuZ2wuVEVYVFVSRV8yRCx0aGlzLmdsLlRFWFRVUkVfTUFHX0ZJTFRFUix0aGlzLmdsLk5FQVJFU1QpLHRoaXMudGV4Y29vcmRCdWZmZXI9dGhpcy5nbC5jcmVhdGVCdWZmZXIoKSx0aGlzLnJlc29sdXRpb25Mb2NhdGlvbj10aGlzLmdsLmdldFVuaWZvcm1Mb2NhdGlvbihyLFwidV9yZXNvbHV0aW9uXCIpLHRoaXMub2Zmc2V0TG9jYXRpb249dGhpcy5nbC5nZXRVbmlmb3JtTG9jYXRpb24ocixcInVfb2Zmc2V0XCIpLGUucmVxdWVzdFJlZmVyZW5jZVNwYWNlKFwibG9jYWxcIikudGhlbigoZT0+e3RoaXMueHJSZWZTcGFjZT1lLHRoaXMueHJTZXNzaW9uLnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKGUsdCk9PnRoaXMub25YckZyYW1lKGUsdCkpKX0pKSx0aGlzLm9uU2Vzc2lvblN0YXJ0ZWQuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJ4clNlc3Npb25TdGFydGVkXCIpKX1vblhyRnJhbWUoZSx0KXtjb25zdCBzPXQuZ2V0Vmlld2VyUG9zZSh0aGlzLnhyUmVmU3BhY2UpO2lmKHMpe2NvbnN0IGU9cy50cmFuc2Zvcm0ubWF0cml4LHQ9W107Zm9yKGxldCBzPTA7czwxNjtzKyspdFtzXT1uZXcgRmxvYXQzMkFycmF5KFtlW3NdXSlbMF07dGhpcy53ZWJSdGNDb250cm9sbGVyLnN0cmVhbU1lc3NhZ2VDb250cm9sbGVyLnRvU3RyZWFtZXJIYW5kbGVycy5nZXQoXCJYUkhNRFRyYW5zZm9ybVwiKShbdFswXSx0WzRdLHRbOF0sdFsxMl0sdFsxXSx0WzVdLHRbOV0sdFsxM10sdFsyXSx0WzZdLHRbMTBdLHRbMTRdLHRbM10sdFs3XSx0WzExXSx0WzE1XV0pO2NvbnN0IG49dGhpcy54clNlc3Npb24ucmVuZGVyU3RhdGUuYmFzZUxheWVyO3RoaXMuZ2wuYmluZEZyYW1lYnVmZmVyKHRoaXMuZ2wuRlJBTUVCVUZGRVIsbi5mcmFtZWJ1ZmZlciksdGhpcy5nbC50ZXhJbWFnZTJEKHRoaXMuZ2wuVEVYVFVSRV8yRCwwLHRoaXMuZ2wuUkdCQSx0aGlzLmdsLlJHQkEsdGhpcy5nbC5VTlNJR05FRF9CWVRFLHRoaXMud2ViUnRjQ29udHJvbGxlci52aWRlb1BsYXllci5nZXRWaWRlb0VsZW1lbnQoKSksdGhpcy5yZW5kZXIodGhpcy53ZWJSdGNDb250cm9sbGVyLnZpZGVvUGxheWVyLmdldFZpZGVvRWxlbWVudCgpKX10aGlzLndlYlJ0Y0NvbnRyb2xsZXIuY29uZmlnLmlzRmxhZ0VuYWJsZWQocmUuWFJDb250cm9sbGVySW5wdXQpJiZ0aGlzLnhyU2Vzc2lvbi5pbnB1dFNvdXJjZXMuZm9yRWFjaCgoKGUscyxuKT0+e3RoaXMueHJHYW1lcGFkQ29udHJvbGxlci51cGRhdGVTdGF0dXMoZSx0LHRoaXMueHJSZWZTcGFjZSl9KSx0aGlzKSx0aGlzLnhyU2Vzc2lvbi5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKChlLHQpPT50aGlzLm9uWHJGcmFtZShlLHQpKSksdGhpcy5vbkZyYW1lLmRpc3BhdGNoRXZlbnQobmV3IHNlKHt0aW1lOmUsZnJhbWU6dH0pKX1yZW5kZXIoZSl7aWYoIXRoaXMuZ2wpcmV0dXJuO2NvbnN0IHQ9dGhpcy54clNlc3Npb24ucmVuZGVyU3RhdGUuYmFzZUxheWVyO2xldCBzLG4scixpLG87dGhpcy5nbC52aWV3cG9ydCgwLDAsdC5mcmFtZWJ1ZmZlcldpZHRoLHQuZnJhbWVidWZmZXJIZWlnaHQpLHRoaXMuZ2wudW5pZm9ybTRmKHRoaXMub2Zmc2V0TG9jYXRpb24sMSwxLDAsMCksdGhpcy5nbC5idWZmZXJEYXRhKHRoaXMuZ2wuQVJSQVlfQlVGRkVSLG5ldyBGbG9hdDMyQXJyYXkoWzAsMCxlLnZpZGVvV2lkdGgsMCwwLGUudmlkZW9IZWlnaHQsMCxlLnZpZGVvSGVpZ2h0LGUudmlkZW9XaWR0aCwwLGUudmlkZW9XaWR0aCxlLnZpZGVvSGVpZ2h0XSksdGhpcy5nbC5TVEFUSUNfRFJBVyksdGhpcy5nbC5iaW5kQnVmZmVyKHRoaXMuZ2wuQVJSQVlfQlVGRkVSLHRoaXMudGV4Y29vcmRCdWZmZXIpLHRoaXMuZ2wuYnVmZmVyRGF0YSh0aGlzLmdsLkFSUkFZX0JVRkZFUixuZXcgRmxvYXQzMkFycmF5KFswLDAsMSwwLDAsMSwwLDEsMSwwLDEsMV0pLHRoaXMuZ2wuU1RBVElDX0RSQVcpLHRoaXMuZ2wuYmluZEJ1ZmZlcih0aGlzLmdsLkFSUkFZX0JVRkZFUix0aGlzLnBvc2l0aW9uQnVmZmVyKSxzPTIsbj10aGlzLmdsLkZMT0FULHI9ITEsaT0wLG89MCx0aGlzLmdsLnZlcnRleEF0dHJpYlBvaW50ZXIodGhpcy5wb3NpdGlvbkxvY2F0aW9uLHMsbixyLGksbyksdGhpcy5nbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheSh0aGlzLnRleGNvb3JkTG9jYXRpb24pLHRoaXMuZ2wuYmluZEJ1ZmZlcih0aGlzLmdsLkFSUkFZX0JVRkZFUix0aGlzLnRleGNvb3JkQnVmZmVyKSxzPTIsbj10aGlzLmdsLkZMT0FULHI9ITEsaT0wLG89MCx0aGlzLmdsLnZlcnRleEF0dHJpYlBvaW50ZXIodGhpcy50ZXhjb29yZExvY2F0aW9uLHMsbixyLGksbyksdGhpcy5nbC51bmlmb3JtMmYodGhpcy5yZXNvbHV0aW9uTG9jYXRpb24sZS52aWRlb1dpZHRoLGUudmlkZW9IZWlnaHQpO2NvbnN0IGE9dGhpcy5nbC5UUklBTkdMRVM7bz0wLHRoaXMuZ2wuZHJhd0FycmF5cyhhLG8sNil9c3RhdGljIGlzU2Vzc2lvblN1cHBvcnRlZChlKXtyZXR1cm4gbmF2aWdhdG9yLnhyP25hdmlnYXRvci54ci5pc1Nlc3Npb25TdXBwb3J0ZWQoZSk6bmV3IFByb21pc2UoKCgpPT4hMSkpfX1jbGFzcyBwdHtjb25zdHJ1Y3RvcihlKXt0aGlzLmVkaXRUZXh0QnV0dG9uPW51bGwsdGhpcy5oaWRkZW5JbnB1dD1udWxsLFwib250b3VjaHN0YXJ0XCJpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQmJnRoaXMuY3JlYXRlT25TY3JlZW5LZXlib2FyZEhlbHBlcnMoZSl9dW5xdWFudGl6ZUFuZERlbm9ybWFsaXplVW5zaWduZWQoZSx0KXtyZXR1cm4gbnVsbH1jcmVhdGVPblNjcmVlbktleWJvYXJkSGVscGVycyhlKXt0aGlzLmhpZGRlbklucHV0fHwodGhpcy5oaWRkZW5JbnB1dD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiksdGhpcy5oaWRkZW5JbnB1dC5pZD1cImhpZGRlbklucHV0XCIsdGhpcy5oaWRkZW5JbnB1dC5tYXhMZW5ndGg9MCxlLmFwcGVuZENoaWxkKHRoaXMuaGlkZGVuSW5wdXQpKSx0aGlzLmVkaXRUZXh0QnV0dG9ufHwodGhpcy5lZGl0VGV4dEJ1dHRvbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpLHRoaXMuZWRpdFRleHRCdXR0b24uaWQ9XCJlZGl0VGV4dEJ1dHRvblwiLHRoaXMuZWRpdFRleHRCdXR0b24uaW5uZXJIVE1MPVwiZWRpdCB0ZXh0XCIsZS5hcHBlbmRDaGlsZCh0aGlzLmVkaXRUZXh0QnV0dG9uKSx0aGlzLmVkaXRUZXh0QnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5TdGF0ZVwiKSx0aGlzLmVkaXRUZXh0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLChlPT57dGhpcy5oaWRkZW5JbnB1dC5mb2N1cygpLGUucHJldmVudERlZmF1bHQoKX0pKSl9c2hvd09uU2NyZWVuS2V5Ym9hcmQoZSl7aWYoZS5zaG93T25TY3JlZW5LZXlib2FyZCl7dGhpcy5lZGl0VGV4dEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuU3RhdGVcIik7Y29uc3QgdD10aGlzLnVucXVhbnRpemVBbmREZW5vcm1hbGl6ZVVuc2lnbmVkKGUueCxlLnkpO3RoaXMuZWRpdFRleHRCdXR0b24uc3R5bGUudG9wPXQueS50b1N0cmluZygpK1wicHhcIix0aGlzLmVkaXRUZXh0QnV0dG9uLnN0eWxlLmxlZnQ9KHQueC00MCkudG9TdHJpbmcoKStcInB4XCJ9ZWxzZSB0aGlzLmVkaXRUZXh0QnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5TdGF0ZVwiKSx0aGlzLmhpZGRlbklucHV0LmJsdXIoKX19Y2xhc3MgdnR7Y29uc3RydWN0b3IoZSx0KXt0aGlzLl9zaG93QWN0aW9uT3JFcnJvck9uRGlzY29ubmVjdD0hMCx0aGlzLmFsbG93Q29uc29sZUNvbW1hbmRzPSExLHRoaXMuY29uZmlnPWUsKG51bGw9PXQ/dm9pZCAwOnQudmlkZW9FbGVtZW50UGFyZW50KSYmKHRoaXMuX3ZpZGVvRWxlbWVudFBhcmVudD10LnZpZGVvRWxlbWVudFBhcmVudCksdGhpcy5fZXZlbnRFbWl0dGVyPW5ldyBuZSx0aGlzLmNvbmZpZ3VyZVNldHRpbmdzKCksdGhpcy5zZXRXZWJSdGNQbGF5ZXJDb250cm9sbGVyKG5ldyBodCh0aGlzLmNvbmZpZyx0aGlzKSksdGhpcy5vblNjcmVlbktleWJvYXJkSGVscGVyPW5ldyBwdCh0aGlzLnZpZGVvRWxlbWVudFBhcmVudCksdGhpcy5vblNjcmVlbktleWJvYXJkSGVscGVyLnVucXVhbnRpemVBbmREZW5vcm1hbGl6ZVVuc2lnbmVkPShlLHQpPT50aGlzLl93ZWJSdGNDb250cm9sbGVyLnJlcXVlc3RVbnF1YW50aXplZEFuZERlbm9ybWFsaXplVW5zaWduZWQoZSx0KSx0aGlzLl9hY3RpdmF0ZU9uU2NyZWVuS2V5Ym9hcmQ9ZT0+dGhpcy5vblNjcmVlbktleWJvYXJkSGVscGVyLnNob3dPblNjcmVlbktleWJvYXJkKGUpLHRoaXMuX3dlYlhyQ29udHJvbGxlcj1uZXcgU3QodGhpcy5fd2ViUnRjQ29udHJvbGxlcil9Z2V0IHZpZGVvRWxlbWVudFBhcmVudCgpe3JldHVybiB0aGlzLl92aWRlb0VsZW1lbnRQYXJlbnR8fCh0aGlzLl92aWRlb0VsZW1lbnRQYXJlbnQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSx0aGlzLl92aWRlb0VsZW1lbnRQYXJlbnQuaWQ9XCJ2aWRlb0VsZW1lbnRQYXJlbnRcIiksdGhpcy5fdmlkZW9FbGVtZW50UGFyZW50fWNvbmZpZ3VyZVNldHRpbmdzKCl7dGhpcy5jb25maWcuX2FkZE9uU2V0dGluZ0NoYW5nZWRMaXN0ZW5lcihyZS5Jc1F1YWxpdHlDb250cm9sbGVyLChlPT57ITAhPT1lfHx0aGlzLl93ZWJSdGNDb250cm9sbGVyLmlzUXVhbGl0eUNvbnRyb2xsZXJ8fHRoaXMuX3dlYlJ0Y0NvbnRyb2xsZXIuc2VuZFJlcXVlc3RRdWFsaXR5Q29udHJvbE93bmVyc2hpcCgpfSkpLHRoaXMuY29uZmlnLl9hZGRPblNldHRpbmdDaGFuZ2VkTGlzdGVuZXIocmUuQUZLRGV0ZWN0aW9uLChlPT57dGhpcy5fd2ViUnRjQ29udHJvbGxlci5zZXRBZmtFbmFibGVkKGUpfSkpLHRoaXMuY29uZmlnLl9hZGRPblNldHRpbmdDaGFuZ2VkTGlzdGVuZXIocmUuTWF0Y2hWaWV3cG9ydFJlc29sdXRpb24sKCgpPT57dGhpcy5fd2ViUnRjQ29udHJvbGxlci52aWRlb1BsYXllci51cGRhdGVWaWRlb1N0cmVhbVNpemUoKX0pKSx0aGlzLmNvbmZpZy5fYWRkT25TZXR0aW5nQ2hhbmdlZExpc3RlbmVyKHJlLkhvdmVyaW5nTW91c2VNb2RlLChlPT57dGhpcy5jb25maWcuc2V0RmxhZ0xhYmVsKHJlLkhvdmVyaW5nTW91c2VNb2RlLGBDb250cm9sIFNjaGVtZTogJHtlP1wiSG92ZXJpbmdcIjpcIkxvY2tlZFwifSBNb3VzZWApLHRoaXMuX3dlYlJ0Y0NvbnRyb2xsZXIuc2V0TW91c2VJbnB1dEVuYWJsZWQodGhpcy5jb25maWcuaXNGbGFnRW5hYmxlZChyZS5Nb3VzZUlucHV0KSl9KSksdGhpcy5jb25maWcuX2FkZE9uU2V0dGluZ0NoYW5nZWRMaXN0ZW5lcihyZS5LZXlib2FyZElucHV0LChlPT57dGhpcy5fd2ViUnRjQ29udHJvbGxlci5zZXRLZXlib2FyZElucHV0RW5hYmxlZChlKX0pKSx0aGlzLmNvbmZpZy5fYWRkT25TZXR0aW5nQ2hhbmdlZExpc3RlbmVyKHJlLk1vdXNlSW5wdXQsKGU9Pnt0aGlzLl93ZWJSdGNDb250cm9sbGVyLnNldE1vdXNlSW5wdXRFbmFibGVkKGUpfSkpLHRoaXMuY29uZmlnLl9hZGRPblNldHRpbmdDaGFuZ2VkTGlzdGVuZXIocmUuVG91Y2hJbnB1dCwoZT0+e3RoaXMuX3dlYlJ0Y0NvbnRyb2xsZXIuc2V0VG91Y2hJbnB1dEVuYWJsZWQoZSl9KSksdGhpcy5jb25maWcuX2FkZE9uU2V0dGluZ0NoYW5nZWRMaXN0ZW5lcihyZS5HYW1lcGFkSW5wdXQsKGU9Pnt0aGlzLl93ZWJSdGNDb250cm9sbGVyLnNldEdhbWVQYWRJbnB1dEVuYWJsZWQoZSl9KSksdGhpcy5jb25maWcuX2FkZE9uTnVtZXJpY1NldHRpbmdDaGFuZ2VkTGlzdGVuZXIob2UuTWluUVAsKGU9PntpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcIi0tLS0tLS0tICBTZW5kaW5nIE1pblFQICAtLS0tLS0tLVwiLDcpLHRoaXMuX3dlYlJ0Y0NvbnRyb2xsZXIuc2VuZEVuY29kZXJNaW5RUChlKSxpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcIi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cIiw3KX0pKSx0aGlzLmNvbmZpZy5fYWRkT25OdW1lcmljU2V0dGluZ0NoYW5nZWRMaXN0ZW5lcihvZS5NYXhRUCwoZT0+e2kuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLFwiLS0tLS0tLS0gIFNlbmRpbmcgZW5jb2RlciBzZXR0aW5ncyAgLS0tLS0tLS1cIiw3KSx0aGlzLl93ZWJSdGNDb250cm9sbGVyLnNlbmRFbmNvZGVyTWF4UVAoZSksaS5Mb2coaS5HZXRTdGFja1RyYWNlKCksXCItLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXCIsNyl9KSksdGhpcy5jb25maWcuX2FkZE9uTnVtZXJpY1NldHRpbmdDaGFuZ2VkTGlzdGVuZXIob2UuV2ViUlRDTWluQml0cmF0ZSwoZT0+e2kuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLFwiLS0tLS0tLS0gIFNlbmRpbmcgd2ViIHJ0YyBzZXR0aW5ncyAgLS0tLS0tLS1cIiw3KSx0aGlzLl93ZWJSdGNDb250cm9sbGVyLnNlbmRXZWJSVENNaW5CaXRyYXRlKDFlMyplKSxpLkxvZyhpLkdldFN0YWNrVHJhY2UoKSxcIi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cIiw3KX0pKSx0aGlzLmNvbmZpZy5fYWRkT25OdW1lcmljU2V0dGluZ0NoYW5nZWRMaXN0ZW5lcihvZS5XZWJSVENNYXhCaXRyYXRlLChlPT57aS5Mb2coaS5HZXRTdGFja1RyYWNlKCksXCItLS0tLS0tLSAgU2VuZGluZyB3ZWIgcnRjIHNldHRpbmdzICAtLS0tLS0tLVwiLDcpLHRoaXMuX3dlYlJ0Y0NvbnRyb2xsZXIuc2VuZFdlYlJUQ01heEJpdHJhdGUoMWUzKmUpLGkuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLFwiLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVwiLDcpfSkpLHRoaXMuY29uZmlnLl9hZGRPbk51bWVyaWNTZXR0aW5nQ2hhbmdlZExpc3RlbmVyKG9lLldlYlJUQ0ZQUywoZT0+e2kuTG9nKGkuR2V0U3RhY2tUcmFjZSgpLFwiLS0tLS0tLS0gIFNlbmRpbmcgd2ViIHJ0YyBzZXR0aW5ncyAgLS0tLS0tLS1cIiw3KSx0aGlzLl93ZWJSdGNDb250cm9sbGVyLnNlbmRXZWJSVENGcHMoZSksaS5Mb2coaS5HZXRTdGFja1RyYWNlKCksXCItLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXCIsNyl9KSksdGhpcy5jb25maWcuX2FkZE9uT3B0aW9uU2V0dGluZ0NoYW5nZWRMaXN0ZW5lcihjZS5QcmVmZXJyZWRDb2RlYywoZT0+e3RoaXMuX3dlYlJ0Y0NvbnRyb2xsZXImJnRoaXMuX3dlYlJ0Y0NvbnRyb2xsZXIuc2V0UHJlZmVycmVkQ29kZWMoZSl9KSksdGhpcy5jb25maWcuX3JlZ2lzdGVyT25DaGFuZ2VFdmVudHModGhpcy5fZXZlbnRFbWl0dGVyKX1fYWN0aXZhdGVPblNjcmVlbktleWJvYXJkKGUpe3Rocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpfV9vbklucHV0Q29udHJvbE93bmVyc2hpcChlKXt0aGlzLl9pbnB1dENvbnRyb2xsZXI9ZX1zZXRXZWJSdGNQbGF5ZXJDb250cm9sbGVyKGUpe3RoaXMuX3dlYlJ0Y0NvbnRyb2xsZXI9ZSx0aGlzLl93ZWJSdGNDb250cm9sbGVyLnNldFByZWZlcnJlZENvZGVjKHRoaXMuY29uZmlnLmdldFNldHRpbmdPcHRpb24oY2UuUHJlZmVycmVkQ29kZWMpLnNlbGVjdGVkKSx0aGlzLl93ZWJSdGNDb250cm9sbGVyLnJlc2l6ZVBsYXllclN0eWxlKCksdGhpcy5jaGVja0ZvckF1dG9Db25uZWN0KCl9Y29ubmVjdCgpe3RoaXMuX3dlYlJ0Y0NvbnRyb2xsZXIuY29ubmVjdFRvU2lnbmFsbGluZ1NlcnZlcigpfXJlY29ubmVjdCgpe3RoaXMuX3dlYlJ0Y0NvbnRyb2xsZXIucmVzdGFydFN0cmVhbUF1dG9tYXRpY2FsbHkoKX1kaXNjb25uZWN0KCl7dGhpcy5fd2ViUnRjQ29udHJvbGxlci5jbG9zZSgpfXBsYXkoKXt0aGlzLl9vblN0cmVhbUxvYWRpbmcoKSx0aGlzLl93ZWJSdGNDb250cm9sbGVyLnBsYXlTdHJlYW0oKX1jaGVja0ZvckF1dG9Db25uZWN0KCl7dGhpcy5jb25maWcuaXNGbGFnRW5hYmxlZChyZS5BdXRvQ29ubmVjdCkmJih0aGlzLl9vbldlYlJ0Y0F1dG9Db25uZWN0KCksdGhpcy5fd2ViUnRjQ29udHJvbGxlci5jb25uZWN0VG9TaWduYWxsaW5nU2VydmVyKCkpfV9vbldlYlJ0Y0F1dG9Db25uZWN0KCl7dGhpcy5fZXZlbnRFbWl0dGVyLmRpc3BhdGNoRXZlbnQobmV3IE8pLHRoaXMuX3Nob3dBY3Rpb25PckVycm9yT25EaXNjb25uZWN0PSEwfV9vbldlYlJ0Y1NkcCgpe3RoaXMuX2V2ZW50RW1pdHRlci5kaXNwYXRjaEV2ZW50KG5ldyBEKX1fb25TdHJlYW1Mb2FkaW5nKCl7dGhpcy5fZXZlbnRFbWl0dGVyLmRpc3BhdGNoRXZlbnQobmV3IFYpfV9vbkRpc2Nvbm5lY3QoZSl7XCJcIiE9dGhpcy5fd2ViUnRjQ29udHJvbGxlci5nZXREaXNjb25uZWN0TWVzc2FnZU92ZXJyaWRlKCkmJnZvaWQgMCE9PXRoaXMuX3dlYlJ0Y0NvbnRyb2xsZXIuZ2V0RGlzY29ubmVjdE1lc3NhZ2VPdmVycmlkZSgpJiZudWxsIT10aGlzLl93ZWJSdGNDb250cm9sbGVyLmdldERpc2Nvbm5lY3RNZXNzYWdlT3ZlcnJpZGUoKSYmKGU9dGhpcy5fd2ViUnRjQ29udHJvbGxlci5nZXREaXNjb25uZWN0TWVzc2FnZU92ZXJyaWRlKCksdGhpcy5fd2ViUnRjQ29udHJvbGxlci5zZXREaXNjb25uZWN0TWVzc2FnZU92ZXJyaWRlKFwiXCIpKSx0aGlzLl9ldmVudEVtaXR0ZXIuZGlzcGF0Y2hFdmVudChuZXcgeih7ZXZlbnRTdHJpbmc6ZSxzaG93QWN0aW9uT3JFcnJvck9uRGlzY29ubmVjdDp0aGlzLl9zaG93QWN0aW9uT3JFcnJvck9uRGlzY29ubmVjdH0pKSwwPT10aGlzLl9zaG93QWN0aW9uT3JFcnJvck9uRGlzY29ubmVjdCYmKHRoaXMuX3Nob3dBY3Rpb25PckVycm9yT25EaXNjb25uZWN0PSEwKX1fb25XZWJSdGNDb25uZWN0aW5nKCl7dGhpcy5fZXZlbnRFbWl0dGVyLmRpc3BhdGNoRXZlbnQobmV3IFUpfV9vbldlYlJ0Y0Nvbm5lY3RlZCgpe3RoaXMuX2V2ZW50RW1pdHRlci5kaXNwYXRjaEV2ZW50KG5ldyBJKX1fb25XZWJSdGNGYWlsZWQoKXt0aGlzLl9ldmVudEVtaXR0ZXIuZGlzcGF0Y2hFdmVudChuZXcgRyl9X29uVmlkZW9Jbml0aWFsaXplZCgpe3RoaXMuX2V2ZW50RW1pdHRlci5kaXNwYXRjaEV2ZW50KG5ldyBIKSx0aGlzLl92aWRlb1N0YXJ0VGltZT1EYXRlLm5vdygpfV9vbkxhdGVuY3lUZXN0UmVzdWx0KGUpe3RoaXMuX2V2ZW50RW1pdHRlci5kaXNwYXRjaEV2ZW50KG5ldyBZKHtsYXRlbmN5VGltaW5nczplfSkpfV9vblZpZGVvU3RhdHMoZSl7dGhpcy5fdmlkZW9TdGFydFRpbWUmJnZvaWQgMCE9PXRoaXMuX3ZpZGVvU3RhcnRUaW1lfHwodGhpcy5fdmlkZW9TdGFydFRpbWU9RGF0ZS5ub3coKSksZS5oYW5kbGVTZXNzaW9uU3RhdGlzdGljcyh0aGlzLl92aWRlb1N0YXJ0VGltZSx0aGlzLl9pbnB1dENvbnRyb2xsZXIsdGhpcy5fd2ViUnRjQ29udHJvbGxlci52aWRlb0F2Z1FwKSx0aGlzLl9ldmVudEVtaXR0ZXIuZGlzcGF0Y2hFdmVudChuZXcgWCh7YWdncmVnYXRlZFN0YXRzOmV9KSl9X29uVmlkZW9FbmNvZGVyQXZnUVAoZSl7dGhpcy5fZXZlbnRFbWl0dGVyLmRpc3BhdGNoRXZlbnQobmV3IEYoe2F2Z1FQOmV9KSl9X29uSW5pdGlhbFNldHRpbmdzKGUpe3ZhciB0O3RoaXMuX2V2ZW50RW1pdHRlci5kaXNwYXRjaEV2ZW50KG5ldyBKKHtzZXR0aW5nczplfSkpLGUuUGl4ZWxTdHJlYW1pbmdTZXR0aW5ncyYmKHRoaXMuYWxsb3dDb25zb2xlQ29tbWFuZHM9bnVsbCE9PSh0PWUuUGl4ZWxTdHJlYW1pbmdTZXR0aW5ncy5BbGxvd1BpeGVsU3RyZWFtaW5nQ29tbWFuZHMpJiZ2b2lkIDAhPT10JiZ0LCExPT09dGhpcy5hbGxvd0NvbnNvbGVDb21tYW5kcyYmaS5JbmZvKGkuR2V0U3RhY2tUcmFjZSgpLFwiLUFsbG93UGl4ZWxTdHJlYW1pbmdDb21tYW5kcz1mYWxzZSwgc2VuZGluZyBhcmJpdHJhcnkgY29uc29sZSBjb21tYW5kcyBmcm9tIGJyb3dzZXIgdG8gVUUgaXMgZGlzYWJsZWQuXCIpKTtjb25zdCBzPXRoaXMuY29uZmlnLnVzZVVybFBhcmFtcyxuPW5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaCk7ZS5FbmNvZGVyU2V0dGluZ3MmJih0aGlzLmNvbmZpZy5zZXROdW1lcmljU2V0dGluZyhvZS5NaW5RUCxzJiZuLmhhcyhvZS5NaW5RUCk/TnVtYmVyLnBhcnNlSW50KG4uZ2V0KG9lLk1pblFQKSk6ZS5FbmNvZGVyU2V0dGluZ3MuTWluUVApLHRoaXMuY29uZmlnLnNldE51bWVyaWNTZXR0aW5nKG9lLk1heFFQLHMmJm4uaGFzKG9lLk1heFFQKT9OdW1iZXIucGFyc2VJbnQobi5nZXQob2UuTWF4UVApKTplLkVuY29kZXJTZXR0aW5ncy5NYXhRUCkpLGUuV2ViUlRDU2V0dGluZ3MmJih0aGlzLmNvbmZpZy5zZXROdW1lcmljU2V0dGluZyhvZS5XZWJSVENNaW5CaXRyYXRlLHMmJm4uaGFzKG9lLldlYlJUQ01pbkJpdHJhdGUpP051bWJlci5wYXJzZUludChuLmdldChvZS5XZWJSVENNaW5CaXRyYXRlKSkvMWUzOmUuV2ViUlRDU2V0dGluZ3MuTWluQml0cmF0ZS8xZTMpLHRoaXMuY29uZmlnLnNldE51bWVyaWNTZXR0aW5nKG9lLldlYlJUQ01heEJpdHJhdGUscyYmbi5oYXMob2UuV2ViUlRDTWF4Qml0cmF0ZSk/TnVtYmVyLnBhcnNlSW50KG4uZ2V0KG9lLldlYlJUQ01heEJpdHJhdGUpKS8xZTM6ZS5XZWJSVENTZXR0aW5ncy5NYXhCaXRyYXRlLzFlMyksdGhpcy5jb25maWcuc2V0TnVtZXJpY1NldHRpbmcob2UuV2ViUlRDRlBTLHMmJm4uaGFzKG9lLldlYlJUQ0ZQUyk/TnVtYmVyLnBhcnNlSW50KG4uZ2V0KG9lLldlYlJUQ0ZQUykpOmUuV2ViUlRDU2V0dGluZ3MuRlBTKSl9X29uUXVhbGl0eUNvbnRyb2xPd25lcnNoaXAoZSl7dGhpcy5jb25maWcuc2V0RmxhZ0VuYWJsZWQocmUuSXNRdWFsaXR5Q29udHJvbGxlcixlKX1yZXF1ZXN0TGF0ZW5jeVRlc3QoKXtyZXR1cm4hIXRoaXMuX3dlYlJ0Y0NvbnRyb2xsZXIudmlkZW9QbGF5ZXIuaXNWaWRlb1JlYWR5KCkmJih0aGlzLl93ZWJSdGNDb250cm9sbGVyLnNlbmRMYXRlbmN5VGVzdCgpLCEwKX1yZXF1ZXN0U2hvd0Zwcygpe3JldHVybiEhdGhpcy5fd2ViUnRjQ29udHJvbGxlci52aWRlb1BsYXllci5pc1ZpZGVvUmVhZHkoKSYmKHRoaXMuX3dlYlJ0Y0NvbnRyb2xsZXIuc2VuZFNob3dGcHMoKSwhMCl9cmVxdWVzdElmcmFtZSgpe3JldHVybiEhdGhpcy5fd2ViUnRjQ29udHJvbGxlci52aWRlb1BsYXllci5pc1ZpZGVvUmVhZHkoKSYmKHRoaXMuX3dlYlJ0Y0NvbnRyb2xsZXIuc2VuZElmcmFtZVJlcXVlc3QoKSwhMCl9ZW1pdFVJSW50ZXJhY3Rpb24oZSl7cmV0dXJuISF0aGlzLl93ZWJSdGNDb250cm9sbGVyLnZpZGVvUGxheWVyLmlzVmlkZW9SZWFkeSgpJiYodGhpcy5fd2ViUnRjQ29udHJvbGxlci5lbWl0VUlJbnRlcmFjdGlvbihlKSwhMCl9ZW1pdENvbW1hbmQoZSl7cmV0dXJuISghdGhpcy5fd2ViUnRjQ29udHJvbGxlci52aWRlb1BsYXllci5pc1ZpZGVvUmVhZHkoKXx8IXRoaXMuYWxsb3dDb25zb2xlQ29tbWFuZHMmJlwiQ29uc29sZUNvbW1hbmRcImluIGV8fCh0aGlzLl93ZWJSdGNDb250cm9sbGVyLmVtaXRDb21tYW5kKGUpLDApKX1lbWl0Q29uc29sZUNvbW1hbmQoZSl7cmV0dXJuISghdGhpcy5hbGxvd0NvbnNvbGVDb21tYW5kc3x8IXRoaXMuX3dlYlJ0Y0NvbnRyb2xsZXIudmlkZW9QbGF5ZXIuaXNWaWRlb1JlYWR5KCl8fCh0aGlzLl93ZWJSdGNDb250cm9sbGVyLmVtaXRDb25zb2xlQ29tbWFuZChlKSwwKSl9YWRkUmVzcG9uc2VFdmVudExpc3RlbmVyKGUsdCl7dGhpcy5fd2ViUnRjQ29udHJvbGxlci5yZXNwb25zZUNvbnRyb2xsZXIuYWRkUmVzcG9uc2VFdmVudExpc3RlbmVyKGUsdCl9cmVtb3ZlUmVzcG9uc2VFdmVudExpc3RlbmVyKGUpe3RoaXMuX3dlYlJ0Y0NvbnRyb2xsZXIucmVzcG9uc2VDb250cm9sbGVyLnJlbW92ZVJlc3BvbnNlRXZlbnRMaXN0ZW5lcihlKX1kaXNwYXRjaEV2ZW50KGUpe3JldHVybiB0aGlzLl9ldmVudEVtaXR0ZXIuZGlzcGF0Y2hFdmVudChlKX1hZGRFdmVudExpc3RlbmVyKGUsdCl7dGhpcy5fZXZlbnRFbWl0dGVyLmFkZEV2ZW50TGlzdGVuZXIoZSx0KX1yZW1vdmVFdmVudExpc3RlbmVyKGUsdCl7dGhpcy5fZXZlbnRFbWl0dGVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoZSx0KX10b2dnbGVYUigpe3RoaXMud2ViWHJDb250cm9sbGVyLnhyQ2xpY2tlZCgpfXNldFNpZ25hbGxpbmdVcmxCdWlsZGVyKGUpe3RoaXMuX3dlYlJ0Y0NvbnRyb2xsZXIuc2lnbmFsbGluZ1VybEJ1aWxkZXI9ZX1nZXQgd2ViU29ja2V0Q29udHJvbGxlcigpe3JldHVybiB0aGlzLl93ZWJSdGNDb250cm9sbGVyLndlYlNvY2tldENvbnRyb2xsZXJ9Z2V0IHdlYlhyQ29udHJvbGxlcigpe3JldHVybiB0aGlzLl93ZWJYckNvbnRyb2xsZXJ9fXZhciBDdD1yLkR6LGZ0PXIuZyQsVHQ9ci5MdCxFdD1yLlE5LHl0PXIucWYsYnQ9ci5oVixNdD1yLnokLHd0PXIuSjAsUHQ9ci5EZSxSdD1yLiRDLGt0PXIuYWwsTHQ9ci5fVyx4dD1yLnR6LEF0PXIuTnUsRnQ9ci56ZyxEdD1yLnZwLE90PXIudlUsVXQ9ci53RixJdD1yLnJ2LEd0PXIuTmgsenQ9ci5zcyxCdD1yLnFXLF90PXIuUUwsV3Q9ci5jZixIdD1yLmVNLFZ0PXIuWWQsTnQ9ci5pTSxLdD1yLnF5LFF0PXIuY2UsJHQ9ci5zSyxxdD1yLk9rLFh0PXIucTUsanQ9ci5nLFl0PXIueGwsSnQ9ci5JLFp0PXIuYngsZXM9ci5JYix0cz1yLkF6LHNzPXIuSXcsbnM9ci5xWSxycz1yLmRiLGlzPXIubVIsb3M9ci5Ubixhcz1yLnJWLGxzPXIuZ2gsZHM9ci5pNSxjcz1yLnhfLGhzPXIuQW0sZ3M9ci5lUix1cz1yLnI4LG1zPXIudTMsU3M9ci52ZCxwcz1yLmlWLHZzPXIualosQ3M9ci5TVyxmcz1yLlpILFRzPXIuTmksRXM9ci5saCx5cz1yLmJxLGJzPXIuJGYsTXM9ci5ldSx3cz1yLkF4LFBzPXIuTWM7ZXhwb3J0e0N0IGFzIEFma0xvZ2ljLGZ0IGFzIEFma1RpbWVkT3V0RXZlbnQsVHQgYXMgQWZrV2FybmluZ0FjdGl2YXRlRXZlbnQsRXQgYXMgQWZrV2FybmluZ0RlYWN0aXZhdGVFdmVudCx5dCBhcyBBZmtXYXJuaW5nVXBkYXRlRXZlbnQsYnQgYXMgQWdncmVnYXRlZFN0YXRzLE10IGFzIENhbmRpZGF0ZVBhaXJTdGF0cyx3dCBhcyBDYW5kaWRhdGVTdGF0LFB0IGFzIENvbmZpZyxSdCBhcyBDb250cm9sU2NoZW1lVHlwZSxrdCBhcyBEYXRhQ2hhbm5lbENsb3NlRXZlbnQsTHQgYXMgRGF0YUNoYW5uZWxFcnJvckV2ZW50LHh0IGFzIERhdGFDaGFubmVsT3BlbkV2ZW50LEF0IGFzIERhdGFDaGFubmVsU3RhdHMsRnQgYXMgRW5jb2RlclNldHRpbmdzLER0IGFzIEV2ZW50RW1pdHRlcixPdCBhcyBGbGFncyxVdCBhcyBIaWRlRnJlZXplRnJhbWVFdmVudCxJdCBhcyBJbmJvdW5kQXVkaW9TdGF0cyxHdCBhcyBJbmJvdW5kVmlkZW9TdGF0cyx6dCBhcyBJbml0aWFsU2V0dGluZ3MsQnQgYXMgSW5pdGlhbFNldHRpbmdzRXZlbnQsX3QgYXMgTGF0ZW5jeVRlc3RSZXN1bHRFdmVudCxXdCBhcyBMYXRlbmN5VGVzdFJlc3VsdHMsSHQgYXMgTG9hZEZyZWV6ZUZyYW1lRXZlbnQsVnQgYXMgTG9nZ2VyLE50IGFzIE1lc3NhZ2VSZWN2LEt0IGFzIE1lc3NhZ2VTZW5kLFF0IGFzIE1lc3NhZ2VTdHJlYW1lckxpc3QsJHQgYXMgTnVtZXJpY1BhcmFtZXRlcnMscXQgYXMgT3B0aW9uUGFyYW1ldGVycyxYdCBhcyBPdXRCb3VuZFZpZGVvU3RhdHMsanQgYXMgUGl4ZWxTdHJlYW1pbmcsWXQgYXMgUGxheVN0cmVhbUVycm9yRXZlbnQsSnQgYXMgUGxheVN0cmVhbUV2ZW50LFp0IGFzIFBsYXlTdHJlYW1SZWplY3RlZEV2ZW50LGVzIGFzIFNldHRpbmdCYXNlLHRzIGFzIFNldHRpbmdGbGFnLHNzIGFzIFNldHRpbmdOdW1iZXIsbnMgYXMgU2V0dGluZ09wdGlvbixycyBhcyBTZXR0aW5nVGV4dCxpcyBhcyBTZXR0aW5nc0NoYW5nZWRFdmVudCxvcyBhcyBTaWduYWxsaW5nUHJvdG9jb2wsYXMgYXMgU3RhdHNSZWNlaXZlZEV2ZW50LGxzIGFzIFN0cmVhbUxvYWRpbmdFdmVudCxkcyBhcyBTdHJlYW1lckxpc3RNZXNzYWdlRXZlbnQsY3MgYXMgVGV4dFBhcmFtZXRlcnMsaHMgYXMgVW5xdWFudGl6ZWRBbmREZW5vcm1hbGl6ZVVuc2lnbmVkLGdzIGFzIFZpZGVvRW5jb2RlckF2Z1FQRXZlbnQsdXMgYXMgVmlkZW9Jbml0aWFsaXplZEV2ZW50LG1zIGFzIFdlYlJUQ1NldHRpbmdzLFNzIGFzIFdlYlJ0Y0F1dG9Db25uZWN0RXZlbnQscHMgYXMgV2ViUnRjQ29ubmVjdGVkRXZlbnQsdnMgYXMgV2ViUnRjQ29ubmVjdGluZ0V2ZW50LENzIGFzIFdlYlJ0Y0Rpc2Nvbm5lY3RlZEV2ZW50LGZzIGFzIFdlYlJ0Y0ZhaWxlZEV2ZW50LFRzIGFzIFdlYlJ0Y1BsYXllckNvbnRyb2xsZXIsRXMgYXMgV2ViUnRjU2RwRXZlbnQseXMgYXMgV2ViU29ja2V0Q29udHJvbGxlcixicyBhcyBXZWJYUkNvbnRyb2xsZXIsTXMgYXMgWHJGcmFtZUV2ZW50LHdzIGFzIFhyU2Vzc2lvbkVuZGVkRXZlbnQsUHMgYXMgWHJTZXNzaW9uU3RhcnRlZEV2ZW50fTsiLCJpbXBvcnQqYXMgdCBmcm9tXCJAZXBpY2dhbWVzLXBzL2xpYi1waXhlbHN0cmVhbWluZ2Zyb250ZW5kLXVlNS4yXCI7aW1wb3J0KmFzIGUgZnJvbVwianNzXCI7aW1wb3J0KmFzIHMgZnJvbVwianNzLXBsdWdpbi1nbG9iYWxcIjtpbXBvcnQqYXMgaSBmcm9tXCJqc3MtcGx1Z2luLWNhbWVsLWNhc2VcIjt2YXIgbj17ZDoodCxlKT0+e2Zvcih2YXIgcyBpbiBlKW4ubyhlLHMpJiYhbi5vKHQscykmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LHMse2VudW1lcmFibGU6ITAsZ2V0OmVbc119KX0sbzoodCxlKT0+T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsZSl9LG89e307bi5kKG8se3ltOigpPT5iLEVXOigpPT5oLE14OigpPT5RLEwzOigpPT5ILHJsOigpPT5tLE5SOigpPT51LGYxOigpPT52LElZOigpPT5FLFJaOigpPT5kLFhZOigpPT5qLEZrOigpPT5nLFpoOigpPT5OLGVrOigpPT5SLE1HOigpPT56LGdFOigpPT5VLHRXOigpPT5CLHdyOigpPT5wLFFUOigpPT5jfSk7Y29uc3QgbD0oYT17RmxhZ3M6KCk9PnQuRmxhZ3MsTG9nZ2VyOigpPT50LkxvZ2dlcixOdW1lcmljUGFyYW1ldGVyczooKT0+dC5OdW1lcmljUGFyYW1ldGVycyxPcHRpb25QYXJhbWV0ZXJzOigpPT50Lk9wdGlvblBhcmFtZXRlcnMsU2V0dGluZ0ZsYWc6KCk9PnQuU2V0dGluZ0ZsYWcsVGV4dFBhcmFtZXRlcnM6KCk9PnQuVGV4dFBhcmFtZXRlcnMsV2ViWFJDb250cm9sbGVyOigpPT50LldlYlhSQ29udHJvbGxlcn0scj17fSxuLmQocixhKSxyKTt2YXIgYSxyLGM7Y2xhc3MgZHtjb25zdHJ1Y3Rvcih0LGUscyl7dGhpcy5yb290RGl2PXQsdGhpcy5yb290RWxlbWVudD1lLHRoaXMudGV4dEVsZW1lbnQ9cyx0aGlzLnJvb3RFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMudGV4dEVsZW1lbnQpLHRoaXMuaGlkZSgpLHRoaXMucm9vdERpdi5hcHBlbmRDaGlsZCh0aGlzLnJvb3RFbGVtZW50KX1zaG93KCl7dGhpcy5yb290RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuU3RhdGVcIil9aGlkZSgpe3RoaXMucm9vdEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImhpZGRlblN0YXRlXCIpfX1jbGFzcyBoIGV4dGVuZHMgZHtjb25zdHJ1Y3Rvcih0LGUscyl7c3VwZXIodCxlLHMpLHRoaXMub25BY3Rpb25DYWxsYmFjaz0oKT0+e2wuTG9nZ2VyLkluZm8obC5Mb2dnZXIuR2V0U3RhY2tUcmFjZSgpLFwiRGlkIHlvdSBmb3JnZXQgdG8gc2V0IHRoZSBvbkFjdGlvbiBjYWxsYmFjayBpbiB5b3VyIG92ZXJsYXk/XCIpfX11cGRhdGUodCl7bnVsbD09dCYmbnVsbD09dHx8KHRoaXMudGV4dEVsZW1lbnQuaW5uZXJIVE1MPXQpfW9uQWN0aW9uKHQpe3RoaXMub25BY3Rpb25DYWxsYmFjaz10fWFjdGl2YXRlKCl7dGhpcy5vbkFjdGlvbkNhbGxiYWNrKCl9fWNsYXNzIG0gZXh0ZW5kcyBoe3N0YXRpYyBjcmVhdGVSb290RWxlbWVudCgpe2NvbnN0IHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtyZXR1cm4gdC5pZD1cImNvbm5lY3RPdmVybGF5XCIsdC5jbGFzc05hbWU9XCJjbGlja2FibGVTdGF0ZVwiLHR9c3RhdGljIGNyZWF0ZUNvbnRlbnRFbGVtZW50KCl7Y29uc3QgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3JldHVybiB0LmlkPVwiY29ubmVjdEJ1dHRvblwiLHQuaW5uZXJIVE1MPVwiQ2xpY2sgdG8gc3RhcnRcIix0fWNvbnN0cnVjdG9yKHQpe3N1cGVyKHQsbS5jcmVhdGVSb290RWxlbWVudCgpLG0uY3JlYXRlQ29udGVudEVsZW1lbnQoKSksdGhpcy5yb290RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwoKCk9Pnt0aGlzLmFjdGl2YXRlKCl9KSl9fWNsYXNzIHUgZXh0ZW5kcyBoe3N0YXRpYyBjcmVhdGVSb290RWxlbWVudCgpe2NvbnN0IHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtyZXR1cm4gdC5pZD1cImRpc2Nvbm5lY3RPdmVybGF5XCIsdC5jbGFzc05hbWU9XCJjbGlja2FibGVTdGF0ZVwiLHR9c3RhdGljIGNyZWF0ZUNvbnRlbnRFbGVtZW50KCl7Y29uc3QgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3JldHVybiB0LmlkPVwiZGlzY29ubmVjdEJ1dHRvblwiLHQuaW5uZXJIVE1MPVwiQ2xpY2sgVG8gUmVzdGFydFwiLHR9Y29uc3RydWN0b3IodCl7c3VwZXIodCx1LmNyZWF0ZVJvb3RFbGVtZW50KCksdS5jcmVhdGVDb250ZW50RWxlbWVudCgpKSx0aGlzLnJvb3RFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCgoKT0+e3RoaXMuYWN0aXZhdGUoKX0pKX19Y2xhc3MgZyBleHRlbmRzIGh7c3RhdGljIGNyZWF0ZVJvb3RFbGVtZW50KCl7Y29uc3QgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3JldHVybiB0LmlkPVwicGxheU92ZXJsYXlcIix0LmNsYXNzTmFtZT1cImNsaWNrYWJsZVN0YXRlXCIsdH1zdGF0aWMgY3JlYXRlQ29udGVudEVsZW1lbnQoKXtjb25zdCB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7cmV0dXJuIHQuaWQ9XCJwbGF5QnV0dG9uXCIsdC5zcmM9XCJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQVBFQUFBRDVDQVlBQUFEMm1OTmtBQUFBQVhOU1IwSUFyczRjNlFBQUFBUm5RVTFCQUFDeGp3djhZUVVBQUFBSmNFaFpjd0FBRHNNQUFBN0RBY2R2cUdRQUFBQVpkRVZZZEZOdlpuUjNZWEpsQUhCaGFXNTBMbTVsZENBMExqQXVNakh4SUdtVkFBQVNna2xFUVZSNFh1MmRDN0JkVlgySHFVQ0NJUkFTQ1BqQUZJUVJFQlJCQlNSWWJGT3Q4bElyRlVXUkZxWFdzVDV3Ykl0VXFGV3MwS3FJTVBLb1lFV3BSUzA2S0RqUzFCZVZGa1ZRYkN3K3dDZmlBd0doQ0tXUDlQdVp0VTI0dVRlNTl6ejIyWS92bS9uR2tYdHo3amxycjkrc2RmWmVhLzAzV2IxNjlRdHhHVzYyaVlpMEQ4TDdOYndZajhFZGNkUHlJeEZwQTRUMlAvRi84VWE4Q0kvR2hQblh5cStJU0pNaHJBbHh4WDloUnVZTDhTaDhTUGsxRVdrcUJIWGRFRmZjZzZ2dzNmaHMzS2I4dW9nMERRSTZYWWdyOHJPdllzSjhPTTR2LzB4RW1rSUo2b2I0UDh6SWZBTmVnQ3ZRTUlzMEJRSzVzUkJYSk15L3dJek01K0J5WEZCZVJrUW1CVUdjYllqWDVTNU1tTS9BQTNDTDhuSWlVamNFY0pBUVY5eUJYOGEvd1NlaXo1aEY2b2JnRFJQaWtHZk1DZk9YOERUY3U3eTBpTlFCb1JzMnhCWC9nM2Rpd3Z3bTNLbjhDUkVaSjRSdFZDR3VxTUtjdTlrbjR4SjA5WmZJdUNCZ293NXh5SjNzVExOekF5d3J3RjZKMjZOaEZoazFCR3NjSVY2WGhQbHV2QTZQeHgzS254YVJVVUNveGgzaWlvUTV6NW4vQlkvRkplVXRpTWd3RUthNlFseVJNTitIbjhIbjRaYmxyWWpJSUJDaXVrTWM4cDI1V3M2Wk1EK3p2QjBSbVNzRWFCSWhua3JldzVWNEVIckNpTWhjS0FGcUN2K05sK0ordUJDOW15MnlNUWhLazBKY2tlL003OEdzeTA2WUgxVGVyb2hNaFlBME1jUVZQOE56OFVEY0NsMmJMVElWZ3RIa0VGZDhEOC9FL1hGcmRHUVdxU0FRYlFoeHlLT3BtL0IwM0FjOU1rZ2tFSWEyaExnaU43OFM1bFB4MGJnSXZRRW0vWVVBdEMzRUZRbnp6ZmdudURjNnpaWitRc2R2YTRqWDVTdjRhdHdYSFptbFg5RGh1eERpa0MyUW44ZFhZVWJtUmVVamluUWJPbnRYUWx5UlRSYWZ3bGRnd3J4VithZ2kzWVJPM3JVUVYvd2NWK0xMOERIb3laelNUZWpjWFExeFJjNy91aHl6bDNrdjNMeDhkSkZ1UUtmdWVvaERuakZuWlA0by9qN20wWlFINEVzM29EUDNJY1FWMmY2WU1GK0NPWmpnVWVpWjJkSnU2TVI5Q3ZHNjNJTHZ4NHpNQ2ZPODBpUWk3WUxPMjljUVYzd2IzNHNwc3I0cnVtQkUyZ1dkdHU4aERsbjk5UzFNWGVZWDRNNmxlVVNhRHgzV0VLOGxSZFlUNWxSL3pQbGZuc3dwelllT2FvalhKNGNTZkIzUHcrZmd0dWcwVzVvSm5kTVFUMC91WkdlYVhaVnlmVFp1VjVwTnBEblFNUTN4eHNrME85VWZ6OFpEY2R2U2ZDS1RodzVwaUdkUDJpb0Y0OTZKVDBjM1djamtLUjFUNWtZV2pDVE03OERmUWhlTXlPU2dBeHJpd2NoMzVsUi92QWJQd09Yb3pTK3BIenFlSVI2T2FsMTJ3dngyZkJ5NnlVTHFndzVuaUVkRHdweVIrVnBNa2ZYc21ISXBwNHdmT3BvaEhqMjM0UmZ3Rk53RG5XYkwrS0NER2VMeGtKSDVwM2cxdmc1M0swMHVNbHJvWElaNHZHVEJTTUo4RmVaa3ptV2w2VVZHQTUzS0VOZkQvWml5TkNteW52Ty9GcGRMSURJY2RDWkRYQzhabWZPZCtkL3dKZWpaWHpJY2RDSkRYRDk1eHB3amRuUCtWNzR6SDRXdS9wTEJvUE1ZNHNtU01OK0ZLYkorQkJwbW1SdDBHa1BjREJMbXUvRmplQWk2bEZObUI1M0ZFRGVIVExQemFDb2o4MGR3QmZxTVdUWU1uY1FRTjVlc0FQc3c3bGN1bDhqNjBFRU1jZlBKRGJEM1lVN2wzS3hjT3BFMTBDa01jVHZJVkR2Zm1jL0UzWEVMdFBxakdPS1draFZncCtHZW1ERDd2Ym5QMEFFTWNYdEprZlUzNEdOeEFUb3k5eEV1dkNGdVA2dndKTXlPcVlYbDBrcGY0S0liNG01UW5jeVpUUmFwWkdHWSt3SVgyeEIzaTN2eE9zd21pMTNRYVhiWDRRSWI0bTZTWTNhL2lNZGg3bVliNXE3Q2hUWEUzYVhhYUxFU3E3ck1XNVpMTDEyQmkycUkrOEU5ZURrbXpMdWhZZTRLWEV4RDNCOHlNdCtPbCtLTDBDTHJYWUNMYUlqN1I4SjhLMTZDUjZQTE9kc01GODhROTVmc21Qb1JYb3pQeGR6TmR2VlgyK0NpR1dMSnphK0VPWFdaajhTZDBBUHcyd0lYeXhCTHFQWXkzNExuWThLOERBMXowK0VpR1dLWlNnSjlJNzRMVTJSOVIzU2EzVlM0T0laWVpxSmF5bmtXcHNqNncwdTNrU2JCaFRIRXNqSHV3eHN3cFZ3UHc2V2wrMGdUNElJWVlwa05tV0tucjF5UHFmNTRLRzVWdXBGTWtuSmhSR1pMd3B6Vlg2bisrRFo4R3JwamFwSndBUXl4REVMQ25CMVRxV1R4MS9nVWRHU2VCRFM4SVpaQlNaQmp6djc2UFA0VkhvU0d1VTVvY0VNc295QmhUc0c0Vkg5OEl4NkE4MHMzazNGQ1F4dGlHU1ZaTVBJVC9Dd216UHVoejVqSENRMXNpR1VjWkNsbnd2eHBQQVgzTEYxT1JnMk5hNGhsWEdTS25RVWpDZk5uOFBYNENOeTBkRDhaQlRTb0laWnhrekJYSS9QbjhBVE11bXpEUEFwb1NFTXNkWkV3NXp2ekR6SFQ3SmRqd3V6Wlg4TkFBeHBpbVFTWlppZk1uOFRqOGFHbFM4cGNvZkVNc1V5S2pNdzVsVE9uakh3Y2MyVFFrdEkxWmJiUWFJWllKazNDbkUwV0dabXZ3T2VoKzVobkM0MWxpS1VwVkNOend2d0pQQnk5K2JVeGFDUkRMRTBqWWI0ZlUvMHgwK3lEOGNHbHk4cFVhQnhETEUwa1FhN0NmQ2ZtTUw4RDBTTjJwMEtqR0dKcE9nbHp0V2draC9rOUNUMWl0NExHTU1UU0ZoTG1MQnJKM2V4emNKL1NqZnNORFdHSXBZMGswRC9BTS9HUnBUdjNFeHJBRUV1YnFWYUFuWTVMc1g5M3MvblFobGk2UUxVRjhuV1lJM2JuWVQrV2MvSkJEYkYwaGVxTzlqZndsZmhJbkkvZERqTWYwQkJMRjBtWXI4TnNza2lOcVMyd20ySG1neGxpNlRKNXpwd2pnLzRRZDhidUxScmhReGxpNlFNNVpqZEhCaDJIK2M3Y25VVWpmQmhETEgwaFUreTdjQ1UrSDdPWGVWNkpRbnZoUXhoaTZSc0pjMGJteS9CWitNc2JZQ1VTN1lNM2I0aWxyeVRNMlFMNVFVekJ1SHhuYnQ4MG16ZHRpRVZXcjc0Tkw4S1VjazJSOWZhTXpMeFpReXl5aG96TVdjcDVJZjR1SnN6TlA1eUFOMm1JUlI1SVZuL2RqT2ZoRWRqc3cveDRjNFpZWkhyeWpQa21QQnNQd1llVjJEUUwzcGdoRnBtWlRMRnpaRkRDbkxyTXo4RHRzVGtiTFhnemhsaGs0eVRNMmN1OENyTmpLaU56d2p6NU9sTzhDVU1zTWpjUzVxekxmZ3VteVByMkpVNlRnVGRnaUVVR295cXlucnJNdjQyVE9UT2JQMnlJUlFZbjArd3M1YndhVThyMU4zSHJFcTk2NEE4YVlwSGhTWmp2d0JTTVM1Z1B3bnJXWmZPSERMSEk2TWd6NWh5eG00SnhmNGtINEhqRHpCOHd4Q0tqSjJIT05QdWY4Yzl4SHh6UFhtWmUyQkNMaklkTXNXTXFXZndUbm9pUHdkR096THlnSVJZWlB3bHpWV1BxdGJnWGptYkJDQzlraUVYcUk4K1lzOG5pY253TjdsYWlPRGk4aUNFV3FaZU15bG1YblRDbllGeE81dHl4UkhMdThJOE5zY2hrU0ppekx2djdtSkg1cGJnWTU3WmppbjlnaUVVbVN6VXlmdzlUWlAxWTNMWkVkT1B3eTRaWXBCa2t6S24rK0IzOEtCNkYyNVdvemd5L1pJaEZta1hDbkxPL3Zvc2Z3cHd5c3FoRWRuMzRvU0VXYVNZSjh5OHcwK3dQNEdHNC9vSVIvcU1oRm1rMlZaZ3p6VTZZczJOcTdUNW0vbzhoRm1rSENYTzJQeWJNRitPKytDQkRMTkl1RXVTc3k4NTM1bHZ4WkVNczBqNnFXc3paSmJYVUVJdTBpMXZ3clpocUZadjVuVmlrUFdUcWZBNW1GOVFERCtmalB4aGlrZWFSNzc3eGRyd0FuMUFpdXo3ODBCQ0xOSXZzZE1xQkFxa050UnczWEJlS1h6REVJcE1ubzI3Q2V6ZGVpay9HQlNXbUc0WmZOTVFpa3lQaHpYcnBWR1hNNlI4cmNHN2xWZmtIaGxpa2ZoTGU3RnpLbzZLVitIdTQ1bTd6WE9FZkdtS1Jlc2tlNG9UM2szZ01ibG5pT0JpOGdDRVdxWWVNdkQvR0svRjQzS0hFY0RoNElVTXNNbDV5dytwSG1MT29YNGFESDhVekhieWdJUllaRC9uZW01SDNLandCZDhMUlYxSGtSUTJ4eUdqSjNlYWNOWjFpYXlmaHIrUDQ2aG56NG9aWVpEUmsycHp3cGg3VFgrQ3VPUDc2eGZ3UlF5d3lITmxWVklYM1ZIeDhpVmM5OEFjTnNjamdaSkZHeXBxK0dmZkh3WjcxRGdOLzFCQ0x6SjJmNDcvaVd6QmxUSWQ3MWpzTS9IRkRMREk3Y3JmNUhyd0czNFlIWTcwRnhhZUROMkdJUlRaTXdwdmpjSzdGZCtCVGNmTGhyZUROR0dLUm1jbkllejIrRXcvRmhUaTNNaXZqaGpka2lFWFdKMGZFZmhYUHdtZmk0aEtaNXNHYk04UWlhOG42NWxYNExremxoWWVWcURRWDNxUWhGbG56clBjLzhGek10c0JsMkt4cDgwendSZzJ4OUowY3huNGVwb0JabGtqVy82eDNHSGpEaGxqNlNKWkk1Z1RKOStEek1lSGR2TVNpWGZER0RiSDBpV3BiWU1xZ0pMeTdZTHRHM3Fud0FReXg5SVZzQzd3RVg0Qzc0L2gyRnRVSkg4UVFTOWZKVVRnNVFmSTQzQVBubGU3ZkRmaEFobGk2U281Ly9SaStHQlBleWExdkhpZDhNRU1zWFNNSDBYMENYNEo3NGNMUzNic0pIOUFRUzFmSVRhdnM2ZjFWZUxFZHozcUhnUTlwaUtYdFpITkMxamZuRUxwZlRwdXgrK0d0NE1NYVlta3JtVFovR1YrTENXKzNwODB6d1FjM3hOSTJza1R5QnN3aGRIdGljN1lGVGdJYXdCQkxtN2dSVDhISDRkYlluMm56VE5BSWhsamFRQ3JrdndrVDN0eXdHdjhwa20yQnhqREUwbFJ5b2tiT3Nqb0RVeUUvTjZ3TTcxUm9GRU1zVFNQaHZSUGZqWS9HQmVpMGVTWm9IRU1zVGVKMi9BRHVnKzNjVlZRM05KUWhsaWFRa2ZjZjhTbm9xRHNYYURCRExKTWlqNHJ1eGN2d2FlaklPd2cwbkNHV3Vzbnl5SVQzQ2p3TSs3bElZMVRRZ0laWTZpQTNxekx5Wm1kUlNuMGVpYzA5UWJKTjBKQ0dXTVpKd3B1Ujl3NzhFcjRRdTdrbGNGTFFvSVpZeGtYcTlPWnVjMm9XWlhOQ3Y1ZEhqZ3NhMWhETHFLbkNtMnFCMlp6dzBOTGRaQnpRd0laWVJrV216VC9EaFBkRTNLVjBNeGtuTkxRaGxtSEo5OTZFTndYSHNqa2hxNnhjSGxrWE5MWWhsa0ZKZUhQREtodnlzemtoNFczMzhhOXRoRVkzeERKWDhxZ29HeE1TM3RUcGZTek9MMTFLNm9iR044UXlXeExlTEkvTXREbWxQdmRIcDgyVGhvdGdpR1UyWk9TdHdyc0NYU0xaRkxnWWhsZzJ4RjJZYzZ6T3hxZWpDeldhQmhmRkVNdDBwTWoyVnpCMWVnL0JKYVhMU05QZzRoaGlxY2pkNWl6VVNJWDhsUHA4Rmk0dFhVV2FDaGZKRUV0SWhmd1UyYjRRVTJSN08zUmZieHZnUWhuaWZwT0QxNytKQ1c5S2ZTNUY3emkzQ1M2WUllNG5PWGo5Vy9oM2VBdyt2SFFKYVJ0Y1BFUGNML0tzOTJhOENJL0ZYZEZwYzV2aEFocmkvdkI5L0h2OEEzd1V1a1N5QzNBaERYSDMrU24rQXg2UHFaRHZFc2t1d1FVMXhOMmtPZ29uSjBpbTFHYzJKMnhSTHJ0MENTNnNJZTRXMWM2aWoyTkczbFJPbUZjdXQzUVJMckFoN2c0Sjc1WDRSN2czR3Q0K3dJVTJ4TzBuMCtaUDRhc3dCY2RjMzl3bnVPQ0d1TDNrV2UvbjhEVzRMeTRxbDFYNkJCZmVFTGVUTCtBSitBVGNCbjNXMjFlNCtJYTRQZVNPODlmd1QvR0p1QWhkSXRsMzZBU0d1UGxrWjlHMzhmV1lvM0F5OGhwZVdRT2R3UkEzbHh3QmV4TytHVlBxMDdJbnNqNTBERVBjVExLKytlMlljNndXbzk5NVpYcm9ISWE0V2R5S09RcG5PV2JhdkdtNVZDTFRReWN4eE0wZ3AwaWVqMC9HM0xBeXZESTc2Q3lHZUhKVXgrRzhIdzlFd3l0emgwNWppQ2RERHFLN0hBL0FoZWgzWGhrTU9vOGhycGUwOTZmeGQ5RDl2REk4cFZQSitMa1hQNHZQUWFmTU1qcm9VSVo0Zk9RN2I5WTNYNFU1eDhvaTJ6SjY2RmlHZVBSa2VXUk9rZndpSG9lZTNTempndzVtaUVkRFJ0MTREK2J3OVpmakRxV1pSY1lISGMwUUQwOTFGRTZPZ1AwejlPQjFxUTg2bXlFZW5LeHRUbmd6OHI0QkhYbWxmdWg0aG5qdUpMd3A5WmxxZ2FmaDdxVTVSZXFIRG1pSVowK216VmtlZVFPK0ZSOWZtbEZrY3RBUkRmSHNTSjNlZjhkcVo1R0gwRWt6b0RNYTRwbkozZWEwVDA3VE9BZXp2bmxCYVRxUlpsQTZxVHlRaERkcm0xZmhCWGd3R2w1cEpuUk9RN3lXNmpsdnd2dGVmQVp1WHBwS3BKbVVUaXRycDgwcDlabjF6UTh1VFNUU2JPaXNmUTl4cHMycGtKL3dQaGUzSzAwajBnN290SDBOOGYzNGRYd2ZIbzBXMlpaMlF1ZnRZNGl6UERLbmFid0lINEVlL3lydGhRN2NseEJubGRVUDhCSjhNU2E4N3V1VjlrTkg3bnFJYzRaVnd2c2hmQ2t1UThNcjNZRU8zZFVRWjRua0QvSERtRktmZTVTUExOSXQ2TnhkREhIQyt4RjhCYWJzaVNPdmRCYzZlSmRDZkJ0ZWhnbHZpbXo3ckZlNkR4MjlDeUhPUW8wcjhOV1lPcjBXMlpiK1FJZHZhNGl6UkRMUGVsZGk2dlNtMU9mQzhyRkUrZ01kdjQwaHpudStHbE1oZnovY0VqME9SL29KbmI5TkljNTd2UVpQeENlaEk2OUlDVWJUeWRuTjErTEptUEF1S1c5ZlJBaEVrME9jWjczWFl3NmhPd2c5djFsa0tnU2pxU0hPNW9SVDhUZHdLYnErV1dRNkNFZVRRcHc3emxtb2NUcW1UbS9PYjdib21NaUdJQ1JOQ0hHbXpUL0JzekNsUGpQeXVzcEtaRFlRbGttSCtNZjR0N2djdDBlbnpTSnpnZEJNS3NRSjcwWDRWSFRrRlJrVXdsTjNpRk01NFlONEtHNkxIa1FuTWd5RXFLNFE1MW52cFpqd1p1UTF2Q0tqZ0REVkVlSXI4WEJNZUwzYkxESktDTlc0UXB5Ujl6bzhBcmRCYjFpSmpBUENOZW9RSjd5cEZuZ3N6a2MzSm9pTUUwSTJxaERuV1c4S2p2MHh1akZCcEM0STNEQWh6Z3FySEVTWFVwL1owL3VROHJJaVVoY0ViNUFRSjd6MzRUZndKTnk1dkp5STFBMEJuRzJJRTl5WXNpZmZ3VGZpenVoM1hwRkpRZ2huRStKODMwMTR2NHVwa0w4citxaElwQWtReGcyRk9PSE56ek50UGhmM1JFZGVrU1pSUWpxVlRKdHpndVNOZUQ0ZVdINWRSSm9HQVowYTRydnhtM2docmtDbnpTSk5ocEJXSWM3L3BscGd3cHVkUlo3ZExOSUdDT3Z0SmJ3WDQyRzR1UHhJUk5vQW9VMmQzaU54VWZsUEl0SWFOdG5rL3dFR0JvTWRwRUNHSEFBQUFBQkpSVTVFcmtKZ2dnPT1cIix0LmFsdD1cIlN0YXJ0IFN0cmVhbWluZ1wiLHR9Y29uc3RydWN0b3IodCl7c3VwZXIodCxnLmNyZWF0ZVJvb3RFbGVtZW50KCksZy5jcmVhdGVDb250ZW50RWxlbWVudCgpKSx0aGlzLnJvb3RFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCgoKT0+e3RoaXMuYWN0aXZhdGUoKX0pKX19Y2xhc3MgcCBleHRlbmRzIGR7Y29uc3RydWN0b3IodCxlLHMpe3N1cGVyKHQsZSxzKX11cGRhdGUodCl7bnVsbD09dCYmbnVsbD09dHx8KHRoaXMudGV4dEVsZW1lbnQuaW5uZXJIVE1MPXQpfX1jbGFzcyBFIGV4dGVuZHMgcHtzdGF0aWMgY3JlYXRlUm9vdEVsZW1lbnQoKXtjb25zdCB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7cmV0dXJuIHQuaWQ9XCJpbmZvT3ZlcmxheVwiLHQuY2xhc3NOYW1lPVwidGV4dERpc3BsYXlTdGF0ZVwiLHR9c3RhdGljIGNyZWF0ZUNvbnRlbnRFbGVtZW50KCl7Y29uc3QgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3JldHVybiB0LmlkPVwibWVzc2FnZU92ZXJsYXlJbm5lclwiLHR9Y29uc3RydWN0b3IodCl7c3VwZXIodCxFLmNyZWF0ZVJvb3RFbGVtZW50KCksRS5jcmVhdGVDb250ZW50RWxlbWVudCgpKX19Y2xhc3MgdiBleHRlbmRzIHB7c3RhdGljIGNyZWF0ZVJvb3RFbGVtZW50KCl7Y29uc3QgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3JldHVybiB0LmlkPVwiZXJyb3JPdmVybGF5XCIsdC5jbGFzc05hbWU9XCJ0ZXh0RGlzcGxheVN0YXRlXCIsdH1zdGF0aWMgY3JlYXRlQ29udGVudEVsZW1lbnQoKXtjb25zdCB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7cmV0dXJuIHQuaWQ9XCJlcnJvck92ZXJsYXlJbm5lclwiLHR9Y29uc3RydWN0b3IodCl7c3VwZXIodCx2LmNyZWF0ZVJvb3RFbGVtZW50KCksdi5jcmVhdGVDb250ZW50RWxlbWVudCgpKX19Y2xhc3MgYiBleHRlbmRzIGh7c3RhdGljIGNyZWF0ZVJvb3RFbGVtZW50KCl7Y29uc3QgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3JldHVybiB0LmlkPVwiYWZrT3ZlcmxheVwiLHQuY2xhc3NOYW1lPVwiY2xpY2thYmxlU3RhdGVcIix0fXN0YXRpYyBjcmVhdGVDb250ZW50RWxlbWVudCgpe2NvbnN0IHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtyZXR1cm4gdC5pZD1cImFma092ZXJsYXlJbm5lclwiLHQuaW5uZXJIVE1MPSc8Y2VudGVyPk5vIGFjdGl2aXR5IGRldGVjdGVkPGJyPkRpc2Nvbm5lY3RpbmcgaW4gPHNwYW4gaWQ9XCJhZmtDb3VudERvd25OdW1iZXJcIj48L3NwYW4+IHNlY29uZHM8YnI+Q2xpY2sgdG8gY29udGludWU8YnI+PC9jZW50ZXI+Jyx0fWNvbnN0cnVjdG9yKHQpe3N1cGVyKHQsYi5jcmVhdGVSb290RWxlbWVudCgpLGIuY3JlYXRlQ29udGVudEVsZW1lbnQoKSksdGhpcy5yb290RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwoKCk9Pnt0aGlzLmFjdGl2YXRlKCl9KSl9dXBkYXRlQ291bnRkb3duKHQpe3RoaXMudGV4dEVsZW1lbnQuaW5uZXJIVE1MPWA8Y2VudGVyPk5vIGFjdGl2aXR5IGRldGVjdGVkPGJyPkRpc2Nvbm5lY3RpbmcgaW4gPHNwYW4gaWQ9XCJhZmtDb3VudERvd25OdW1iZXJcIj4ke3R9PC9zcGFuPiBzZWNvbmRzPGJyPkNsaWNrIHRvIGNvbnRpbnVlPGJyPjwvY2VudGVyPmB9fWNsYXNzIGZ7Z2V0IHJvb3RFbGVtZW50KCl7cmV0dXJuIHRoaXMuX3Jvb3RFbGVtZW50fXNldCByb290RWxlbWVudCh0KXt0Lm9uY2xpY2s9KCk9PnRoaXMudG9nZ2xlRnVsbHNjcmVlbigpLHRoaXMuX3Jvb3RFbGVtZW50PXR9Y29uc3RydWN0b3IoKXt0aGlzLmlzRnVsbHNjcmVlbj0hMSxkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwid2Via2l0ZnVsbHNjcmVlbmNoYW5nZVwiLCgoKT0+dGhpcy5vbkZ1bGxzY3JlZW5DaGFuZ2UoKSksITEpLGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3pmdWxsc2NyZWVuY2hhbmdlXCIsKCgpPT50aGlzLm9uRnVsbHNjcmVlbkNoYW5nZSgpKSwhMSksZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImZ1bGxzY3JlZW5jaGFuZ2VcIiwoKCk9PnRoaXMub25GdWxsc2NyZWVuQ2hhbmdlKCkpLCExKSxkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiTVNGdWxsc2NyZWVuQ2hhbmdlXCIsKCgpPT50aGlzLm9uRnVsbHNjcmVlbkNoYW5nZSgpKSwhMSl9dG9nZ2xlRnVsbHNjcmVlbigpe2lmKGRvY3VtZW50LmZ1bGxzY3JlZW5FbGVtZW50fHxkb2N1bWVudC53ZWJraXRGdWxsc2NyZWVuRWxlbWVudHx8ZG9jdW1lbnQubW96RnVsbFNjcmVlbkVsZW1lbnR8fGRvY3VtZW50Lm1zRnVsbHNjcmVlbkVsZW1lbnQpZG9jdW1lbnQuZXhpdEZ1bGxzY3JlZW4/ZG9jdW1lbnQuZXhpdEZ1bGxzY3JlZW4oKTpkb2N1bWVudC5tb3pDYW5jZWxGdWxsU2NyZWVuP2RvY3VtZW50Lm1vekNhbmNlbEZ1bGxTY3JlZW4oKTpkb2N1bWVudC53ZWJraXRFeGl0RnVsbHNjcmVlbj9kb2N1bWVudC53ZWJraXRFeGl0RnVsbHNjcmVlbigpOmRvY3VtZW50Lm1zRXhpdEZ1bGxzY3JlZW4mJmRvY3VtZW50Lm1zRXhpdEZ1bGxzY3JlZW4oKTtlbHNle2NvbnN0IHQ9dGhpcy5mdWxsc2NyZWVuRWxlbWVudDtpZighdClyZXR1cm47dC5yZXF1ZXN0RnVsbHNjcmVlbj90LnJlcXVlc3RGdWxsc2NyZWVuKCk6dC5tb3pSZXF1ZXN0RnVsbHNjcmVlbj90Lm1velJlcXVlc3RGdWxsc2NyZWVuKCk6dC53ZWJraXRSZXF1ZXN0RnVsbHNjcmVlbj90LndlYmtpdFJlcXVlc3RGdWxsc2NyZWVuKCk6dC5tc1JlcXVlc3RGdWxsc2NyZWVuP3QubXNSZXF1ZXN0RnVsbHNjcmVlbigpOnQud2Via2l0RW50ZXJGdWxsc2NyZWVuJiZ0LndlYmtpdEVudGVyRnVsbHNjcmVlbigpfXRoaXMub25GdWxsc2NyZWVuQ2hhbmdlKCl9b25GdWxsc2NyZWVuQ2hhbmdlKCl7dGhpcy5pc0Z1bGxzY3JlZW49ZG9jdW1lbnQud2Via2l0SXNGdWxsU2NyZWVufHxkb2N1bWVudC5tb3pGdWxsU2NyZWVufHxkb2N1bWVudC5tc0Z1bGxzY3JlZW5FbGVtZW50JiZudWxsIT09ZG9jdW1lbnQubXNGdWxsc2NyZWVuRWxlbWVudHx8ZG9jdW1lbnQuZnVsbHNjcmVlbkVsZW1lbnQmJm51bGwhPT1kb2N1bWVudC5mdWxsc2NyZWVuRWxlbWVudH19Y2xhc3MgeSBleHRlbmRzIGZ7Y29uc3RydWN0b3IodCl7c3VwZXIoKSx0aGlzLnJvb3RFbGVtZW50PXR9fWNsYXNzIHggZXh0ZW5kcyBme2NvbnN0cnVjdG9yKCl7c3VwZXIoKTtjb25zdCB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7dC50eXBlPVwiYnV0dG9uXCIsdC5jbGFzc0xpc3QuYWRkKFwiVWlUb29sXCIpLHQuaWQ9XCJmdWxsc2NyZWVuLWJ0blwiLHQuYXBwZW5kQ2hpbGQodGhpcy5tYXhpbWl6ZUljb24pLHQuYXBwZW5kQ2hpbGQodGhpcy5taW5pbWl6ZUljb24pLHQuYXBwZW5kQ2hpbGQodGhpcy50b29sdGlwVGV4dCksdGhpcy5yb290RWxlbWVudD10fWdldCB0b29sdGlwVGV4dCgpe3JldHVybiB0aGlzLl90b29sdGlwVGV4dHx8KHRoaXMuX3Rvb2x0aXBUZXh0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpLHRoaXMuX3Rvb2x0aXBUZXh0LmNsYXNzTGlzdC5hZGQoXCJ0b29sdGlwdGV4dFwiKSx0aGlzLl90b29sdGlwVGV4dC5pbm5lckhUTUw9XCJGdWxsc2NyZWVuXCIpLHRoaXMuX3Rvb2x0aXBUZXh0fWdldCBtYXhpbWl6ZUljb24oKXtpZighdGhpcy5fbWF4aW1pemVJY29uKXt0aGlzLl9tYXhpbWl6ZUljb249ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIixcInN2Z1wiKSx0aGlzLl9tYXhpbWl6ZUljb24uc2V0QXR0cmlidXRlTlMobnVsbCxcImlkXCIsXCJtYXhpbWl6ZUljb25cIiksdGhpcy5fbWF4aW1pemVJY29uLnNldEF0dHJpYnV0ZU5TKG51bGwsXCJ4XCIsXCIwcHhcIiksdGhpcy5fbWF4aW1pemVJY29uLnNldEF0dHJpYnV0ZU5TKG51bGwsXCJ5XCIsXCIwcHhcIiksdGhpcy5fbWF4aW1pemVJY29uLnNldEF0dHJpYnV0ZU5TKG51bGwsXCJ2aWV3Qm94XCIsXCIwIDAgMzg0Ljk3IDM4NC45N1wiKTtjb25zdCB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsXCJnXCIpO3QuY2xhc3NMaXN0LmFkZChcInN2Z0ljb25cIiksdGhpcy5fbWF4aW1pemVJY29uLmFwcGVuZENoaWxkKHQpO2NvbnN0IGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIixcInBhdGhcIik7ZS5zZXRBdHRyaWJ1dGVOUyhudWxsLFwiZFwiLFwiTTM4NC45NywxMi4wM2MwLTYuNzEzLTUuMzE3LTEyLjAzLTEyLjAzLTEyLjAzSDI2NC44NDdjLTYuODMzLDAtMTEuOTIyLDUuMzktMTEuOTM0LDEyLjIyM2MwLDYuODIxLDUuMTAxLDExLjgzOCwxMS45MzQsMTEuODM4aDk2LjA2MmwtMC4xOTMsOTYuNTE5YzAsNi44MzMsNS4xOTcsMTIuMDMsMTIuMDMsMTIuMDNjNi44MzMtMC4wMTIsMTIuMDMtNS4xOTcsMTIuMDMtMTIuMDNsMC4xOTMtMTA4LjM2OWMwLTAuMDM2LTAuMDEyLTAuMDYtMC4wMTItMC4wODRDMzg0Ljk1OCwxMi4wOSwzODQuOTcsMTIuMDY2LDM4NC45NywxMi4wM3pcIik7Y29uc3Qgcz1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLFwicGF0aFwiKTtzLnNldEF0dHJpYnV0ZU5TKG51bGwsXCJkXCIsXCJNMTIwLjQ5NiwwSDEyLjQwM2MtMC4wMzYsMC0wLjA2LDAuMDEyLTAuMDk2LDAuMDEyQzEyLjI4MywwLjAxMiwxMi4yNDcsMCwxMi4yMjMsMEM1LjUxLDAsMC4xOTIsNS4zMTcsMC4xOTIsMTIuMDNMMCwxMjAuMzk5YzAsNi44MzMsNS4zOSwxMS45MzQsMTIuMjIzLDExLjkzNGM2LjgyMSwwLDExLjgzOC01LjEwMSwxMS44MzgtMTEuOTM0bDAuMTkyLTk2LjMzOWg5Ni4yNDJjNi44MzMsMCwxMi4wMy01LjE5NywxMi4wMy0xMi4wM0MxMzIuNTE0LDUuMTk3LDEyNy4zMTcsMCwxMjAuNDk2LDB6XCIpO2NvbnN0IGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIixcInBhdGhcIik7aS5zZXRBdHRyaWJ1dGVOUyhudWxsLFwiZFwiLFwiTTEyMC4xMjMsMzYwLjkwOUgyNC4wNjF2LTk2LjI0MmMwLTYuODMzLTUuMTk3LTEyLjAzLTEyLjAzLTEyLjAzUzAsMjU3LjgzMywwLDI2NC42Njd2MTA4LjA5MmMwLDAuMDM2LDAuMDEyLDAuMDYsMC4wMTIsMC4wODRjMCwwLjAzNi0wLjAxMiwwLjA2LTAuMDEyLDAuMDk2YzAsNi43MTMsNS4zMTcsMTIuMDMsMTIuMDMsMTIuMDNoMTA4LjA5MmM2LjgzMywwLDExLjkyMi01LjM5LDExLjkzNC0xMi4yMjNDMTMyLjA1NywzNjUuOTI2LDEyNi45NTYsMzYwLjkwOSwxMjAuMTIzLDM2MC45MDl6XCIpO2NvbnN0IG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIixcInBhdGhcIik7bi5zZXRBdHRyaWJ1dGVOUyhudWxsLFwiZFwiLFwiTTM3Mi43NDcsMjUyLjkxM2MtNi44MzMsMC0xMS44NSw1LjEwMS0xMS44MzgsMTEuOTM0djk2LjA2MmgtOTYuMjQyYy02LjgzMywwLTEyLjAzLDUuMTk3LTEyLjAzLDEyLjAzczUuMTk3LDEyLjAzLDEyLjAzLDEyLjAzaDEwOC4wOTJjMC4wMzYsMCwwLjA2LTAuMDEyLDAuMDg0LTAuMDEyYzAuMDM2LTAuMDEyLDAuMDYsMC4wMTIsMC4wOTYsMC4wMTJjNi43MTMsMCwxMi4wMy01LjMxNywxMi4wMy0xMi4wM1YyNjQuODQ3QzM4NC45NywyNTguMDE0LDM3OS41OCwyNTIuOTEzLDM3Mi43NDcsMjUyLjkxM3pcIiksdC5hcHBlbmRDaGlsZChlKSx0LmFwcGVuZENoaWxkKHMpLHQuYXBwZW5kQ2hpbGQoaSksdC5hcHBlbmRDaGlsZChuKX1yZXR1cm4gdGhpcy5fbWF4aW1pemVJY29ufWdldCBtaW5pbWl6ZUljb24oKXtpZighdGhpcy5fbWluaW1pemVJY29uKXt0aGlzLl9taW5pbWl6ZUljb249ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIixcInN2Z1wiKSx0aGlzLl9taW5pbWl6ZUljb24uc2V0QXR0cmlidXRlTlMobnVsbCxcImlkXCIsXCJtaW5pbWl6ZUljb25cIiksdGhpcy5fbWluaW1pemVJY29uLnNldEF0dHJpYnV0ZU5TKG51bGwsXCJ4XCIsXCIwcHhcIiksdGhpcy5fbWluaW1pemVJY29uLnNldEF0dHJpYnV0ZU5TKG51bGwsXCJ5XCIsXCIwcHhcIiksdGhpcy5fbWluaW1pemVJY29uLnNldEF0dHJpYnV0ZU5TKG51bGwsXCJ2aWV3Qm94XCIsXCIwIDAgMzg1LjMzMSAzODUuMzMxXCIpO2NvbnN0IHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIixcImdcIik7dC5jbGFzc0xpc3QuYWRkKFwic3ZnSWNvblwiKSx0aGlzLl9taW5pbWl6ZUljb24uYXBwZW5kQ2hpbGQodCk7Y29uc3QgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLFwicGF0aFwiKTtlLnNldEF0dHJpYnV0ZU5TKG51bGwsXCJkXCIsXCJNMjY0Ljk0MywxNTYuNjY1aDEwOC4yNzNjNi44MzMsMCwxMS45MzQtNS4zOSwxMS45MzQtMTIuMjExYzAtNi44MzMtNS4xMDEtMTEuODUtMTEuOTM0LTExLjgzOGgtOTYuMjQyVjM2LjE4MWMwLTYuODMzLTUuMTk3LTEyLjAzLTEyLjAzLTEyLjAzcy0xMi4wMyw1LjE5Ny0xMi4wMywxMi4wM3YxMDguMjczYzAsMC4wMzYsMC4wMTIsMC4wNiwwLjAxMiwwLjA4NGMwLDAuMDM2LTAuMDEyLDAuMDYtMC4wMTIsMC4wOTZDMjUyLjkxMywxNTEuMzQ3LDI1OC4yMywxNTYuNjc3LDI2NC45NDMsMTU2LjY2NXpcIik7Y29uc3Qgcz1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLFwicGF0aFwiKTtzLnNldEF0dHJpYnV0ZU5TKG51bGwsXCJkXCIsXCJNMTIwLjI5MSwyNC4yNDdjLTYuODIxLDAtMTEuODM4LDUuMTEzLTExLjgzOCwxMS45MzR2OTYuMjQySDEyLjAzYy02LjgzMywwLTEyLjAzLDUuMTk3LTEyLjAzLDEyLjAzYzAsNi44MzMsNS4xOTcsMTIuMDMsMTIuMDMsMTIuMDNoMTA4LjI3M2MwLjAzNiwwLDAuMDYtMC4wMTIsMC4wODQtMC4wMTJjMC4wMzYsMCwwLjA2LDAuMDEyLDAuMDk2LDAuMDEyYzYuNzEzLDAsMTIuMDMtNS4zMTcsMTIuMDMtMTIuMDNWMzYuMTgxQzEzMi41MTQsMjkuMzYsMTI3LjEyNCwyNC4yNTksMTIwLjI5MSwyNC4yNDd6XCIpO2NvbnN0IGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIixcInBhdGhcIik7aS5zZXRBdHRyaWJ1dGVOUyhudWxsLFwiZFwiLFwiTTEyMC4zODcsMjI4LjY2NkgxMi4xMTVjLTYuODMzLDAuMDEyLTExLjkzNCw1LjM5LTExLjkzNCwxMi4yMjNjMCw2LjgzMyw1LjEwMSwxMS44NSwxMS45MzQsMTEuODM4aDk2LjI0MnY5Ni40MjNjMCw2LjgzMyw1LjE5NywxMi4wMywxMi4wMywxMi4wM2M2LjgzMywwLDEyLjAzLTUuMTk3LDEyLjAzLTEyLjAzVjI0MC44NzdjMC0wLjAzNi0wLjAxMi0wLjA2LTAuMDEyLTAuMDg0YzAtMC4wMzYsMC4wMTItMC4wNiwwLjAxMi0wLjA5NkMxMzIuNDE4LDIzMy45ODMsMTI3LjEsMjI4LjY2NiwxMjAuMzg3LDIyOC42NjZ6XCIpO2NvbnN0IG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIixcInBhdGhcIik7bi5zZXRBdHRyaWJ1dGVOUyhudWxsLFwiZFwiLFwiTTM3My4zLDIyOC42NjZIMjY1LjAyOGMtMC4wMzYsMC0wLjA2LDAuMDEyLTAuMDg0LDAuMDEyYy0wLjAzNiwwLTAuMDYtMC4wMTItMC4wOTYtMC4wMTJjLTYuNzEzLDAtMTIuMDMsNS4zMTctMTIuMDMsMTIuMDN2MTA4LjI3M2MwLDYuODMzLDUuMzksMTEuOTIyLDEyLjIyMywxMS45MzRjNi44MjEsMC4wMTIsMTEuODM4LTUuMTAxLDExLjgzOC0xMS45MjJ2LTk2LjI0MkgzNzMuM2M2LjgzMywwLDEyLjAzLTUuMTk3LDEyLjAzLTEyLjAzUzM4MC4xMzQsMjI4LjY3OCwzNzMuMywyMjguNjY2elwiKSx0LmFwcGVuZENoaWxkKGUpLHQuYXBwZW5kQ2hpbGQocyksdC5hcHBlbmRDaGlsZChpKSx0LmFwcGVuZENoaWxkKG4pfXJldHVybiB0aGlzLl9taW5pbWl6ZUljb259b25GdWxsc2NyZWVuQ2hhbmdlKCl7c3VwZXIub25GdWxsc2NyZWVuQ2hhbmdlKCk7Y29uc3QgdD10aGlzLm1pbmltaXplSWNvbixlPXRoaXMubWF4aW1pemVJY29uO3RoaXMuaXNGdWxsc2NyZWVuPyh0LnN0eWxlLmRpc3BsYXk9XCJpbmxpbmVcIix0LnN0eWxlLnRyYW5zZm9ybT1cInRyYW5zbGF0ZSgwLCAwKVwiLGUuc3R5bGUuZGlzcGxheT1cIm5vbmVcIik6KHQuc3R5bGUuZGlzcGxheT1cIm5vbmVcIixlLnN0eWxlLmRpc3BsYXk9XCJpbmxpbmVcIixlLnN0eWxlLnRyYW5zZm9ybT1cInRyYW5zbGF0ZSgwLCAwKVwiKX19Y2xhc3MgQ3tnZXQgcm9vdEVsZW1lbnQoKXtyZXR1cm4gdGhpcy5fcm9vdEVsZW1lbnR8fCh0aGlzLl9yb290RWxlbWVudD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpLHRoaXMuX3Jvb3RFbGVtZW50LnR5cGU9XCJidXR0b25cIix0aGlzLl9yb290RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiVWlUb29sXCIpLHRoaXMuX3Jvb3RFbGVtZW50LmlkPVwic2V0dGluZ3NCdG5cIix0aGlzLl9yb290RWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLnNldHRpbmdzSWNvbiksdGhpcy5fcm9vdEVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy50b29sdGlwVGV4dCkpLHRoaXMuX3Jvb3RFbGVtZW50fWdldCB0b29sdGlwVGV4dCgpe3JldHVybiB0aGlzLl90b29sdGlwVGV4dHx8KHRoaXMuX3Rvb2x0aXBUZXh0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpLHRoaXMuX3Rvb2x0aXBUZXh0LmNsYXNzTGlzdC5hZGQoXCJ0b29sdGlwdGV4dFwiKSx0aGlzLl90b29sdGlwVGV4dC5pbm5lckhUTUw9XCJTZXR0aW5nc1wiKSx0aGlzLl90b29sdGlwVGV4dH1nZXQgc2V0dGluZ3NJY29uKCl7aWYoIXRoaXMuX3NldHRpbmdzSWNvbil7dGhpcy5fc2V0dGluZ3NJY29uPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsXCJzdmdcIiksdGhpcy5fc2V0dGluZ3NJY29uLnNldEF0dHJpYnV0ZU5TKG51bGwsXCJpZFwiLFwic2V0dGluZ3NJY29uXCIpLHRoaXMuX3NldHRpbmdzSWNvbi5zZXRBdHRyaWJ1dGVOUyhudWxsLFwieFwiLFwiMHB4XCIpLHRoaXMuX3NldHRpbmdzSWNvbi5zZXRBdHRyaWJ1dGVOUyhudWxsLFwieVwiLFwiMHB4XCIpLHRoaXMuX3NldHRpbmdzSWNvbi5zZXRBdHRyaWJ1dGVOUyhudWxsLFwidmlld0JveFwiLFwiMCAwIDQ3OC43MDMgNDc4LjcwM1wiKTtjb25zdCB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsXCJnXCIpO3QuY2xhc3NMaXN0LmFkZChcInN2Z0ljb25cIiksdGhpcy5fc2V0dGluZ3NJY29uLmFwcGVuZENoaWxkKHQpO2NvbnN0IGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIixcInBhdGhcIik7ZS5zZXRBdHRyaWJ1dGVOUyhudWxsLFwiZFwiLFwiTTQ1NC4yLDE4OS4xMDFsLTMzLjYtNS43Yy0zLjUtMTEuMy04LTIyLjItMTMuNS0zMi42bDE5LjgtMjcuN2M4LjQtMTEuOCw3LjEtMjcuOS0zLjItMzguMWwtMjkuOC0yOS44XFx0XFx0XFx0Yy01LjYtNS42LTEzLTguNy0yMC45LTguN2MtNi4yLDAtMTIuMSwxLjktMTcuMSw1LjVsLTI3LjgsMTkuOGMtMTAuOC01LjctMjIuMS0xMC40LTMzLjgtMTMuOWwtNS42LTMzLjJcXHRcXHRcXHRjLTIuNC0xNC4zLTE0LjctMjQuNy0yOS4yLTI0LjdoLTQyLjFjLTE0LjUsMC0yNi44LDEwLjQtMjkuMiwyNC43bC01LjgsMzRjLTExLjIsMy41LTIyLjEsOC4xLTMyLjUsMTMuN2wtMjcuNS0xOS44XFx0XFx0XFx0Yy01LTMuNi0xMS01LjUtMTcuMi01LjVjLTcuOSwwLTE1LjQsMy4xLTIwLjksOC43bC0yOS45LDI5LjhjLTEwLjIsMTAuMi0xMS42LDI2LjMtMy4yLDM4LjFsMjAsMjguMVxcdFxcdFxcdGMtNS41LDEwLjUtOS45LDIxLjQtMTMuMywzMi43bC0zMy4yLDUuNmMtMTQuMywyLjQtMjQuNywxNC43LTI0LjcsMjkuMnY0Mi4xYzAsMTQuNSwxMC40LDI2LjgsMjQuNywyOS4ybDM0LDUuOFxcdFxcdFxcdGMzLjUsMTEuMiw4LjEsMjIuMSwxMy43LDMyLjVsLTE5LjcsMjcuNGMtOC40LDExLjgtNy4xLDI3LjksMy4yLDM4LjFsMjkuOCwyOS44YzUuNiw1LjYsMTMsOC43LDIwLjksOC43YzYuMiwwLDEyLjEtMS45LDE3LjEtNS41XFx0XFx0XFx0bDI4LjEtMjBjMTAuMSw1LjMsMjAuNyw5LjYsMzEuNiwxM2w1LjYsMzMuNmMyLjQsMTQuMywxNC43LDI0LjcsMjkuMiwyNC43aDQyLjJjMTQuNSwwLDI2LjgtMTAuNCwyOS4yLTI0LjdsNS43LTMzLjZcXHRcXHRcXHRjMTEuMy0zLjUsMjIuMi04LDMyLjYtMTMuNWwyNy43LDE5LjhjNSwzLjYsMTEsNS41LDE3LjIsNS41bDAsMGM3LjksMCwxNS4zLTMuMSwyMC45LTguN2wyOS44LTI5LjhjMTAuMi0xMC4yLDExLjYtMjYuMywzLjItMzguMVxcdFxcdFxcdGwtMTkuOC0yNy44YzUuNS0xMC41LDEwLjEtMjEuNCwxMy41LTMyLjZsMzMuNi01LjZjMTQuMy0yLjQsMjQuNy0xNC43LDI0LjctMjkuMnYtNDIuMVxcdFxcdFxcdEM0NzguOSwyMDMuODAxLDQ2OC41LDE5MS41MDEsNDU0LjIsMTg5LjEwMXogTTQ1MS45LDI2MC40MDFjMCwxLjMtMC45LDIuNC0yLjIsMi42bC00Miw3Yy01LjMsMC45LTkuNSw0LjgtMTAuOCw5LjlcXHRcXHRcXHRjLTMuOCwxNC43LTkuNiwyOC44LTE3LjQsNDEuOWMtMi43LDQuNi0yLjUsMTAuMywwLjYsMTQuN2wyNC43LDM0LjhjMC43LDEsMC42LDIuNS0wLjMsMy40bC0yOS44LDI5LjhjLTAuNywwLjctMS40LDAuOC0xLjksMC44XFx0XFx0XFx0Yy0wLjYsMC0xLjEtMC4yLTEuNS0wLjVsLTM0LjctMjQuN2MtNC4zLTMuMS0xMC4xLTMuMy0xNC43LTAuNmMtMTMuMSw3LjgtMjcuMiwxMy42LTQxLjksMTcuNGMtNS4yLDEuMy05LjEsNS42LTkuOSwxMC44bC03LjEsNDJcXHRcXHRcXHRjLTAuMiwxLjMtMS4zLDIuMi0yLjYsMi4yaC00Mi4xYy0xLjMsMC0yLjQtMC45LTIuNi0yLjJsLTctNDJjLTAuOS01LjMtNC44LTkuNS05LjktMTAuOGMtMTQuMy0zLjctMjguMS05LjQtNDEtMTYuOFxcdFxcdFxcdGMtMi4xLTEuMi00LjUtMS44LTYuOC0xLjhjLTIuNywwLTUuNSwwLjgtNy44LDIuNWwtMzUsMjQuOWMtMC41LDAuMy0xLDAuNS0xLjUsMC41Yy0wLjQsMC0xLjItMC4xLTEuOS0wLjhsLTI5LjgtMjkuOFxcdFxcdFxcdGMtMC45LTAuOS0xLTIuMy0wLjMtMy40bDI0LjYtMzQuNWMzLjEtNC40LDMuMy0xMC4yLDAuNi0xNC44Yy03LjgtMTMtMTMuOC0yNy4xLTE3LjYtNDEuOGMtMS40LTUuMS01LjYtOS0xMC44LTkuOWwtNDIuMy03LjJcXHRcXHRcXHRjLTEuMy0wLjItMi4yLTEuMy0yLjItMi42di00Mi4xYzAtMS4zLDAuOS0yLjQsMi4yLTIuNmw0MS43LTdjNS4zLTAuOSw5LjYtNC44LDEwLjktMTBjMy43LTE0LjcsOS40LTI4LjksMTcuMS00MlxcdFxcdFxcdGMyLjctNC42LDIuNC0xMC4zLTAuNy0xNC42bC0yNC45LTM1Yy0wLjctMS0wLjYtMi41LDAuMy0zLjRsMjkuOC0yOS44YzAuNy0wLjcsMS40LTAuOCwxLjktMC44YzAuNiwwLDEuMSwwLjIsMS41LDAuNWwzNC41LDI0LjZcXHRcXHRcXHRjNC40LDMuMSwxMC4yLDMuMywxNC44LDAuNmMxMy03LjgsMjcuMS0xMy44LDQxLjgtMTcuNmM1LjEtMS40LDktNS42LDkuOS0xMC44bDcuMi00Mi4zYzAuMi0xLjMsMS4zLTIuMiwyLjYtMi4yaDQyLjFcXHRcXHRcXHRjMS4zLDAsMi40LDAuOSwyLjYsMi4ybDcsNDEuN2MwLjksNS4zLDQuOCw5LjYsMTAsMTAuOWMxNS4xLDMuOCwyOS41LDkuNyw0Mi45LDE3LjZjNC42LDIuNywxMC4zLDIuNSwxNC43LTAuNmwzNC41LTI0LjhcXHRcXHRcXHRjMC41LTAuMywxLTAuNSwxLjUtMC41YzAuNCwwLDEuMiwwLjEsMS45LDAuOGwyOS44LDI5LjhjMC45LDAuOSwxLDIuMywwLjMsMy40bC0yNC43LDM0LjdjLTMuMSw0LjMtMy4zLDEwLjEtMC42LDE0LjdcXHRcXHRcXHRjNy44LDEzLjEsMTMuNiwyNy4yLDE3LjQsNDEuOWMxLjMsNS4yLDUuNiw5LjEsMTAuOCw5LjlsNDIsNy4xYzEuMywwLjIsMi4yLDEuMywyLjIsMi42djQyLjFINDUxLjl6XCIpO2NvbnN0IHM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIixcInBhdGhcIik7cy5zZXRBdHRyaWJ1dGVOUyhudWxsLFwiZFwiLFwiTTIzOS40LDEzNi4wMDFjLTU3LDAtMTAzLjMsNDYuMy0xMDMuMywxMDMuM3M0Ni4zLDEwMy4zLDEwMy4zLDEwMy4zczEwMy4zLTQ2LjMsMTAzLjMtMTAzLjNTMjk2LjQsMTM2LjAwMSwyMzkuNCwxMzYuMDAxeiBNMjM5LjQsMzE1LjYwMWMtNDIuMSwwLTc2LjMtMzQuMi03Ni4zLTc2LjNzMzQuMi03Ni4zLDc2LjMtNzYuM3M3Ni4zLDM0LjIsNzYuMyw3Ni4zUzI4MS41LDMxNS42MDEsMjM5LjQsMzE1LjYwMXpcIiksdC5hcHBlbmRDaGlsZChlKSx0LmFwcGVuZENoaWxkKHMpfXJldHVybiB0aGlzLl9zZXR0aW5nc0ljb259fWNsYXNzIFN7Z2V0IHJvb3RFbGVtZW50KCl7cmV0dXJuIHRoaXMuX3Jvb3RFbGVtZW50fHwodGhpcy5fcm9vdEVsZW1lbnQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKSx0aGlzLl9yb290RWxlbWVudC50eXBlPVwiYnV0dG9uXCIsdGhpcy5fcm9vdEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIlVpVG9vbFwiKSx0aGlzLl9yb290RWxlbWVudC5pZD1cInN0YXRzQnRuXCIsdGhpcy5fcm9vdEVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5zdGF0c0ljb24pLHRoaXMuX3Jvb3RFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMudG9vbHRpcFRleHQpKSx0aGlzLl9yb290RWxlbWVudH1nZXQgdG9vbHRpcFRleHQoKXtyZXR1cm4gdGhpcy5fdG9vbHRpcFRleHR8fCh0aGlzLl90b29sdGlwVGV4dD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKSx0aGlzLl90b29sdGlwVGV4dC5jbGFzc0xpc3QuYWRkKFwidG9vbHRpcHRleHRcIiksdGhpcy5fdG9vbHRpcFRleHQuaW5uZXJIVE1MPVwiSW5mb3JtYXRpb25cIiksdGhpcy5fdG9vbHRpcFRleHR9Z2V0IHN0YXRzSWNvbigpe2lmKCF0aGlzLl9zdGF0c0ljb24pe3RoaXMuX3N0YXRzSWNvbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLFwic3ZnXCIpLHRoaXMuX3N0YXRzSWNvbi5zZXRBdHRyaWJ1dGVOUyhudWxsLFwiaWRcIixcInN0YXRzSWNvblwiKSx0aGlzLl9zdGF0c0ljb24uc2V0QXR0cmlidXRlTlMobnVsbCxcInhcIixcIjBweFwiKSx0aGlzLl9zdGF0c0ljb24uc2V0QXR0cmlidXRlTlMobnVsbCxcInlcIixcIjBweFwiKSx0aGlzLl9zdGF0c0ljb24uc2V0QXR0cmlidXRlTlMobnVsbCxcInZpZXdCb3hcIixcIjAgMCAzMzAgMzMwXCIpO2NvbnN0IHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIixcImdcIik7dC5jbGFzc0xpc3QuYWRkKFwic3ZnSWNvblwiKSx0aGlzLl9zdGF0c0ljb24uYXBwZW5kQ2hpbGQodCk7Y29uc3QgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLFwicGF0aFwiKTtlLnNldEF0dHJpYnV0ZU5TKG51bGwsXCJkXCIsXCJNMTY1LDAuMDA4Qzc0LjAxOSwwLjAwOCwwLDc0LjAyNCwwLDE2NC45OTljMCw5MC45NzcsNzQuMDE5LDE2NC45OTIsMTY1LDE2NC45OTJzMTY1LTc0LjAxNSwxNjUtMTY0Ljk5MkMzMzAsNzQuMDI0LDI1NS45ODEsMC4wMDgsMTY1LDAuMDA4eiBNMTY1LDI5OS45OTJjLTc0LjQzOSwwLTEzNS02MC41NTctMTM1LTEzNC45OTJTOTAuNTYxLDMwLjAwOCwxNjUsMzAuMDA4czEzNSw2MC41NTcsMTM1LDEzNC45OTFDMzAwLDIzOS40MzYsMjM5LjQzOSwyOTkuOTkyLDE2NSwyOTkuOTkyelwiKTtjb25zdCBzPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsXCJwYXRoXCIpO3Muc2V0QXR0cmlidXRlTlMobnVsbCxcImRcIixcIk0xNjUsMTMwLjAwOGMtOC4yODQsMC0xNSw2LjcxNi0xNSwxNXY5OS45ODNjMCw4LjI4NCw2LjcxNiwxNSwxNSwxNXMxNS02LjcxNiwxNS0xNXYtOTkuOTgzQzE4MCwxMzYuNzI1LDE3My4yODQsMTMwLjAwOCwxNjUsMTMwLjAwOHpcIik7Y29uc3QgaT1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLFwicGF0aFwiKTtpLnNldEF0dHJpYnV0ZU5TKG51bGwsXCJkXCIsXCJNMTY1LDcwLjAxMWMtMy45NSwwLTcuODExLDEuNi0xMC42MSw0LjM5Yy0yLjc5LDIuNzktNC4zOSw2LjY2LTQuMzksMTAuNjFzMS42LDcuODEsNC4zOSwxMC42MWMyLjc5LDIuNzksNi42Niw0LjM5LDEwLjYxLDQuMzlzNy44MS0xLjYsMTAuNjA5LTQuMzljMi43OS0yLjgsNC4zOTEtNi42Niw0LjM5MS0xMC42MXMtMS42MDEtNy44Mi00LjM5MS0xMC42MUMxNzIuODEsNzEuNjEsMTY4Ljk1LDcwLjAxMSwxNjUsNzAuMDExelwiKSx0LmFwcGVuZENoaWxkKGUpLHQuYXBwZW5kQ2hpbGQocyksdC5hcHBlbmRDaGlsZChpKX1yZXR1cm4gdGhpcy5fc3RhdHNJY29ufX1jbGFzcyB3e2dldCByb290RWxlbWVudCgpe3JldHVybiB0aGlzLl9yb290RWxlbWVudHx8KHRoaXMuX3Jvb3RFbGVtZW50PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiksdGhpcy5fcm9vdEVsZW1lbnQudHlwZT1cImJ1dHRvblwiLHRoaXMuX3Jvb3RFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJVaVRvb2xcIiksdGhpcy5fcm9vdEVsZW1lbnQuaWQ9XCJ4ckJ0blwiLHRoaXMuX3Jvb3RFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMueHJJY29uKSx0aGlzLl9yb290RWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLnRvb2x0aXBUZXh0KSksdGhpcy5fcm9vdEVsZW1lbnR9Z2V0IHRvb2x0aXBUZXh0KCl7cmV0dXJuIHRoaXMuX3Rvb2x0aXBUZXh0fHwodGhpcy5fdG9vbHRpcFRleHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIiksdGhpcy5fdG9vbHRpcFRleHQuY2xhc3NMaXN0LmFkZChcInRvb2x0aXB0ZXh0XCIpLHRoaXMuX3Rvb2x0aXBUZXh0LmlubmVySFRNTD1cIlhSXCIpLHRoaXMuX3Rvb2x0aXBUZXh0fWdldCB4ckljb24oKXtpZighdGhpcy5feHJJY29uKXt0aGlzLl94ckljb249ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIixcInN2Z1wiKSx0aGlzLl94ckljb24uc2V0QXR0cmlidXRlTlMobnVsbCxcImlkXCIsXCJ4ckljb25cIiksdGhpcy5feHJJY29uLnNldEF0dHJpYnV0ZU5TKG51bGwsXCJ4XCIsXCIwcHhcIiksdGhpcy5feHJJY29uLnNldEF0dHJpYnV0ZU5TKG51bGwsXCJ5XCIsXCIwcHhcIiksdGhpcy5feHJJY29uLnNldEF0dHJpYnV0ZU5TKG51bGwsXCJ2aWV3Qm94XCIsXCIwIDAgMTAwIDEwMFwiKTtjb25zdCB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsXCJnXCIpO3QuY2xhc3NMaXN0LmFkZChcInN2Z0ljb25cIiksdGhpcy5feHJJY29uLmFwcGVuZENoaWxkKHQpO2NvbnN0IGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIixcInBhdGhcIik7ZS5zZXRBdHRyaWJ1dGVOUyhudWxsLFwiZFwiLFwiTTI5IDQxYy01IDAtOSA0LTkgOXM0IDkgOSA5IDktNCA5LTktNC05LTktOXptMCAxNGMtMi44IDAtNS0yLjItNS01czIuMi01IDUtNSA1IDIuMiA1IDUtMi4yIDUtNSA1em00Mi0xNGMtNSAwLTkgNC05IDlzNCA5IDkgOSA5LTQgOS05LTQtOS05LTl6bTAgMTRjLTIuOCAwLTUtMi4yLTUtNXMyLjItNSA1LTUgNSAyLjIgNSA1LTIuMiA1LTUgNXptMTItMzFIMTdjLTYuNiAwLTEyIDUuNC0xMiAxMnYyOGMwIDYuNiA1LjQgMTIgMTIgMTJoMTQuNWMzLjUgMCA2LjgtMS41IDktNC4xbDMuNS00YzEuNS0xLjcgMy43LTIuNyA2LTIuN3M0LjUgMSA2IDIuN2wzLjUgNGMyLjMgMi42IDUuNiA0LjEgOSA0LjFIODNjNi42IDAgMTItNS40IDEyLTEyVjM2YzAtNi42LTUuNC0xMi0xMi0xMnptOCA0MGMwIDQuNC0zLjYgOC04IDhINjguNWMtMi4zIDAtNC41LTEtNi0yLjdsLTMuNS00Yy0yLjMtMi42LTUuNi00LjEtOS00LjEtMy41IDAtNi44IDEuNS05IDQuMWwtMy41IDRDMzYgNzEgMzMuOCA3MiAzMS41IDcySDE3Yy00LjQgMC04LTMuNi04LThWMzZjMC00LjQgMy42LTggOC04aDY2YzQuNCAwIDggMy42IDggOHYyOHpcIiksdC5hcHBlbmRDaGlsZChlKX1yZXR1cm4gdGhpcy5feHJJY29ufX1mdW5jdGlvbiBUKHQpe3JldHVybiF0fHwhIXQmJnQuaXNFbmFibGVkfWZ1bmN0aW9uIF8odCl7cmV0dXJuIG51bGw9PXR8fHQuY3JlYXRpb25Nb2RlPT09Yy5DcmVhdGVEZWZhdWx0RWxlbWVudH0hZnVuY3Rpb24odCl7dFt0LkNyZWF0ZURlZmF1bHRFbGVtZW50PTBdPVwiQ3JlYXRlRGVmYXVsdEVsZW1lbnRcIix0W3QuVXNlQ3VzdG9tRWxlbWVudD0xXT1cIlVzZUN1c3RvbUVsZW1lbnRcIix0W3QuRGlzYWJsZT0yXT1cIkRpc2FibGVcIn0oY3x8KGM9e30pKTtjbGFzcyBMe2NvbnN0cnVjdG9yKHQpe3QmJiFfKHQuc3RhdHNCdXR0b25UeXBlKXx8KHRoaXMuc3RhdHNJY29uPW5ldyBTKSx0JiYhXyh0LmZ1bGxzY3JlZW5CdXR0b25UeXBlKXx8KHRoaXMuc2V0dGluZ3NJY29uPW5ldyBDKSx0JiYhXyh0LnNldHRpbmdzQnV0dG9uVHlwZSl8fCh0aGlzLmZ1bGxzY3JlZW5JY29uPW5ldyB4KSx0JiYhXyh0LnhySWNvblR5cGUpfHwodGhpcy54ckljb249bmV3IHcpfWdldCByb290RWxlbWVudCgpe3JldHVybiB0aGlzLl9yb290RWxlbWVudHx8KHRoaXMuX3Jvb3RFbGVtZW50PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksdGhpcy5fcm9vdEVsZW1lbnQuaWQ9XCJjb250cm9sc1wiLHRoaXMuZnVsbHNjcmVlbkljb24mJnRoaXMuX3Jvb3RFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuZnVsbHNjcmVlbkljb24ucm9vdEVsZW1lbnQpLHRoaXMuc2V0dGluZ3NJY29uJiZ0aGlzLl9yb290RWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLnNldHRpbmdzSWNvbi5yb290RWxlbWVudCksdGhpcy5zdGF0c0ljb24mJnRoaXMuX3Jvb3RFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuc3RhdHNJY29uLnJvb3RFbGVtZW50KSx0aGlzLnhySWNvbiYmbC5XZWJYUkNvbnRyb2xsZXIuaXNTZXNzaW9uU3VwcG9ydGVkKFwiaW1tZXJzaXZlLXZyXCIpLnRoZW4oKHQ9Pnt0JiZ0aGlzLl9yb290RWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLnhySWNvbi5yb290RWxlbWVudCl9KSkpLHRoaXMuX3Jvb3RFbGVtZW50fX1jbGFzcyBJe2NvbnN0cnVjdG9yKHQsZSl7dGhpcy5fbGFiZWw9dCx0aGlzLl9idXR0b25UZXh0PWV9YWRkT25DbGlja0xpc3RlbmVyKHQpe3RoaXMuYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLHQpfWdldCBidXR0b24oKXtyZXR1cm4gdGhpcy5fYnV0dG9ufHwodGhpcy5fYnV0dG9uPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKSx0aGlzLl9idXR0b24udHlwZT1cImJ1dHRvblwiLHRoaXMuX2J1dHRvbi52YWx1ZT10aGlzLl9idXR0b25UZXh0LHRoaXMuX2J1dHRvbi5jbGFzc0xpc3QuYWRkKFwib3ZlcmxheS1idXR0b25cIiksdGhpcy5fYnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJidG4tZmxhdFwiKSksdGhpcy5fYnV0dG9ufWdldCByb290RWxlbWVudCgpe2lmKCF0aGlzLl9yb290RWxlbWVudCl7dGhpcy5fcm9vdEVsZW1lbnQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSx0aGlzLl9yb290RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwic2V0dGluZ1wiKTtjb25zdCB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7dC5pbm5lclRleHQ9dGhpcy5fbGFiZWwsdGhpcy5fcm9vdEVsZW1lbnQuYXBwZW5kQ2hpbGQodCk7Y29uc3QgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7ZS5jbGFzc0xpc3QuYWRkKFwiYnRuLW92ZXJsYXlcIiksdGhpcy5fcm9vdEVsZW1lbnQuYXBwZW5kQ2hpbGQoZSksZS5hcHBlbmRDaGlsZCh0aGlzLmJ1dHRvbil9cmV0dXJuIHRoaXMuX3Jvb3RFbGVtZW50fX1jbGFzcyBre2NvbnN0cnVjdG9yKCl7dGhpcy5fcm9vdEVsZW1lbnQ9bnVsbH1nZXQgcm9vdEVsZW1lbnQoKXtpZighdGhpcy5fcm9vdEVsZW1lbnQpe3RoaXMuX3Jvb3RFbGVtZW50PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksdGhpcy5fcm9vdEVsZW1lbnQuaWQ9XCJzZXR0aW5ncy1wYW5lbFwiLHRoaXMuX3Jvb3RFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJwYW5lbC13cmFwXCIpO2NvbnN0IHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTt0LmNsYXNzTGlzdC5hZGQoXCJwYW5lbFwiKSx0aGlzLl9yb290RWxlbWVudC5hcHBlbmRDaGlsZCh0KTtjb25zdCBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7ZS5pZD1cInNldHRpbmdzSGVhZGluZ1wiLGUudGV4dENvbnRlbnQ9XCJTZXR0aW5nc1wiLHQuYXBwZW5kQ2hpbGQoZSksdC5hcHBlbmRDaGlsZCh0aGlzLnNldHRpbmdzQ2xvc2VCdXR0b24pLHQuYXBwZW5kQ2hpbGQodGhpcy5zZXR0aW5nc0NvbnRlbnRFbGVtZW50KX1yZXR1cm4gdGhpcy5fcm9vdEVsZW1lbnR9Z2V0IHNldHRpbmdzQ29udGVudEVsZW1lbnQoKXtyZXR1cm4gdGhpcy5fc2V0dGluZ3NDb250ZW50RWxlbWVudHx8KHRoaXMuX3NldHRpbmdzQ29udGVudEVsZW1lbnQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSx0aGlzLl9zZXR0aW5nc0NvbnRlbnRFbGVtZW50LmlkPVwic2V0dGluZ3NDb250ZW50XCIpLHRoaXMuX3NldHRpbmdzQ29udGVudEVsZW1lbnR9Z2V0IHNldHRpbmdzQ2xvc2VCdXR0b24oKXtyZXR1cm4gdGhpcy5fc2V0dGluZ3NDbG9zZUJ1dHRvbnx8KHRoaXMuX3NldHRpbmdzQ2xvc2VCdXR0b249ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSx0aGlzLl9zZXR0aW5nc0Nsb3NlQnV0dG9uLmlkPVwic2V0dGluZ3NDbG9zZVwiKSx0aGlzLl9zZXR0aW5nc0Nsb3NlQnV0dG9ufXNob3coKXt0aGlzLnJvb3RFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhcInBhbmVsLXdyYXAtdmlzaWJsZVwiKXx8dGhpcy5yb290RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwicGFuZWwtd3JhcC12aXNpYmxlXCIpfXRvZ2dsZVZpc2liaWxpdHkoKXt0aGlzLnJvb3RFbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoXCJwYW5lbC13cmFwLXZpc2libGVcIil9aGlkZSgpe3RoaXMucm9vdEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicGFuZWwtd3JhcC12aXNpYmxlXCIpJiZ0aGlzLnJvb3RFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJwYW5lbC13cmFwLXZpc2libGVcIil9fWNsYXNzIEZ7Z2V0IHJvb3RFbGVtZW50KCl7aWYoIXRoaXMuX3Jvb3RFbGVtZW50KXt0aGlzLl9yb290RWxlbWVudD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2VjdGlvblwiKSx0aGlzLl9yb290RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwic2V0dGluZ3NDb250YWluZXJcIik7Y29uc3QgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3QuaWQ9XCJsYXRlbmN5VGVzdEhlYWRlclwiLHQuY2xhc3NMaXN0LmFkZChcInNldHRpbmdzLXRleHRcIiksdC5jbGFzc0xpc3QuYWRkKFwic2V0dGluZ3NIZWFkZXJcIiksdGhpcy5fcm9vdEVsZW1lbnQuYXBwZW5kQ2hpbGQodCk7Y29uc3QgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2UuaW5uZXJIVE1MPVwiTGF0ZW5jeSBUZXN0XCIsdC5hcHBlbmRDaGlsZChlKSx0LmFwcGVuZENoaWxkKHRoaXMubGF0ZW5jeVRlc3RCdXR0b24pO2NvbnN0IHM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtzLmlkPVwibGF0ZW5jeVRlc3RDb250YWluZXJcIixzLmNsYXNzTGlzdC5hZGQoXCJkLW5vbmVcIiksdGhpcy5fcm9vdEVsZW1lbnQuYXBwZW5kQ2hpbGQocykscy5hcHBlbmRDaGlsZCh0aGlzLmxhdGVuY3lUZXN0UmVzdWx0c0VsZW1lbnQpfXJldHVybiB0aGlzLl9yb290RWxlbWVudH1nZXQgbGF0ZW5jeVRlc3RSZXN1bHRzRWxlbWVudCgpe3JldHVybiB0aGlzLl9sYXRlbmN5VGVzdFJlc3VsdHNFbGVtZW50fHwodGhpcy5fbGF0ZW5jeVRlc3RSZXN1bHRzRWxlbWVudD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHRoaXMuX2xhdGVuY3lUZXN0UmVzdWx0c0VsZW1lbnQuaWQ9XCJsYXRlbmN5U3RhdHNSZXN1bHRzXCIsdGhpcy5fbGF0ZW5jeVRlc3RSZXN1bHRzRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiU3RhdHNSZXN1bHRcIikpLHRoaXMuX2xhdGVuY3lUZXN0UmVzdWx0c0VsZW1lbnR9Z2V0IGxhdGVuY3lUZXN0QnV0dG9uKCl7cmV0dXJuIHRoaXMuX2xhdGVuY3lUZXN0QnV0dG9ufHwodGhpcy5fbGF0ZW5jeVRlc3RCdXR0b249ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpLHRoaXMuX2xhdGVuY3lUZXN0QnV0dG9uLnR5cGU9XCJidXR0b25cIix0aGlzLl9sYXRlbmN5VGVzdEJ1dHRvbi52YWx1ZT1cIlJ1biBUZXN0XCIsdGhpcy5fbGF0ZW5jeVRlc3RCdXR0b24uaWQ9XCJidG4tc3RhcnQtbGF0ZW5jeS10ZXN0XCIsdGhpcy5fbGF0ZW5jeVRlc3RCdXR0b24uY2xhc3NMaXN0LmFkZChcInN0cmVhbVRvb2xzLWJ1dHRvblwiKSx0aGlzLl9sYXRlbmN5VGVzdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiYnRuLWZsYXRcIikpLHRoaXMuX2xhdGVuY3lUZXN0QnV0dG9ufWhhbmRsZVRlc3RSZXN1bHQodCl7bC5Mb2dnZXIuTG9nKGwuTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSx0LnRvU3RyaW5nKCksNik7bGV0IGU9XCJcIjtlKz1cIjxkaXY+TmV0IGxhdGVuY3kgUlRUIChtcyk6IFwiK3QubmV0d29ya0xhdGVuY3krXCI8L2Rpdj5cIixlKz1cIjxkaXY+VUUgRW5jb2RlIChtcyk6IFwiK3QuRW5jb2RlTXMrXCI8L2Rpdj5cIixlKz1cIjxkaXY+VUUgQ2FwdHVyZSAobXMpOiBcIit0LkNhcHR1cmVUb1NlbmRNcytcIjwvZGl2PlwiLGUrPVwiPGRpdj5Ccm93c2VyIHNlbmQgbGF0ZW5jeSAobXMpOiBcIit0LmJyb3dzZXJTZW5kTGF0ZW5jeStcIjwvZGl2PlwiLGUrPXQuZnJhbWVEaXNwbGF5RGVsdGFUaW1lTXMmJnQuYnJvd3NlclJlY2VpcHRUaW1lTXM/XCI8ZGl2PkJyb3dzZXIgcmVjZWl2ZSBsYXRlbmN5IChtcyk6IFwiK3QuZnJhbWVEaXNwbGF5RGVsdGFUaW1lTXMrXCI8L2Rpdj5cIjpcIlwiLGUrPVwiPGRpdj5Ub3RhbCBsYXRlbmN5IChleGNsdWRpbmcgYnJvd3NlcikgKG1zKTogXCIrdC5sYXRlbmN5RXhjbHVkaW5nRGVjb2RlK1wiPC9kaXY+XCIsZSs9dC5lbmRUb0VuZExhdGVuY3k/XCI8ZGl2PlRvdGFsIGxhdGVuY3kgKG1zKTogXCIrdC5lbmRUb0VuZExhdGVuY3krXCI8L2Rpdj5cIjpcIlwiLHRoaXMubGF0ZW5jeVRlc3RSZXN1bHRzRWxlbWVudC5pbm5lckhUTUw9ZX19Y2xhc3MgUHtzdGF0aWMgZm9ybWF0Qnl0ZXModCxlKXtpZigwPT09dClyZXR1cm5cIjBcIjtjb25zdCBzPWU8MD8wOmUsaT1NYXRoLmZsb29yKE1hdGgubG9nKHQpL01hdGgubG9nKDEwMjQpKTtyZXR1cm4gcGFyc2VGbG9hdCgodC9NYXRoLnBvdygxMDI0LGkpKS50b0ZpeGVkKHMpKStcIiBcIitbXCJCeXRlc1wiLFwiS2lCXCIsXCJNaUJcIixcIkdpQlwiLFwiVGlCXCIsXCJQaUJcIixcIkVpQlwiLFwiWmlCXCIsXCJZaUJcIl1baV19fWNsYXNzIEF7fWNsYXNzIE97Y29uc3RydWN0b3IoKXt0aGlzLnN0YXRzTWFwPW5ldyBNYXAsdGhpcy5sYXRlbmN5VGVzdD1uZXcgRn1nZXQgcm9vdEVsZW1lbnQoKXtpZighdGhpcy5fcm9vdEVsZW1lbnQpe3RoaXMuX3Jvb3RFbGVtZW50PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksdGhpcy5fcm9vdEVsZW1lbnQuaWQ9XCJzdGF0cy1wYW5lbFwiLHRoaXMuX3Jvb3RFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJwYW5lbC13cmFwXCIpO2NvbnN0IHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTt0LmNsYXNzTGlzdC5hZGQoXCJwYW5lbFwiKSx0aGlzLl9yb290RWxlbWVudC5hcHBlbmRDaGlsZCh0KTtjb25zdCBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7ZS5pZD1cInN0YXRzSGVhZGluZ1wiLGUudGV4dENvbnRlbnQ9XCJJbmZvcm1hdGlvblwiLHQuYXBwZW5kQ2hpbGQoZSksdC5hcHBlbmRDaGlsZCh0aGlzLnN0YXRzQ2xvc2VCdXR0b24pLHQuYXBwZW5kQ2hpbGQodGhpcy5zdGF0c0NvbnRlbnRFbGVtZW50KX1yZXR1cm4gdGhpcy5fcm9vdEVsZW1lbnR9Z2V0IHN0YXRzQ29udGVudEVsZW1lbnQoKXtpZighdGhpcy5fc3RhdHNDb250ZW50RWxlbWVudCl7dGhpcy5fc3RhdHNDb250ZW50RWxlbWVudD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHRoaXMuX3N0YXRzQ29udGVudEVsZW1lbnQuaWQ9XCJzdGF0c0NvbnRlbnRcIjtjb25zdCB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7dC5pZD1cInN0cmVhbVRvb2xzU3RhdHNcIix0LmNsYXNzTGlzdC5hZGQoXCJjb250YWluZXJcIik7Y29uc3QgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2UuaWQ9XCJDb250cm9sU3RhdHNcIixlLmNsYXNzTGlzdC5hZGQoXCJyb3dcIik7Y29uc3Qgcz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2VjdGlvblwiKTtzLmlkPVwic3RhdGlzdGljc1wiLHMuY2xhc3NMaXN0LmFkZChcInNldHRpbmdzQ29udGFpbmVyXCIpO2NvbnN0IGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtpLmlkPVwic3RhdGlzdGljc0hlYWRlclwiLGkuY2xhc3NMaXN0LmFkZChcInNldHRpbmdzLXRleHRcIiksaS5jbGFzc0xpc3QuYWRkKFwic2V0dGluZ3NIZWFkZXJcIik7Y29uc3Qgbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO24uaW5uZXJIVE1MPVwiU2Vzc2lvbiBTdGF0c1wiLHRoaXMuX3N0YXRzQ29udGVudEVsZW1lbnQuYXBwZW5kQ2hpbGQodCksdC5hcHBlbmRDaGlsZChlKSxlLmFwcGVuZENoaWxkKHMpLHMuYXBwZW5kQ2hpbGQoaSksaS5hcHBlbmRDaGlsZChuKSxzLmFwcGVuZENoaWxkKHRoaXMuc3RhdGlzdGljc0NvbnRhaW5lciksZS5hcHBlbmRDaGlsZCh0aGlzLmxhdGVuY3lUZXN0LnJvb3RFbGVtZW50KX1yZXR1cm4gdGhpcy5fc3RhdHNDb250ZW50RWxlbWVudH1nZXQgc3RhdGlzdGljc0NvbnRhaW5lcigpe3JldHVybiB0aGlzLl9zdGF0aXN0aWNzQ29udGFpbmVyfHwodGhpcy5fc3RhdGlzdGljc0NvbnRhaW5lcj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHRoaXMuX3N0YXRpc3RpY3NDb250YWluZXIuaWQ9XCJzdGF0aXN0aWNzQ29udGFpbmVyXCIsdGhpcy5fc3RhdGlzdGljc0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwiZC1ub25lXCIpLHRoaXMuX3N0YXRpc3RpY3NDb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5zdGF0c1Jlc3VsdCkpLHRoaXMuX3N0YXRpc3RpY3NDb250YWluZXJ9Z2V0IHN0YXRzUmVzdWx0KCl7cmV0dXJuIHRoaXMuX3N0YXRzUmVzdWx0fHwodGhpcy5fc3RhdHNSZXN1bHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSx0aGlzLl9zdGF0c1Jlc3VsdC5pZD1cInN0YXRpc3RpY3NSZXN1bHRcIix0aGlzLl9zdGF0c1Jlc3VsdC5jbGFzc0xpc3QuYWRkKFwiU3RhdHNSZXN1bHRcIikpLHRoaXMuX3N0YXRzUmVzdWx0fWdldCBzdGF0c0Nsb3NlQnV0dG9uKCl7cmV0dXJuIHRoaXMuX3N0YXRzQ2xvc2VCdXR0b258fCh0aGlzLl9zdGF0c0Nsb3NlQnV0dG9uPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksdGhpcy5fc3RhdHNDbG9zZUJ1dHRvbi5pZD1cInN0YXRzQ2xvc2VcIiksdGhpcy5fc3RhdHNDbG9zZUJ1dHRvbn1zaG93KCl7dGhpcy5yb290RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJwYW5lbC13cmFwLXZpc2libGVcIil8fHRoaXMucm9vdEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInBhbmVsLXdyYXAtdmlzaWJsZVwiKX10b2dnbGVWaXNpYmlsaXR5KCl7dGhpcy5yb290RWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKFwicGFuZWwtd3JhcC12aXNpYmxlXCIpfWhpZGUoKXt0aGlzLnJvb3RFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhcInBhbmVsLXdyYXAtdmlzaWJsZVwiKSYmdGhpcy5yb290RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwicGFuZWwtd3JhcC12aXNpYmxlXCIpfWhhbmRsZVN0YXRzKHQpe3ZhciBlLHMsaSxuLG87Y29uc3QgYT1uZXcgSW50bC5OdW1iZXJGb3JtYXQod2luZG93Lm5hdmlnYXRvci5sYW5ndWFnZSx7bWF4aW11bUZyYWN0aW9uRGlnaXRzOjB9KSxyPVAuZm9ybWF0Qnl0ZXModC5pbmJvdW5kVmlkZW9TdGF0cy5ieXRlc1JlY2VpdmVkLDIpO3RoaXMuYWRkT3JVcGRhdGVTdGF0KFwiSW5ib3VuZERhdGFTdGF0XCIsXCJSZWNlaXZlZFwiLHIpO2NvbnN0IGM9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQuaW5ib3VuZFZpZGVvU3RhdHMsXCJwYWNrZXRzTG9zdFwiKT9hLmZvcm1hdCh0LmluYm91bmRWaWRlb1N0YXRzLnBhY2tldHNMb3N0KTpcIkNocm9tZSBvbmx5XCI7dGhpcy5hZGRPclVwZGF0ZVN0YXQoXCJQYWNrZXRzTG9zdFN0YXRcIixcIlBhY2tldHMgTG9zdFwiLGMpLHQuaW5ib3VuZFZpZGVvU3RhdHMuYml0cmF0ZSYmdGhpcy5hZGRPclVwZGF0ZVN0YXQoXCJWaWRlb0JpdHJhdGVTdGF0XCIsXCJWaWRlbyBCaXRyYXRlIChrYnBzKVwiLHQuaW5ib3VuZFZpZGVvU3RhdHMuYml0cmF0ZS50b1N0cmluZygpKSx0LmluYm91bmRBdWRpb1N0YXRzLmJpdHJhdGUmJnRoaXMuYWRkT3JVcGRhdGVTdGF0KFwiQXVkaW9CaXRyYXRlU3RhdFwiLFwiQXVkaW8gQml0cmF0ZSAoa2JwcylcIix0LmluYm91bmRBdWRpb1N0YXRzLmJpdHJhdGUudG9TdHJpbmcoKSk7Y29uc3QgZD1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodC5pbmJvdW5kVmlkZW9TdGF0cyxcImZyYW1lV2lkdGhcIikmJnQuaW5ib3VuZFZpZGVvU3RhdHMuZnJhbWVXaWR0aCYmT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQuaW5ib3VuZFZpZGVvU3RhdHMsXCJmcmFtZUhlaWdodFwiKSYmdC5pbmJvdW5kVmlkZW9TdGF0cy5mcmFtZUhlaWdodD90LmluYm91bmRWaWRlb1N0YXRzLmZyYW1lV2lkdGgrXCJ4XCIrdC5pbmJvdW5kVmlkZW9TdGF0cy5mcmFtZUhlaWdodDpcIkNocm9tZSBvbmx5XCI7dGhpcy5hZGRPclVwZGF0ZVN0YXQoXCJWaWRlb1Jlc1N0YXRcIixcIlZpZGVvIHJlc29sdXRpb25cIixkKTtjb25zdCBoPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LmluYm91bmRWaWRlb1N0YXRzLFwiZnJhbWVzRGVjb2RlZFwiKT9hLmZvcm1hdCh0LmluYm91bmRWaWRlb1N0YXRzLmZyYW1lc0RlY29kZWQpOlwiQ2hyb21lIG9ubHlcIjt0aGlzLmFkZE9yVXBkYXRlU3RhdChcIkZyYW1lc0RlY29kZWRTdGF0XCIsXCJGcmFtZXMgRGVjb2RlZFwiLGgpLHQuaW5ib3VuZFZpZGVvU3RhdHMuZnJhbWVzUGVyU2Vjb25kJiZ0aGlzLmFkZE9yVXBkYXRlU3RhdChcIkZyYW1lcmF0ZVN0YXRcIixcIkZyYW1lcmF0ZVwiLHQuaW5ib3VuZFZpZGVvU3RhdHMuZnJhbWVzUGVyU2Vjb25kLnRvU3RyaW5nKCkpLHRoaXMuYWRkT3JVcGRhdGVTdGF0KFwiRnJhbWVzRHJvcHBlZFN0YXRcIixcIkZyYW1lcyBkcm9wcGVkXCIsbnVsbD09PShlPXQuaW5ib3VuZFZpZGVvU3RhdHMuZnJhbWVzRHJvcHBlZCl8fHZvaWQgMD09PWU/dm9pZCAwOmUudG9TdHJpbmcoKSksdC5pbmJvdW5kVmlkZW9TdGF0cy5jb2RlY0lkJiZ0aGlzLmFkZE9yVXBkYXRlU3RhdChcIlZpZGVvQ29kZWNTdGF0XCIsXCJWaWRlbyBjb2RlY1wiLG51bGwhPT0oaT1udWxsPT09KHM9dC5jb2RlY3MuZ2V0KHQuaW5ib3VuZFZpZGVvU3RhdHMuY29kZWNJZCkpfHx2b2lkIDA9PT1zP3ZvaWQgMDpzLnNwbGl0KFwiIFwiKVswXSkmJnZvaWQgMCE9PWk/aTpcIlwiKSx0LmluYm91bmRBdWRpb1N0YXRzLmNvZGVjSWQmJnRoaXMuYWRkT3JVcGRhdGVTdGF0KFwiQXVkaW9Db2RlY1N0YXRcIixcIkF1ZGlvIGNvZGVjXCIsbnVsbCE9PShvPW51bGw9PT0obj10LmNvZGVjcy5nZXQodC5pbmJvdW5kQXVkaW9TdGF0cy5jb2RlY0lkKSl8fHZvaWQgMD09PW4/dm9pZCAwOm4uc3BsaXQoXCIgXCIpWzBdKSYmdm9pZCAwIT09bz9vOlwiXCIpO2NvbnN0IG09T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQuY2FuZGlkYXRlUGFpcixcImN1cnJlbnRSb3VuZFRyaXBUaW1lXCIpJiZ0LmlzTnVtYmVyKHQuY2FuZGlkYXRlUGFpci5jdXJyZW50Um91bmRUcmlwVGltZSk/YS5mb3JtYXQoMWUzKnQuY2FuZGlkYXRlUGFpci5jdXJyZW50Um91bmRUcmlwVGltZSk6XCJDYW4ndCBjYWxjdWxhdGVcIjt0aGlzLmFkZE9yVXBkYXRlU3RhdChcIlJUVFN0YXRcIixcIk5ldCBSVFQgKG1zKVwiLG0pLHRoaXMuYWRkT3JVcGRhdGVTdGF0KFwiRHVyYXRpb25TdGF0XCIsXCJEdXJhdGlvblwiLHQuc2Vzc2lvblN0YXRzLnJ1blRpbWUpLHRoaXMuYWRkT3JVcGRhdGVTdGF0KFwiQ29udHJvbHNJbnB1dFN0YXRcIixcIkNvbnRyb2xzIHN0cmVhbSBpbnB1dFwiLHQuc2Vzc2lvblN0YXRzLmNvbnRyb2xzU3RyZWFtSW5wdXQpLHRoaXMuYWRkT3JVcGRhdGVTdGF0KFwiUVBTdGF0XCIsXCJWaWRlbyBxdWFudGl6YXRpb24gcGFyYW1ldGVyXCIsdC5zZXNzaW9uU3RhdHMudmlkZW9FbmNvZGVyQXZnUVAudG9TdHJpbmcoKSksbC5Mb2dnZXIuTG9nKGwuTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSxgLS0tLS0tLS0tIFN0YXRzIC0tLS0tLS0tLVxcbiAke3R9XFxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tYCw2KX1hZGRPclVwZGF0ZVN0YXQodCxlLHMpe2NvbnN0IGk9YCR7ZX06ICR7c31gO2lmKHRoaXMuc3RhdHNNYXAuaGFzKHQpKXtjb25zdCBlPXRoaXMuc3RhdHNNYXAuZ2V0KHQpO3ZvaWQgMCE9PWUmJihlLmVsZW1lbnQuaW5uZXJIVE1MPWkpfWVsc2V7Y29uc3Qgbj1uZXcgQTtuLmlkPXQsbi5zdGF0PXMsbi50aXRsZT1lLG4uZWxlbWVudD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLG4uZWxlbWVudC5pbm5lckhUTUw9aSx0aGlzLnN0YXRzUmVzdWx0LmFwcGVuZENoaWxkKG4uZWxlbWVudCksdGhpcy5zdGF0c01hcC5zZXQodCxuKX19fWNsYXNzIE17Y29uc3RydWN0b3IoKXt0aGlzLnZpZGVvRW5jb2RlckF2Z1FQPS0xLHRoaXMuc3RhdHNUZXh0PVwiXCIsdGhpcy5jb2xvcj1cIlwiLHRoaXMub3JhbmdlUVA9MjYsdGhpcy5yZWRRUD0zNX1nZXQgcm9vdEVsZW1lbnQoKXtyZXR1cm4gdGhpcy5fcm9vdEVsZW1lbnR8fCh0aGlzLl9yb290RWxlbWVudD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHRoaXMuX3Jvb3RFbGVtZW50LmlkPVwiY29ubmVjdGlvblwiLHRoaXMuX3Jvb3RFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJVaVRvb2xcIiksdGhpcy5fcm9vdEVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5xdWFsaXR5U3RhdHVzKSx0aGlzLl9yb290RWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLnF1YWxpdHlUZXh0KSx0aGlzLnVwZGF0ZVFwVG9vbHRpcCgtMSkpLHRoaXMuX3Jvb3RFbGVtZW50fWdldCBxdWFsaXR5VGV4dCgpe3JldHVybiB0aGlzLl9xdWFsaXR5VGV4dHx8KHRoaXMuX3F1YWxpdHlUZXh0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpLHRoaXMuX3F1YWxpdHlUZXh0LmlkPVwicXVhbGl0eVRleHRcIix0aGlzLl9xdWFsaXR5VGV4dC5jbGFzc0xpc3QuYWRkKFwidG9vbHRpcHRleHRcIikpLHRoaXMuX3F1YWxpdHlUZXh0fWdldCBxdWFsaXR5U3RhdHVzKCl7cmV0dXJuIHRoaXMuX3F1YWxpdHlTdGF0dXN8fCh0aGlzLl9xdWFsaXR5U3RhdHVzPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsXCJzdmdcIiksdGhpcy5fcXVhbGl0eVN0YXR1cy5zZXRBdHRyaWJ1dGVOUyhudWxsLFwiaWRcIixcImNvbm5lY3Rpb25TdHJlbmd0aFwiKSx0aGlzLl9xdWFsaXR5U3RhdHVzLnNldEF0dHJpYnV0ZU5TKG51bGwsXCJ4XCIsXCIwcHhcIiksdGhpcy5fcXVhbGl0eVN0YXR1cy5zZXRBdHRyaWJ1dGVOUyhudWxsLFwieVwiLFwiMHB4XCIpLHRoaXMuX3F1YWxpdHlTdGF0dXMuc2V0QXR0cmlidXRlTlMobnVsbCxcInZpZXdCb3hcIixcIjAgMCA0OTQuNDUgNDk0LjQ1XCIpLHRoaXMucXVhbGl0eVN0YXR1cy5hcHBlbmRDaGlsZCh0aGlzLmRvdCksdGhpcy5xdWFsaXR5U3RhdHVzLmFwcGVuZENoaWxkKHRoaXMubWlkZGxlKSx0aGlzLnF1YWxpdHlTdGF0dXMuYXBwZW5kQ2hpbGQodGhpcy5vdXRlciksdGhpcy5xdWFsaXR5U3RhdHVzLmFwcGVuZENoaWxkKHRoaXMuaW5uZXIpKSx0aGlzLl9xdWFsaXR5U3RhdHVzfWdldCBkb3QoKXtyZXR1cm4gdGhpcy5fZG90fHwodGhpcy5fZG90PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsXCJjaXJjbGVcIiksdGhpcy5fZG90LnNldEF0dHJpYnV0ZU5TKG51bGwsXCJpZFwiLFwiZG90XCIpLHRoaXMuX2RvdC5zZXRBdHRyaWJ1dGVOUyhudWxsLFwiY3hcIixcIjI0Ny4xMjVcIiksdGhpcy5fZG90LnNldEF0dHJpYnV0ZU5TKG51bGwsXCJjeVwiLFwiMzk4LjkyNVwiKSx0aGlzLl9kb3Quc2V0QXR0cmlidXRlTlMobnVsbCxcInJcIixcIjM1LjNcIikpLHRoaXMuX2RvdH1nZXQgb3V0ZXIoKXtyZXR1cm4gdGhpcy5fb3V0ZXJ8fCh0aGlzLl9vdXRlcj1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLFwicGF0aFwiKSx0aGlzLl9vdXRlci5zZXRBdHRyaWJ1dGVOUyhudWxsLFwiaWRcIixcIm91dGVyXCIpLHRoaXMuX291dGVyLnNldEF0dHJpYnV0ZU5TKG51bGwsXCJkXCIsXCJNNDY3LjkyNSwyMDQuNjI1Yy02LjgsMC0xMy41LTIuNi0xOC43LTcuOGMtMTExLjUtMTExLjQtMjkyLjctMTExLjQtNDA0LjEsMGMtMTAuMywxMC4zLTI3LjEsMTAuMy0zNy40LDBzLTEwLjMtMjcuMSwwLTM3LjRjNjQtNjQsMTQ5LTk5LjIsMjM5LjUtOTkuMnMxNzUuNSwzNS4yLDIzOS41LDk5LjJjMTAuMywxMC4zLDEwLjMsMjcuMSwwLDM3LjRDNDgxLjQyNSwyMDIuMDI1LDQ3NC42MjUsMjA0LjYyNSw0NjcuOTI1LDIwNC42MjV6XCIpKSx0aGlzLl9vdXRlcn1nZXQgbWlkZGxlKCl7cmV0dXJuIHRoaXMuX21pZGRsZXx8KHRoaXMuX21pZGRsZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLFwicGF0aFwiKSx0aGlzLl9taWRkbGUuc2V0QXR0cmlidXRlTlMobnVsbCxcImlkXCIsXCJtaWRkbGVcIiksdGhpcy5fbWlkZGxlLnNldEF0dHJpYnV0ZU5TKG51bGwsXCJkXCIsXCJNMzk1LjIyNSwyNzcuMzI1Yy02LjgsMC0xMy41LTIuNi0xOC43LTcuOGMtNzEuNC03MS4zLTE4Ny40LTcxLjMtMjU4LjgsMGMtMTAuMywxMC4zLTI3LjEsMTAuMy0zNy40LDBzLTEwLjMtMjcuMSwwLTM3LjRjOTItOTIsMjQxLjYtOTIsMzMzLjYsMGMxMC4zLDEwLjMsMTAuMywyNy4xLDAsMzcuNEM0MDguNzI1LDI3NC43MjUsNDAxLjkyNSwyNzcuMzI1LDM5NS4yMjUsMjc3LjMyNXpcIikpLHRoaXMuX21pZGRsZX1nZXQgaW5uZXIoKXtyZXR1cm4gdGhpcy5faW5uZXJ8fCh0aGlzLl9pbm5lcj1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLFwicGF0aFwiKSx0aGlzLl9pbm5lci5zZXRBdHRyaWJ1dGVOUyhudWxsLFwiaWRcIixcImlubmVyXCIpLHRoaXMuX2lubmVyLnNldEF0dHJpYnV0ZU5TKG51bGwsXCJkXCIsXCJNMzIzLjYyNSwzNDguODI1Yy02LjgsMC0xMy41LTIuNi0xOC43LTcuOGMtMTUuNC0xNS40LTM2LTIzLjktNTcuOC0yMy45cy00Mi40LDguNS01Ny44LDIzLjljLTEwLjMsMTAuMy0yNy4xLDEwLjMtMzcuNCwwYy0xMC4zLTEwLjMtMTAuMy0yNy4xLDAtMzcuNGMyNS40LTI1LjQsNTkuMi0zOS40LDk1LjItMzkuNHM2OS44LDE0LDk1LjIsMzkuNWMxMC4zLDEwLjMsMTAuMywyNy4xLDAsMzcuNEMzMzcuMjI1LDM0Ni4yMjUsMzMwLjQyNSwzNDguODI1LDMyMy42MjUsMzQ4LjgyNXpcIikpLHRoaXMuX2lubmVyfWJsaW5rVmlkZW9RdWFsaXR5U3RhdHVzKHQpe2xldCBlPXQscz0xO2NvbnN0IGk9c2V0SW50ZXJ2YWwoKCgpPT57cy09LjEsdGhpcy5xdWFsaXR5VGV4dC5zdHlsZS5vcGFjaXR5PVN0cmluZyhNYXRoLmFicygyKihzLS41KSkpLHM8PS4xJiYoMD09LS1lP2NsZWFySW50ZXJ2YWwoaSk6cz0xKX0pLDEwMC90KX11cGRhdGVRcFRvb2x0aXAodCl7dGhpcy52aWRlb0VuY29kZXJBdmdRUD10LHQ+dGhpcy5yZWRRUD8odGhpcy5jb2xvcj1cInJlZFwiLHRoaXMuYmxpbmtWaWRlb1F1YWxpdHlTdGF0dXMoMiksdGhpcy5zdGF0c1RleHQ9YDxkaXYgc3R5bGU9XCJjb2xvcjogJHt0aGlzLmNvbG9yfVwiPlBvb3IgZW5jb2RpbmcgcXVhbGl0eTwvZGl2PmAsdGhpcy5vdXRlci5zZXRBdHRyaWJ1dGVOUyhudWxsLFwiZmlsbFwiLFwiIzNjM2I0MFwiKSx0aGlzLm1pZGRsZS5zZXRBdHRyaWJ1dGVOUyhudWxsLFwiZmlsbFwiLFwiIzNjM2I0MFwiKSx0aGlzLmlubmVyLnNldEF0dHJpYnV0ZU5TKG51bGwsXCJmaWxsXCIsdGhpcy5jb2xvciksdGhpcy5kb3Quc2V0QXR0cmlidXRlTlMobnVsbCxcImZpbGxcIix0aGlzLmNvbG9yKSk6dD50aGlzLm9yYW5nZVFQPyh0aGlzLmNvbG9yPVwib3JhbmdlXCIsdGhpcy5ibGlua1ZpZGVvUXVhbGl0eVN0YXR1cygxKSx0aGlzLnN0YXRzVGV4dD1gPGRpdiBzdHlsZT1cImNvbG9yOiAke3RoaXMuY29sb3J9XCI+QmxvY2t5IGVuY29kaW5nIHF1YWxpdHk8L2Rpdj5gLHRoaXMub3V0ZXIuc2V0QXR0cmlidXRlTlMobnVsbCxcImZpbGxcIixcIiMzYzNiNDBcIiksdGhpcy5taWRkbGUuc2V0QXR0cmlidXRlTlMobnVsbCxcImZpbGxcIix0aGlzLmNvbG9yKSx0aGlzLmlubmVyLnNldEF0dHJpYnV0ZU5TKG51bGwsXCJmaWxsXCIsdGhpcy5jb2xvciksdGhpcy5kb3Quc2V0QXR0cmlidXRlTlMobnVsbCxcImZpbGxcIix0aGlzLmNvbG9yKSk6dDw9MD8odGhpcy5jb2xvcj1cIiNiMGIwYjBcIix0aGlzLm91dGVyLnNldEF0dHJpYnV0ZU5TKG51bGwsXCJmaWxsXCIsXCIjM2MzYjQwXCIpLHRoaXMubWlkZGxlLnNldEF0dHJpYnV0ZU5TKG51bGwsXCJmaWxsXCIsXCIjM2MzYjQwXCIpLHRoaXMuaW5uZXIuc2V0QXR0cmlidXRlTlMobnVsbCxcImZpbGxcIixcIiMzYzNiNDBcIiksdGhpcy5kb3Quc2V0QXR0cmlidXRlTlMobnVsbCxcImZpbGxcIixcIiMzYzNiNDBcIiksdGhpcy5zdGF0c1RleHQ9YDxkaXYgc3R5bGU9XCJjb2xvcjogJHt0aGlzLmNvbG9yfVwiPk5vdCBjb25uZWN0ZWQ8L2Rpdj5gKToodGhpcy5jb2xvcj1cImxpbWVcIix0aGlzLnF1YWxpdHlTdGF0dXMuc3R5bGUub3BhY2l0eT1cIjFcIix0aGlzLnN0YXRzVGV4dD1gPGRpdiBzdHlsZT1cImNvbG9yOiAke3RoaXMuY29sb3J9XCI+Q2xlYXIgZW5jb2RpbmcgcXVhbGl0eTwvZGl2PmAsdGhpcy5vdXRlci5zZXRBdHRyaWJ1dGVOUyhudWxsLFwiZmlsbFwiLHRoaXMuY29sb3IpLHRoaXMubWlkZGxlLnNldEF0dHJpYnV0ZU5TKG51bGwsXCJmaWxsXCIsdGhpcy5jb2xvciksdGhpcy5pbm5lci5zZXRBdHRyaWJ1dGVOUyhudWxsLFwiZmlsbFwiLHRoaXMuY29sb3IpLHRoaXMuZG90LnNldEF0dHJpYnV0ZU5TKG51bGwsXCJmaWxsXCIsdGhpcy5jb2xvcikpLHRoaXMucXVhbGl0eVRleHQuaW5uZXJIVE1MPXRoaXMuc3RhdHNUZXh0fX1jbGFzcyBOe2NvbnN0cnVjdG9yKHQpe3RoaXMuX3NldHRpbmc9dH1nZXQgc2V0dGluZygpe3JldHVybiB0aGlzLl9zZXR0aW5nfWdldCByb290RWxlbWVudCgpe3JldHVybiB0aGlzLl9yb290RWxlbWVudHx8KHRoaXMuX3Jvb3RFbGVtZW50PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpLHRoaXMuX3Jvb3RFbGVtZW50fX1jbGFzcyBSIGV4dGVuZHMgTntjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KSx0aGlzLmxhYmVsPXQubGFiZWwsdGhpcy5mbGFnPXQuZmxhZ31nZXQgc2V0dGluZygpe3JldHVybiB0aGlzLl9zZXR0aW5nfWdldCBzZXR0aW5nc1RleHRFbGVtKCl7cmV0dXJuIHRoaXMuX3NldHRpbmdzVGV4dEVsZW18fCh0aGlzLl9zZXR0aW5nc1RleHRFbGVtPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksdGhpcy5fc2V0dGluZ3NUZXh0RWxlbS5pbm5lclRleHQ9dGhpcy5zZXR0aW5nLl9sYWJlbCx0aGlzLl9zZXR0aW5nc1RleHRFbGVtLnRpdGxlPXRoaXMuc2V0dGluZy5kZXNjcmlwdGlvbiksdGhpcy5fc2V0dGluZ3NUZXh0RWxlbX1nZXQgY2hlY2tib3goKXtyZXR1cm4gdGhpcy5fY2hlY2tib3h8fCh0aGlzLl9jaGVja2JveD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiksdGhpcy5fY2hlY2tib3gudHlwZT1cImNoZWNrYm94XCIpLHRoaXMuX2NoZWNrYm94fWdldCByb290RWxlbWVudCgpe2lmKCF0aGlzLl9yb290RWxlbWVudCl7dGhpcy5fcm9vdEVsZW1lbnQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSx0aGlzLl9yb290RWxlbWVudC5pZD10aGlzLnNldHRpbmcuaWQsdGhpcy5fcm9vdEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInNldHRpbmdcIiksdGhpcy5fcm9vdEVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5zZXR0aW5nc1RleHRFbGVtKTtjb25zdCB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTt0LmNsYXNzTGlzdC5hZGQoXCJ0Z2wtc3dpdGNoXCIpLHRoaXMuX3Jvb3RFbGVtZW50LmFwcGVuZENoaWxkKHQpLHRoaXMuY2hlY2tib3gudGl0bGU9dGhpcy5zZXR0aW5nLmRlc2NyaXB0aW9uLHRoaXMuY2hlY2tib3guY2xhc3NMaXN0LmFkZChcInRnbFwiKSx0aGlzLmNoZWNrYm94LmNsYXNzTGlzdC5hZGQoXCJ0Z2wtZmxhdFwiKTtjb25zdCBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7ZS5jbGFzc0xpc3QuYWRkKFwidGdsLXNsaWRlclwiKSx0LmFwcGVuZENoaWxkKHRoaXMuY2hlY2tib3gpLHQuYXBwZW5kQ2hpbGQoZSksdGhpcy5jaGVja2JveC5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsKCgpPT57dGhpcy5zZXR0aW5nLmZsYWchPT10aGlzLmNoZWNrYm94LmNoZWNrZWQmJih0aGlzLnNldHRpbmcuZmxhZz10aGlzLmNoZWNrYm94LmNoZWNrZWQsdGhpcy5zZXR0aW5nLnVwZGF0ZVVSTFBhcmFtcygpKX0pKX1yZXR1cm4gdGhpcy5fcm9vdEVsZW1lbnR9c2V0IGZsYWcodCl7dGhpcy5jaGVja2JveC5jaGVja2VkPXR9Z2V0IGZsYWcoKXtyZXR1cm4gdGhpcy5jaGVja2JveC5jaGVja2VkfXNldCBsYWJlbCh0KXt0aGlzLnNldHRpbmdzVGV4dEVsZW0uaW5uZXJUZXh0PXR9Z2V0IGxhYmVsKCl7cmV0dXJuIHRoaXMuc2V0dGluZ3NUZXh0RWxlbS5pbm5lclRleHR9fWNsYXNzIHogZXh0ZW5kcyBOe2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpLHRoaXMubGFiZWw9dGhpcy5zZXR0aW5nLmxhYmVsLHRoaXMubnVtYmVyPXRoaXMuc2V0dGluZy5udW1iZXJ9Z2V0IHNldHRpbmcoKXtyZXR1cm4gdGhpcy5fc2V0dGluZ31nZXQgc2V0dGluZ3NUZXh0RWxlbSgpe3JldHVybiB0aGlzLl9zZXR0aW5nc1RleHRFbGVtfHwodGhpcy5fc2V0dGluZ3NUZXh0RWxlbT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIiksdGhpcy5fc2V0dGluZ3NUZXh0RWxlbS5pbm5lclRleHQ9dGhpcy5zZXR0aW5nLmxhYmVsLHRoaXMuX3NldHRpbmdzVGV4dEVsZW0udGl0bGU9dGhpcy5zZXR0aW5nLmRlc2NyaXB0aW9uKSx0aGlzLl9zZXR0aW5nc1RleHRFbGVtfWdldCBzcGlubmVyKCl7cmV0dXJuIHRoaXMuX3NwaW5uZXJ8fCh0aGlzLl9zcGlubmVyPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKSx0aGlzLl9zcGlubmVyLnR5cGU9XCJudW1iZXJcIix0aGlzLl9zcGlubmVyLm1pbj10aGlzLnNldHRpbmcubWluLnRvU3RyaW5nKCksdGhpcy5fc3Bpbm5lci5tYXg9dGhpcy5zZXR0aW5nLm1heC50b1N0cmluZygpLHRoaXMuX3NwaW5uZXIudmFsdWU9dGhpcy5zZXR0aW5nLm51bWJlci50b1N0cmluZygpLHRoaXMuX3NwaW5uZXIudGl0bGU9dGhpcy5zZXR0aW5nLmRlc2NyaXB0aW9uLHRoaXMuX3NwaW5uZXIuY2xhc3NMaXN0LmFkZChcImZvcm0tY29udHJvbFwiKSksdGhpcy5fc3Bpbm5lcn1nZXQgcm9vdEVsZW1lbnQoKXtyZXR1cm4gdGhpcy5fcm9vdEVsZW1lbnR8fCh0aGlzLl9yb290RWxlbWVudD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHRoaXMuX3Jvb3RFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJzZXR0aW5nXCIpLHRoaXMuX3Jvb3RFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJmb3JtLWdyb3VwXCIpLHRoaXMuX3Jvb3RFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuc2V0dGluZ3NUZXh0RWxlbSksdGhpcy5fcm9vdEVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5zcGlubmVyKSx0aGlzLnNwaW5uZXIub25jaGFuZ2U9dD0+e2NvbnN0IGU9dC50YXJnZXQscz1OdW1iZXIucGFyc2VJbnQoZS52YWx1ZSk7TnVtYmVyLmlzTmFOKHMpPyhsLkxvZ2dlci5XYXJuaW5nKGwuTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSxgQ291bGQgbm90IHBhcnNlIHZhbHVlIGNoYW5nZSBpbnRvIGEgdmFsaWQgbnVtYmVyIC0gdmFsdWUgd2FzICR7ZS52YWx1ZX0sIHJlc2V0dGluZyB2YWx1ZSB0byAke3RoaXMuc2V0dGluZy5taW59YCksdGhpcy5zZXR0aW5nLm51bWJlciE9PXRoaXMuc2V0dGluZy5taW4mJih0aGlzLnNldHRpbmcubnVtYmVyPXRoaXMuc2V0dGluZy5taW4pKTp0aGlzLnNldHRpbmcubnVtYmVyIT09cyYmKHRoaXMuc2V0dGluZy5udW1iZXI9cyx0aGlzLnNldHRpbmcudXBkYXRlVVJMUGFyYW1zKCkpfSksdGhpcy5fcm9vdEVsZW1lbnR9c2V0IG51bWJlcih0KXt0aGlzLnNwaW5uZXIudmFsdWU9dGhpcy5zZXR0aW5nLmNsYW1wKHQpLnRvU3RyaW5nKCl9Z2V0IG51bWJlcigpe3JldHVybit0aGlzLnNwaW5uZXIudmFsdWV9c2V0IGxhYmVsKHQpe3RoaXMuc2V0dGluZ3NUZXh0RWxlbS5pbm5lclRleHQ9dH1nZXQgbGFiZWwoKXtyZXR1cm4gdGhpcy5zZXR0aW5nc1RleHRFbGVtLmlubmVyVGV4dH19Y2xhc3MgQiBleHRlbmRzIE57Y29uc3RydWN0b3IodCl7c3VwZXIodCksdGhpcy5sYWJlbD10aGlzLnNldHRpbmcubGFiZWwsdGhpcy50ZXh0PXRoaXMuc2V0dGluZy50ZXh0fWdldCBzZXR0aW5nKCl7cmV0dXJuIHRoaXMuX3NldHRpbmd9Z2V0IHNldHRpbmdzVGV4dEVsZW0oKXtyZXR1cm4gdGhpcy5fc2V0dGluZ3NUZXh0RWxlbXx8KHRoaXMuX3NldHRpbmdzVGV4dEVsZW09ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSx0aGlzLl9zZXR0aW5nc1RleHRFbGVtLmlubmVyVGV4dD10aGlzLnNldHRpbmcubGFiZWwsdGhpcy5fc2V0dGluZ3NUZXh0RWxlbS50aXRsZT10aGlzLnNldHRpbmcuZGVzY3JpcHRpb24pLHRoaXMuX3NldHRpbmdzVGV4dEVsZW19Z2V0IHRleHRib3goKXtyZXR1cm4gdGhpcy5fdGV4dGJveHx8KHRoaXMuX3RleHRib3g9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpLHRoaXMuX3RleHRib3guY2xhc3NMaXN0LmFkZChcImZvcm0tY29udHJvbFwiKSx0aGlzLl90ZXh0Ym94LnR5cGU9XCJ0ZXh0Ym94XCIpLHRoaXMuX3RleHRib3h9Z2V0IHJvb3RFbGVtZW50KCl7aWYoIXRoaXMuX3Jvb3RFbGVtZW50KXt0aGlzLl9yb290RWxlbWVudD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHRoaXMuX3Jvb3RFbGVtZW50LmlkPXRoaXMuc2V0dGluZy5pZCx0aGlzLl9yb290RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwic2V0dGluZ1wiKSx0aGlzLl9yb290RWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLnNldHRpbmdzVGV4dEVsZW0pO2NvbnN0IHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpO3RoaXMuX3Jvb3RFbGVtZW50LmFwcGVuZENoaWxkKHQpLHRoaXMudGV4dGJveC50aXRsZT10aGlzLnNldHRpbmcuZGVzY3JpcHRpb24sdC5hcHBlbmRDaGlsZCh0aGlzLnRleHRib3gpLHRoaXMudGV4dGJveC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwoKCk9Pnt0aGlzLnNldHRpbmcudGV4dCE9PXRoaXMudGV4dGJveC52YWx1ZSYmKHRoaXMuc2V0dGluZy50ZXh0PXRoaXMudGV4dGJveC52YWx1ZSx0aGlzLnNldHRpbmcudXBkYXRlVVJMUGFyYW1zKCkpfSkpfXJldHVybiB0aGlzLl9yb290RWxlbWVudH1zZXQgdGV4dCh0KXt0aGlzLnRleHRib3gudmFsdWU9dH1nZXQgdGV4dCgpe3JldHVybiB0aGlzLnRleHRib3gudmFsdWV9c2V0IGxhYmVsKHQpe3RoaXMuc2V0dGluZ3NUZXh0RWxlbS5pbm5lclRleHQ9dH1nZXQgbGFiZWwoKXtyZXR1cm4gdGhpcy5zZXR0aW5nc1RleHRFbGVtLmlubmVyVGV4dH19Y2xhc3MgVSBleHRlbmRzIE57Y29uc3RydWN0b3IodCl7c3VwZXIodCksdGhpcy5sYWJlbD10aGlzLnNldHRpbmcubGFiZWwsdGhpcy5vcHRpb25zPXRoaXMuc2V0dGluZy5vcHRpb25zLHRoaXMuc2VsZWN0ZWQ9dGhpcy5zZXR0aW5nLnNlbGVjdGVkfWdldCBzZXR0aW5nKCl7cmV0dXJuIHRoaXMuX3NldHRpbmd9Z2V0IHNlbGVjdG9yKCl7cmV0dXJuIHRoaXMuX3NlbGVjdG9yfHwodGhpcy5fc2VsZWN0b3I9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNlbGVjdFwiKSx0aGlzLl9zZWxlY3Rvci5jbGFzc0xpc3QuYWRkKFwiZm9ybS1jb250cm9sXCIpLHRoaXMuX3NlbGVjdG9yLmNsYXNzTGlzdC5hZGQoXCJzZXR0aW5ncy1vcHRpb25cIikpLHRoaXMuX3NlbGVjdG9yfWdldCBzZXR0aW5nc1RleHRFbGVtKCl7cmV0dXJuIHRoaXMuX3NldHRpbmdzVGV4dEVsZW18fCh0aGlzLl9zZXR0aW5nc1RleHRFbGVtPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksdGhpcy5fc2V0dGluZ3NUZXh0RWxlbS5pbm5lclRleHQ9dGhpcy5zZXR0aW5nLmxhYmVsLHRoaXMuX3NldHRpbmdzVGV4dEVsZW0udGl0bGU9dGhpcy5zZXR0aW5nLmRlc2NyaXB0aW9uKSx0aGlzLl9zZXR0aW5nc1RleHRFbGVtfXNldCBsYWJlbCh0KXt0aGlzLnNldHRpbmdzVGV4dEVsZW0uaW5uZXJUZXh0PXR9Z2V0IGxhYmVsKCl7cmV0dXJuIHRoaXMuc2V0dGluZ3NUZXh0RWxlbS5pbm5lclRleHR9Z2V0IHJvb3RFbGVtZW50KCl7aWYoIXRoaXMuX3Jvb3RFbGVtZW50KXt0aGlzLl9yb290RWxlbWVudD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHRoaXMuX3Jvb3RFbGVtZW50LmlkPXRoaXMuc2V0dGluZy5pZCx0aGlzLl9yb290RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwic2V0dGluZ1wiKSx0aGlzLl9yb290RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZm9ybS1ncm91cFwiKSx0aGlzLl9yb290RWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLnNldHRpbmdzVGV4dEVsZW0pO2NvbnN0IHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpO3RoaXMuX3Jvb3RFbGVtZW50LmFwcGVuZENoaWxkKHQpLHRoaXMuc2VsZWN0b3IudGl0bGU9dGhpcy5zZXR0aW5nLmRlc2NyaXB0aW9uLHQuYXBwZW5kQ2hpbGQodGhpcy5zZWxlY3RvciksdGhpcy5zZWxlY3Rvci5vbmNoYW5nZT0oKT0+e3RoaXMuc2V0dGluZy5zZWxlY3RlZCE9PXRoaXMuc2VsZWN0b3IudmFsdWUmJih0aGlzLnNldHRpbmcuc2VsZWN0ZWQ9dGhpcy5zZWxlY3Rvci52YWx1ZSx0aGlzLnNldHRpbmcudXBkYXRlVVJMUGFyYW1zKCkpfX1yZXR1cm4gdGhpcy5fcm9vdEVsZW1lbnR9c2V0IG9wdGlvbnModCl7Zm9yKGxldCB0PXRoaXMuc2VsZWN0b3Iub3B0aW9ucy5sZW5ndGgtMTt0Pj0wO3QtLSl0aGlzLnNlbGVjdG9yLnJlbW92ZSh0KTt0LmZvckVhY2goKHQ9Pntjb25zdCBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7ZS52YWx1ZT10LGUuaW5uZXJIVE1MPXQsdGhpcy5zZWxlY3Rvci5hcHBlbmRDaGlsZChlKX0pKX1nZXQgb3B0aW9ucygpe3JldHVyblsuLi50aGlzLnNlbGVjdG9yLm9wdGlvbnNdLm1hcCgodD0+dC52YWx1ZSkpfXNldCBzZWxlY3RlZCh0KXtjb25zdCBlPXRoaXMub3B0aW9ucy5maWx0ZXIoKGU9Pi0xIT09ZS5pbmRleE9mKHQpKSk7ZS5sZW5ndGgmJih0aGlzLnNlbGVjdG9yLnZhbHVlPWVbMF0pfWdldCBzZWxlY3RlZCgpe3JldHVybiB0aGlzLnNlbGVjdG9yLnZhbHVlfWRpc2FibGUoKXt0aGlzLnNlbGVjdG9yLmRpc2FibGVkPSEwfWVuYWJsZSgpe3RoaXMuc2VsZWN0b3IuZGlzYWJsZWQ9ITF9fWNvbnN0IEQ9XCJMaWdodE1vZGVcIjtjbGFzcyBIe2NvbnN0cnVjdG9yKHQpe3RoaXMuY3VzdG9tRmxhZ3M9bmV3IE1hcCx0aGlzLmZsYWdzVWk9bmV3IE1hcCx0aGlzLm51bWVyaWNQYXJhbWV0ZXJzVWk9bmV3IE1hcCx0aGlzLnRleHRQYXJhbWV0ZXJzVWk9bmV3IE1hcCx0aGlzLm9wdGlvblBhcmFtZXRlcnNVaT1uZXcgTWFwLHRoaXMuY3JlYXRlQ3VzdG9tVUlTZXR0aW5ncyh0LnVzZVVybFBhcmFtcyksdGhpcy5yZWdpc3RlclNldHRpbmdzVUlDb21wb25lbnRzKHQpfWNyZWF0ZUN1c3RvbVVJU2V0dGluZ3ModCl7dGhpcy5jdXN0b21GbGFncy5zZXQoRCxuZXcgbC5TZXR0aW5nRmxhZyhELFwiQ29sb3IgU2NoZW1lOiBEYXJrIE1vZGVcIixcIlBhZ2Ugc3R5bGluZyB3aWxsIGJlIGVpdGhlciBsaWdodCBvciBkYXJrXCIsITEsdCwoKHQsZSk9PntlLmxhYmVsPWBDb2xvciBTY2hlbWU6ICR7dD9cIkxpZ2h0XCI6XCJEYXJrXCJ9IE1vZGVgfSkpKX1yZWdpc3RlclNldHRpbmdzVUlDb21wb25lbnRzKHQpe2Zvcihjb25zdCBlIG9mIHQuZ2V0RmxhZ3MoKSl0aGlzLmZsYWdzVWkuc2V0KGUuaWQsbmV3IFIoZSkpO2Zvcihjb25zdCB0IG9mIEFycmF5LmZyb20odGhpcy5jdXN0b21GbGFncy52YWx1ZXMoKSkpdGhpcy5mbGFnc1VpLnNldCh0LmlkLG5ldyBSKHQpKTtmb3IoY29uc3QgZSBvZiB0LmdldFRleHRTZXR0aW5ncygpKXRoaXMudGV4dFBhcmFtZXRlcnNVaS5zZXQoZS5pZCxuZXcgQihlKSk7Zm9yKGNvbnN0IGUgb2YgdC5nZXROdW1lcmljU2V0dGluZ3MoKSl0aGlzLm51bWVyaWNQYXJhbWV0ZXJzVWkuc2V0KGUuaWQsbmV3IHooZSkpO2Zvcihjb25zdCBlIG9mIHQuZ2V0T3B0aW9uU2V0dGluZ3MoKSl0aGlzLm9wdGlvblBhcmFtZXRlcnNVaS5zZXQoZS5pZCxuZXcgVShlKSl9YnVpbGRTZWN0aW9uV2l0aEhlYWRpbmcodCxlKXtjb25zdCBzPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzZWN0aW9uXCIpO3MuY2xhc3NMaXN0LmFkZChcInNldHRpbmdzQ29udGFpbmVyXCIpO2NvbnN0IGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtyZXR1cm4gaS5jbGFzc0xpc3QuYWRkKFwic2V0dGluZ3NIZWFkZXJcIiksaS5jbGFzc0xpc3QuYWRkKFwic2V0dGluZ3MtdGV4dFwiKSxpLnRleHRDb250ZW50PWUscy5hcHBlbmRDaGlsZChpKSx0LmFwcGVuZENoaWxkKHMpLHN9cG9wdWxhdGVTZXR0aW5nc0VsZW1lbnQodCl7Y29uc3QgZT10aGlzLmJ1aWxkU2VjdGlvbldpdGhIZWFkaW5nKHQsXCJQaXhlbCBTdHJlYW1pbmdcIik7dGhpcy5hZGRTZXR0aW5nVGV4dChlLHRoaXMudGV4dFBhcmFtZXRlcnNVaS5nZXQobC5UZXh0UGFyYW1ldGVycy5TaWduYWxsaW5nU2VydmVyVXJsKSksdGhpcy5hZGRTZXR0aW5nT3B0aW9uKGUsdGhpcy5vcHRpb25QYXJhbWV0ZXJzVWkuZ2V0KGwuT3B0aW9uUGFyYW1ldGVycy5TdHJlYW1lcklkKSksdGhpcy5hZGRTZXR0aW5nRmxhZyhlLHRoaXMuZmxhZ3NVaS5nZXQobC5GbGFncy5BdXRvQ29ubmVjdCkpLHRoaXMuYWRkU2V0dGluZ0ZsYWcoZSx0aGlzLmZsYWdzVWkuZ2V0KGwuRmxhZ3MuQXV0b1BsYXlWaWRlbykpLHRoaXMuYWRkU2V0dGluZ0ZsYWcoZSx0aGlzLmZsYWdzVWkuZ2V0KGwuRmxhZ3MuQnJvd3NlclNlbmRPZmZlcikpLHRoaXMuYWRkU2V0dGluZ0ZsYWcoZSx0aGlzLmZsYWdzVWkuZ2V0KGwuRmxhZ3MuVXNlTWljKSksdGhpcy5hZGRTZXR0aW5nRmxhZyhlLHRoaXMuZmxhZ3NVaS5nZXQobC5GbGFncy5TdGFydFZpZGVvTXV0ZWQpKSx0aGlzLmFkZFNldHRpbmdGbGFnKGUsdGhpcy5mbGFnc1VpLmdldChsLkZsYWdzLlByZWZlclNGVSkpLHRoaXMuYWRkU2V0dGluZ0ZsYWcoZSx0aGlzLmZsYWdzVWkuZ2V0KGwuRmxhZ3MuSXNRdWFsaXR5Q29udHJvbGxlcikpLHRoaXMuYWRkU2V0dGluZ0ZsYWcoZSx0aGlzLmZsYWdzVWkuZ2V0KGwuRmxhZ3MuRm9yY2VNb25vQXVkaW8pKSx0aGlzLmFkZFNldHRpbmdGbGFnKGUsdGhpcy5mbGFnc1VpLmdldChsLkZsYWdzLkZvcmNlVFVSTikpLHRoaXMuYWRkU2V0dGluZ0ZsYWcoZSx0aGlzLmZsYWdzVWkuZ2V0KGwuRmxhZ3MuU3VwcHJlc3NCcm93c2VyS2V5cykpLHRoaXMuYWRkU2V0dGluZ0ZsYWcoZSx0aGlzLmZsYWdzVWkuZ2V0KGwuRmxhZ3MuQUZLRGV0ZWN0aW9uKSksdGhpcy5hZGRTZXR0aW5nTnVtZXJpYyhlLHRoaXMubnVtZXJpY1BhcmFtZXRlcnNVaS5nZXQobC5OdW1lcmljUGFyYW1ldGVycy5BRktUaW1lb3V0U2VjcykpLHRoaXMuYWRkU2V0dGluZ051bWVyaWMoZSx0aGlzLm51bWVyaWNQYXJhbWV0ZXJzVWkuZ2V0KGwuTnVtZXJpY1BhcmFtZXRlcnMuTWF4UmVjb25uZWN0QXR0ZW1wdHMpKTtjb25zdCBzPXRoaXMuYnVpbGRTZWN0aW9uV2l0aEhlYWRpbmcodCxcIlVJXCIpO3RoaXMuYWRkU2V0dGluZ0ZsYWcocyx0aGlzLmZsYWdzVWkuZ2V0KGwuRmxhZ3MuTWF0Y2hWaWV3cG9ydFJlc29sdXRpb24pKSx0aGlzLmFkZFNldHRpbmdGbGFnKHMsdGhpcy5mbGFnc1VpLmdldChsLkZsYWdzLkhvdmVyaW5nTW91c2VNb2RlKSksdGhpcy5hZGRTZXR0aW5nRmxhZyhzLHRoaXMuZmxhZ3NVaS5nZXQoRCkpO2NvbnN0IGk9dGhpcy5idWlsZFNlY3Rpb25XaXRoSGVhZGluZyh0LFwiSW5wdXRcIik7dGhpcy5hZGRTZXR0aW5nRmxhZyhpLHRoaXMuZmxhZ3NVaS5nZXQobC5GbGFncy5LZXlib2FyZElucHV0KSksdGhpcy5hZGRTZXR0aW5nRmxhZyhpLHRoaXMuZmxhZ3NVaS5nZXQobC5GbGFncy5Nb3VzZUlucHV0KSksdGhpcy5hZGRTZXR0aW5nRmxhZyhpLHRoaXMuZmxhZ3NVaS5nZXQobC5GbGFncy5Ub3VjaElucHV0KSksdGhpcy5hZGRTZXR0aW5nRmxhZyhpLHRoaXMuZmxhZ3NVaS5nZXQobC5GbGFncy5HYW1lcGFkSW5wdXQpKSx0aGlzLmFkZFNldHRpbmdGbGFnKGksdGhpcy5mbGFnc1VpLmdldChsLkZsYWdzLlhSQ29udHJvbGxlcklucHV0KSk7Y29uc3Qgbj10aGlzLmJ1aWxkU2VjdGlvbldpdGhIZWFkaW5nKHQsXCJFbmNvZGVyXCIpO3RoaXMuYWRkU2V0dGluZ051bWVyaWMobix0aGlzLm51bWVyaWNQYXJhbWV0ZXJzVWkuZ2V0KGwuTnVtZXJpY1BhcmFtZXRlcnMuTWluUVApKSx0aGlzLmFkZFNldHRpbmdOdW1lcmljKG4sdGhpcy5udW1lcmljUGFyYW1ldGVyc1VpLmdldChsLk51bWVyaWNQYXJhbWV0ZXJzLk1heFFQKSk7Y29uc3Qgbz10aGlzLm9wdGlvblBhcmFtZXRlcnNVaS5nZXQobC5PcHRpb25QYXJhbWV0ZXJzLlByZWZlcnJlZENvZGVjKTt0aGlzLmFkZFNldHRpbmdPcHRpb24obix0aGlzLm9wdGlvblBhcmFtZXRlcnNVaS5nZXQobC5PcHRpb25QYXJhbWV0ZXJzLlByZWZlcnJlZENvZGVjKSksbyYmWy4uLm8uc2VsZWN0b3Iub3B0aW9uc10ubWFwKCh0PT50LnZhbHVlKSkuaW5jbHVkZXMoXCJPbmx5IGF2YWlsYWJsZSBvbiBDaHJvbWVcIikmJm8uZGlzYWJsZSgpO2NvbnN0IGE9dGhpcy5idWlsZFNlY3Rpb25XaXRoSGVhZGluZyh0LFwiV2ViUlRDXCIpO3RoaXMuYWRkU2V0dGluZ051bWVyaWMoYSx0aGlzLm51bWVyaWNQYXJhbWV0ZXJzVWkuZ2V0KGwuTnVtZXJpY1BhcmFtZXRlcnMuV2ViUlRDRlBTKSksdGhpcy5hZGRTZXR0aW5nTnVtZXJpYyhhLHRoaXMubnVtZXJpY1BhcmFtZXRlcnNVaS5nZXQobC5OdW1lcmljUGFyYW1ldGVycy5XZWJSVENNaW5CaXRyYXRlKSksdGhpcy5hZGRTZXR0aW5nTnVtZXJpYyhhLHRoaXMubnVtZXJpY1BhcmFtZXRlcnNVaS5nZXQobC5OdW1lcmljUGFyYW1ldGVycy5XZWJSVENNYXhCaXRyYXRlKSl9YWRkU2V0dGluZ1RleHQodCxlKXtlJiYodC5hcHBlbmRDaGlsZChlLnJvb3RFbGVtZW50KSx0aGlzLnRleHRQYXJhbWV0ZXJzVWkuc2V0KGUuc2V0dGluZy5pZCxlKSl9YWRkU2V0dGluZ0ZsYWcodCxlKXtlJiYodC5hcHBlbmRDaGlsZChlLnJvb3RFbGVtZW50KSx0aGlzLmZsYWdzVWkuc2V0KGUuc2V0dGluZy5pZCxlKSl9YWRkU2V0dGluZ051bWVyaWModCxlKXtlJiYodC5hcHBlbmRDaGlsZChlLnJvb3RFbGVtZW50KSx0aGlzLm51bWVyaWNQYXJhbWV0ZXJzVWkuc2V0KGUuc2V0dGluZy5pZCxlKSl9YWRkU2V0dGluZ09wdGlvbih0LGUpe2UmJih0LmFwcGVuZENoaWxkKGUucm9vdEVsZW1lbnQpLHRoaXMub3B0aW9uUGFyYW1ldGVyc1VpLnNldChlLnNldHRpbmcuaWQsZSkpfW9uU2V0dGluZ3NDaGFuZ2VkKHtkYXRhOntpZDp0LHRhcmdldDplLHR5cGU6c319KXtpZihcImZsYWdcIj09PXMpe2NvbnN0IHM9dCxpPWUsbj10aGlzLmZsYWdzVWkuZ2V0KHMpO24mJihuLmZsYWchPT1pLmZsYWcmJihuLmZsYWc9aS5mbGFnKSxuLmxhYmVsIT09aS5sYWJlbCYmKG4ubGFiZWw9aS5sYWJlbCkpfWVsc2UgaWYoXCJudW1iZXJcIj09PXMpe2NvbnN0IHM9dCxpPWUsbj10aGlzLm51bWVyaWNQYXJhbWV0ZXJzVWkuZ2V0KHMpO24mJihuLm51bWJlciE9PWkubnVtYmVyJiYobi5udW1iZXI9aS5udW1iZXIpLG4ubGFiZWwhPT1pLmxhYmVsJiYobi5sYWJlbD1pLmxhYmVsKSl9ZWxzZSBpZihcInRleHRcIj09PXMpe2NvbnN0IHM9dCxpPWUsbj10aGlzLnRleHRQYXJhbWV0ZXJzVWkuZ2V0KHMpO24mJihuLnRleHQhPT1pLnRleHQmJihuLnRleHQ9aS50ZXh0KSxuLmxhYmVsIT09aS5sYWJlbCYmKG4ubGFiZWw9aS5sYWJlbCkpfWVsc2UgaWYoXCJvcHRpb25cIj09PXMpe2NvbnN0IHM9dCxpPWUsbj10aGlzLm9wdGlvblBhcmFtZXRlcnNVaS5nZXQocyk7aWYobil7Y29uc3QgdD1uLm9wdGlvbnMsZT1pLm9wdGlvbnM7dC5sZW5ndGg9PT1lLmxlbmd0aCYmdC5ldmVyeSgodD0+ZS5pbmNsdWRlcyh0KSkpfHwobi5vcHRpb25zPWkub3B0aW9ucyksbi5zZWxlY3RlZCE9PWkuc2VsZWN0ZWQmJihuLnNlbGVjdGVkPWkuc2VsZWN0ZWQpLG4ubGFiZWwhPT1pLmxhYmVsJiYobi5sYWJlbD1pLmxhYmVsKX19fWFkZEN1c3RvbUZsYWdPblNldHRpbmdDaGFuZ2VkTGlzdGVuZXIodCxlKXt0aGlzLmN1c3RvbUZsYWdzLmhhcyh0KSYmKHRoaXMuY3VzdG9tRmxhZ3MuZ2V0KHQpLm9uQ2hhbmdlPWUpfXNldEN1c3RvbUZsYWdMYWJlbCh0LGUpe3RoaXMuY3VzdG9tRmxhZ3MuaGFzKHQpPyh0aGlzLmN1c3RvbUZsYWdzLmdldCh0KS5sYWJlbD1lLHRoaXMuZmxhZ3NVaS5nZXQodCkubGFiZWw9ZSk6bC5Mb2dnZXIuV2FybmluZyhsLkxvZ2dlci5HZXRTdGFja1RyYWNlKCksYENhbm5vdCBzZXQgbGFiZWwgZm9yIGZsYWcgY2FsbGVkICR7dH0gLSBpdCBkb2VzIG5vdCBleGlzdCBpbiB0aGUgQ29uZmlnLmZsYWdzIG1hcC5gKX1pc0N1c3RvbUZsYWdFbmFibGVkKHQpe3JldHVybiB0aGlzLmN1c3RvbUZsYWdzLmdldCh0KS5mbGFnfX1jbGFzcyBRe2NvbnN0cnVjdG9yKHQpe3RoaXMuX29wdGlvbnM9dCx0aGlzLnN0cmVhbT10LnN0cmVhbSx0aGlzLm9uQ29sb3JNb2RlQ2hhbmdlZD10Lm9uQ29sb3JNb2RlQ2hhbmdlZCx0aGlzLmNvbmZpZ1VJPW5ldyBIKHRoaXMuc3RyZWFtLmNvbmZpZyksdGhpcy5jcmVhdGVPdmVybGF5cygpLFQodC5zdGF0c1BhbmVsQ29uZmlnKSYmKHRoaXMuc3RhdHNQYW5lbD1uZXcgTyx0aGlzLnVpRmVhdHVyZXNFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuc3RhdHNQYW5lbC5yb290RWxlbWVudCkpLFQodC5zZXR0aW5nc1BhbmVsQ29uZmlnKSYmKHRoaXMuc2V0dGluZ3NQYW5lbD1uZXcgayx0aGlzLnVpRmVhdHVyZXNFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuc2V0dGluZ3NQYW5lbC5yb290RWxlbWVudCksdGhpcy5jb25maWd1cmVTZXR0aW5ncygpKSx0LnZpZGVvUXBJbmRpY2F0b3JDb25maWcmJnQudmlkZW9RcEluZGljYXRvckNvbmZpZy5kaXNhYmxlSW5kaWNhdG9yfHwodGhpcy52aWRlb1FwSW5kaWNhdG9yPW5ldyBNLHRoaXMudWlGZWF0dXJlc0VsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy52aWRlb1FwSW5kaWNhdG9yLnJvb3RFbGVtZW50KSksdGhpcy5jcmVhdGVCdXR0b25zKCksdGhpcy5yZWdpc3RlckNhbGxiYWNrcygpLHRoaXMuc2hvd0Nvbm5lY3RPckF1dG9Db25uZWN0T3ZlcmxheXMoKSx0aGlzLnNldENvbG9yTW9kZSh0aGlzLmNvbmZpZ1VJLmlzQ3VzdG9tRmxhZ0VuYWJsZWQoRCkpfWNyZWF0ZU92ZXJsYXlzKCl7dGhpcy5kaXNjb25uZWN0T3ZlcmxheT1uZXcgdSh0aGlzLnN0cmVhbS52aWRlb0VsZW1lbnRQYXJlbnQpLHRoaXMuY29ubmVjdE92ZXJsYXk9bmV3IG0odGhpcy5zdHJlYW0udmlkZW9FbGVtZW50UGFyZW50KSx0aGlzLnBsYXlPdmVybGF5PW5ldyBnKHRoaXMuc3RyZWFtLnZpZGVvRWxlbWVudFBhcmVudCksdGhpcy5pbmZvT3ZlcmxheT1uZXcgRSh0aGlzLnN0cmVhbS52aWRlb0VsZW1lbnRQYXJlbnQpLHRoaXMuZXJyb3JPdmVybGF5PW5ldyB2KHRoaXMuc3RyZWFtLnZpZGVvRWxlbWVudFBhcmVudCksdGhpcy5hZmtPdmVybGF5PW5ldyBiKHRoaXMuc3RyZWFtLnZpZGVvRWxlbWVudFBhcmVudCksdGhpcy5kaXNjb25uZWN0T3ZlcmxheS5vbkFjdGlvbigoKCk9PnRoaXMuc3RyZWFtLnJlY29ubmVjdCgpKSksdGhpcy5jb25uZWN0T3ZlcmxheS5vbkFjdGlvbigoKCk9PnRoaXMuc3RyZWFtLmNvbm5lY3QoKSkpLHRoaXMucGxheU92ZXJsYXkub25BY3Rpb24oKCgpPT50aGlzLnN0cmVhbS5wbGF5KCkpKX1jcmVhdGVCdXR0b25zKCl7Y29uc3QgdD17c3RhdHNCdXR0b25UeXBlOnRoaXMuX29wdGlvbnMuc3RhdHNQYW5lbENvbmZpZz90aGlzLl9vcHRpb25zLnN0YXRzUGFuZWxDb25maWcudmlzaWJpbGl0eUJ1dHRvbkNvbmZpZzp2b2lkIDAsc2V0dGluZ3NCdXR0b25UeXBlOnRoaXMuX29wdGlvbnMuc2V0dGluZ3NQYW5lbENvbmZpZz90aGlzLl9vcHRpb25zLnNldHRpbmdzUGFuZWxDb25maWcudmlzaWJpbGl0eUJ1dHRvbkNvbmZpZzp2b2lkIDAsZnVsbHNjcmVlbkJ1dHRvblR5cGU6dGhpcy5fb3B0aW9ucy5mdWxsU2NyZWVuQ29udHJvbHNDb25maWcseHJJY29uVHlwZTp0aGlzLl9vcHRpb25zLnhyQ29udHJvbHNDb25maWd9LGU9bmV3IEwodCk7dGhpcy51aUZlYXR1cmVzRWxlbWVudC5hcHBlbmRDaGlsZChlLnJvb3RFbGVtZW50KTtjb25zdCBzPXRoaXMuX29wdGlvbnMuZnVsbFNjcmVlbkNvbnRyb2xzQ29uZmlnJiZ0aGlzLl9vcHRpb25zLmZ1bGxTY3JlZW5Db250cm9sc0NvbmZpZy5jcmVhdGlvbk1vZGU9PT1jLlVzZUN1c3RvbUVsZW1lbnQ/bmV3IHkodGhpcy5fb3B0aW9ucy5mdWxsU2NyZWVuQ29udHJvbHNDb25maWcuY3VzdG9tRWxlbWVudCk6ZS5mdWxsc2NyZWVuSWNvbjtzJiYocy5mdWxsc2NyZWVuRWxlbWVudD10aGlzLnJvb3RFbGVtZW50KTtjb25zdCBpPWUuc2V0dGluZ3NJY29uP2Uuc2V0dGluZ3NJY29uLnJvb3RFbGVtZW50OnRoaXMuX29wdGlvbnMuc2V0dGluZ3NQYW5lbENvbmZpZy52aXNpYmlsaXR5QnV0dG9uQ29uZmlnLmN1c3RvbUVsZW1lbnQ7aSYmKGkub25jbGljaz0oKT0+dGhpcy5zZXR0aW5nc0NsaWNrZWQoKSksdGhpcy5zZXR0aW5nc1BhbmVsJiYodGhpcy5zZXR0aW5nc1BhbmVsLnNldHRpbmdzQ2xvc2VCdXR0b24ub25jbGljaz0oKT0+dGhpcy5zZXR0aW5nc0NsaWNrZWQoKSk7Y29uc3Qgbj1lLnhySWNvbj9lLnhySWNvbi5yb290RWxlbWVudDp0aGlzLl9vcHRpb25zLnhyQ29udHJvbHNDb25maWcuY3JlYXRpb25Nb2RlPT09Yy5Vc2VDdXN0b21FbGVtZW50P3RoaXMuX29wdGlvbnMueHJDb250cm9sc0NvbmZpZy5jdXN0b21FbGVtZW50OnZvaWQgMDtuJiYobi5vbmNsaWNrPSgpPT50aGlzLnN0cmVhbS50b2dnbGVYUigpKTtjb25zdCBvPWUuc3RhdHNJY29uP2Uuc3RhdHNJY29uLnJvb3RFbGVtZW50OnRoaXMuX29wdGlvbnMuc3RhdHNQYW5lbENvbmZpZy52aXNpYmlsaXR5QnV0dG9uQ29uZmlnLmN1c3RvbUVsZW1lbnQ7aWYobyYmKG8ub25jbGljaz0oKT0+dGhpcy5zdGF0c0NsaWNrZWQoKSksdGhpcy5zdGF0c1BhbmVsJiYodGhpcy5zdGF0c1BhbmVsLnN0YXRzQ2xvc2VCdXR0b24ub25jbGljaz0oKT0+dGhpcy5zdGF0c0NsaWNrZWQoKSksdGhpcy5zZXR0aW5nc1BhbmVsKXtjb25zdCB0PW5ldyBJKFwiU2hvdyBGUFNcIixcIlRvZ2dsZVwiKTt0LmFkZE9uQ2xpY2tMaXN0ZW5lcigoKCk9Pnt0aGlzLnN0cmVhbS5yZXF1ZXN0U2hvd0ZwcygpfSkpO2NvbnN0IGU9bmV3IEkoXCJSZXN0YXJ0IFN0cmVhbVwiLFwiUmVzdGFydFwiKTtlLmFkZE9uQ2xpY2tMaXN0ZW5lcigoKCk9Pnt0aGlzLnN0cmVhbS5yZWNvbm5lY3QoKX0pKTtjb25zdCBzPW5ldyBJKFwiUmVxdWVzdCBrZXlmcmFtZVwiLFwiUmVxdWVzdFwiKTtzLmFkZE9uQ2xpY2tMaXN0ZW5lcigoKCk9Pnt0aGlzLnN0cmVhbS5yZXF1ZXN0SWZyYW1lKCl9KSk7Y29uc3QgaT10aGlzLmNvbmZpZ1VJLmJ1aWxkU2VjdGlvbldpdGhIZWFkaW5nKHRoaXMuc2V0dGluZ3NQYW5lbC5zZXR0aW5nc0NvbnRlbnRFbGVtZW50LFwiQ29tbWFuZHNcIik7aS5hcHBlbmRDaGlsZCh0LnJvb3RFbGVtZW50KSxpLmFwcGVuZENoaWxkKHMucm9vdEVsZW1lbnQpLGkuYXBwZW5kQ2hpbGQoZS5yb290RWxlbWVudCl9fWNvbmZpZ3VyZVNldHRpbmdzKCl7dGhpcy5jb25maWdVSS5wb3B1bGF0ZVNldHRpbmdzRWxlbWVudCh0aGlzLnNldHRpbmdzUGFuZWwuc2V0dGluZ3NDb250ZW50RWxlbWVudCksdGhpcy5jb25maWdVSS5hZGRDdXN0b21GbGFnT25TZXR0aW5nQ2hhbmdlZExpc3RlbmVyKEQsKHQ9Pnt0aGlzLmNvbmZpZ1VJLnNldEN1c3RvbUZsYWdMYWJlbChELGBDb2xvciBTY2hlbWU6ICR7dD9cIkxpZ2h0XCI6XCJEYXJrXCJ9IE1vZGVgKSx0aGlzLnNldENvbG9yTW9kZSh0KX0pKX1yZWdpc3RlckNhbGxiYWNrcygpe3RoaXMuc3RyZWFtLmFkZEV2ZW50TGlzdGVuZXIoXCJhZmtXYXJuaW5nQWN0aXZhdGVcIiwoKHtkYXRhOntjb3VudERvd246dCxkaXNtaXNzQWZrOmV9fSk9PnRoaXMuc2hvd0Fma092ZXJsYXkodCxlKSkpLHRoaXMuc3RyZWFtLmFkZEV2ZW50TGlzdGVuZXIoXCJhZmtXYXJuaW5nVXBkYXRlXCIsKCh7ZGF0YTp7Y291bnREb3duOnR9fSk9PnRoaXMuYWZrT3ZlcmxheS51cGRhdGVDb3VudGRvd24odCkpKSx0aGlzLnN0cmVhbS5hZGRFdmVudExpc3RlbmVyKFwiYWZrV2FybmluZ0RlYWN0aXZhdGVcIiwoKCk9PnRoaXMuYWZrT3ZlcmxheS5oaWRlKCkpKSx0aGlzLnN0cmVhbS5hZGRFdmVudExpc3RlbmVyKFwiYWZrVGltZWRPdXRcIiwoKCk9PnRoaXMuYWZrT3ZlcmxheS5oaWRlKCkpKSx0aGlzLnN0cmVhbS5hZGRFdmVudExpc3RlbmVyKFwidmlkZW9FbmNvZGVyQXZnUVBcIiwoKHtkYXRhOnthdmdRUDp0fX0pPT50aGlzLm9uVmlkZW9FbmNvZGVyQXZnUVAodCkpKSx0aGlzLnN0cmVhbS5hZGRFdmVudExpc3RlbmVyKFwid2ViUnRjU2RwXCIsKCgpPT50aGlzLm9uV2ViUnRjU2RwKCkpKSx0aGlzLnN0cmVhbS5hZGRFdmVudExpc3RlbmVyKFwid2ViUnRjQXV0b0Nvbm5lY3RcIiwoKCk9PnRoaXMub25XZWJSdGNBdXRvQ29ubmVjdCgpKSksdGhpcy5zdHJlYW0uYWRkRXZlbnRMaXN0ZW5lcihcIndlYlJ0Y0Nvbm5lY3RpbmdcIiwoKCk9PnRoaXMub25XZWJSdGNDb25uZWN0aW5nKCkpKSx0aGlzLnN0cmVhbS5hZGRFdmVudExpc3RlbmVyKFwid2ViUnRjQ29ubmVjdGVkXCIsKCgpPT50aGlzLm9uV2ViUnRjQ29ubmVjdGVkKCkpKSx0aGlzLnN0cmVhbS5hZGRFdmVudExpc3RlbmVyKFwid2ViUnRjRmFpbGVkXCIsKCgpPT50aGlzLm9uV2ViUnRjRmFpbGVkKCkpKSx0aGlzLnN0cmVhbS5hZGRFdmVudExpc3RlbmVyKFwid2ViUnRjRGlzY29ubmVjdGVkXCIsKCh7ZGF0YTp7ZXZlbnRTdHJpbmc6dCxzaG93QWN0aW9uT3JFcnJvck9uRGlzY29ubmVjdDplfX0pPT50aGlzLm9uRGlzY29ubmVjdCh0LGUpKSksdGhpcy5zdHJlYW0uYWRkRXZlbnRMaXN0ZW5lcihcInZpZGVvSW5pdGlhbGl6ZWRcIiwoKCk9PnRoaXMub25WaWRlb0luaXRpYWxpemVkKCkpKSx0aGlzLnN0cmVhbS5hZGRFdmVudExpc3RlbmVyKFwic3RyZWFtTG9hZGluZ1wiLCgoKT0+dGhpcy5vblN0cmVhbUxvYWRpbmcoKSkpLHRoaXMuc3RyZWFtLmFkZEV2ZW50TGlzdGVuZXIoXCJwbGF5U3RyZWFtRXJyb3JcIiwoKHtkYXRhOnttZXNzYWdlOnR9fSk9PnRoaXMub25QbGF5U3RyZWFtRXJyb3IodCkpKSx0aGlzLnN0cmVhbS5hZGRFdmVudExpc3RlbmVyKFwicGxheVN0cmVhbVwiLCgoKT0+dGhpcy5vblBsYXlTdHJlYW0oKSkpLHRoaXMuc3RyZWFtLmFkZEV2ZW50TGlzdGVuZXIoXCJwbGF5U3RyZWFtUmVqZWN0ZWRcIiwoKHtkYXRhOntyZWFzb246dH19KT0+dGhpcy5vblBsYXlTdHJlYW1SZWplY3RlZCh0KSkpLHRoaXMuc3RyZWFtLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkRnJlZXplRnJhbWVcIiwoKHtkYXRhOntzaG91bGRTaG93UGxheU92ZXJsYXk6dH19KT0+dGhpcy5vbkxvYWRGcmVlemVGcmFtZSh0KSkpLHRoaXMuc3RyZWFtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdGF0c1JlY2VpdmVkXCIsKCh7ZGF0YTp7YWdncmVnYXRlZFN0YXRzOnR9fSk9PnRoaXMub25TdGF0c1JlY2VpdmVkKHQpKSksdGhpcy5zdHJlYW0uYWRkRXZlbnRMaXN0ZW5lcihcImxhdGVuY3lUZXN0UmVzdWx0XCIsKCh7ZGF0YTp7bGF0ZW5jeVRpbWluZ3M6dH19KT0+dGhpcy5vbkxhdGVuY3lUZXN0UmVzdWx0cyh0KSkpLHRoaXMuc3RyZWFtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdHJlYW1lckxpc3RNZXNzYWdlXCIsKCh7ZGF0YTp7bWVzc2FnZVN0cmVhbWVyTGlzdDp0LGF1dG9TZWxlY3RlZFN0cmVhbWVySWQ6ZX19KT0+dGhpcy5oYW5kbGVTdHJlYW1lckxpc3RNZXNzYWdlKHQsZSkpKSx0aGlzLnN0cmVhbS5hZGRFdmVudExpc3RlbmVyKFwic2V0dGluZ3NDaGFuZ2VkXCIsKHQ9PnRoaXMuY29uZmlnVUkub25TZXR0aW5nc0NoYW5nZWQodCkpKX1nZXQgcm9vdEVsZW1lbnQoKXtyZXR1cm4gdGhpcy5fcm9vdEVsZW1lbnR8fCh0aGlzLl9yb290RWxlbWVudD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHRoaXMuX3Jvb3RFbGVtZW50LmlkPVwicGxheWVyVUlcIix0aGlzLl9yb290RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibm9zZWxlY3RcIiksdGhpcy5fcm9vdEVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5zdHJlYW0udmlkZW9FbGVtZW50UGFyZW50KSx0aGlzLl9yb290RWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLnVpRmVhdHVyZXNFbGVtZW50KSksdGhpcy5fcm9vdEVsZW1lbnR9Z2V0IHVpRmVhdHVyZXNFbGVtZW50KCl7cmV0dXJuIHRoaXMuX3VpRmVhdHVyZUVsZW1lbnR8fCh0aGlzLl91aUZlYXR1cmVFbGVtZW50PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksdGhpcy5fdWlGZWF0dXJlRWxlbWVudC5pZD1cInVpRmVhdHVyZXNcIiksdGhpcy5fdWlGZWF0dXJlRWxlbWVudH1zaG93RGlzY29ubmVjdE92ZXJsYXkodCl7dGhpcy5oaWRlQ3VycmVudE92ZXJsYXkoKSx0aGlzLnVwZGF0ZURpc2Nvbm5lY3RPdmVybGF5KHQpLHRoaXMuZGlzY29ubmVjdE92ZXJsYXkuc2hvdygpLHRoaXMuY3VycmVudE92ZXJsYXk9dGhpcy5kaXNjb25uZWN0T3ZlcmxheX11cGRhdGVEaXNjb25uZWN0T3ZlcmxheSh0KXt0aGlzLmRpc2Nvbm5lY3RPdmVybGF5LnVwZGF0ZSh0KX1vbkRpc2Nvbm5lY3Rpb25BY3Rpb24oKXt0aGlzLmRpc2Nvbm5lY3RPdmVybGF5LmFjdGl2YXRlKCl9aGlkZUN1cnJlbnRPdmVybGF5KCl7bnVsbCE9dGhpcy5jdXJyZW50T3ZlcmxheSYmKHRoaXMuY3VycmVudE92ZXJsYXkuaGlkZSgpLHRoaXMuY3VycmVudE92ZXJsYXk9bnVsbCl9c2hvd0Nvbm5lY3RPdmVybGF5KCl7dGhpcy5oaWRlQ3VycmVudE92ZXJsYXkoKSx0aGlzLmNvbm5lY3RPdmVybGF5LnNob3coKSx0aGlzLmN1cnJlbnRPdmVybGF5PXRoaXMuY29ubmVjdE92ZXJsYXl9c2hvd1BsYXlPdmVybGF5KCl7dGhpcy5oaWRlQ3VycmVudE92ZXJsYXkoKSx0aGlzLnBsYXlPdmVybGF5LnNob3coKSx0aGlzLmN1cnJlbnRPdmVybGF5PXRoaXMucGxheU92ZXJsYXl9c2hvd1RleHRPdmVybGF5KHQpe3RoaXMuaGlkZUN1cnJlbnRPdmVybGF5KCksdGhpcy5pbmZvT3ZlcmxheS51cGRhdGUodCksdGhpcy5pbmZvT3ZlcmxheS5zaG93KCksdGhpcy5jdXJyZW50T3ZlcmxheT10aGlzLmluZm9PdmVybGF5fXNob3dFcnJvck92ZXJsYXkodCl7dGhpcy5oaWRlQ3VycmVudE92ZXJsYXkoKSx0aGlzLmVycm9yT3ZlcmxheS51cGRhdGUodCksdGhpcy5lcnJvck92ZXJsYXkuc2hvdygpLHRoaXMuY3VycmVudE92ZXJsYXk9dGhpcy5lcnJvck92ZXJsYXl9c2V0dGluZ3NDbGlja2VkKCl7dGhpcy5zdGF0c1BhbmVsLmhpZGUoKSx0aGlzLnNldHRpbmdzUGFuZWwudG9nZ2xlVmlzaWJpbGl0eSgpfXN0YXRzQ2xpY2tlZCgpe3RoaXMuc2V0dGluZ3NQYW5lbC5oaWRlKCksdGhpcy5zdGF0c1BhbmVsLnRvZ2dsZVZpc2liaWxpdHkoKX1vbkNvbm5lY3RBY3Rpb24oKXt0aGlzLmNvbm5lY3RPdmVybGF5LmFjdGl2YXRlKCl9b25QbGF5QWN0aW9uKCl7dGhpcy5wbGF5T3ZlcmxheS5hY3RpdmF0ZSgpfXNob3dBZmtPdmVybGF5KHQsZSl7dGhpcy5oaWRlQ3VycmVudE92ZXJsYXkoKSx0aGlzLmFma092ZXJsYXkudXBkYXRlQ291bnRkb3duKHQpLHRoaXMuYWZrT3ZlcmxheS5vbkFjdGlvbigoKCk9PmUoKSkpLHRoaXMuYWZrT3ZlcmxheS5zaG93KCksdGhpcy5jdXJyZW50T3ZlcmxheT10aGlzLmFma092ZXJsYXl9c2hvd0Nvbm5lY3RPckF1dG9Db25uZWN0T3ZlcmxheXMoKXt0aGlzLnN0cmVhbS5jb25maWcuaXNGbGFnRW5hYmxlZChsLkZsYWdzLkF1dG9Db25uZWN0KXx8dGhpcy5zaG93Q29ubmVjdE92ZXJsYXkoKX1vbldlYlJ0Y0F1dG9Db25uZWN0KCl7dGhpcy5zaG93VGV4dE92ZXJsYXkoXCJBdXRvIENvbm5lY3RpbmcgTm93XCIpfW9uV2ViUnRjU2RwKCl7dGhpcy5zaG93VGV4dE92ZXJsYXkoXCJXZWJSVEMgQ29ubmVjdGlvbiBOZWdvdGlhdGVkXCIpfW9uU3RyZWFtTG9hZGluZygpe2NvbnN0IHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7dC5jbGFzc05hbWU9XCJ2aXN1YWxseS1oaWRkZW5cIix0LmlubmVySFRNTD1cIkxvYWRpbmcuLi5cIjtjb25zdCBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7ZS5pZD1cImxvYWRpbmctc3Bpbm5lclwiLGUuY2xhc3NOYW1lPVwic3Bpbm5lci1ib3JkZXIgbXMtMlwiLGUuc2V0QXR0cmlidXRlKFwicm9sZVwiLFwic3RhdHVzXCIpLGUuYXBwZW5kQ2hpbGQodCksdGhpcy5zaG93VGV4dE92ZXJsYXkoXCJMb2FkaW5nIFN0cmVhbSBcIitlLm91dGVySFRNTCl9b25EaXNjb25uZWN0KHQsZSl7MD09ZT90aGlzLnNob3dFcnJvck92ZXJsYXkoYERpc2Nvbm5lY3RlZDogJHt0fWApOnRoaXMuc2hvd0Rpc2Nvbm5lY3RPdmVybGF5KGBEaXNjb25uZWN0ZWQ6ICR7dH0gIDxkaXYgY2xhc3M9XCJjbGlja2FibGVTdGF0ZVwiPkNsaWNrIFRvIFJlc3RhcnQ8L2Rpdj5gKSx0aGlzLnN0YXRzUGFuZWwubGF0ZW5jeVRlc3QubGF0ZW5jeVRlc3RCdXR0b24ub25jbGljaz0oKT0+e319b25XZWJSdGNDb25uZWN0aW5nKCl7dGhpcy5zaG93VGV4dE92ZXJsYXkoXCJTdGFydGluZyBjb25uZWN0aW9uIHRvIHNlcnZlciwgcGxlYXNlIHdhaXRcIil9b25XZWJSdGNDb25uZWN0ZWQoKXt0aGlzLnNob3dUZXh0T3ZlcmxheShcIldlYlJUQyBjb25uZWN0ZWQsIHdhaXRpbmcgZm9yIHZpZGVvXCIpfW9uV2ViUnRjRmFpbGVkKCl7dGhpcy5zaG93RXJyb3JPdmVybGF5KFwiVW5hYmxlIHRvIHNldHVwIHZpZGVvXCIpfW9uTG9hZEZyZWV6ZUZyYW1lKHQpeyEwPT09dCYmKGwuTG9nZ2VyLkxvZyhsLkxvZ2dlci5HZXRTdGFja1RyYWNlKCksXCJzaG93aW5nIHBsYXkgb3ZlcmxheVwiKSx0aGlzLnNob3dQbGF5T3ZlcmxheSgpKX1vblBsYXlTdHJlYW0oKXt0aGlzLmhpZGVDdXJyZW50T3ZlcmxheSgpfW9uUGxheVN0cmVhbUVycm9yKHQpe3RoaXMuc2hvd0Vycm9yT3ZlcmxheSh0KX1vblBsYXlTdHJlYW1SZWplY3RlZCh0KXt0aGlzLnNob3dQbGF5T3ZlcmxheSgpfW9uVmlkZW9Jbml0aWFsaXplZCgpe3RoaXMuc3RyZWFtLmNvbmZpZy5pc0ZsYWdFbmFibGVkKGwuRmxhZ3MuQXV0b1BsYXlWaWRlbyl8fHRoaXMuc2hvd1BsYXlPdmVybGF5KCksdGhpcy5zdGF0c1BhbmVsLmxhdGVuY3lUZXN0LmxhdGVuY3lUZXN0QnV0dG9uLm9uY2xpY2s9KCk9Pnt0aGlzLnN0cmVhbS5yZXF1ZXN0TGF0ZW5jeVRlc3QoKX19b25WaWRlb0VuY29kZXJBdmdRUCh0KXt0aGlzLnZpZGVvUXBJbmRpY2F0b3ImJnRoaXMudmlkZW9RcEluZGljYXRvci51cGRhdGVRcFRvb2x0aXAodCl9b25Jbml0aWFsU2V0dGluZ3ModCl7dC5QaXhlbFN0cmVhbWluZ1NldHRpbmdzJiZ0LlBpeGVsU3RyZWFtaW5nU2V0dGluZ3MuRGlzYWJsZUxhdGVuY3lUZXN0JiYodGhpcy5zdGF0c1BhbmVsLmxhdGVuY3lUZXN0LmxhdGVuY3lUZXN0QnV0dG9uLmRpc2FibGVkPSEwLHRoaXMuc3RhdHNQYW5lbC5sYXRlbmN5VGVzdC5sYXRlbmN5VGVzdEJ1dHRvbi50aXRsZT1cIkRpc2FibGVkIGJ5IC1QaXhlbFN0cmVhbWluZ0Rpc2FibGVMYXRlbmN5VGVzdGVyPXRydWVcIixsLkxvZ2dlci5JbmZvKGwuTG9nZ2VyLkdldFN0YWNrVHJhY2UoKSxcIi1QaXhlbFN0cmVhbWluZ0Rpc2FibGVMYXRlbmN5VGVzdGVyPXRydWUsIHJlcXVlc3RpbmcgbGF0ZW5jeSByZXBvcnQgZnJvbSB0aGUgdGhlIGJyb3dzZXIgdG8gVUUgaXMgZGlzYWJsZWQuXCIpKX1vblN0YXRzUmVjZWl2ZWQodCl7dGhpcy5zdGF0c1BhbmVsLmhhbmRsZVN0YXRzKHQpfW9uTGF0ZW5jeVRlc3RSZXN1bHRzKHQpe3RoaXMuc3RhdHNQYW5lbC5sYXRlbmN5VGVzdC5oYW5kbGVUZXN0UmVzdWx0KHQpfWhhbmRsZVN0cmVhbWVyTGlzdE1lc3NhZ2UodCxlKXtudWxsPT09ZSYmKDA9PT10Lmlkcy5sZW5ndGg/dGhpcy5zaG93RGlzY29ubmVjdE92ZXJsYXkoJ05vIHN0cmVhbWVycyBjb25uZWN0ZWQuIDxkaXYgY2xhc3M9XCJjbGlja2FibGVTdGF0ZVwiPkNsaWNrIFRvIFJlc3RhcnQ8L2Rpdj4nKTp0aGlzLnNob3dUZXh0T3ZlcmxheShcIk11bHRpcGxlIHN0cmVhbWVycyBkZXRlY3RlZC4gVXNlIHRoZSBkcm9wZG93biBpbiB0aGUgc2V0dGluZ3MgbWVudSB0byBzZWxlY3QgdGhlIHN0cmVhbWVyXCIpKX1zZXRDb2xvck1vZGUodCl7dGhpcy5vbkNvbG9yTW9kZUNoYW5nZWQmJnRoaXMub25Db2xvck1vZGVDaGFuZ2VkKHQpfX1jb25zdCBXPSh0PT57dmFyIGU9e307cmV0dXJuIG4uZChlLHQpLGV9KSh7ZGVmYXVsdDooKT0+ZS5kZWZhdWx0fSksWj0odD0+e3ZhciBlPXt9O3JldHVybiBuLmQoZSx0KSxlfSkoe2RlZmF1bHQ6KCk9PnMuZGVmYXVsdH0pLFg9KHQ9Pnt2YXIgZT17fTtyZXR1cm4gbi5kKGUsdCksZX0pKHtkZWZhdWx0OigpPT5pLmRlZmF1bHR9KTtjbGFzcyBqe2NvbnN0cnVjdG9yKHQpe3RoaXMuZGVmYXVsdExpZ2h0TW9kZVBhbGV0dGU9e1wiLS1jb2xvcjBcIjpcIiNlMmUwZGQ4MFwiLFwiLS1jb2xvcjFcIjpcIiNGRkZGRkZcIixcIi0tY29sb3IyXCI6XCIjMDAwMDAwXCIsXCItLWNvbG9yM1wiOlwiIzA1ODVmZVwiLFwiLS1jb2xvcjRcIjpcIiMzNWIzNTBcIixcIi0tY29sb3I1XCI6XCIjZmZhYjAwXCIsXCItLWNvbG9yNlwiOlwiI2UxZTJkZFwiLFwiLS1jb2xvcjdcIjpcIiNjM2M0YmZcIn0sdGhpcy5kZWZhdWx0RGFya01vZGVQYWxldHRlPXtcIi0tY29sb3IwXCI6XCIjMUQxRjIyODBcIixcIi0tY29sb3IxXCI6XCIjMDAwMDAwXCIsXCItLWNvbG9yMlwiOlwiI0ZGRkZGRlwiLFwiLS1jb2xvcjNcIjpcIiMwNTg1ZmVcIixcIi0tY29sb3I0XCI6XCIjMzViMzUwXCIsXCItLWNvbG9yNVwiOlwiI2ZmYWIwMFwiLFwiLS1jb2xvcjZcIjpcIiMxZTFkMjJcIixcIi0tY29sb3I3XCI6XCIjM2MzYjQwXCJ9LHRoaXMuZGVmYXVsdFN0eWxlcz17XCI6cm9vdFwiOntcIi0tY29sb3IwXCI6XCIjMUQxRjIyODBcIixcIi0tY29sb3IxXCI6XCIjMDAwMDAwXCIsXCItLWNvbG9yMlwiOlwiI0ZGRkZGRlwiLFwiLS1jb2xvcjNcIjpcIiMwNTg1ZmVcIixcIi0tY29sb3I0XCI6XCIjMzViMzUwXCIsXCItLWNvbG9yNVwiOlwiI2ZmYWIwMFwiLFwiLS1jb2xvcjZcIjpcIiMxZTFkMjJcIixcIi0tY29sb3I3XCI6XCIjM2MzYjQwXCIsXCItLWNvbG9yOFwiOlwiIzQxMDA4Y1wiLFwiLS1jb2xvcjlcIjpcIiMzZTAwNzBcIixcIi0tY29sb3IxMFwiOlwiIzJlMDA1MlwiLFwiLS1jb2xvcjExXCI6XCJyZ2JhKDY1LDAsMTM5LDEpXCJ9LFwiLm5vc2VsZWN0XCI6e3VzZXJTZWxlY3Q6XCJub25lXCJ9LFwiI3BsYXllclVJXCI6e3dpZHRoOlwiMTAwJVwiLGhlaWdodDpcIjEwMCVcIixwb3NpdGlvbjpcInJlbGF0aXZlXCJ9LFwiI3ZpZGVvRWxlbWVudFBhcmVudFwiOnt3aWR0aDpcIjEwMCVcIixoZWlnaHQ6XCIxMDAlXCIscG9zaXRpb246XCJhYnNvbHV0ZVwiLGJhY2tncm91bmRDb2xvcjpcInZhcigtLWNvbG9yMSlcIn0sXCIjdWlGZWF0dXJlc1wiOnt3aWR0aDpcIjEwMCVcIixoZWlnaHQ6XCIxMDAlXCIsekluZGV4OlwiMzBcIixwb3NpdGlvbjpcInJlbGF0aXZlXCIsY29sb3I6XCJ2YXIoLS1jb2xvcjIpXCIscG9pbnRlckV2ZW50czpcIm5vbmVcIixvdmVyZmxvdzpcImhpZGRlblwifSxcIi5VaVRvb2wgLnRvb2x0aXB0ZXh0XCI6e3Zpc2liaWxpdHk6XCJoaWRkZW5cIix3aWR0aDpcImF1dG9cIixjb2xvcjpcInZhcigtLWNvbG9yMilcIix0ZXh0QWxpZ246XCJjZW50ZXJcIixib3JkZXJSYWRpdXM6XCIxNXB4XCIscGFkZGluZzpcIjBweCAxMHB4XCIsZm9udEZhbWlseTpcIidNb250c2VycmF0Jywgc2Fucy1zZXJpZlwiLGZvbnRTaXplOlwiMC43NXJlbVwiLGxldHRlclNwYWNpbmc6XCIwLjc1cHhcIixwb3NpdGlvbjpcImFic29sdXRlXCIsdG9wOlwiMFwiLHRyYW5zZm9ybTpcInRyYW5zbGF0ZVkoMjUlKVwiLGxlZnQ6XCIxMjUlXCIsekluZGV4OlwiMjBcIn0sXCIuVWlUb29sOmhvdmVyIC50b29sdGlwdGV4dFwiOnt2aXNpYmlsaXR5OlwidmlzaWJsZVwiLGJhY2tncm91bmRDb2xvcjpcInZhcigtLWNvbG9yNylcIn0sXCIjY29ubmVjdGlvbiAudG9vbHRpcHRleHRcIjp7dG9wOlwiMTI1JVwiLHRyYW5zZm9ybTpcInRyYW5zbGF0ZVgoLTI1JSlcIixsZWZ0OlwiMFwiLHpJbmRleDpcIjIwXCIscGFkZGluZzpcIjVweCAxMHB4XCJ9LFwiI2Nvbm5lY3Rpb25cIjp7cG9zaXRpb246XCJhYnNvbHV0ZVwiLGJvdHRvbTpcIjglXCIsbGVmdDpcIjUlXCIsZm9udEZhbWlseTpcIidNaWNocm9tYScsIHNhbnMtc2VyaWZcIixoZWlnaHQ6XCIzcmVtXCIsd2lkdGg6XCIzcmVtXCIscG9pbnRlckV2ZW50czpcImFsbFwifSxcIiNzZXR0aW5ncy1wYW5lbCAudG9vbHRpcHRleHRcIjp7ZGlzcGxheTpcImJsb2NrXCIsdG9wOlwiMTI1JVwiLHRyYW5zZm9ybTpcInRyYW5zbGF0ZVgoLTUwJSlcIixsZWZ0OlwiMFwiLHpJbmRleDpcIjIwXCIscGFkZGluZzpcIjVweCAxMHB4XCIsYm9yZGVyOlwiM3B4IHNvbGlkIHZhcigtLWNvbG9yMylcIix3aWR0aDpcIm1heC1jb250ZW50XCIsZmFsbGJhY2tzOlt7d2lkdGg6XCJtYXgtY29udGVudFwifSx7Ym9yZGVyOlwiM3B4IHNvbGlkIHZhcigtLWNvbG9yMylcIn0se3BhZGRpbmc6XCI1cHggMTBweFwifSx7ekluZGV4OlwiMjBcIn0se2xlZnQ6XCIwXCJ9LHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGVYKC01MCUpXCJ9LHt0b3A6XCIxMjUlXCJ9LHtkaXNwbGF5OlwiYmxvY2tcIn1dfSxcIiNjb250cm9sc1wiOntwb3NpdGlvbjpcImFic29sdXRlXCIsdG9wOlwiMyVcIixsZWZ0OlwiMiVcIixmb250RmFtaWx5OlwiJ01pY2hyb21hJywgc2Fucy1zZXJpZlwiLHBvaW50ZXJFdmVudHM6XCJhbGxcIixkaXNwbGF5OlwiYmxvY2tcIn0sXCIjY29udHJvbHM+KlwiOnttYXJnaW5Cb3R0b206XCIwLjVyZW1cIixib3JkZXJSYWRpdXM6XCI1MCVcIixkaXNwbGF5OlwiYmxvY2tcIixoZWlnaHQ6XCIycmVtXCIsbGluZUhlaWdodDpcIjEuNzVyZW1cIixwYWRkaW5nOlwiMC41cmVtXCJ9LFwiI2NvbnRyb2xzICNhZGRpdGlvbmFsaW5mb1wiOnt0ZXh0QWxpZ246XCJjZW50ZXJcIixmb250RmFtaWx5OlwiJ01vbnRzZXJyYXQnLCBzYW5zLXNlcmlmXCJ9LFwiI2Z1bGxzY3JlZW4tYnRuXCI6e3BhZGRpbmc6XCIwLjZyZW0gIWltcG9ydGFudFwifSxcIiNtaW5pbWl6ZUljb25cIjp7ZGlzcGxheTpcIm5vbmVcIn0sXCIjc2V0dGluZ3NCdG4sICNzdGF0c0J0blwiOntjdXJzb3I6XCJwb2ludGVyXCJ9LFwiI3VpRmVhdHVyZXMgYnV0dG9uXCI6e2JhY2tncm91bmRDb2xvcjpcInZhcigtLWNvbG9yNylcIixib3JkZXI6XCIxcHggc29saWQgdmFyKC0tY29sb3I3KVwiLGNvbG9yOlwidmFyKC0tY29sb3IyKVwiLHBvc2l0aW9uOlwicmVsYXRpdmVcIix3aWR0aDpcIjNyZW1cIixoZWlnaHQ6XCIzcmVtXCIscGFkZGluZzpcIjAuNXJlbVwiLHRleHRBbGlnbjpcImNlbnRlclwifSxcIiN1aUZlYXR1cmVzIGJ1dHRvbjpob3ZlclwiOntiYWNrZ3JvdW5kQ29sb3I6XCJ2YXIoLS1jb2xvcjMpXCIsYm9yZGVyOlwiM3B4IHNvbGlkIHZhcigtLWNvbG9yMylcIix0cmFuc2l0aW9uOlwiMC4yNXMgZWFzZVwiLHBhZGRpbmdMZWZ0OlwiMC41NXJlbVwiLHBhZGRpbmdUb3A6XCIwLjU1cmVtXCJ9LFwiI3VpRmVhdHVyZXMgYnV0dG9uOmFjdGl2ZVwiOntib3JkZXI6XCIzcHggc29saWQgdmFyKC0tY29sb3IzKVwiLGJhY2tncm91bmRDb2xvcjpcInZhcigtLWNvbG9yNylcIixwYWRkaW5nTGVmdDpcIjAuNTVyZW1cIixwYWRkaW5nVG9wOlwiMC41NXJlbVwifSxcIi5idG4tZmxhdFwiOntiYWNrZ3JvdW5kQ29sb3I6XCJ0cmFuc3BhcmVudFwiLGNvbG9yOlwidmFyKC0tY29sb3IyKVwiLGZvbnRGYW1pbHk6XCInTW9udHNlcnJhdCdcIixmb250V2VpZ2h0OlwiYm9sZFwiLGJvcmRlcjpcIjNweCBzb2xpZCB2YXIoLS1jb2xvcjMpXCIsYm9yZGVyUmFkaXVzOlwiMXJlbVwiLGZvbnRTaXplOlwiMC43NXJlbVwiLHBhZGRpbmdMZWZ0OlwiMC41cmVtXCIscGFkZGluZ1JpZ2h0OlwiMC41cmVtXCIsY3Vyc29yOlwicG9pbnRlclwiLHRleHRBbGlnbjpcImNlbnRlclwifSxcIi5idG4tZmxhdDpob3ZlclwiOntiYWNrZ3JvdW5kQ29sb3I6XCJ2YXIoLS1jb2xvcjMpXCIsdHJhbnNpdGlvbjpcImVhc2UgMC4zc1wifSxcIi5idG4tZmxhdDpkaXNhYmxlZFwiOntiYWNrZ3JvdW5kOlwidmFyKC0tY29sb3I3KVwiLGJvcmRlckNvbG9yOlwidmFyKC0tY29sb3IzKVwiLGNvbG9yOlwidmFyKC0tY29sb3IzKVwiLGN1cnNvcjpcImRlZmF1bHRcIn0sXCIuYnRuLWZsYXQ6YWN0aXZlXCI6e2JhY2tncm91bmRDb2xvcjpcInRyYW5zcGFyZW50XCJ9LFwiLmJ0bi1mbGF0OmZvY3VzXCI6e291dGxpbmU6XCJub25lXCJ9LFwiI3VpRmVhdHVyZXMgaW1nXCI6e3dpZHRoOlwiMTAwJVwiLGhlaWdodDpcIjEwMCVcIn0sXCIucGFuZWwtd3JhcFwiOntwb3NpdGlvbjpcImFic29sdXRlXCIsdG9wOlwiMFwiLGJvdHRvbTpcIjBcIixyaWdodDpcIjBcIixoZWlnaHQ6XCIxMDAlXCIsbWluV2lkdGg6XCIyMHZ3XCIsbWF4V2lkdGg6XCIxMDB2d1wiLHRyYW5zZm9ybTpcInRyYW5zbGF0ZVgoMTAwJSlcIix0cmFuc2l0aW9uOlwiLjNzIGVhc2Utb3V0XCIscG9pbnRlckV2ZW50czpcImFsbFwiLGJhY2tkcm9wRmlsdGVyOlwiYmx1cigxMHB4KVwiLHdlYmtpdEJhY2tkcm9wRmlsdGVyOlwiYmx1cigxMHB4KVwiLG92ZXJmbG93WTpcImF1dG9cIixvdmVyZmxvd1g6XCJoaWRkZW5cIixiYWNrZ3JvdW5kQ29sb3I6XCJ2YXIoLS1jb2xvcjApXCJ9LFwiLnBhbmVsLXdyYXAtdmlzaWJsZVwiOnt0cmFuc2Zvcm06XCJ0cmFuc2xhdGVYKDAlKVwifSxcIi5wYW5lbFwiOntvdmVyZmxvd1k6XCJhdXRvXCIscGFkZGluZzpcIjFlbVwifSxcIiNzZXR0aW5nc0hlYWRpbmcsICNzdGF0c0hlYWRpbmdcIjp7ZGlzcGxheTpcImlubGluZS1ibG9ja1wiLGZvbnRTaXplOlwiMmVtXCIsbWFyZ2luQmxvY2tTdGFydDpcIjAuNjdlbVwiLG1hcmdpbkJsb2NrRW5kOlwiMC42N2VtXCIsbWFyZ2luSW5saW5lU3RhcnQ6XCIwcHhcIixtYXJnaW5JbmxpbmVFbmQ6XCIwcHhcIixwb3NpdGlvbjpcInJlbGF0aXZlXCIscGFkZGluZzpcIjAgMCAwIDJyZW1cIn0sXCIjc2V0dGluZ3NDbG9zZSwgI3N0YXRzQ2xvc2VcIjp7bWFyZ2luOlwiMC41cmVtXCIscGFkZGluZ1RvcDpcIjAuNXJlbVwiLHBhZGRpbmdCb3R0b206XCIwLjVyZW1cIixwYWRkaW5nUmlnaHQ6XCIwLjVyZW1cIixmb250U2l6ZTpcIjJlbVwiLGZsb2F0OlwicmlnaHRcIn0sXCIjc2V0dGluZ3NDbG9zZTphZnRlciwgI3N0YXRzQ2xvc2U6YWZ0ZXJcIjp7cGFkZGluZ0xlZnQ6XCIwLjVyZW1cIixkaXNwbGF5OlwiaW5saW5lLWJsb2NrXCIsY29udGVudDonXCJcXFxcMDBkN1wiJ30sXCIjc2V0dGluZ3NDbG9zZTpob3ZlciwgI3N0YXRzQ2xvc2U6aG92ZXJcIjp7Y29sb3I6XCJ2YXIoLS1jb2xvcjMpXCIsdHJhbnNpdGlvbjpcImVhc2UgMC4zc1wifSxcIiNzZXR0aW5nc0NvbnRlbnQsICNzdGF0c0NvbnRlbnRcIjp7bWFyZ2luTGVmdDpcIjJyZW1cIixtYXJnaW5SaWdodDpcIjJyZW1cIn0sXCIuc2V0dGluZ1wiOntkaXNwbGF5OlwiZmxleFwiLGZsZXhEaXJlY3Rpb246XCJyb3dcIixqdXN0aWZ5Q29udGVudDpcInNwYWNlLWJldHdlZW5cIixwYWRkaW5nOlwiMC4xNXJlbSAxMHB4IDAuMTVyZW0gMTBweFwifSxcIi5zZXR0aW5ncy10ZXh0XCI6e2NvbG9yOlwidmFyKC0tY29sb3IyKVwiLHZlcnRpY2FsQWxpZ246XCJtaWRkbGVcIixmb250V2VpZ2h0Olwibm9ybWFsXCJ9LFwiLnNldHRpbmdzLW9wdGlvblwiOnt3aWR0aDpcIjEwMCVcIix0ZXh0T3ZlcmZsb3c6XCJlbGxpcHNpc1wiLHdoaXRlU3BhY2U6XCJub3dyYXBcIn0sXCIjY29ubmVjdE92ZXJsYXksICNwbGF5T3ZlcmxheSwgI2luZm9PdmVybGF5LCAjZXJyb3JPdmVybGF5LCAjYWZrT3ZlcmxheSwgI2Rpc2Nvbm5lY3RPdmVybGF5XCI6e3pJbmRleDpcIjMwXCIscG9zaXRpb246XCJhYnNvbHV0ZVwiLGNvbG9yOlwidmFyKC0tY29sb3IyKVwiLGZvbnRTaXplOlwiMS44ZW1cIix3aWR0aDpcIjEwMCVcIixoZWlnaHQ6XCIxMDAlXCIsYmFja2dyb3VuZENvbG9yOlwidmFyKC0tY29sb3IxKVwiLGFsaWduSXRlbXM6XCJjZW50ZXJcIixqdXN0aWZ5Q29udGVudDpcImNlbnRlclwiLHRleHRUcmFuc2Zvcm06XCJ1cHBlcmNhc2VcIn0sXCIuY2xpY2thYmxlU3RhdGVcIjp7YWxpZ25JdGVtczpcImNlbnRlclwiLGp1c3RpZnlDb250ZW50OlwiY2VudGVyXCIsZGlzcGxheTpcImZsZXhcIixjdXJzb3I6XCJwb2ludGVyXCJ9LFwiLnRleHREaXNwbGF5U3RhdGVcIjp7ZGlzcGxheTpcImZsZXhcIn0sXCIuaGlkZGVuU3RhdGVcIjp7ZGlzcGxheTpcIm5vbmVcIn0sXCIjcGxheUJ1dHRvbiwgI2Nvbm5lY3RCdXR0b25cIjp7ZGlzcGxheTpcImlubGluZS1ibG9ja1wiLGhlaWdodDpcImF1dG9cIix6SW5kZXg6XCIzMFwifSxcImltZyNwbGF5QnV0dG9uXCI6e21heFdpZHRoOlwiMjQxcHhcIix3aWR0aDpcIjEwJVwifSxcIiN1aUludGVyYWN0aW9uXCI6e3Bvc2l0aW9uOlwiZml4ZWRcIn0sXCIjVUlJbnRlcmFjdGlvbkJ1dHRvbkJvdW5kYXJ5XCI6e3BhZGRpbmc6XCIycHhcIn0sXCIjVUlJbnRlcmFjdGlvbkJ1dHRvblwiOntjdXJzb3I6XCJwb2ludGVyXCJ9LFwiI2hpZGRlbklucHV0XCI6e3Bvc2l0aW9uOlwiYWJzb2x1dGVcIixsZWZ0OlwiLTEwJVwiLHdpZHRoOlwiMHB4XCIsb3BhY2l0eTpcIjBcIn0sXCIjZWRpdFRleHRCdXR0b25cIjp7cG9zaXRpb246XCJhYnNvbHV0ZVwiLGhlaWdodDpcIjQwcHhcIix3aWR0aDpcIjQwcHhcIn0sXCIuYnRuLW92ZXJsYXlcIjp7dmVydGljYWxBbGlnbjpcIm1pZGRsZVwiLGRpc3BsYXk6XCJpbmxpbmUtYmxvY2tcIn0sXCIudGdsLXN3aXRjaFwiOnt2ZXJ0aWNhbEFsaWduOlwibWlkZGxlXCIsZGlzcGxheTpcImlubGluZS1ibG9ja1wifSxcIi50Z2wtc3dpdGNoIC50Z2xcIjp7ZGlzcGxheTpcIm5vbmVcIn0sXCIudGdsLCAudGdsOmFmdGVyLCAudGdsOmJlZm9yZSwgLnRnbCAqLCAudGdsICo6YWZ0ZXIsIC50Z2wgKjpiZWZvcmUsIC50Z2wrLnRnbC1zbGlkZXJcIjp7d2Via2l0Qm94U2l6aW5nOlwiYm9yZGVyLWJveFwiLGJveFNpemluZzpcImJvcmRlci1ib3hcIn0sXCIudGdsOjotbW96LXNlbGVjdGlvbiwgLnRnbDphZnRlcjo6LW1vei1zZWxlY3Rpb24sIC50Z2w6YmVmb3JlOjotbW96LXNlbGVjdGlvbiwgLnRnbCAqOjotbW96LXNlbGVjdGlvbiwgLnRnbCAqOmFmdGVyOjotbW96LXNlbGVjdGlvbiwgLnRnbCAqOmJlZm9yZTo6LW1vei1zZWxlY3Rpb24sIC50Z2wrLnRnbC1zbGlkZXI6Oi1tb3otc2VsZWN0aW9uXCI6e2JhY2tncm91bmQ6XCJub25lXCJ9LFwiLnRnbDo6c2VsZWN0aW9uLCAudGdsOmFmdGVyOjpzZWxlY3Rpb24sIC50Z2w6YmVmb3JlOjpzZWxlY3Rpb24sIC50Z2wgKjo6c2VsZWN0aW9uLCAudGdsICo6YWZ0ZXI6OnNlbGVjdGlvbiwgLnRnbCAqOmJlZm9yZTo6c2VsZWN0aW9uLCAudGdsKy50Z2wtc2xpZGVyOjpzZWxlY3Rpb25cIjp7YmFja2dyb3VuZDpcIm5vbmVcIn0sXCIudGdsLXNsaWRlclwiOnt9LFwiLnRnbCsudGdsLXNsaWRlclwiOntvdXRsaW5lOlwiMFwiLGRpc3BsYXk6XCJibG9ja1wiLHdpZHRoOlwiNDBweFwiLGhlaWdodDpcIjE4cHhcIixwb3NpdGlvbjpcInJlbGF0aXZlXCIsY3Vyc29yOlwicG9pbnRlclwiLHVzZXJTZWxlY3Q6XCJub25lXCJ9LFwiLnRnbCsudGdsLXNsaWRlcjphZnRlciwgLnRnbCsudGdsLXNsaWRlcjpiZWZvcmVcIjp7cG9zaXRpb246XCJyZWxhdGl2ZVwiLGRpc3BsYXk6XCJibG9ja1wiLGNvbnRlbnQ6J1wiXCInLHdpZHRoOlwiNTAlXCIsaGVpZ2h0OlwiMTAwJVwifSxcIi50Z2wrLnRnbC1zbGlkZXI6YWZ0ZXJcIjp7bGVmdDpcIjBcIn0sXCIudGdsKy50Z2wtc2xpZGVyOmJlZm9yZVwiOntkaXNwbGF5Olwibm9uZVwifSxcIi50Z2wtZmxhdCsudGdsLXNsaWRlclwiOntwYWRkaW5nOlwiMnB4XCIsd2Via2l0VHJhbnNpdGlvbjpcImFsbCAuMnMgZWFzZVwiLHRyYW5zaXRpb246XCJhbGwgLjJzIGVhc2VcIixiYWNrZ3JvdW5kOlwidmFyKC0tY29sb3I2KVwiLGJvcmRlcjpcIjNweCBzb2xpZCB2YXIoLS1jb2xvcjcpXCIsYm9yZGVyUmFkaXVzOlwiMmVtXCJ9LFwiLnRnbC1mbGF0Ky50Z2wtc2xpZGVyOmFmdGVyXCI6e3dlYmtpdFRyYW5zaXRpb246XCJhbGwgLjJzIGVhc2VcIix0cmFuc2l0aW9uOlwiYWxsIC4ycyBlYXNlXCIsYmFja2dyb3VuZDpcInZhcigtLWNvbG9yNylcIixjb250ZW50OidcIlwiJyxib3JkZXJSYWRpdXM6XCIxZW1cIn0sXCIudGdsLWZsYXQ6Y2hlY2tlZCsudGdsLXNsaWRlclwiOntib3JkZXI6XCIzcHggc29saWQgdmFyKC0tY29sb3IzKVwifSxcIi50Z2wtZmxhdDpjaGVja2VkKy50Z2wtc2xpZGVyOmFmdGVyXCI6e2xlZnQ6XCI1MCVcIixiYWNrZ3JvdW5kOlwidmFyKC0tY29sb3IzKVwifSxcIi5idG4tYXBwbHlcIjp7ZGlzcGxheTpcImJsb2NrICFpbXBvcnRhbnRcIixtYXJnaW5MZWZ0OlwiYXV0b1wiLG1hcmdpblJpZ2h0OlwiYXV0b1wiLHdpZHRoOlwiNDAlXCJ9LFwiLmZvcm0tY29udHJvbFwiOntiYWNrZ3JvdW5kQ29sb3I6XCJ2YXIoLS1jb2xvcjcpXCIsYm9yZGVyOlwiMnB4IHNvbGlkIHZhcigtLWNvbG9yNylcIixib3JkZXJSYWRpdXM6XCI0cHhcIixjb2xvcjpcInZhcigtLWNvbG9yMilcIix0ZXh0QWxpZ246XCJyaWdodFwiLGZvbnRGYW1pbHk6XCJpbmhlcml0XCJ9LFwiLmZvcm0tY29udHJvbDpob3ZlclwiOntib3JkZXJDb2xvcjpcInZhcigtLWNvbG9yNylcIn0sXCIuZm9ybS1ncm91cFwiOntwYWRkaW5nVG9wOlwiNHB4XCIsZGlzcGxheTpcImdyaWRcIixncmlkVGVtcGxhdGVDb2x1bW5zOlwiODAlIDIwJVwiLHJvd0dhcDpcIjRweFwiLHBhZGRpbmdSaWdodDpcIjEwcHhcIixwYWRkaW5nTGVmdDpcIjEwcHhcIn0sXCIuZm9ybS1ncm91cCBsYWJlbFwiOnt2ZXJ0aWNhbEFsaWduOlwibWlkZGxlXCIsZm9udFdlaWdodDpcIm5vcm1hbFwifSxcIi5zZXR0aW5nc0NvbnRhaW5lclwiOntkaXNwbGF5OlwiZmxleFwiLGZsZXhEaXJlY3Rpb246XCJjb2x1bW5cIixib3JkZXJCb3R0b206XCIxcHggc29saWQgdmFyKC0tY29sb3I3KVwiLHBhZGRpbmdUb3A6XCIxMHB4XCIscGFkZGluZ0JvdHRvbTpcIjEwcHhcIn0sXCIuc2V0dGluZ3NDb250YWluZXI+IDpmaXJzdC1jaGlsZFwiOnttYXJnaW5Ub3A6XCI0cHhcIixtYXJnaW5Cb3R0b206XCI0cHhcIixmb250V2VpZ2h0OlwiYm9sZFwiLGp1c3RpZnlDb250ZW50Olwic3BhY2UtYmV0d2VlblwiLGRpc3BsYXk6XCJmbGV4XCIsZmxleERpcmVjdGlvbjpcInJvd1wiLGFsaWduSXRlbXM6XCJiYXNlbGluZVwifSxcIi5jb2xsYXBzZVwiOntwYWRkaW5nTGVmdDpcIjUlXCJ9LFwiI3N0cmVhbVRvb2xzXCI6e2JvcmRlckJvdHRvbVJpZ2h0UmFkaXVzOlwiNXB4XCIsYm9yZGVyQm90dG9tTGVmdFJhZGl1czpcIjVweFwiLHVzZXJTZWxlY3Q6XCJub25lXCIscG9zaXRpb246XCJhYnNvbHV0ZVwiLHRvcDpcIjBcIixyaWdodDpcIjIlXCIsekluZGV4OlwiMTAwXCIsYm9yZGVyOlwiNHB4IHNvbGlkIHZhcigtLWNvbG91cjgpXCIsYm9yZGVyVG9wV2lkdGg6XCIwcHhcIn0sXCIuc2V0dGluZ3NIZWFkZXJcIjp7Zm9udFN0eWxlOlwiaXRhbGljXCJ9LFwiI3N0cmVhbVRvb2xzSGVhZGVyXCI6e2Rpc3BsYXk6XCJmbGV4XCIsZmxleERpcmVjdGlvbjpcInJvd1wiLGp1c3RpZnlDb250ZW50Olwic3BhY2UtYmV0d2VlblwiLGJvcmRlckJvdHRvbTpcIjFweCBzb2xpZCB2YXIoLS1jb2xvdXI4KVwiLGJhY2tncm91bmRDb2xvcjpcInZhcigtLWNvbG9yNylcIn0sXCIuc3RyZWFtVG9vbHNcIjp7YmFja2dyb3VuZENvbG9yOlwidmFyKC0tY29sb3IyKVwiLGZvbnRGYW1pbHk6XCJ2YXIoLS1idXR0b25Gb250KVwiLGZvbnRXZWlnaHQ6XCJsaWdodGVyXCIsY29sb3I6XCJ2YXIoLS1jb2xvcjcpXCJ9LFwiLnN0cmVhbVRvb2xzLXNob3duPiNzdHJlYW1Ub29sc1NldHRpbmdzLCAuc3RyZWFtVG9vbHMtc2hvd24+I3N0cmVhbVRvb2xzU3RhdHNcIjp7ZGlzcGxheTpcImJsb2NrXCJ9LFwiI3N0cmVhbVRvb2xzVG9nZ2xlXCI6e3dpZHRoOlwiMTAwJVwifSxcIiNxdWFsaXR5U3RhdHVzXCI6e2ZvbnRTaXplOlwiMzdweFwiLHBhZGRpbmdSaWdodDpcIjRweFwifSxcIi5zdmdJY29uXCI6e2ZpbGw6XCJ2YXIoLS1jb2xvcjIpXCJ9fTtjb25zdHtjdXN0b21TdHlsZXM6ZSxsaWdodE1vZGVQYWxldHRlOnMsZGFya01vZGVQYWxldHRlOml9PW51bGwhPXQ/dDp7fSxuPXtwbHVnaW5zOlsoMCxaLmRlZmF1bHQpKCksKDAsWC5kZWZhdWx0KSgpXX07Vy5kZWZhdWx0LnNldHVwKG4pLHRoaXMuY3VzdG9tU3R5bGVzPWUsdGhpcy5saWdodE1vZGVQYWxldHRlPW51bGwhPXM/czp0aGlzLmRlZmF1bHRMaWdodE1vZGVQYWxldHRlLHRoaXMuZGFya01vZGVQYWxldHRlPW51bGwhPWk/aTp0aGlzLmRlZmF1bHREYXJrTW9kZVBhbGV0dGV9YXBwbHlTdHlsZVNoZWV0KCl7Vy5kZWZhdWx0LmNyZWF0ZVN0eWxlU2hlZXQoe1wiQGdsb2JhbFwiOk9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSx0aGlzLmRlZmF1bHRTdHlsZXMpLHRoaXMuY3VzdG9tU3R5bGVzKX0pLmF0dGFjaCgpfWFwcGx5UGFsZXR0ZSh0KXtjb25zdCBlPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCI6cm9vdFwiKTtlLnN0eWxlLnNldFByb3BlcnR5KFwiLS1jb2xvcjBcIix0W1wiLS1jb2xvcjBcIl0pLGUuc3R5bGUuc2V0UHJvcGVydHkoXCItLWNvbG9yMVwiLHRbXCItLWNvbG9yMVwiXSksZS5zdHlsZS5zZXRQcm9wZXJ0eShcIi0tY29sb3IyXCIsdFtcIi0tY29sb3IyXCJdKSxlLnN0eWxlLnNldFByb3BlcnR5KFwiLS1jb2xvcjNcIix0W1wiLS1jb2xvcjNcIl0pLGUuc3R5bGUuc2V0UHJvcGVydHkoXCItLWNvbG9yNFwiLHRbXCItLWNvbG9yNFwiXSksZS5zdHlsZS5zZXRQcm9wZXJ0eShcIi0tY29sb3I1XCIsdFtcIi0tY29sb3I1XCJdKSxlLnN0eWxlLnNldFByb3BlcnR5KFwiLS1jb2xvcjZcIix0W1wiLS1jb2xvcjZcIl0pLGUuc3R5bGUuc2V0UHJvcGVydHkoXCItLWNvbG9yN1wiLHRbXCItLWNvbG9yN1wiXSl9c2V0Q29sb3JNb2RlKHQpe3Q/dGhpcy5hcHBseVBhbGV0dGUodGhpcy5saWdodE1vZGVQYWxldHRlKTp0aGlzLmFwcGx5UGFsZXR0ZSh0aGlzLmRhcmtNb2RlUGFsZXR0ZSl9fXZhciBxPW8ueW0sVj1vLkVXLEc9by5NeCxKPW8uTDMsWT1vLnJsLEs9by5OUiwkPW8uZjEsdHQ9by5JWSxldD1vLlJaLHN0PW8uWFksaXQ9by5GayxudD1vLlpoLG90PW8uZWssbHQ9by5NRyxhdD1vLmdFLHJ0PW8udFcsY3Q9by53cixkdD1vLlFUO2V4cG9ydHtxIGFzIEFGS092ZXJsYXksViBhcyBBY3Rpb25PdmVybGF5LEcgYXMgQXBwbGljYXRpb24sSiBhcyBDb25maWdVSSxZIGFzIENvbm5lY3RPdmVybGF5LEsgYXMgRGlzY29ubmVjdE92ZXJsYXksJCBhcyBFcnJvck92ZXJsYXksdHQgYXMgSW5mb092ZXJsYXksZXQgYXMgT3ZlcmxheUJhc2Usc3QgYXMgUGl4ZWxTdHJlYW1pbmdBcHBsaWNhdGlvblN0eWxlLGl0IGFzIFBsYXlPdmVybGF5LG50IGFzIFNldHRpbmdVSUJhc2Usb3QgYXMgU2V0dGluZ1VJRmxhZyxsdCBhcyBTZXR0aW5nVUlOdW1iZXIsYXQgYXMgU2V0dGluZ1VJT3B0aW9uLHJ0IGFzIFNldHRpbmdVSVRleHQsY3QgYXMgVGV4dE92ZXJsYXksZHQgYXMgVUlFbGVtZW50Q3JlYXRpb25Nb2RlfTsiLCIvKiBlc2xpbnQtZGlzYWJsZSBuby12YXIsIHByZWZlci10ZW1wbGF0ZSAqL1xudmFyIHVwcGVyY2FzZVBhdHRlcm4gPSAvW0EtWl0vZ1xudmFyIG1zUGF0dGVybiA9IC9ebXMtL1xudmFyIGNhY2hlID0ge31cblxuZnVuY3Rpb24gdG9IeXBoZW5Mb3dlcihtYXRjaCkge1xuICByZXR1cm4gJy0nICsgbWF0Y2gudG9Mb3dlckNhc2UoKVxufVxuXG5mdW5jdGlvbiBoeXBoZW5hdGVTdHlsZU5hbWUobmFtZSkge1xuICBpZiAoY2FjaGUuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICByZXR1cm4gY2FjaGVbbmFtZV1cbiAgfVxuXG4gIHZhciBoTmFtZSA9IG5hbWUucmVwbGFjZSh1cHBlcmNhc2VQYXR0ZXJuLCB0b0h5cGhlbkxvd2VyKVxuICByZXR1cm4gKGNhY2hlW25hbWVdID0gbXNQYXR0ZXJuLnRlc3QoaE5hbWUpID8gJy0nICsgaE5hbWUgOiBoTmFtZSlcbn1cblxuZXhwb3J0IGRlZmF1bHQgaHlwaGVuYXRlU3R5bGVOYW1lXG4iLCJ2YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cbmV4cG9ydCB2YXIgaXNCcm93c2VyID0gKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZih3aW5kb3cpKSA9PT0gXCJvYmplY3RcIiAmJiAodHlwZW9mIGRvY3VtZW50ID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2YoZG9jdW1lbnQpKSA9PT0gJ29iamVjdCcgJiYgZG9jdW1lbnQubm9kZVR5cGUgPT09IDk7XG5cbmV4cG9ydCBkZWZhdWx0IGlzQnJvd3NlcjtcbiIsImltcG9ydCBoeXBoZW5hdGUgZnJvbSAnaHlwaGVuYXRlLXN0eWxlLW5hbWUnO1xuXG4vKipcbiAqIENvbnZlcnQgY2FtZWwgY2FzZWQgcHJvcGVydHkgbmFtZXMgdG8gZGFzaCBzZXBhcmF0ZWQuXG4gKi9cblxuZnVuY3Rpb24gY29udmVydENhc2Uoc3R5bGUpIHtcbiAgdmFyIGNvbnZlcnRlZCA9IHt9O1xuXG4gIGZvciAodmFyIHByb3AgaW4gc3R5bGUpIHtcbiAgICB2YXIga2V5ID0gcHJvcC5pbmRleE9mKCctLScpID09PSAwID8gcHJvcCA6IGh5cGhlbmF0ZShwcm9wKTtcbiAgICBjb252ZXJ0ZWRba2V5XSA9IHN0eWxlW3Byb3BdO1xuICB9XG5cbiAgaWYgKHN0eWxlLmZhbGxiYWNrcykge1xuICAgIGlmIChBcnJheS5pc0FycmF5KHN0eWxlLmZhbGxiYWNrcykpIGNvbnZlcnRlZC5mYWxsYmFja3MgPSBzdHlsZS5mYWxsYmFja3MubWFwKGNvbnZlcnRDYXNlKTtlbHNlIGNvbnZlcnRlZC5mYWxsYmFja3MgPSBjb252ZXJ0Q2FzZShzdHlsZS5mYWxsYmFja3MpO1xuICB9XG5cbiAgcmV0dXJuIGNvbnZlcnRlZDtcbn1cbi8qKlxuICogQWxsb3cgY2FtZWwgY2FzZWQgcHJvcGVydHkgbmFtZXMgYnkgY29udmVydGluZyB0aGVtIGJhY2sgdG8gZGFzaGVyaXplZC5cbiAqL1xuXG5cbmZ1bmN0aW9uIGNhbWVsQ2FzZSgpIHtcbiAgZnVuY3Rpb24gb25Qcm9jZXNzU3R5bGUoc3R5bGUpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShzdHlsZSkpIHtcbiAgICAgIC8vIEhhbmRsZSBydWxlcyBsaWtlIEBmb250LWZhY2UsIHdoaWNoIGNhbiBoYXZlIG11bHRpcGxlIHN0eWxlcyBpbiBhbiBhcnJheVxuICAgICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IHN0eWxlLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICBzdHlsZVtpbmRleF0gPSBjb252ZXJ0Q2FzZShzdHlsZVtpbmRleF0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc3R5bGU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNvbnZlcnRDYXNlKHN0eWxlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uQ2hhbmdlVmFsdWUodmFsdWUsIHByb3AsIHJ1bGUpIHtcbiAgICBpZiAocHJvcC5pbmRleE9mKCctLScpID09PSAwKSB7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuXG4gICAgdmFyIGh5cGhlbmF0ZWRQcm9wID0gaHlwaGVuYXRlKHByb3ApOyAvLyBUaGVyZSB3YXMgbm8gY2FtZWwgY2FzZSBpbiBwbGFjZVxuXG4gICAgaWYgKHByb3AgPT09IGh5cGhlbmF0ZWRQcm9wKSByZXR1cm4gdmFsdWU7XG4gICAgcnVsZS5wcm9wKGh5cGhlbmF0ZWRQcm9wLCB2YWx1ZSk7IC8vIENvcmUgd2lsbCBpZ25vcmUgdGhhdCBwcm9wZXJ0eSB2YWx1ZSB3ZSBzZXQgdGhlIHByb3BlciBvbmUgYWJvdmUuXG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgb25Qcm9jZXNzU3R5bGU6IG9uUHJvY2Vzc1N0eWxlLFxuICAgIG9uQ2hhbmdlVmFsdWU6IG9uQ2hhbmdlVmFsdWVcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2FtZWxDYXNlO1xuIiwiaW1wb3J0IF9leHRlbmRzIGZyb20gJ0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2V4dGVuZHMnO1xuaW1wb3J0IHsgUnVsZUxpc3QgfSBmcm9tICdqc3MnO1xuXG52YXIgYXQgPSAnQGdsb2JhbCc7XG52YXIgYXRQcmVmaXggPSAnQGdsb2JhbCAnO1xuXG52YXIgR2xvYmFsQ29udGFpbmVyUnVsZSA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIEdsb2JhbENvbnRhaW5lclJ1bGUoa2V5LCBzdHlsZXMsIG9wdGlvbnMpIHtcbiAgICB0aGlzLnR5cGUgPSAnZ2xvYmFsJztcbiAgICB0aGlzLmF0ID0gYXQ7XG4gICAgdGhpcy5pc1Byb2Nlc3NlZCA9IGZhbHNlO1xuICAgIHRoaXMua2V5ID0ga2V5O1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgdGhpcy5ydWxlcyA9IG5ldyBSdWxlTGlzdChfZXh0ZW5kcyh7fSwgb3B0aW9ucywge1xuICAgICAgcGFyZW50OiB0aGlzXG4gICAgfSkpO1xuXG4gICAgZm9yICh2YXIgc2VsZWN0b3IgaW4gc3R5bGVzKSB7XG4gICAgICB0aGlzLnJ1bGVzLmFkZChzZWxlY3Rvciwgc3R5bGVzW3NlbGVjdG9yXSk7XG4gICAgfVxuXG4gICAgdGhpcy5ydWxlcy5wcm9jZXNzKCk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBhIHJ1bGUuXG4gICAqL1xuXG5cbiAgdmFyIF9wcm90byA9IEdsb2JhbENvbnRhaW5lclJ1bGUucHJvdG90eXBlO1xuXG4gIF9wcm90by5nZXRSdWxlID0gZnVuY3Rpb24gZ2V0UnVsZShuYW1lKSB7XG4gICAgcmV0dXJuIHRoaXMucnVsZXMuZ2V0KG5hbWUpO1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgYW5kIHJlZ2lzdGVyIHJ1bGUsIHJ1biBwbHVnaW5zLlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5hZGRSdWxlID0gZnVuY3Rpb24gYWRkUnVsZShuYW1lLCBzdHlsZSwgb3B0aW9ucykge1xuICAgIHZhciBydWxlID0gdGhpcy5ydWxlcy5hZGQobmFtZSwgc3R5bGUsIG9wdGlvbnMpO1xuICAgIGlmIChydWxlKSB0aGlzLm9wdGlvbnMuanNzLnBsdWdpbnMub25Qcm9jZXNzUnVsZShydWxlKTtcbiAgICByZXR1cm4gcnVsZTtcbiAgfVxuICAvKipcbiAgICogUmVwbGFjZSBydWxlLCBydW4gcGx1Z2lucy5cbiAgICovXG4gIDtcblxuICBfcHJvdG8ucmVwbGFjZVJ1bGUgPSBmdW5jdGlvbiByZXBsYWNlUnVsZShuYW1lLCBzdHlsZSwgb3B0aW9ucykge1xuICAgIHZhciBuZXdSdWxlID0gdGhpcy5ydWxlcy5yZXBsYWNlKG5hbWUsIHN0eWxlLCBvcHRpb25zKTtcbiAgICBpZiAobmV3UnVsZSkgdGhpcy5vcHRpb25zLmpzcy5wbHVnaW5zLm9uUHJvY2Vzc1J1bGUobmV3UnVsZSk7XG4gICAgcmV0dXJuIG5ld1J1bGU7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBpbmRleCBvZiBhIHJ1bGUuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmluZGV4T2YgPSBmdW5jdGlvbiBpbmRleE9mKHJ1bGUpIHtcbiAgICByZXR1cm4gdGhpcy5ydWxlcy5pbmRleE9mKHJ1bGUpO1xuICB9XG4gIC8qKlxuICAgKiBHZW5lcmF0ZXMgYSBDU1Mgc3RyaW5nLlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gdGhpcy5ydWxlcy50b1N0cmluZyhvcHRpb25zKTtcbiAgfTtcblxuICByZXR1cm4gR2xvYmFsQ29udGFpbmVyUnVsZTtcbn0oKTtcblxudmFyIEdsb2JhbFByZWZpeGVkUnVsZSA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIEdsb2JhbFByZWZpeGVkUnVsZShrZXksIHN0eWxlLCBvcHRpb25zKSB7XG4gICAgdGhpcy50eXBlID0gJ2dsb2JhbCc7XG4gICAgdGhpcy5hdCA9IGF0O1xuICAgIHRoaXMuaXNQcm9jZXNzZWQgPSBmYWxzZTtcbiAgICB0aGlzLmtleSA9IGtleTtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIHZhciBzZWxlY3RvciA9IGtleS5zdWJzdHIoYXRQcmVmaXgubGVuZ3RoKTtcbiAgICB0aGlzLnJ1bGUgPSBvcHRpb25zLmpzcy5jcmVhdGVSdWxlKHNlbGVjdG9yLCBzdHlsZSwgX2V4dGVuZHMoe30sIG9wdGlvbnMsIHtcbiAgICAgIHBhcmVudDogdGhpc1xuICAgIH0pKTtcbiAgfVxuXG4gIHZhciBfcHJvdG8yID0gR2xvYmFsUHJlZml4ZWRSdWxlLnByb3RvdHlwZTtcblxuICBfcHJvdG8yLnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcob3B0aW9ucykge1xuICAgIHJldHVybiB0aGlzLnJ1bGUgPyB0aGlzLnJ1bGUudG9TdHJpbmcob3B0aW9ucykgOiAnJztcbiAgfTtcblxuICByZXR1cm4gR2xvYmFsUHJlZml4ZWRSdWxlO1xufSgpO1xuXG52YXIgc2VwYXJhdG9yUmVnRXhwID0gL1xccyosXFxzKi9nO1xuXG5mdW5jdGlvbiBhZGRTY29wZShzZWxlY3Rvciwgc2NvcGUpIHtcbiAgdmFyIHBhcnRzID0gc2VsZWN0b3Iuc3BsaXQoc2VwYXJhdG9yUmVnRXhwKTtcbiAgdmFyIHNjb3BlZCA9ICcnO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcGFydHMubGVuZ3RoOyBpKyspIHtcbiAgICBzY29wZWQgKz0gc2NvcGUgKyBcIiBcIiArIHBhcnRzW2ldLnRyaW0oKTtcbiAgICBpZiAocGFydHNbaSArIDFdKSBzY29wZWQgKz0gJywgJztcbiAgfVxuXG4gIHJldHVybiBzY29wZWQ7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZU5lc3RlZEdsb2JhbENvbnRhaW5lclJ1bGUocnVsZSwgc2hlZXQpIHtcbiAgdmFyIG9wdGlvbnMgPSBydWxlLm9wdGlvbnMsXG4gICAgICBzdHlsZSA9IHJ1bGUuc3R5bGU7XG4gIHZhciBydWxlcyA9IHN0eWxlID8gc3R5bGVbYXRdIDogbnVsbDtcbiAgaWYgKCFydWxlcykgcmV0dXJuO1xuXG4gIGZvciAodmFyIG5hbWUgaW4gcnVsZXMpIHtcbiAgICBzaGVldC5hZGRSdWxlKG5hbWUsIHJ1bGVzW25hbWVdLCBfZXh0ZW5kcyh7fSwgb3B0aW9ucywge1xuICAgICAgc2VsZWN0b3I6IGFkZFNjb3BlKG5hbWUsIHJ1bGUuc2VsZWN0b3IpXG4gICAgfSkpO1xuICB9XG5cbiAgZGVsZXRlIHN0eWxlW2F0XTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlUHJlZml4ZWRHbG9iYWxSdWxlKHJ1bGUsIHNoZWV0KSB7XG4gIHZhciBvcHRpb25zID0gcnVsZS5vcHRpb25zLFxuICAgICAgc3R5bGUgPSBydWxlLnN0eWxlO1xuXG4gIGZvciAodmFyIHByb3AgaW4gc3R5bGUpIHtcbiAgICBpZiAocHJvcFswXSAhPT0gJ0AnIHx8IHByb3Auc3Vic3RyKDAsIGF0Lmxlbmd0aCkgIT09IGF0KSBjb250aW51ZTtcbiAgICB2YXIgc2VsZWN0b3IgPSBhZGRTY29wZShwcm9wLnN1YnN0cihhdC5sZW5ndGgpLCBydWxlLnNlbGVjdG9yKTtcbiAgICBzaGVldC5hZGRSdWxlKHNlbGVjdG9yLCBzdHlsZVtwcm9wXSwgX2V4dGVuZHMoe30sIG9wdGlvbnMsIHtcbiAgICAgIHNlbGVjdG9yOiBzZWxlY3RvclxuICAgIH0pKTtcbiAgICBkZWxldGUgc3R5bGVbcHJvcF07XG4gIH1cbn1cbi8qKlxuICogQ29udmVydCBuZXN0ZWQgcnVsZXMgdG8gc2VwYXJhdGUsIHJlbW92ZSB0aGVtIGZyb20gb3JpZ2luYWwgc3R5bGVzLlxuICovXG5cblxuZnVuY3Rpb24ganNzR2xvYmFsKCkge1xuICBmdW5jdGlvbiBvbkNyZWF0ZVJ1bGUobmFtZSwgc3R5bGVzLCBvcHRpb25zKSB7XG4gICAgaWYgKCFuYW1lKSByZXR1cm4gbnVsbDtcblxuICAgIGlmIChuYW1lID09PSBhdCkge1xuICAgICAgcmV0dXJuIG5ldyBHbG9iYWxDb250YWluZXJSdWxlKG5hbWUsIHN0eWxlcywgb3B0aW9ucyk7XG4gICAgfVxuXG4gICAgaWYgKG5hbWVbMF0gPT09ICdAJyAmJiBuYW1lLnN1YnN0cigwLCBhdFByZWZpeC5sZW5ndGgpID09PSBhdFByZWZpeCkge1xuICAgICAgcmV0dXJuIG5ldyBHbG9iYWxQcmVmaXhlZFJ1bGUobmFtZSwgc3R5bGVzLCBvcHRpb25zKTtcbiAgICB9XG5cbiAgICB2YXIgcGFyZW50ID0gb3B0aW9ucy5wYXJlbnQ7XG5cbiAgICBpZiAocGFyZW50KSB7XG4gICAgICBpZiAocGFyZW50LnR5cGUgPT09ICdnbG9iYWwnIHx8IHBhcmVudC5vcHRpb25zLnBhcmVudCAmJiBwYXJlbnQub3B0aW9ucy5wYXJlbnQudHlwZSA9PT0gJ2dsb2JhbCcpIHtcbiAgICAgICAgb3B0aW9ucy5zY29wZWQgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIW9wdGlvbnMuc2VsZWN0b3IgJiYgb3B0aW9ucy5zY29wZWQgPT09IGZhbHNlKSB7XG4gICAgICBvcHRpb25zLnNlbGVjdG9yID0gbmFtZTtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uUHJvY2Vzc1J1bGUocnVsZSwgc2hlZXQpIHtcbiAgICBpZiAocnVsZS50eXBlICE9PSAnc3R5bGUnIHx8ICFzaGVldCkgcmV0dXJuO1xuICAgIGhhbmRsZU5lc3RlZEdsb2JhbENvbnRhaW5lclJ1bGUocnVsZSwgc2hlZXQpO1xuICAgIGhhbmRsZVByZWZpeGVkR2xvYmFsUnVsZShydWxlLCBzaGVldCk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIG9uQ3JlYXRlUnVsZTogb25DcmVhdGVSdWxlLFxuICAgIG9uUHJvY2Vzc1J1bGU6IG9uUHJvY2Vzc1J1bGVcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQganNzR2xvYmFsO1xuIiwiaW1wb3J0IF9leHRlbmRzIGZyb20gJ0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2V4dGVuZHMnO1xuaW1wb3J0IGlzSW5Ccm93c2VyIGZyb20gJ2lzLWluLWJyb3dzZXInO1xuaW1wb3J0IHdhcm5pbmcgZnJvbSAndGlueS13YXJuaW5nJztcbmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAnQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MnO1xuaW1wb3J0IF9pbmhlcml0c0xvb3NlIGZyb20gJ0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzTG9vc2UnO1xuaW1wb3J0IF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQgZnJvbSAnQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXNzZXJ0VGhpc0luaXRpYWxpemVkJztcbmltcG9ydCBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZSBmcm9tICdAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlJztcblxudmFyIHBsYWluT2JqZWN0Q29uc3RydXJjdG9yID0ge30uY29uc3RydWN0b3I7XG5mdW5jdGlvbiBjbG9uZVN0eWxlKHN0eWxlKSB7XG4gIGlmIChzdHlsZSA9PSBudWxsIHx8IHR5cGVvZiBzdHlsZSAhPT0gJ29iamVjdCcpIHJldHVybiBzdHlsZTtcbiAgaWYgKEFycmF5LmlzQXJyYXkoc3R5bGUpKSByZXR1cm4gc3R5bGUubWFwKGNsb25lU3R5bGUpO1xuICBpZiAoc3R5bGUuY29uc3RydWN0b3IgIT09IHBsYWluT2JqZWN0Q29uc3RydXJjdG9yKSByZXR1cm4gc3R5bGU7XG4gIHZhciBuZXdTdHlsZSA9IHt9O1xuXG4gIGZvciAodmFyIG5hbWUgaW4gc3R5bGUpIHtcbiAgICBuZXdTdHlsZVtuYW1lXSA9IGNsb25lU3R5bGUoc3R5bGVbbmFtZV0pO1xuICB9XG5cbiAgcmV0dXJuIG5ld1N0eWxlO1xufVxuXG4vKipcbiAqIENyZWF0ZSBhIHJ1bGUgaW5zdGFuY2UuXG4gKi9cblxuZnVuY3Rpb24gY3JlYXRlUnVsZShuYW1lLCBkZWNsLCBvcHRpb25zKSB7XG4gIGlmIChuYW1lID09PSB2b2lkIDApIHtcbiAgICBuYW1lID0gJ3VubmFtZWQnO1xuICB9XG5cbiAgdmFyIGpzcyA9IG9wdGlvbnMuanNzO1xuICB2YXIgZGVjbENvcHkgPSBjbG9uZVN0eWxlKGRlY2wpO1xuICB2YXIgcnVsZSA9IGpzcy5wbHVnaW5zLm9uQ3JlYXRlUnVsZShuYW1lLCBkZWNsQ29weSwgb3B0aW9ucyk7XG4gIGlmIChydWxlKSByZXR1cm4gcnVsZTsgLy8gSXQgaXMgYW4gYXQtcnVsZSBhbmQgaXQgaGFzIG5vIGluc3RhbmNlLlxuXG4gIGlmIChuYW1lWzBdID09PSAnQCcpIHtcbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIgPyB3YXJuaW5nKGZhbHNlLCBcIltKU1NdIFVua25vd24gcnVsZSBcIiArIG5hbWUpIDogdm9pZCAwO1xuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59XG5cbnZhciBqb2luID0gZnVuY3Rpb24gam9pbih2YWx1ZSwgYnkpIHtcbiAgdmFyIHJlc3VsdCA9ICcnO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdmFsdWUubGVuZ3RoOyBpKyspIHtcbiAgICAvLyBSZW1vdmUgIWltcG9ydGFudCBmcm9tIHRoZSB2YWx1ZSwgaXQgd2lsbCBiZSByZWFkZGVkIGxhdGVyLlxuICAgIGlmICh2YWx1ZVtpXSA9PT0gJyFpbXBvcnRhbnQnKSBicmVhaztcbiAgICBpZiAocmVzdWx0KSByZXN1bHQgKz0gYnk7XG4gICAgcmVzdWx0ICs9IHZhbHVlW2ldO1xuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn07XG4vKipcbiAqIENvbnZlcnRzIEpTUyBhcnJheSB2YWx1ZSB0byBhIENTUyBzdHJpbmcuXG4gKlxuICogYG1hcmdpbjogW1snNXB4JywgJzEwcHgnXV1gID4gYG1hcmdpbjogNXB4IDEwcHg7YFxuICogYGJvcmRlcjogWycxcHgnLCAnMnB4J11gID4gYGJvcmRlcjogMXB4LCAycHg7YFxuICogYG1hcmdpbjogW1snNXB4JywgJzEwcHgnXSwgJyFpbXBvcnRhbnQnXWAgPiBgbWFyZ2luOiA1cHggMTBweCAhaW1wb3J0YW50O2BcbiAqIGBjb2xvcjogWydyZWQnLCAhaW1wb3J0YW50XWAgPiBgY29sb3I6IHJlZCAhaW1wb3J0YW50O2BcbiAqL1xuXG5cbnZhciB0b0Nzc1ZhbHVlID0gZnVuY3Rpb24gdG9Dc3NWYWx1ZSh2YWx1ZSkge1xuICBpZiAoIUFycmF5LmlzQXJyYXkodmFsdWUpKSByZXR1cm4gdmFsdWU7XG4gIHZhciBjc3NWYWx1ZSA9ICcnOyAvLyBTdXBwb3J0IHNwYWNlIHNlcGFyYXRlZCB2YWx1ZXMgdmlhIGBbWyc1cHgnLCAnMTBweCddXWAuXG5cbiAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWVbMF0pKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2YWx1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHZhbHVlW2ldID09PSAnIWltcG9ydGFudCcpIGJyZWFrO1xuICAgICAgaWYgKGNzc1ZhbHVlKSBjc3NWYWx1ZSArPSAnLCAnO1xuICAgICAgY3NzVmFsdWUgKz0gam9pbih2YWx1ZVtpXSwgJyAnKTtcbiAgICB9XG4gIH0gZWxzZSBjc3NWYWx1ZSA9IGpvaW4odmFsdWUsICcsICcpOyAvLyBBZGQgIWltcG9ydGFudCwgYmVjYXVzZSBpdCB3YXMgaWdub3JlZC5cblxuXG4gIGlmICh2YWx1ZVt2YWx1ZS5sZW5ndGggLSAxXSA9PT0gJyFpbXBvcnRhbnQnKSB7XG4gICAgY3NzVmFsdWUgKz0gJyAhaW1wb3J0YW50JztcbiAgfVxuXG4gIHJldHVybiBjc3NWYWx1ZTtcbn07XG5cbmZ1bmN0aW9uIGdldFdoaXRlc3BhY2VTeW1ib2xzKG9wdGlvbnMpIHtcbiAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5mb3JtYXQgPT09IGZhbHNlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGxpbmVicmVhazogJycsXG4gICAgICBzcGFjZTogJydcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBsaW5lYnJlYWs6ICdcXG4nLFxuICAgIHNwYWNlOiAnICdcbiAgfTtcbn1cblxuLyoqXG4gKiBJbmRlbnQgYSBzdHJpbmcuXG4gKiBodHRwOi8vanNwZXJmLmNvbS9hcnJheS1qb2luLXZzLWZvclxuICovXG5cbmZ1bmN0aW9uIGluZGVudFN0cihzdHIsIGluZGVudCkge1xuICB2YXIgcmVzdWx0ID0gJyc7XG5cbiAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IGluZGVudDsgaW5kZXgrKykge1xuICAgIHJlc3VsdCArPSAnICAnO1xuICB9XG5cbiAgcmV0dXJuIHJlc3VsdCArIHN0cjtcbn1cbi8qKlxuICogQ29udmVydHMgYSBSdWxlIHRvIENTUyBzdHJpbmcuXG4gKi9cblxuXG5mdW5jdGlvbiB0b0NzcyhzZWxlY3Rvciwgc3R5bGUsIG9wdGlvbnMpIHtcbiAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkge1xuICAgIG9wdGlvbnMgPSB7fTtcbiAgfVxuXG4gIHZhciByZXN1bHQgPSAnJztcbiAgaWYgKCFzdHlsZSkgcmV0dXJuIHJlc3VsdDtcbiAgdmFyIF9vcHRpb25zID0gb3B0aW9ucyxcbiAgICAgIF9vcHRpb25zJGluZGVudCA9IF9vcHRpb25zLmluZGVudCxcbiAgICAgIGluZGVudCA9IF9vcHRpb25zJGluZGVudCA9PT0gdm9pZCAwID8gMCA6IF9vcHRpb25zJGluZGVudDtcbiAgdmFyIGZhbGxiYWNrcyA9IHN0eWxlLmZhbGxiYWNrcztcblxuICBpZiAob3B0aW9ucy5mb3JtYXQgPT09IGZhbHNlKSB7XG4gICAgaW5kZW50ID0gLUluZmluaXR5O1xuICB9XG5cbiAgdmFyIF9nZXRXaGl0ZXNwYWNlU3ltYm9scyA9IGdldFdoaXRlc3BhY2VTeW1ib2xzKG9wdGlvbnMpLFxuICAgICAgbGluZWJyZWFrID0gX2dldFdoaXRlc3BhY2VTeW1ib2xzLmxpbmVicmVhayxcbiAgICAgIHNwYWNlID0gX2dldFdoaXRlc3BhY2VTeW1ib2xzLnNwYWNlO1xuXG4gIGlmIChzZWxlY3RvcikgaW5kZW50Kys7IC8vIEFwcGx5IGZhbGxiYWNrcyBmaXJzdC5cblxuICBpZiAoZmFsbGJhY2tzKSB7XG4gICAgLy8gQXJyYXkgc3ludGF4IHtmYWxsYmFja3M6IFt7cHJvcDogdmFsdWV9XX1cbiAgICBpZiAoQXJyYXkuaXNBcnJheShmYWxsYmFja3MpKSB7XG4gICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgZmFsbGJhY2tzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICB2YXIgZmFsbGJhY2sgPSBmYWxsYmFja3NbaW5kZXhdO1xuXG4gICAgICAgIGZvciAodmFyIHByb3AgaW4gZmFsbGJhY2spIHtcbiAgICAgICAgICB2YXIgdmFsdWUgPSBmYWxsYmFja1twcm9wXTtcblxuICAgICAgICAgIGlmICh2YWx1ZSAhPSBudWxsKSB7XG4gICAgICAgICAgICBpZiAocmVzdWx0KSByZXN1bHQgKz0gbGluZWJyZWFrO1xuICAgICAgICAgICAgcmVzdWx0ICs9IGluZGVudFN0cihwcm9wICsgXCI6XCIgKyBzcGFjZSArIHRvQ3NzVmFsdWUodmFsdWUpICsgXCI7XCIsIGluZGVudCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIE9iamVjdCBzeW50YXgge2ZhbGxiYWNrczoge3Byb3A6IHZhbHVlfX1cbiAgICAgIGZvciAodmFyIF9wcm9wIGluIGZhbGxiYWNrcykge1xuICAgICAgICB2YXIgX3ZhbHVlID0gZmFsbGJhY2tzW19wcm9wXTtcblxuICAgICAgICBpZiAoX3ZhbHVlICE9IG51bGwpIHtcbiAgICAgICAgICBpZiAocmVzdWx0KSByZXN1bHQgKz0gbGluZWJyZWFrO1xuICAgICAgICAgIHJlc3VsdCArPSBpbmRlbnRTdHIoX3Byb3AgKyBcIjpcIiArIHNwYWNlICsgdG9Dc3NWYWx1ZShfdmFsdWUpICsgXCI7XCIsIGluZGVudCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmb3IgKHZhciBfcHJvcDIgaW4gc3R5bGUpIHtcbiAgICB2YXIgX3ZhbHVlMiA9IHN0eWxlW19wcm9wMl07XG5cbiAgICBpZiAoX3ZhbHVlMiAhPSBudWxsICYmIF9wcm9wMiAhPT0gJ2ZhbGxiYWNrcycpIHtcbiAgICAgIGlmIChyZXN1bHQpIHJlc3VsdCArPSBsaW5lYnJlYWs7XG4gICAgICByZXN1bHQgKz0gaW5kZW50U3RyKF9wcm9wMiArIFwiOlwiICsgc3BhY2UgKyB0b0Nzc1ZhbHVlKF92YWx1ZTIpICsgXCI7XCIsIGluZGVudCk7XG4gICAgfVxuICB9IC8vIEFsbG93IGVtcHR5IHN0eWxlIGluIHRoaXMgY2FzZSwgYmVjYXVzZSBwcm9wZXJ0aWVzIHdpbGwgYmUgYWRkZWQgZHluYW1pY2FsbHkuXG5cblxuICBpZiAoIXJlc3VsdCAmJiAhb3B0aW9ucy5hbGxvd0VtcHR5KSByZXR1cm4gcmVzdWx0OyAvLyBXaGVuIHJ1bGUgaXMgYmVpbmcgc3RyaW5naWZpZWQgYmVmb3JlIHNlbGVjdG9yIHdhcyBkZWZpbmVkLlxuXG4gIGlmICghc2VsZWN0b3IpIHJldHVybiByZXN1bHQ7XG4gIGluZGVudC0tO1xuICBpZiAocmVzdWx0KSByZXN1bHQgPSBcIlwiICsgbGluZWJyZWFrICsgcmVzdWx0ICsgbGluZWJyZWFrO1xuICByZXR1cm4gaW5kZW50U3RyKFwiXCIgKyBzZWxlY3RvciArIHNwYWNlICsgXCJ7XCIgKyByZXN1bHQsIGluZGVudCkgKyBpbmRlbnRTdHIoJ30nLCBpbmRlbnQpO1xufVxuXG52YXIgZXNjYXBlUmVnZXggPSAvKFtbXFxdLiMqJD48K349fF46KCksXCInYFxcc10pL2c7XG52YXIgbmF0aXZlRXNjYXBlID0gdHlwZW9mIENTUyAhPT0gJ3VuZGVmaW5lZCcgJiYgQ1NTLmVzY2FwZTtcbnZhciBlc2NhcGUgPSAoZnVuY3Rpb24gKHN0cikge1xuICByZXR1cm4gbmF0aXZlRXNjYXBlID8gbmF0aXZlRXNjYXBlKHN0cikgOiBzdHIucmVwbGFjZShlc2NhcGVSZWdleCwgJ1xcXFwkMScpO1xufSk7XG5cbnZhciBCYXNlU3R5bGVSdWxlID1cbi8qI19fUFVSRV9fKi9cbmZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gQmFzZVN0eWxlUnVsZShrZXksIHN0eWxlLCBvcHRpb25zKSB7XG4gICAgdGhpcy50eXBlID0gJ3N0eWxlJztcbiAgICB0aGlzLmlzUHJvY2Vzc2VkID0gZmFsc2U7XG4gICAgdmFyIHNoZWV0ID0gb3B0aW9ucy5zaGVldCxcbiAgICAgICAgUmVuZGVyZXIgPSBvcHRpb25zLlJlbmRlcmVyO1xuICAgIHRoaXMua2V5ID0ga2V5O1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgdGhpcy5zdHlsZSA9IHN0eWxlO1xuICAgIGlmIChzaGVldCkgdGhpcy5yZW5kZXJlciA9IHNoZWV0LnJlbmRlcmVyO2Vsc2UgaWYgKFJlbmRlcmVyKSB0aGlzLnJlbmRlcmVyID0gbmV3IFJlbmRlcmVyKCk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBvciBzZXQgYSBzdHlsZSBwcm9wZXJ0eS5cbiAgICovXG5cblxuICB2YXIgX3Byb3RvID0gQmFzZVN0eWxlUnVsZS5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLnByb3AgPSBmdW5jdGlvbiBwcm9wKG5hbWUsIHZhbHVlLCBvcHRpb25zKSB7XG4gICAgLy8gSXQncyBhIGdldHRlci5cbiAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkgcmV0dXJuIHRoaXMuc3R5bGVbbmFtZV07IC8vIERvbid0IGRvIGFueXRoaW5nIGlmIHRoZSB2YWx1ZSBoYXMgbm90IGNoYW5nZWQuXG5cbiAgICB2YXIgZm9yY2UgPSBvcHRpb25zID8gb3B0aW9ucy5mb3JjZSA6IGZhbHNlO1xuICAgIGlmICghZm9yY2UgJiYgdGhpcy5zdHlsZVtuYW1lXSA9PT0gdmFsdWUpIHJldHVybiB0aGlzO1xuICAgIHZhciBuZXdWYWx1ZSA9IHZhbHVlO1xuXG4gICAgaWYgKCFvcHRpb25zIHx8IG9wdGlvbnMucHJvY2VzcyAhPT0gZmFsc2UpIHtcbiAgICAgIG5ld1ZhbHVlID0gdGhpcy5vcHRpb25zLmpzcy5wbHVnaW5zLm9uQ2hhbmdlVmFsdWUodmFsdWUsIG5hbWUsIHRoaXMpO1xuICAgIH1cblxuICAgIHZhciBpc0VtcHR5ID0gbmV3VmFsdWUgPT0gbnVsbCB8fCBuZXdWYWx1ZSA9PT0gZmFsc2U7XG4gICAgdmFyIGlzRGVmaW5lZCA9IG5hbWUgaW4gdGhpcy5zdHlsZTsgLy8gVmFsdWUgaXMgZW1wdHkgYW5kIHdhc24ndCBkZWZpbmVkIGJlZm9yZS5cblxuICAgIGlmIChpc0VtcHR5ICYmICFpc0RlZmluZWQgJiYgIWZvcmNlKSByZXR1cm4gdGhpczsgLy8gV2UgYXJlIGdvaW5nIHRvIHJlbW92ZSB0aGlzIHZhbHVlLlxuXG4gICAgdmFyIHJlbW92ZSA9IGlzRW1wdHkgJiYgaXNEZWZpbmVkO1xuICAgIGlmIChyZW1vdmUpIGRlbGV0ZSB0aGlzLnN0eWxlW25hbWVdO2Vsc2UgdGhpcy5zdHlsZVtuYW1lXSA9IG5ld1ZhbHVlOyAvLyBSZW5kZXJhYmxlIGlzIGRlZmluZWQgaWYgU3R5bGVTaGVldCBvcHRpb24gYGxpbmtgIGlzIHRydWUuXG5cbiAgICBpZiAodGhpcy5yZW5kZXJhYmxlICYmIHRoaXMucmVuZGVyZXIpIHtcbiAgICAgIGlmIChyZW1vdmUpIHRoaXMucmVuZGVyZXIucmVtb3ZlUHJvcGVydHkodGhpcy5yZW5kZXJhYmxlLCBuYW1lKTtlbHNlIHRoaXMucmVuZGVyZXIuc2V0UHJvcGVydHkodGhpcy5yZW5kZXJhYmxlLCBuYW1lLCBuZXdWYWx1ZSk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICB2YXIgc2hlZXQgPSB0aGlzLm9wdGlvbnMuc2hlZXQ7XG5cbiAgICBpZiAoc2hlZXQgJiYgc2hlZXQuYXR0YWNoZWQpIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIiA/IHdhcm5pbmcoZmFsc2UsICdbSlNTXSBSdWxlIGlzIG5vdCBsaW5rZWQuIE1pc3Npbmcgc2hlZXQgb3B0aW9uIFwibGluazogdHJ1ZVwiLicpIDogdm9pZCAwO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIHJldHVybiBCYXNlU3R5bGVSdWxlO1xufSgpO1xudmFyIFN0eWxlUnVsZSA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoX0Jhc2VTdHlsZVJ1bGUpIHtcbiAgX2luaGVyaXRzTG9vc2UoU3R5bGVSdWxlLCBfQmFzZVN0eWxlUnVsZSk7XG5cbiAgZnVuY3Rpb24gU3R5bGVSdWxlKGtleSwgc3R5bGUsIG9wdGlvbnMpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICBfdGhpcyA9IF9CYXNlU3R5bGVSdWxlLmNhbGwodGhpcywga2V5LCBzdHlsZSwgb3B0aW9ucykgfHwgdGhpcztcbiAgICB2YXIgc2VsZWN0b3IgPSBvcHRpb25zLnNlbGVjdG9yLFxuICAgICAgICBzY29wZWQgPSBvcHRpb25zLnNjb3BlZCxcbiAgICAgICAgc2hlZXQgPSBvcHRpb25zLnNoZWV0LFxuICAgICAgICBnZW5lcmF0ZUlkID0gb3B0aW9ucy5nZW5lcmF0ZUlkO1xuXG4gICAgaWYgKHNlbGVjdG9yKSB7XG4gICAgICBfdGhpcy5zZWxlY3RvclRleHQgPSBzZWxlY3RvcjtcbiAgICB9IGVsc2UgaWYgKHNjb3BlZCAhPT0gZmFsc2UpIHtcbiAgICAgIF90aGlzLmlkID0gZ2VuZXJhdGVJZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKSwgc2hlZXQpO1xuICAgICAgX3RoaXMuc2VsZWN0b3JUZXh0ID0gXCIuXCIgKyBlc2NhcGUoX3RoaXMuaWQpO1xuICAgIH1cblxuICAgIHJldHVybiBfdGhpcztcbiAgfVxuICAvKipcbiAgICogU2V0IHNlbGVjdG9yIHN0cmluZy5cbiAgICogQXR0ZW50aW9uOiB1c2UgdGhpcyB3aXRoIGNhdXRpb24uIE1vc3QgYnJvd3NlcnMgZGlkbid0IGltcGxlbWVudFxuICAgKiBzZWxlY3RvclRleHQgc2V0dGVyLCBzbyB0aGlzIG1heSByZXN1bHQgaW4gcmVyZW5kZXJpbmcgb2YgZW50aXJlIFN0eWxlIFNoZWV0LlxuICAgKi9cblxuXG4gIHZhciBfcHJvdG8yID0gU3R5bGVSdWxlLnByb3RvdHlwZTtcblxuICAvKipcbiAgICogQXBwbHkgcnVsZSB0byBhbiBlbGVtZW50IGlubGluZS5cbiAgICovXG4gIF9wcm90bzIuYXBwbHlUbyA9IGZ1bmN0aW9uIGFwcGx5VG8ocmVuZGVyYWJsZSkge1xuICAgIHZhciByZW5kZXJlciA9IHRoaXMucmVuZGVyZXI7XG5cbiAgICBpZiAocmVuZGVyZXIpIHtcbiAgICAgIHZhciBqc29uID0gdGhpcy50b0pTT04oKTtcblxuICAgICAgZm9yICh2YXIgcHJvcCBpbiBqc29uKSB7XG4gICAgICAgIHJlbmRlcmVyLnNldFByb3BlcnR5KHJlbmRlcmFibGUsIHByb3AsIGpzb25bcHJvcF0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIEpTT04gcmVwcmVzZW50YXRpb24gb2YgdGhlIHJ1bGUuXG4gICAqIEZhbGxiYWNrcyBhcmUgbm90IHN1cHBvcnRlZC5cbiAgICogVXNlZnVsIGZvciBpbmxpbmUgc3R5bGVzLlxuICAgKi9cbiAgO1xuXG4gIF9wcm90bzIudG9KU09OID0gZnVuY3Rpb24gdG9KU09OKCkge1xuICAgIHZhciBqc29uID0ge307XG5cbiAgICBmb3IgKHZhciBwcm9wIGluIHRoaXMuc3R5bGUpIHtcbiAgICAgIHZhciB2YWx1ZSA9IHRoaXMuc3R5bGVbcHJvcF07XG4gICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnb2JqZWN0JykganNvbltwcm9wXSA9IHZhbHVlO2Vsc2UgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSBqc29uW3Byb3BdID0gdG9Dc3NWYWx1ZSh2YWx1ZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGpzb247XG4gIH1cbiAgLyoqXG4gICAqIEdlbmVyYXRlcyBhIENTUyBzdHJpbmcuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvMi50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKG9wdGlvbnMpIHtcbiAgICB2YXIgc2hlZXQgPSB0aGlzLm9wdGlvbnMuc2hlZXQ7XG4gICAgdmFyIGxpbmsgPSBzaGVldCA/IHNoZWV0Lm9wdGlvbnMubGluayA6IGZhbHNlO1xuICAgIHZhciBvcHRzID0gbGluayA/IF9leHRlbmRzKHt9LCBvcHRpb25zLCB7XG4gICAgICBhbGxvd0VtcHR5OiB0cnVlXG4gICAgfSkgOiBvcHRpb25zO1xuICAgIHJldHVybiB0b0Nzcyh0aGlzLnNlbGVjdG9yVGV4dCwgdGhpcy5zdHlsZSwgb3B0cyk7XG4gIH07XG5cbiAgX2NyZWF0ZUNsYXNzKFN0eWxlUnVsZSwgW3tcbiAgICBrZXk6IFwic2VsZWN0b3JcIixcbiAgICBzZXQ6IGZ1bmN0aW9uIHNldChzZWxlY3Rvcikge1xuICAgICAgaWYgKHNlbGVjdG9yID09PSB0aGlzLnNlbGVjdG9yVGV4dCkgcmV0dXJuO1xuICAgICAgdGhpcy5zZWxlY3RvclRleHQgPSBzZWxlY3RvcjtcbiAgICAgIHZhciByZW5kZXJlciA9IHRoaXMucmVuZGVyZXIsXG4gICAgICAgICAgcmVuZGVyYWJsZSA9IHRoaXMucmVuZGVyYWJsZTtcbiAgICAgIGlmICghcmVuZGVyYWJsZSB8fCAhcmVuZGVyZXIpIHJldHVybjtcbiAgICAgIHZhciBoYXNDaGFuZ2VkID0gcmVuZGVyZXIuc2V0U2VsZWN0b3IocmVuZGVyYWJsZSwgc2VsZWN0b3IpOyAvLyBJZiBzZWxlY3RvciBzZXR0ZXIgaXMgbm90IGltcGxlbWVudGVkLCByZXJlbmRlciB0aGUgcnVsZS5cblxuICAgICAgaWYgKCFoYXNDaGFuZ2VkKSB7XG4gICAgICAgIHJlbmRlcmVyLnJlcGxhY2VSdWxlKHJlbmRlcmFibGUsIHRoaXMpO1xuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgc2VsZWN0b3Igc3RyaW5nLlxuICAgICAqL1xuICAgICxcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLnNlbGVjdG9yVGV4dDtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gU3R5bGVSdWxlO1xufShCYXNlU3R5bGVSdWxlKTtcbnZhciBwbHVnaW5TdHlsZVJ1bGUgPSB7XG4gIG9uQ3JlYXRlUnVsZTogZnVuY3Rpb24gb25DcmVhdGVSdWxlKGtleSwgc3R5bGUsIG9wdGlvbnMpIHtcbiAgICBpZiAoa2V5WzBdID09PSAnQCcgfHwgb3B0aW9ucy5wYXJlbnQgJiYgb3B0aW9ucy5wYXJlbnQudHlwZSA9PT0gJ2tleWZyYW1lcycpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgU3R5bGVSdWxlKGtleSwgc3R5bGUsIG9wdGlvbnMpO1xuICB9XG59O1xuXG52YXIgZGVmYXVsdFRvU3RyaW5nT3B0aW9ucyA9IHtcbiAgaW5kZW50OiAxLFxuICBjaGlsZHJlbjogdHJ1ZVxufTtcbnZhciBhdFJlZ0V4cCA9IC9AKFtcXHctXSspLztcbi8qKlxuICogQ29uZGl0aW9uYWwgcnVsZSBmb3IgQG1lZGlhLCBAc3VwcG9ydHNcbiAqL1xuXG52YXIgQ29uZGl0aW9uYWxSdWxlID1cbi8qI19fUFVSRV9fKi9cbmZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gQ29uZGl0aW9uYWxSdWxlKGtleSwgc3R5bGVzLCBvcHRpb25zKSB7XG4gICAgdGhpcy50eXBlID0gJ2NvbmRpdGlvbmFsJztcbiAgICB0aGlzLmlzUHJvY2Vzc2VkID0gZmFsc2U7XG4gICAgdGhpcy5rZXkgPSBrZXk7XG4gICAgdmFyIGF0TWF0Y2ggPSBrZXkubWF0Y2goYXRSZWdFeHApO1xuICAgIHRoaXMuYXQgPSBhdE1hdGNoID8gYXRNYXRjaFsxXSA6ICd1bmtub3duJzsgLy8gS2V5IG1pZ2h0IGNvbnRhaW4gYSB1bmlxdWUgc3VmZml4IGluIGNhc2UgdGhlIGBuYW1lYCBwYXNzZWQgYnkgdXNlciB3YXMgZHVwbGljYXRlLlxuXG4gICAgdGhpcy5xdWVyeSA9IG9wdGlvbnMubmFtZSB8fCBcIkBcIiArIHRoaXMuYXQ7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICB0aGlzLnJ1bGVzID0gbmV3IFJ1bGVMaXN0KF9leHRlbmRzKHt9LCBvcHRpb25zLCB7XG4gICAgICBwYXJlbnQ6IHRoaXNcbiAgICB9KSk7XG5cbiAgICBmb3IgKHZhciBuYW1lIGluIHN0eWxlcykge1xuICAgICAgdGhpcy5ydWxlcy5hZGQobmFtZSwgc3R5bGVzW25hbWVdKTtcbiAgICB9XG5cbiAgICB0aGlzLnJ1bGVzLnByb2Nlc3MoKTtcbiAgfVxuICAvKipcbiAgICogR2V0IGEgcnVsZS5cbiAgICovXG5cblxuICB2YXIgX3Byb3RvID0gQ29uZGl0aW9uYWxSdWxlLnByb3RvdHlwZTtcblxuICBfcHJvdG8uZ2V0UnVsZSA9IGZ1bmN0aW9uIGdldFJ1bGUobmFtZSkge1xuICAgIHJldHVybiB0aGlzLnJ1bGVzLmdldChuYW1lKTtcbiAgfVxuICAvKipcbiAgICogR2V0IGluZGV4IG9mIGEgcnVsZS5cbiAgICovXG4gIDtcblxuICBfcHJvdG8uaW5kZXhPZiA9IGZ1bmN0aW9uIGluZGV4T2YocnVsZSkge1xuICAgIHJldHVybiB0aGlzLnJ1bGVzLmluZGV4T2YocnVsZSk7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSBhbmQgcmVnaXN0ZXIgcnVsZSwgcnVuIHBsdWdpbnMuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmFkZFJ1bGUgPSBmdW5jdGlvbiBhZGRSdWxlKG5hbWUsIHN0eWxlLCBvcHRpb25zKSB7XG4gICAgdmFyIHJ1bGUgPSB0aGlzLnJ1bGVzLmFkZChuYW1lLCBzdHlsZSwgb3B0aW9ucyk7XG4gICAgaWYgKCFydWxlKSByZXR1cm4gbnVsbDtcbiAgICB0aGlzLm9wdGlvbnMuanNzLnBsdWdpbnMub25Qcm9jZXNzUnVsZShydWxlKTtcbiAgICByZXR1cm4gcnVsZTtcbiAgfVxuICAvKipcbiAgICogUmVwbGFjZSBydWxlLCBydW4gcGx1Z2lucy5cbiAgICovXG4gIDtcblxuICBfcHJvdG8ucmVwbGFjZVJ1bGUgPSBmdW5jdGlvbiByZXBsYWNlUnVsZShuYW1lLCBzdHlsZSwgb3B0aW9ucykge1xuICAgIHZhciBuZXdSdWxlID0gdGhpcy5ydWxlcy5yZXBsYWNlKG5hbWUsIHN0eWxlLCBvcHRpb25zKTtcbiAgICBpZiAobmV3UnVsZSkgdGhpcy5vcHRpb25zLmpzcy5wbHVnaW5zLm9uUHJvY2Vzc1J1bGUobmV3UnVsZSk7XG4gICAgcmV0dXJuIG5ld1J1bGU7XG4gIH1cbiAgLyoqXG4gICAqIEdlbmVyYXRlcyBhIENTUyBzdHJpbmcuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcob3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHtcbiAgICAgIG9wdGlvbnMgPSBkZWZhdWx0VG9TdHJpbmdPcHRpb25zO1xuICAgIH1cblxuICAgIHZhciBfZ2V0V2hpdGVzcGFjZVN5bWJvbHMgPSBnZXRXaGl0ZXNwYWNlU3ltYm9scyhvcHRpb25zKSxcbiAgICAgICAgbGluZWJyZWFrID0gX2dldFdoaXRlc3BhY2VTeW1ib2xzLmxpbmVicmVhaztcblxuICAgIGlmIChvcHRpb25zLmluZGVudCA9PSBudWxsKSBvcHRpb25zLmluZGVudCA9IGRlZmF1bHRUb1N0cmluZ09wdGlvbnMuaW5kZW50O1xuICAgIGlmIChvcHRpb25zLmNoaWxkcmVuID09IG51bGwpIG9wdGlvbnMuY2hpbGRyZW4gPSBkZWZhdWx0VG9TdHJpbmdPcHRpb25zLmNoaWxkcmVuO1xuXG4gICAgaWYgKG9wdGlvbnMuY2hpbGRyZW4gPT09IGZhbHNlKSB7XG4gICAgICByZXR1cm4gdGhpcy5xdWVyeSArIFwiIHt9XCI7XG4gICAgfVxuXG4gICAgdmFyIGNoaWxkcmVuID0gdGhpcy5ydWxlcy50b1N0cmluZyhvcHRpb25zKTtcbiAgICByZXR1cm4gY2hpbGRyZW4gPyB0aGlzLnF1ZXJ5ICsgXCIge1wiICsgbGluZWJyZWFrICsgY2hpbGRyZW4gKyBsaW5lYnJlYWsgKyBcIn1cIiA6ICcnO1xuICB9O1xuXG4gIHJldHVybiBDb25kaXRpb25hbFJ1bGU7XG59KCk7XG52YXIga2V5UmVnRXhwID0gL0Bjb250YWluZXJ8QG1lZGlhfEBzdXBwb3J0c1xccysvO1xudmFyIHBsdWdpbkNvbmRpdGlvbmFsUnVsZSA9IHtcbiAgb25DcmVhdGVSdWxlOiBmdW5jdGlvbiBvbkNyZWF0ZVJ1bGUoa2V5LCBzdHlsZXMsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4ga2V5UmVnRXhwLnRlc3Qoa2V5KSA/IG5ldyBDb25kaXRpb25hbFJ1bGUoa2V5LCBzdHlsZXMsIG9wdGlvbnMpIDogbnVsbDtcbiAgfVxufTtcblxudmFyIGRlZmF1bHRUb1N0cmluZ09wdGlvbnMkMSA9IHtcbiAgaW5kZW50OiAxLFxuICBjaGlsZHJlbjogdHJ1ZVxufTtcbnZhciBuYW1lUmVnRXhwID0gL0BrZXlmcmFtZXNcXHMrKFtcXHctXSspLztcbi8qKlxuICogUnVsZSBmb3IgQGtleWZyYW1lc1xuICovXG5cbnZhciBLZXlmcmFtZXNSdWxlID1cbi8qI19fUFVSRV9fKi9cbmZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gS2V5ZnJhbWVzUnVsZShrZXksIGZyYW1lcywgb3B0aW9ucykge1xuICAgIHRoaXMudHlwZSA9ICdrZXlmcmFtZXMnO1xuICAgIHRoaXMuYXQgPSAnQGtleWZyYW1lcyc7XG4gICAgdGhpcy5pc1Byb2Nlc3NlZCA9IGZhbHNlO1xuICAgIHZhciBuYW1lTWF0Y2ggPSBrZXkubWF0Y2gobmFtZVJlZ0V4cCk7XG5cbiAgICBpZiAobmFtZU1hdGNoICYmIG5hbWVNYXRjaFsxXSkge1xuICAgICAgdGhpcy5uYW1lID0gbmFtZU1hdGNoWzFdO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm5hbWUgPSAnbm9uYW1lJztcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIiA/IHdhcm5pbmcoZmFsc2UsIFwiW0pTU10gQmFkIGtleWZyYW1lcyBuYW1lIFwiICsga2V5KSA6IHZvaWQgMDtcbiAgICB9XG5cbiAgICB0aGlzLmtleSA9IHRoaXMudHlwZSArIFwiLVwiICsgdGhpcy5uYW1lO1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgdmFyIHNjb3BlZCA9IG9wdGlvbnMuc2NvcGVkLFxuICAgICAgICBzaGVldCA9IG9wdGlvbnMuc2hlZXQsXG4gICAgICAgIGdlbmVyYXRlSWQgPSBvcHRpb25zLmdlbmVyYXRlSWQ7XG4gICAgdGhpcy5pZCA9IHNjb3BlZCA9PT0gZmFsc2UgPyB0aGlzLm5hbWUgOiBlc2NhcGUoZ2VuZXJhdGVJZCh0aGlzLCBzaGVldCkpO1xuICAgIHRoaXMucnVsZXMgPSBuZXcgUnVsZUxpc3QoX2V4dGVuZHMoe30sIG9wdGlvbnMsIHtcbiAgICAgIHBhcmVudDogdGhpc1xuICAgIH0pKTtcblxuICAgIGZvciAodmFyIG5hbWUgaW4gZnJhbWVzKSB7XG4gICAgICB0aGlzLnJ1bGVzLmFkZChuYW1lLCBmcmFtZXNbbmFtZV0sIF9leHRlbmRzKHt9LCBvcHRpb25zLCB7XG4gICAgICAgIHBhcmVudDogdGhpc1xuICAgICAgfSkpO1xuICAgIH1cblxuICAgIHRoaXMucnVsZXMucHJvY2VzcygpO1xuICB9XG4gIC8qKlxuICAgKiBHZW5lcmF0ZXMgYSBDU1Mgc3RyaW5nLlxuICAgKi9cblxuXG4gIHZhciBfcHJvdG8gPSBLZXlmcmFtZXNSdWxlLnByb3RvdHlwZTtcblxuICBfcHJvdG8udG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZyhvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkge1xuICAgICAgb3B0aW9ucyA9IGRlZmF1bHRUb1N0cmluZ09wdGlvbnMkMTtcbiAgICB9XG5cbiAgICB2YXIgX2dldFdoaXRlc3BhY2VTeW1ib2xzID0gZ2V0V2hpdGVzcGFjZVN5bWJvbHMob3B0aW9ucyksXG4gICAgICAgIGxpbmVicmVhayA9IF9nZXRXaGl0ZXNwYWNlU3ltYm9scy5saW5lYnJlYWs7XG5cbiAgICBpZiAob3B0aW9ucy5pbmRlbnQgPT0gbnVsbCkgb3B0aW9ucy5pbmRlbnQgPSBkZWZhdWx0VG9TdHJpbmdPcHRpb25zJDEuaW5kZW50O1xuICAgIGlmIChvcHRpb25zLmNoaWxkcmVuID09IG51bGwpIG9wdGlvbnMuY2hpbGRyZW4gPSBkZWZhdWx0VG9TdHJpbmdPcHRpb25zJDEuY2hpbGRyZW47XG5cbiAgICBpZiAob3B0aW9ucy5jaGlsZHJlbiA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVybiB0aGlzLmF0ICsgXCIgXCIgKyB0aGlzLmlkICsgXCIge31cIjtcbiAgICB9XG5cbiAgICB2YXIgY2hpbGRyZW4gPSB0aGlzLnJ1bGVzLnRvU3RyaW5nKG9wdGlvbnMpO1xuICAgIGlmIChjaGlsZHJlbikgY2hpbGRyZW4gPSBcIlwiICsgbGluZWJyZWFrICsgY2hpbGRyZW4gKyBsaW5lYnJlYWs7XG4gICAgcmV0dXJuIHRoaXMuYXQgKyBcIiBcIiArIHRoaXMuaWQgKyBcIiB7XCIgKyBjaGlsZHJlbiArIFwifVwiO1xuICB9O1xuXG4gIHJldHVybiBLZXlmcmFtZXNSdWxlO1xufSgpO1xudmFyIGtleVJlZ0V4cCQxID0gL0BrZXlmcmFtZXNcXHMrLztcbnZhciByZWZSZWdFeHAgPSAvXFwkKFtcXHctXSspL2c7XG5cbnZhciBmaW5kUmVmZXJlbmNlZEtleWZyYW1lID0gZnVuY3Rpb24gZmluZFJlZmVyZW5jZWRLZXlmcmFtZSh2YWwsIGtleWZyYW1lcykge1xuICBpZiAodHlwZW9mIHZhbCA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gdmFsLnJlcGxhY2UocmVmUmVnRXhwLCBmdW5jdGlvbiAobWF0Y2gsIG5hbWUpIHtcbiAgICAgIGlmIChuYW1lIGluIGtleWZyYW1lcykge1xuICAgICAgICByZXR1cm4ga2V5ZnJhbWVzW25hbWVdO1xuICAgICAgfVxuXG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIgPyB3YXJuaW5nKGZhbHNlLCBcIltKU1NdIFJlZmVyZW5jZWQga2V5ZnJhbWVzIHJ1bGUgXFxcIlwiICsgbmFtZSArIFwiXFxcIiBpcyBub3QgZGVmaW5lZC5cIikgOiB2b2lkIDA7XG4gICAgICByZXR1cm4gbWF0Y2g7XG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gdmFsO1xufTtcbi8qKlxuICogUmVwbGFjZSB0aGUgcmVmZXJlbmNlIGZvciBhIGFuaW1hdGlvbiBuYW1lLlxuICovXG5cblxudmFyIHJlcGxhY2VSZWYgPSBmdW5jdGlvbiByZXBsYWNlUmVmKHN0eWxlLCBwcm9wLCBrZXlmcmFtZXMpIHtcbiAgdmFyIHZhbHVlID0gc3R5bGVbcHJvcF07XG4gIHZhciByZWZLZXlmcmFtZSA9IGZpbmRSZWZlcmVuY2VkS2V5ZnJhbWUodmFsdWUsIGtleWZyYW1lcyk7XG5cbiAgaWYgKHJlZktleWZyYW1lICE9PSB2YWx1ZSkge1xuICAgIHN0eWxlW3Byb3BdID0gcmVmS2V5ZnJhbWU7XG4gIH1cbn07XG5cbnZhciBwbHVnaW5LZXlmcmFtZXNSdWxlID0ge1xuICBvbkNyZWF0ZVJ1bGU6IGZ1bmN0aW9uIG9uQ3JlYXRlUnVsZShrZXksIGZyYW1lcywgb3B0aW9ucykge1xuICAgIHJldHVybiB0eXBlb2Yga2V5ID09PSAnc3RyaW5nJyAmJiBrZXlSZWdFeHAkMS50ZXN0KGtleSkgPyBuZXcgS2V5ZnJhbWVzUnVsZShrZXksIGZyYW1lcywgb3B0aW9ucykgOiBudWxsO1xuICB9LFxuICAvLyBBbmltYXRpb24gbmFtZSByZWYgcmVwbGFjZXIuXG4gIG9uUHJvY2Vzc1N0eWxlOiBmdW5jdGlvbiBvblByb2Nlc3NTdHlsZShzdHlsZSwgcnVsZSwgc2hlZXQpIHtcbiAgICBpZiAocnVsZS50eXBlICE9PSAnc3R5bGUnIHx8ICFzaGVldCkgcmV0dXJuIHN0eWxlO1xuICAgIGlmICgnYW5pbWF0aW9uLW5hbWUnIGluIHN0eWxlKSByZXBsYWNlUmVmKHN0eWxlLCAnYW5pbWF0aW9uLW5hbWUnLCBzaGVldC5rZXlmcmFtZXMpO1xuICAgIGlmICgnYW5pbWF0aW9uJyBpbiBzdHlsZSkgcmVwbGFjZVJlZihzdHlsZSwgJ2FuaW1hdGlvbicsIHNoZWV0LmtleWZyYW1lcyk7XG4gICAgcmV0dXJuIHN0eWxlO1xuICB9LFxuICBvbkNoYW5nZVZhbHVlOiBmdW5jdGlvbiBvbkNoYW5nZVZhbHVlKHZhbCwgcHJvcCwgcnVsZSkge1xuICAgIHZhciBzaGVldCA9IHJ1bGUub3B0aW9ucy5zaGVldDtcblxuICAgIGlmICghc2hlZXQpIHtcbiAgICAgIHJldHVybiB2YWw7XG4gICAgfVxuXG4gICAgc3dpdGNoIChwcm9wKSB7XG4gICAgICBjYXNlICdhbmltYXRpb24nOlxuICAgICAgICByZXR1cm4gZmluZFJlZmVyZW5jZWRLZXlmcmFtZSh2YWwsIHNoZWV0LmtleWZyYW1lcyk7XG5cbiAgICAgIGNhc2UgJ2FuaW1hdGlvbi1uYW1lJzpcbiAgICAgICAgcmV0dXJuIGZpbmRSZWZlcmVuY2VkS2V5ZnJhbWUodmFsLCBzaGVldC5rZXlmcmFtZXMpO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gdmFsO1xuICAgIH1cbiAgfVxufTtcblxudmFyIEtleWZyYW1lUnVsZSA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoX0Jhc2VTdHlsZVJ1bGUpIHtcbiAgX2luaGVyaXRzTG9vc2UoS2V5ZnJhbWVSdWxlLCBfQmFzZVN0eWxlUnVsZSk7XG5cbiAgZnVuY3Rpb24gS2V5ZnJhbWVSdWxlKCkge1xuICAgIHJldHVybiBfQmFzZVN0eWxlUnVsZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gIH1cblxuICB2YXIgX3Byb3RvID0gS2V5ZnJhbWVSdWxlLnByb3RvdHlwZTtcblxuICAvKipcbiAgICogR2VuZXJhdGVzIGEgQ1NTIHN0cmluZy5cbiAgICovXG4gIF9wcm90by50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKG9wdGlvbnMpIHtcbiAgICB2YXIgc2hlZXQgPSB0aGlzLm9wdGlvbnMuc2hlZXQ7XG4gICAgdmFyIGxpbmsgPSBzaGVldCA/IHNoZWV0Lm9wdGlvbnMubGluayA6IGZhbHNlO1xuICAgIHZhciBvcHRzID0gbGluayA/IF9leHRlbmRzKHt9LCBvcHRpb25zLCB7XG4gICAgICBhbGxvd0VtcHR5OiB0cnVlXG4gICAgfSkgOiBvcHRpb25zO1xuICAgIHJldHVybiB0b0Nzcyh0aGlzLmtleSwgdGhpcy5zdHlsZSwgb3B0cyk7XG4gIH07XG5cbiAgcmV0dXJuIEtleWZyYW1lUnVsZTtcbn0oQmFzZVN0eWxlUnVsZSk7XG52YXIgcGx1Z2luS2V5ZnJhbWVSdWxlID0ge1xuICBvbkNyZWF0ZVJ1bGU6IGZ1bmN0aW9uIG9uQ3JlYXRlUnVsZShrZXksIHN0eWxlLCBvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMucGFyZW50ICYmIG9wdGlvbnMucGFyZW50LnR5cGUgPT09ICdrZXlmcmFtZXMnKSB7XG4gICAgICByZXR1cm4gbmV3IEtleWZyYW1lUnVsZShrZXksIHN0eWxlLCBvcHRpb25zKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufTtcblxudmFyIEZvbnRGYWNlUnVsZSA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIEZvbnRGYWNlUnVsZShrZXksIHN0eWxlLCBvcHRpb25zKSB7XG4gICAgdGhpcy50eXBlID0gJ2ZvbnQtZmFjZSc7XG4gICAgdGhpcy5hdCA9ICdAZm9udC1mYWNlJztcbiAgICB0aGlzLmlzUHJvY2Vzc2VkID0gZmFsc2U7XG4gICAgdGhpcy5rZXkgPSBrZXk7XG4gICAgdGhpcy5zdHlsZSA9IHN0eWxlO1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gIH1cbiAgLyoqXG4gICAqIEdlbmVyYXRlcyBhIENTUyBzdHJpbmcuXG4gICAqL1xuXG5cbiAgdmFyIF9wcm90byA9IEZvbnRGYWNlUnVsZS5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcob3B0aW9ucykge1xuICAgIHZhciBfZ2V0V2hpdGVzcGFjZVN5bWJvbHMgPSBnZXRXaGl0ZXNwYWNlU3ltYm9scyhvcHRpb25zKSxcbiAgICAgICAgbGluZWJyZWFrID0gX2dldFdoaXRlc3BhY2VTeW1ib2xzLmxpbmVicmVhaztcblxuICAgIGlmIChBcnJheS5pc0FycmF5KHRoaXMuc3R5bGUpKSB7XG4gICAgICB2YXIgc3RyID0gJyc7XG5cbiAgICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLnN0eWxlLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICBzdHIgKz0gdG9Dc3ModGhpcy5hdCwgdGhpcy5zdHlsZVtpbmRleF0pO1xuICAgICAgICBpZiAodGhpcy5zdHlsZVtpbmRleCArIDFdKSBzdHIgKz0gbGluZWJyZWFrO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc3RyO1xuICAgIH1cblxuICAgIHJldHVybiB0b0Nzcyh0aGlzLmF0LCB0aGlzLnN0eWxlLCBvcHRpb25zKTtcbiAgfTtcblxuICByZXR1cm4gRm9udEZhY2VSdWxlO1xufSgpO1xudmFyIGtleVJlZ0V4cCQyID0gL0Bmb250LWZhY2UvO1xudmFyIHBsdWdpbkZvbnRGYWNlUnVsZSA9IHtcbiAgb25DcmVhdGVSdWxlOiBmdW5jdGlvbiBvbkNyZWF0ZVJ1bGUoa2V5LCBzdHlsZSwgb3B0aW9ucykge1xuICAgIHJldHVybiBrZXlSZWdFeHAkMi50ZXN0KGtleSkgPyBuZXcgRm9udEZhY2VSdWxlKGtleSwgc3R5bGUsIG9wdGlvbnMpIDogbnVsbDtcbiAgfVxufTtcblxudmFyIFZpZXdwb3J0UnVsZSA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFZpZXdwb3J0UnVsZShrZXksIHN0eWxlLCBvcHRpb25zKSB7XG4gICAgdGhpcy50eXBlID0gJ3ZpZXdwb3J0JztcbiAgICB0aGlzLmF0ID0gJ0B2aWV3cG9ydCc7XG4gICAgdGhpcy5pc1Byb2Nlc3NlZCA9IGZhbHNlO1xuICAgIHRoaXMua2V5ID0ga2V5O1xuICAgIHRoaXMuc3R5bGUgPSBzdHlsZTtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICB9XG4gIC8qKlxuICAgKiBHZW5lcmF0ZXMgYSBDU1Mgc3RyaW5nLlxuICAgKi9cblxuXG4gIHZhciBfcHJvdG8gPSBWaWV3cG9ydFJ1bGUucHJvdG90eXBlO1xuXG4gIF9wcm90by50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gdG9Dc3ModGhpcy5rZXksIHRoaXMuc3R5bGUsIG9wdGlvbnMpO1xuICB9O1xuXG4gIHJldHVybiBWaWV3cG9ydFJ1bGU7XG59KCk7XG52YXIgcGx1Z2luVmlld3BvcnRSdWxlID0ge1xuICBvbkNyZWF0ZVJ1bGU6IGZ1bmN0aW9uIG9uQ3JlYXRlUnVsZShrZXksIHN0eWxlLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIGtleSA9PT0gJ0B2aWV3cG9ydCcgfHwga2V5ID09PSAnQC1tcy12aWV3cG9ydCcgPyBuZXcgVmlld3BvcnRSdWxlKGtleSwgc3R5bGUsIG9wdGlvbnMpIDogbnVsbDtcbiAgfVxufTtcblxudmFyIFNpbXBsZVJ1bGUgPVxuLyojX19QVVJFX18qL1xuZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBTaW1wbGVSdWxlKGtleSwgdmFsdWUsIG9wdGlvbnMpIHtcbiAgICB0aGlzLnR5cGUgPSAnc2ltcGxlJztcbiAgICB0aGlzLmlzUHJvY2Vzc2VkID0gZmFsc2U7XG4gICAgdGhpcy5rZXkgPSBrZXk7XG4gICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gIH1cbiAgLyoqXG4gICAqIEdlbmVyYXRlcyBhIENTUyBzdHJpbmcuXG4gICAqL1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcblxuXG4gIHZhciBfcHJvdG8gPSBTaW1wbGVSdWxlLnByb3RvdHlwZTtcblxuICBfcHJvdG8udG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZyhvcHRpb25zKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkodGhpcy52YWx1ZSkpIHtcbiAgICAgIHZhciBzdHIgPSAnJztcblxuICAgICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMudmFsdWUubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgIHN0ciArPSB0aGlzLmtleSArIFwiIFwiICsgdGhpcy52YWx1ZVtpbmRleF0gKyBcIjtcIjtcbiAgICAgICAgaWYgKHRoaXMudmFsdWVbaW5kZXggKyAxXSkgc3RyICs9ICdcXG4nO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc3RyO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmtleSArIFwiIFwiICsgdGhpcy52YWx1ZSArIFwiO1wiO1xuICB9O1xuXG4gIHJldHVybiBTaW1wbGVSdWxlO1xufSgpO1xudmFyIGtleXNNYXAgPSB7XG4gICdAY2hhcnNldCc6IHRydWUsXG4gICdAaW1wb3J0JzogdHJ1ZSxcbiAgJ0BuYW1lc3BhY2UnOiB0cnVlXG59O1xudmFyIHBsdWdpblNpbXBsZVJ1bGUgPSB7XG4gIG9uQ3JlYXRlUnVsZTogZnVuY3Rpb24gb25DcmVhdGVSdWxlKGtleSwgdmFsdWUsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4ga2V5IGluIGtleXNNYXAgPyBuZXcgU2ltcGxlUnVsZShrZXksIHZhbHVlLCBvcHRpb25zKSA6IG51bGw7XG4gIH1cbn07XG5cbnZhciBwbHVnaW5zID0gW3BsdWdpblN0eWxlUnVsZSwgcGx1Z2luQ29uZGl0aW9uYWxSdWxlLCBwbHVnaW5LZXlmcmFtZXNSdWxlLCBwbHVnaW5LZXlmcmFtZVJ1bGUsIHBsdWdpbkZvbnRGYWNlUnVsZSwgcGx1Z2luVmlld3BvcnRSdWxlLCBwbHVnaW5TaW1wbGVSdWxlXTtcblxudmFyIGRlZmF1bHRVcGRhdGVPcHRpb25zID0ge1xuICBwcm9jZXNzOiB0cnVlXG59O1xudmFyIGZvcmNlVXBkYXRlT3B0aW9ucyA9IHtcbiAgZm9yY2U6IHRydWUsXG4gIHByb2Nlc3M6IHRydWVcbiAgLyoqXG4gICAqIENvbnRhaW5zIHJ1bGVzIG9iamVjdHMgYW5kIGFsbG93cyBhZGRpbmcvcmVtb3ZpbmcgZXRjLlxuICAgKiBJcyB1c2VkIGZvciBlLmcuIGJ5IGBTdHlsZVNoZWV0YCBvciBgQ29uZGl0aW9uYWxSdWxlYC5cbiAgICovXG5cbn07XG5cbnZhciBSdWxlTGlzdCA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoKSB7XG4gIC8vIFJ1bGVzIHJlZ2lzdHJ5IGZvciBhY2Nlc3MgYnkgLmdldCgpIG1ldGhvZC5cbiAgLy8gSXQgY29udGFpbnMgdGhlIHNhbWUgcnVsZSByZWdpc3RlcmVkIGJ5IG5hbWUgYW5kIGJ5IHNlbGVjdG9yLlxuICAvLyBPcmlnaW5hbCBzdHlsZXMgb2JqZWN0LlxuICAvLyBVc2VkIHRvIGVuc3VyZSBjb3JyZWN0IHJ1bGVzIG9yZGVyLlxuICBmdW5jdGlvbiBSdWxlTGlzdChvcHRpb25zKSB7XG4gICAgdGhpcy5tYXAgPSB7fTtcbiAgICB0aGlzLnJhdyA9IHt9O1xuICAgIHRoaXMuaW5kZXggPSBbXTtcbiAgICB0aGlzLmNvdW50ZXIgPSAwO1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgdGhpcy5jbGFzc2VzID0gb3B0aW9ucy5jbGFzc2VzO1xuICAgIHRoaXMua2V5ZnJhbWVzID0gb3B0aW9ucy5rZXlmcmFtZXM7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSBhbmQgcmVnaXN0ZXIgcnVsZS5cbiAgICpcbiAgICogV2lsbCBub3QgcmVuZGVyIGFmdGVyIFN0eWxlIFNoZWV0IHdhcyByZW5kZXJlZCB0aGUgZmlyc3QgdGltZS5cbiAgICovXG5cblxuICB2YXIgX3Byb3RvID0gUnVsZUxpc3QucHJvdG90eXBlO1xuXG4gIF9wcm90by5hZGQgPSBmdW5jdGlvbiBhZGQobmFtZSwgZGVjbCwgcnVsZU9wdGlvbnMpIHtcbiAgICB2YXIgX3RoaXMkb3B0aW9ucyA9IHRoaXMub3B0aW9ucyxcbiAgICAgICAgcGFyZW50ID0gX3RoaXMkb3B0aW9ucy5wYXJlbnQsXG4gICAgICAgIHNoZWV0ID0gX3RoaXMkb3B0aW9ucy5zaGVldCxcbiAgICAgICAganNzID0gX3RoaXMkb3B0aW9ucy5qc3MsXG4gICAgICAgIFJlbmRlcmVyID0gX3RoaXMkb3B0aW9ucy5SZW5kZXJlcixcbiAgICAgICAgZ2VuZXJhdGVJZCA9IF90aGlzJG9wdGlvbnMuZ2VuZXJhdGVJZCxcbiAgICAgICAgc2NvcGVkID0gX3RoaXMkb3B0aW9ucy5zY29wZWQ7XG5cbiAgICB2YXIgb3B0aW9ucyA9IF9leHRlbmRzKHtcbiAgICAgIGNsYXNzZXM6IHRoaXMuY2xhc3NlcyxcbiAgICAgIHBhcmVudDogcGFyZW50LFxuICAgICAgc2hlZXQ6IHNoZWV0LFxuICAgICAganNzOiBqc3MsXG4gICAgICBSZW5kZXJlcjogUmVuZGVyZXIsXG4gICAgICBnZW5lcmF0ZUlkOiBnZW5lcmF0ZUlkLFxuICAgICAgc2NvcGVkOiBzY29wZWQsXG4gICAgICBuYW1lOiBuYW1lLFxuICAgICAga2V5ZnJhbWVzOiB0aGlzLmtleWZyYW1lcyxcbiAgICAgIHNlbGVjdG9yOiB1bmRlZmluZWRcbiAgICB9LCBydWxlT3B0aW9ucyk7IC8vIFdoZW4gdXNlciB1c2VzIC5jcmVhdGVTdHlsZVNoZWV0KCksIGR1cGxpY2F0ZSBuYW1lcyBhcmUgbm90IHBvc3NpYmxlLCBidXRcbiAgICAvLyBgc2hlZXQuYWRkUnVsZSgpYCBvcGVucyB0aGUgZG9vciBmb3IgYW55IGR1cGxpY2F0ZSBydWxlIG5hbWUuIFdoZW4gdGhpcyBoYXBwZW5zXG4gICAgLy8gd2UgbmVlZCB0byBtYWtlIHRoZSBrZXkgdW5pcXVlIHdpdGhpbiB0aGlzIFJ1bGVMaXN0IGluc3RhbmNlIHNjb3BlLlxuXG5cbiAgICB2YXIga2V5ID0gbmFtZTtcblxuICAgIGlmIChuYW1lIGluIHRoaXMucmF3KSB7XG4gICAgICBrZXkgPSBuYW1lICsgXCItZFwiICsgdGhpcy5jb3VudGVyKys7XG4gICAgfSAvLyBXZSBuZWVkIHRvIHNhdmUgdGhlIG9yaWdpbmFsIGRlY2wgYmVmb3JlIGNyZWF0aW5nIHRoZSBydWxlXG4gICAgLy8gYmVjYXVzZSBjYWNoZSBwbHVnaW4gbmVlZHMgdG8gdXNlIGl0IGFzIGEga2V5IHRvIHJldHVybiBhIGNhY2hlZCBydWxlLlxuXG5cbiAgICB0aGlzLnJhd1trZXldID0gZGVjbDtcblxuICAgIGlmIChrZXkgaW4gdGhpcy5jbGFzc2VzKSB7XG4gICAgICAvLyBFLmcuIHJ1bGVzIGluc2lkZSBvZiBAbWVkaWEgY29udGFpbmVyXG4gICAgICBvcHRpb25zLnNlbGVjdG9yID0gXCIuXCIgKyBlc2NhcGUodGhpcy5jbGFzc2VzW2tleV0pO1xuICAgIH1cblxuICAgIHZhciBydWxlID0gY3JlYXRlUnVsZShrZXksIGRlY2wsIG9wdGlvbnMpO1xuICAgIGlmICghcnVsZSkgcmV0dXJuIG51bGw7XG4gICAgdGhpcy5yZWdpc3RlcihydWxlKTtcbiAgICB2YXIgaW5kZXggPSBvcHRpb25zLmluZGV4ID09PSB1bmRlZmluZWQgPyB0aGlzLmluZGV4Lmxlbmd0aCA6IG9wdGlvbnMuaW5kZXg7XG4gICAgdGhpcy5pbmRleC5zcGxpY2UoaW5kZXgsIDAsIHJ1bGUpO1xuICAgIHJldHVybiBydWxlO1xuICB9XG4gIC8qKlxuICAgKiBSZXBsYWNlIHJ1bGUuXG4gICAqIENyZWF0ZSBhIG5ldyBydWxlIGFuZCByZW1vdmUgb2xkIG9uZSBpbnN0ZWFkIG9mIG92ZXJ3cml0aW5nXG4gICAqIGJlY2F1c2Ugd2Ugd2FudCB0byBpbnZva2Ugb25DcmVhdGVSdWxlIGhvb2sgdG8gbWFrZSBwbHVnaW5zIHdvcmsuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnJlcGxhY2UgPSBmdW5jdGlvbiByZXBsYWNlKG5hbWUsIGRlY2wsIHJ1bGVPcHRpb25zKSB7XG4gICAgdmFyIG9sZFJ1bGUgPSB0aGlzLmdldChuYW1lKTtcbiAgICB2YXIgb2xkSW5kZXggPSB0aGlzLmluZGV4LmluZGV4T2Yob2xkUnVsZSk7XG5cbiAgICBpZiAob2xkUnVsZSkge1xuICAgICAgdGhpcy5yZW1vdmUob2xkUnVsZSk7XG4gICAgfVxuXG4gICAgdmFyIG9wdGlvbnMgPSBydWxlT3B0aW9ucztcbiAgICBpZiAob2xkSW5kZXggIT09IC0xKSBvcHRpb25zID0gX2V4dGVuZHMoe30sIHJ1bGVPcHRpb25zLCB7XG4gICAgICBpbmRleDogb2xkSW5kZXhcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcy5hZGQobmFtZSwgZGVjbCwgb3B0aW9ucyk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBhIHJ1bGUgYnkgbmFtZSBvciBzZWxlY3Rvci5cbiAgICovXG4gIDtcblxuICBfcHJvdG8uZ2V0ID0gZnVuY3Rpb24gZ2V0KG5hbWVPclNlbGVjdG9yKSB7XG4gICAgcmV0dXJuIHRoaXMubWFwW25hbWVPclNlbGVjdG9yXTtcbiAgfVxuICAvKipcbiAgICogRGVsZXRlIGEgcnVsZS5cbiAgICovXG4gIDtcblxuICBfcHJvdG8ucmVtb3ZlID0gZnVuY3Rpb24gcmVtb3ZlKHJ1bGUpIHtcbiAgICB0aGlzLnVucmVnaXN0ZXIocnVsZSk7XG4gICAgZGVsZXRlIHRoaXMucmF3W3J1bGUua2V5XTtcbiAgICB0aGlzLmluZGV4LnNwbGljZSh0aGlzLmluZGV4LmluZGV4T2YocnVsZSksIDEpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgaW5kZXggb2YgYSBydWxlLlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5pbmRleE9mID0gZnVuY3Rpb24gaW5kZXhPZihydWxlKSB7XG4gICAgcmV0dXJuIHRoaXMuaW5kZXguaW5kZXhPZihydWxlKTtcbiAgfVxuICAvKipcbiAgICogUnVuIGBvblByb2Nlc3NSdWxlKClgIHBsdWdpbnMgb24gZXZlcnkgcnVsZS5cbiAgICovXG4gIDtcblxuICBfcHJvdG8ucHJvY2VzcyA9IGZ1bmN0aW9uIHByb2Nlc3MoKSB7XG4gICAgdmFyIHBsdWdpbnMgPSB0aGlzLm9wdGlvbnMuanNzLnBsdWdpbnM7IC8vIFdlIG5lZWQgdG8gY2xvbmUgYXJyYXkgYmVjYXVzZSBpZiB3ZSBtb2RpZnkgdGhlIGluZGV4IHNvbWV3aGVyZSBlbHNlIGR1cmluZyBhIGxvb3BcbiAgICAvLyB3ZSBlbmQgdXAgd2l0aCB2ZXJ5IGhhcmQtdG8tdHJhY2stZG93biBzaWRlIGVmZmVjdHMuXG5cbiAgICB0aGlzLmluZGV4LnNsaWNlKDApLmZvckVhY2gocGx1Z2lucy5vblByb2Nlc3NSdWxlLCBwbHVnaW5zKTtcbiAgfVxuICAvKipcbiAgICogUmVnaXN0ZXIgYSBydWxlIGluIGAubWFwYCwgYC5jbGFzc2VzYCBhbmQgYC5rZXlmcmFtZXNgIG1hcHMuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnJlZ2lzdGVyID0gZnVuY3Rpb24gcmVnaXN0ZXIocnVsZSkge1xuICAgIHRoaXMubWFwW3J1bGUua2V5XSA9IHJ1bGU7XG5cbiAgICBpZiAocnVsZSBpbnN0YW5jZW9mIFN0eWxlUnVsZSkge1xuICAgICAgdGhpcy5tYXBbcnVsZS5zZWxlY3Rvcl0gPSBydWxlO1xuICAgICAgaWYgKHJ1bGUuaWQpIHRoaXMuY2xhc3Nlc1tydWxlLmtleV0gPSBydWxlLmlkO1xuICAgIH0gZWxzZSBpZiAocnVsZSBpbnN0YW5jZW9mIEtleWZyYW1lc1J1bGUgJiYgdGhpcy5rZXlmcmFtZXMpIHtcbiAgICAgIHRoaXMua2V5ZnJhbWVzW3J1bGUubmFtZV0gPSBydWxlLmlkO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogVW5yZWdpc3RlciBhIHJ1bGUuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnVucmVnaXN0ZXIgPSBmdW5jdGlvbiB1bnJlZ2lzdGVyKHJ1bGUpIHtcbiAgICBkZWxldGUgdGhpcy5tYXBbcnVsZS5rZXldO1xuXG4gICAgaWYgKHJ1bGUgaW5zdGFuY2VvZiBTdHlsZVJ1bGUpIHtcbiAgICAgIGRlbGV0ZSB0aGlzLm1hcFtydWxlLnNlbGVjdG9yXTtcbiAgICAgIGRlbGV0ZSB0aGlzLmNsYXNzZXNbcnVsZS5rZXldO1xuICAgIH0gZWxzZSBpZiAocnVsZSBpbnN0YW5jZW9mIEtleWZyYW1lc1J1bGUpIHtcbiAgICAgIGRlbGV0ZSB0aGlzLmtleWZyYW1lc1tydWxlLm5hbWVdO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogVXBkYXRlIHRoZSBmdW5jdGlvbiB2YWx1ZXMgd2l0aCBhIG5ldyBkYXRhLlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by51cGRhdGUgPSBmdW5jdGlvbiB1cGRhdGUoKSB7XG4gICAgdmFyIG5hbWU7XG4gICAgdmFyIGRhdGE7XG4gICAgdmFyIG9wdGlvbnM7XG5cbiAgICBpZiAodHlwZW9mIChhcmd1bWVudHMubGVuZ3RoIDw9IDAgPyB1bmRlZmluZWQgOiBhcmd1bWVudHNbMF0pID09PSAnc3RyaW5nJykge1xuICAgICAgbmFtZSA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMCA/IHVuZGVmaW5lZCA6IGFyZ3VtZW50c1swXTtcbiAgICAgIGRhdGEgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDEgPyB1bmRlZmluZWQgOiBhcmd1bWVudHNbMV07XG4gICAgICBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA8PSAyID8gdW5kZWZpbmVkIDogYXJndW1lbnRzWzJdO1xuICAgIH0gZWxzZSB7XG4gICAgICBkYXRhID0gYXJndW1lbnRzLmxlbmd0aCA8PSAwID8gdW5kZWZpbmVkIDogYXJndW1lbnRzWzBdO1xuICAgICAgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMSA/IHVuZGVmaW5lZCA6IGFyZ3VtZW50c1sxXTtcbiAgICAgIG5hbWUgPSBudWxsO1xuICAgIH1cblxuICAgIGlmIChuYW1lKSB7XG4gICAgICB0aGlzLnVwZGF0ZU9uZSh0aGlzLmdldChuYW1lKSwgZGF0YSwgb3B0aW9ucyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLmluZGV4Lmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICB0aGlzLnVwZGF0ZU9uZSh0aGlzLmluZGV4W2luZGV4XSwgZGF0YSwgb3B0aW9ucyk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBFeGVjdXRlIHBsdWdpbnMsIHVwZGF0ZSBydWxlIHByb3BzLlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by51cGRhdGVPbmUgPSBmdW5jdGlvbiB1cGRhdGVPbmUocnVsZSwgZGF0YSwgb3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHtcbiAgICAgIG9wdGlvbnMgPSBkZWZhdWx0VXBkYXRlT3B0aW9ucztcbiAgICB9XG5cbiAgICB2YXIgX3RoaXMkb3B0aW9uczIgPSB0aGlzLm9wdGlvbnMsXG4gICAgICAgIHBsdWdpbnMgPSBfdGhpcyRvcHRpb25zMi5qc3MucGx1Z2lucyxcbiAgICAgICAgc2hlZXQgPSBfdGhpcyRvcHRpb25zMi5zaGVldDsgLy8gSXQgaXMgYSBydWxlcyBjb250YWluZXIgbGlrZSBmb3IgZS5nLiBDb25kaXRpb25hbFJ1bGUuXG5cbiAgICBpZiAocnVsZS5ydWxlcyBpbnN0YW5jZW9mIFJ1bGVMaXN0KSB7XG4gICAgICBydWxlLnJ1bGVzLnVwZGF0ZShkYXRhLCBvcHRpb25zKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgc3R5bGUgPSBydWxlLnN0eWxlO1xuICAgIHBsdWdpbnMub25VcGRhdGUoZGF0YSwgcnVsZSwgc2hlZXQsIG9wdGlvbnMpOyAvLyBXZSByZWx5IG9uIGEgbmV3IGBzdHlsZWAgcmVmIGluIGNhc2UgaXQgd2FzIG11dGF0ZWQgZHVyaW5nIG9uVXBkYXRlIGhvb2suXG5cbiAgICBpZiAob3B0aW9ucy5wcm9jZXNzICYmIHN0eWxlICYmIHN0eWxlICE9PSBydWxlLnN0eWxlKSB7XG4gICAgICAvLyBXZSBuZWVkIHRvIHJ1biB0aGUgcGx1Z2lucyBpbiBjYXNlIG5ldyBgc3R5bGVgIHJlbGllcyBvbiBzeW50YXggcGx1Z2lucy5cbiAgICAgIHBsdWdpbnMub25Qcm9jZXNzU3R5bGUocnVsZS5zdHlsZSwgcnVsZSwgc2hlZXQpOyAvLyBVcGRhdGUgYW5kIGFkZCBwcm9wcy5cblxuICAgICAgZm9yICh2YXIgcHJvcCBpbiBydWxlLnN0eWxlKSB7XG4gICAgICAgIHZhciBuZXh0VmFsdWUgPSBydWxlLnN0eWxlW3Byb3BdO1xuICAgICAgICB2YXIgcHJldlZhbHVlID0gc3R5bGVbcHJvcF07IC8vIFdlIG5lZWQgdG8gdXNlIGBmb3JjZTogdHJ1ZWAgYmVjYXVzZSBgcnVsZS5zdHlsZWAgaGFzIGJlZW4gdXBkYXRlZCBkdXJpbmcgb25VcGRhdGUgaG9vaywgc28gYHJ1bGUucHJvcCgpYCB3aWxsIG5vdCB1cGRhdGUgdGhlIENTU09NIHJ1bGUuXG4gICAgICAgIC8vIFdlIGRvIHRoaXMgY29tcGFyaXNvbiB0byBhdm9pZCB1bm5lZWRlZCBgcnVsZS5wcm9wKClgIGNhbGxzLCBzaW5jZSB3ZSBoYXZlIHRoZSBvbGQgYHN0eWxlYCBvYmplY3QgaGVyZS5cblxuICAgICAgICBpZiAobmV4dFZhbHVlICE9PSBwcmV2VmFsdWUpIHtcbiAgICAgICAgICBydWxlLnByb3AocHJvcCwgbmV4dFZhbHVlLCBmb3JjZVVwZGF0ZU9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICB9IC8vIFJlbW92ZSBwcm9wcy5cblxuXG4gICAgICBmb3IgKHZhciBfcHJvcCBpbiBzdHlsZSkge1xuICAgICAgICB2YXIgX25leHRWYWx1ZSA9IHJ1bGUuc3R5bGVbX3Byb3BdO1xuICAgICAgICB2YXIgX3ByZXZWYWx1ZSA9IHN0eWxlW19wcm9wXTsgLy8gV2UgbmVlZCB0byB1c2UgYGZvcmNlOiB0cnVlYCBiZWNhdXNlIGBydWxlLnN0eWxlYCBoYXMgYmVlbiB1cGRhdGVkIGR1cmluZyBvblVwZGF0ZSBob29rLCBzbyBgcnVsZS5wcm9wKClgIHdpbGwgbm90IHVwZGF0ZSB0aGUgQ1NTT00gcnVsZS5cbiAgICAgICAgLy8gV2UgZG8gdGhpcyBjb21wYXJpc29uIHRvIGF2b2lkIHVubmVlZGVkIGBydWxlLnByb3AoKWAgY2FsbHMsIHNpbmNlIHdlIGhhdmUgdGhlIG9sZCBgc3R5bGVgIG9iamVjdCBoZXJlLlxuXG4gICAgICAgIGlmIChfbmV4dFZhbHVlID09IG51bGwgJiYgX25leHRWYWx1ZSAhPT0gX3ByZXZWYWx1ZSkge1xuICAgICAgICAgIHJ1bGUucHJvcChfcHJvcCwgbnVsbCwgZm9yY2VVcGRhdGVPcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICAvKipcbiAgICogQ29udmVydCBydWxlcyB0byBhIENTUyBzdHJpbmcuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcob3B0aW9ucykge1xuICAgIHZhciBzdHIgPSAnJztcbiAgICB2YXIgc2hlZXQgPSB0aGlzLm9wdGlvbnMuc2hlZXQ7XG4gICAgdmFyIGxpbmsgPSBzaGVldCA/IHNoZWV0Lm9wdGlvbnMubGluayA6IGZhbHNlO1xuXG4gICAgdmFyIF9nZXRXaGl0ZXNwYWNlU3ltYm9scyA9IGdldFdoaXRlc3BhY2VTeW1ib2xzKG9wdGlvbnMpLFxuICAgICAgICBsaW5lYnJlYWsgPSBfZ2V0V2hpdGVzcGFjZVN5bWJvbHMubGluZWJyZWFrO1xuXG4gICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMuaW5kZXgubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICB2YXIgcnVsZSA9IHRoaXMuaW5kZXhbaW5kZXhdO1xuICAgICAgdmFyIGNzcyA9IHJ1bGUudG9TdHJpbmcob3B0aW9ucyk7IC8vIE5vIG5lZWQgdG8gcmVuZGVyIGFuIGVtcHR5IHJ1bGUuXG5cbiAgICAgIGlmICghY3NzICYmICFsaW5rKSBjb250aW51ZTtcbiAgICAgIGlmIChzdHIpIHN0ciArPSBsaW5lYnJlYWs7XG4gICAgICBzdHIgKz0gY3NzO1xuICAgIH1cblxuICAgIHJldHVybiBzdHI7XG4gIH07XG5cbiAgcmV0dXJuIFJ1bGVMaXN0O1xufSgpO1xuXG52YXIgU3R5bGVTaGVldCA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFN0eWxlU2hlZXQoc3R5bGVzLCBvcHRpb25zKSB7XG4gICAgdGhpcy5hdHRhY2hlZCA9IGZhbHNlO1xuICAgIHRoaXMuZGVwbG95ZWQgPSBmYWxzZTtcbiAgICB0aGlzLmNsYXNzZXMgPSB7fTtcbiAgICB0aGlzLmtleWZyYW1lcyA9IHt9O1xuICAgIHRoaXMub3B0aW9ucyA9IF9leHRlbmRzKHt9LCBvcHRpb25zLCB7XG4gICAgICBzaGVldDogdGhpcyxcbiAgICAgIHBhcmVudDogdGhpcyxcbiAgICAgIGNsYXNzZXM6IHRoaXMuY2xhc3NlcyxcbiAgICAgIGtleWZyYW1lczogdGhpcy5rZXlmcmFtZXNcbiAgICB9KTtcblxuICAgIGlmIChvcHRpb25zLlJlbmRlcmVyKSB7XG4gICAgICB0aGlzLnJlbmRlcmVyID0gbmV3IG9wdGlvbnMuUmVuZGVyZXIodGhpcyk7XG4gICAgfVxuXG4gICAgdGhpcy5ydWxlcyA9IG5ldyBSdWxlTGlzdCh0aGlzLm9wdGlvbnMpO1xuXG4gICAgZm9yICh2YXIgbmFtZSBpbiBzdHlsZXMpIHtcbiAgICAgIHRoaXMucnVsZXMuYWRkKG5hbWUsIHN0eWxlc1tuYW1lXSk7XG4gICAgfVxuXG4gICAgdGhpcy5ydWxlcy5wcm9jZXNzKCk7XG4gIH1cbiAgLyoqXG4gICAqIEF0dGFjaCByZW5kZXJhYmxlIHRvIHRoZSByZW5kZXIgdHJlZS5cbiAgICovXG5cblxuICB2YXIgX3Byb3RvID0gU3R5bGVTaGVldC5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLmF0dGFjaCA9IGZ1bmN0aW9uIGF0dGFjaCgpIHtcbiAgICBpZiAodGhpcy5hdHRhY2hlZCkgcmV0dXJuIHRoaXM7XG4gICAgaWYgKHRoaXMucmVuZGVyZXIpIHRoaXMucmVuZGVyZXIuYXR0YWNoKCk7XG4gICAgdGhpcy5hdHRhY2hlZCA9IHRydWU7IC8vIE9yZGVyIGlzIGltcG9ydGFudCwgYmVjYXVzZSB3ZSBjYW4ndCB1c2UgaW5zZXJ0UnVsZSBBUEkgaWYgc3R5bGUgZWxlbWVudCBpcyBub3QgYXR0YWNoZWQuXG5cbiAgICBpZiAoIXRoaXMuZGVwbG95ZWQpIHRoaXMuZGVwbG95KCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIFJlbW92ZSByZW5kZXJhYmxlIGZyb20gcmVuZGVyIHRyZWUuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmRldGFjaCA9IGZ1bmN0aW9uIGRldGFjaCgpIHtcbiAgICBpZiAoIXRoaXMuYXR0YWNoZWQpIHJldHVybiB0aGlzO1xuICAgIGlmICh0aGlzLnJlbmRlcmVyKSB0aGlzLnJlbmRlcmVyLmRldGFjaCgpO1xuICAgIHRoaXMuYXR0YWNoZWQgPSBmYWxzZTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogQWRkIGEgcnVsZSB0byB0aGUgY3VycmVudCBzdHlsZXNoZWV0LlxuICAgKiBXaWxsIGluc2VydCBhIHJ1bGUgYWxzbyBhZnRlciB0aGUgc3R5bGVzaGVldCBoYXMgYmVlbiByZW5kZXJlZCBmaXJzdCB0aW1lLlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5hZGRSdWxlID0gZnVuY3Rpb24gYWRkUnVsZShuYW1lLCBkZWNsLCBvcHRpb25zKSB7XG4gICAgdmFyIHF1ZXVlID0gdGhpcy5xdWV1ZTsgLy8gUGx1Z2lucyBjYW4gY3JlYXRlIHJ1bGVzLlxuICAgIC8vIEluIG9yZGVyIHRvIHByZXNlcnZlIHRoZSByaWdodCBvcmRlciwgd2UgbmVlZCB0byBxdWV1ZSBhbGwgYC5hZGRSdWxlYCBjYWxscyxcbiAgICAvLyB3aGljaCBoYXBwZW4gYWZ0ZXIgdGhlIGZpcnN0IGBydWxlcy5hZGQoKWAgY2FsbC5cblxuICAgIGlmICh0aGlzLmF0dGFjaGVkICYmICFxdWV1ZSkgdGhpcy5xdWV1ZSA9IFtdO1xuICAgIHZhciBydWxlID0gdGhpcy5ydWxlcy5hZGQobmFtZSwgZGVjbCwgb3B0aW9ucyk7XG4gICAgaWYgKCFydWxlKSByZXR1cm4gbnVsbDtcbiAgICB0aGlzLm9wdGlvbnMuanNzLnBsdWdpbnMub25Qcm9jZXNzUnVsZShydWxlKTtcblxuICAgIGlmICh0aGlzLmF0dGFjaGVkKSB7XG4gICAgICBpZiAoIXRoaXMuZGVwbG95ZWQpIHJldHVybiBydWxlOyAvLyBEb24ndCBpbnNlcnQgcnVsZSBkaXJlY3RseSBpZiB0aGVyZSBpcyBubyBzdHJpbmdpZmllZCB2ZXJzaW9uIHlldC5cbiAgICAgIC8vIEl0IHdpbGwgYmUgaW5zZXJ0ZWQgYWxsIHRvZ2V0aGVyIHdoZW4gLmF0dGFjaCBpcyBjYWxsZWQuXG5cbiAgICAgIGlmIChxdWV1ZSkgcXVldWUucHVzaChydWxlKTtlbHNlIHtcbiAgICAgICAgdGhpcy5pbnNlcnRSdWxlKHJ1bGUpO1xuXG4gICAgICAgIGlmICh0aGlzLnF1ZXVlKSB7XG4gICAgICAgICAgdGhpcy5xdWV1ZS5mb3JFYWNoKHRoaXMuaW5zZXJ0UnVsZSwgdGhpcyk7XG4gICAgICAgICAgdGhpcy5xdWV1ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHJ1bGU7XG4gICAgfSAvLyBXZSBjYW4ndCBhZGQgcnVsZXMgdG8gYSBkZXRhY2hlZCBzdHlsZSBub2RlLlxuICAgIC8vIFdlIHdpbGwgcmVkZXBsb3kgdGhlIHNoZWV0IG9uY2UgdXNlciB3aWxsIGF0dGFjaCBpdC5cblxuXG4gICAgdGhpcy5kZXBsb3llZCA9IGZhbHNlO1xuICAgIHJldHVybiBydWxlO1xuICB9XG4gIC8qKlxuICAgKiBSZXBsYWNlIGEgcnVsZSBpbiB0aGUgY3VycmVudCBzdHlsZXNoZWV0LlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5yZXBsYWNlUnVsZSA9IGZ1bmN0aW9uIHJlcGxhY2VSdWxlKG5hbWVPclNlbGVjdG9yLCBkZWNsLCBvcHRpb25zKSB7XG4gICAgdmFyIG9sZFJ1bGUgPSB0aGlzLnJ1bGVzLmdldChuYW1lT3JTZWxlY3Rvcik7XG4gICAgaWYgKCFvbGRSdWxlKSByZXR1cm4gdGhpcy5hZGRSdWxlKG5hbWVPclNlbGVjdG9yLCBkZWNsLCBvcHRpb25zKTtcbiAgICB2YXIgbmV3UnVsZSA9IHRoaXMucnVsZXMucmVwbGFjZShuYW1lT3JTZWxlY3RvciwgZGVjbCwgb3B0aW9ucyk7XG5cbiAgICBpZiAobmV3UnVsZSkge1xuICAgICAgdGhpcy5vcHRpb25zLmpzcy5wbHVnaW5zLm9uUHJvY2Vzc1J1bGUobmV3UnVsZSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuYXR0YWNoZWQpIHtcbiAgICAgIGlmICghdGhpcy5kZXBsb3llZCkgcmV0dXJuIG5ld1J1bGU7IC8vIERvbid0IHJlcGxhY2UgLyBkZWxldGUgcnVsZSBkaXJlY3RseSBpZiB0aGVyZSBpcyBubyBzdHJpbmdpZmllZCB2ZXJzaW9uIHlldC5cbiAgICAgIC8vIEl0IHdpbGwgYmUgaW5zZXJ0ZWQgYWxsIHRvZ2V0aGVyIHdoZW4gLmF0dGFjaCBpcyBjYWxsZWQuXG5cbiAgICAgIGlmICh0aGlzLnJlbmRlcmVyKSB7XG4gICAgICAgIGlmICghbmV3UnVsZSkge1xuICAgICAgICAgIHRoaXMucmVuZGVyZXIuZGVsZXRlUnVsZShvbGRSdWxlKTtcbiAgICAgICAgfSBlbHNlIGlmIChvbGRSdWxlLnJlbmRlcmFibGUpIHtcbiAgICAgICAgICB0aGlzLnJlbmRlcmVyLnJlcGxhY2VSdWxlKG9sZFJ1bGUucmVuZGVyYWJsZSwgbmV3UnVsZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG5ld1J1bGU7XG4gICAgfSAvLyBXZSBjYW4ndCByZXBsYWNlIHJ1bGVzIHRvIGEgZGV0YWNoZWQgc3R5bGUgbm9kZS5cbiAgICAvLyBXZSB3aWxsIHJlZGVwbG95IHRoZSBzaGVldCBvbmNlIHVzZXIgd2lsbCBhdHRhY2ggaXQuXG5cblxuICAgIHRoaXMuZGVwbG95ZWQgPSBmYWxzZTtcbiAgICByZXR1cm4gbmV3UnVsZTtcbiAgfVxuICAvKipcbiAgICogSW5zZXJ0IHJ1bGUgaW50byB0aGUgU3R5bGVTaGVldFxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5pbnNlcnRSdWxlID0gZnVuY3Rpb24gaW5zZXJ0UnVsZShydWxlKSB7XG4gICAgaWYgKHRoaXMucmVuZGVyZXIpIHtcbiAgICAgIHRoaXMucmVuZGVyZXIuaW5zZXJ0UnVsZShydWxlKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSBhbmQgYWRkIHJ1bGVzLlxuICAgKiBXaWxsIHJlbmRlciBhbHNvIGFmdGVyIFN0eWxlIFNoZWV0IHdhcyByZW5kZXJlZCB0aGUgZmlyc3QgdGltZS5cbiAgICovXG4gIDtcblxuICBfcHJvdG8uYWRkUnVsZXMgPSBmdW5jdGlvbiBhZGRSdWxlcyhzdHlsZXMsIG9wdGlvbnMpIHtcbiAgICB2YXIgYWRkZWQgPSBbXTtcblxuICAgIGZvciAodmFyIG5hbWUgaW4gc3R5bGVzKSB7XG4gICAgICB2YXIgcnVsZSA9IHRoaXMuYWRkUnVsZShuYW1lLCBzdHlsZXNbbmFtZV0sIG9wdGlvbnMpO1xuICAgICAgaWYgKHJ1bGUpIGFkZGVkLnB1c2gocnVsZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGFkZGVkO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgYSBydWxlIGJ5IG5hbWUgb3Igc2VsZWN0b3IuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmdldFJ1bGUgPSBmdW5jdGlvbiBnZXRSdWxlKG5hbWVPclNlbGVjdG9yKSB7XG4gICAgcmV0dXJuIHRoaXMucnVsZXMuZ2V0KG5hbWVPclNlbGVjdG9yKTtcbiAgfVxuICAvKipcbiAgICogRGVsZXRlIGEgcnVsZSBieSBuYW1lLlxuICAgKiBSZXR1cm5zIGB0cnVlYDogaWYgcnVsZSBoYXMgYmVlbiBkZWxldGVkIGZyb20gdGhlIERPTS5cbiAgICovXG4gIDtcblxuICBfcHJvdG8uZGVsZXRlUnVsZSA9IGZ1bmN0aW9uIGRlbGV0ZVJ1bGUobmFtZSkge1xuICAgIHZhciBydWxlID0gdHlwZW9mIG5hbWUgPT09ICdvYmplY3QnID8gbmFtZSA6IHRoaXMucnVsZXMuZ2V0KG5hbWUpO1xuXG4gICAgaWYgKCFydWxlIHx8IC8vIFN0eWxlIHNoZWV0IHdhcyBjcmVhdGVkIHdpdGhvdXQgbGluazogdHJ1ZSBhbmQgYXR0YWNoZWQsIGluIHRoaXMgY2FzZSB3ZVxuICAgIC8vIHdvbid0IGJlIGFibGUgdG8gcmVtb3ZlIHRoZSBDU1MgcnVsZSBmcm9tIHRoZSBET00uXG4gICAgdGhpcy5hdHRhY2hlZCAmJiAhcnVsZS5yZW5kZXJhYmxlKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgdGhpcy5ydWxlcy5yZW1vdmUocnVsZSk7XG5cbiAgICBpZiAodGhpcy5hdHRhY2hlZCAmJiBydWxlLnJlbmRlcmFibGUgJiYgdGhpcy5yZW5kZXJlcikge1xuICAgICAgcmV0dXJuIHRoaXMucmVuZGVyZXIuZGVsZXRlUnVsZShydWxlLnJlbmRlcmFibGUpO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgaW5kZXggb2YgYSBydWxlLlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5pbmRleE9mID0gZnVuY3Rpb24gaW5kZXhPZihydWxlKSB7XG4gICAgcmV0dXJuIHRoaXMucnVsZXMuaW5kZXhPZihydWxlKTtcbiAgfVxuICAvKipcbiAgICogRGVwbG95IHB1cmUgQ1NTIHN0cmluZyB0byBhIHJlbmRlcmFibGUuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmRlcGxveSA9IGZ1bmN0aW9uIGRlcGxveSgpIHtcbiAgICBpZiAodGhpcy5yZW5kZXJlcikgdGhpcy5yZW5kZXJlci5kZXBsb3koKTtcbiAgICB0aGlzLmRlcGxveWVkID0gdHJ1ZTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogVXBkYXRlIHRoZSBmdW5jdGlvbiB2YWx1ZXMgd2l0aCBhIG5ldyBkYXRhLlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by51cGRhdGUgPSBmdW5jdGlvbiB1cGRhdGUoKSB7XG4gICAgdmFyIF90aGlzJHJ1bGVzO1xuXG4gICAgKF90aGlzJHJ1bGVzID0gdGhpcy5ydWxlcykudXBkYXRlLmFwcGx5KF90aGlzJHJ1bGVzLCBhcmd1bWVudHMpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIFVwZGF0ZXMgYSBzaW5nbGUgcnVsZS5cbiAgICovXG4gIDtcblxuICBfcHJvdG8udXBkYXRlT25lID0gZnVuY3Rpb24gdXBkYXRlT25lKHJ1bGUsIGRhdGEsIG9wdGlvbnMpIHtcbiAgICB0aGlzLnJ1bGVzLnVwZGF0ZU9uZShydWxlLCBkYXRhLCBvcHRpb25zKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogQ29udmVydCBydWxlcyB0byBhIENTUyBzdHJpbmcuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcob3B0aW9ucykge1xuICAgIHJldHVybiB0aGlzLnJ1bGVzLnRvU3RyaW5nKG9wdGlvbnMpO1xuICB9O1xuXG4gIHJldHVybiBTdHlsZVNoZWV0O1xufSgpO1xuXG52YXIgUGx1Z2luc1JlZ2lzdHJ5ID1cbi8qI19fUFVSRV9fKi9cbmZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gUGx1Z2luc1JlZ2lzdHJ5KCkge1xuICAgIHRoaXMucGx1Z2lucyA9IHtcbiAgICAgIGludGVybmFsOiBbXSxcbiAgICAgIGV4dGVybmFsOiBbXVxuICAgIH07XG4gICAgdGhpcy5yZWdpc3RyeSA9IHt9O1xuICB9XG5cbiAgdmFyIF9wcm90byA9IFBsdWdpbnNSZWdpc3RyeS5wcm90b3R5cGU7XG5cbiAgLyoqXG4gICAqIENhbGwgYG9uQ3JlYXRlUnVsZWAgaG9va3MgYW5kIHJldHVybiBhbiBvYmplY3QgaWYgcmV0dXJuZWQgYnkgYSBob29rLlxuICAgKi9cbiAgX3Byb3RvLm9uQ3JlYXRlUnVsZSA9IGZ1bmN0aW9uIG9uQ3JlYXRlUnVsZShuYW1lLCBkZWNsLCBvcHRpb25zKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnJlZ2lzdHJ5Lm9uQ3JlYXRlUnVsZS5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHJ1bGUgPSB0aGlzLnJlZ2lzdHJ5Lm9uQ3JlYXRlUnVsZVtpXShuYW1lLCBkZWNsLCBvcHRpb25zKTtcbiAgICAgIGlmIChydWxlKSByZXR1cm4gcnVsZTtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICAvKipcbiAgICogQ2FsbCBgb25Qcm9jZXNzUnVsZWAgaG9va3MuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLm9uUHJvY2Vzc1J1bGUgPSBmdW5jdGlvbiBvblByb2Nlc3NSdWxlKHJ1bGUpIHtcbiAgICBpZiAocnVsZS5pc1Byb2Nlc3NlZCkgcmV0dXJuO1xuICAgIHZhciBzaGVldCA9IHJ1bGUub3B0aW9ucy5zaGVldDtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5yZWdpc3RyeS5vblByb2Nlc3NSdWxlLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLnJlZ2lzdHJ5Lm9uUHJvY2Vzc1J1bGVbaV0ocnVsZSwgc2hlZXQpO1xuICAgIH1cblxuICAgIGlmIChydWxlLnN0eWxlKSB0aGlzLm9uUHJvY2Vzc1N0eWxlKHJ1bGUuc3R5bGUsIHJ1bGUsIHNoZWV0KTtcbiAgICBydWxlLmlzUHJvY2Vzc2VkID0gdHJ1ZTtcbiAgfVxuICAvKipcbiAgICogQ2FsbCBgb25Qcm9jZXNzU3R5bGVgIGhvb2tzLlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5vblByb2Nlc3NTdHlsZSA9IGZ1bmN0aW9uIG9uUHJvY2Vzc1N0eWxlKHN0eWxlLCBydWxlLCBzaGVldCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5yZWdpc3RyeS5vblByb2Nlc3NTdHlsZS5sZW5ndGg7IGkrKykge1xuICAgICAgcnVsZS5zdHlsZSA9IHRoaXMucmVnaXN0cnkub25Qcm9jZXNzU3R5bGVbaV0ocnVsZS5zdHlsZSwgcnVsZSwgc2hlZXQpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQ2FsbCBgb25Qcm9jZXNzU2hlZXRgIGhvb2tzLlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5vblByb2Nlc3NTaGVldCA9IGZ1bmN0aW9uIG9uUHJvY2Vzc1NoZWV0KHNoZWV0KSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnJlZ2lzdHJ5Lm9uUHJvY2Vzc1NoZWV0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLnJlZ2lzdHJ5Lm9uUHJvY2Vzc1NoZWV0W2ldKHNoZWV0KTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIENhbGwgYG9uVXBkYXRlYCBob29rcy5cbiAgICovXG4gIDtcblxuICBfcHJvdG8ub25VcGRhdGUgPSBmdW5jdGlvbiBvblVwZGF0ZShkYXRhLCBydWxlLCBzaGVldCwgb3B0aW9ucykge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5yZWdpc3RyeS5vblVwZGF0ZS5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5yZWdpc3RyeS5vblVwZGF0ZVtpXShkYXRhLCBydWxlLCBzaGVldCwgb3B0aW9ucyk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBDYWxsIGBvbkNoYW5nZVZhbHVlYCBob29rcy5cbiAgICovXG4gIDtcblxuICBfcHJvdG8ub25DaGFuZ2VWYWx1ZSA9IGZ1bmN0aW9uIG9uQ2hhbmdlVmFsdWUodmFsdWUsIHByb3AsIHJ1bGUpIHtcbiAgICB2YXIgcHJvY2Vzc2VkVmFsdWUgPSB2YWx1ZTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5yZWdpc3RyeS5vbkNoYW5nZVZhbHVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICBwcm9jZXNzZWRWYWx1ZSA9IHRoaXMucmVnaXN0cnkub25DaGFuZ2VWYWx1ZVtpXShwcm9jZXNzZWRWYWx1ZSwgcHJvcCwgcnVsZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHByb2Nlc3NlZFZhbHVlO1xuICB9XG4gIC8qKlxuICAgKiBSZWdpc3RlciBhIHBsdWdpbi5cbiAgICovXG4gIDtcblxuICBfcHJvdG8udXNlID0gZnVuY3Rpb24gdXNlKG5ld1BsdWdpbiwgb3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHtcbiAgICAgIG9wdGlvbnMgPSB7XG4gICAgICAgIHF1ZXVlOiAnZXh0ZXJuYWwnXG4gICAgICB9O1xuICAgIH1cblxuICAgIHZhciBwbHVnaW5zID0gdGhpcy5wbHVnaW5zW29wdGlvbnMucXVldWVdOyAvLyBBdm9pZHMgYXBwbHlpbmcgc2FtZSBwbHVnaW4gdHdpY2UsIGF0IGxlYXN0IGJhc2VkIG9uIHJlZi5cblxuICAgIGlmIChwbHVnaW5zLmluZGV4T2YobmV3UGx1Z2luKSAhPT0gLTEpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBwbHVnaW5zLnB1c2gobmV3UGx1Z2luKTtcbiAgICB0aGlzLnJlZ2lzdHJ5ID0gW10uY29uY2F0KHRoaXMucGx1Z2lucy5leHRlcm5hbCwgdGhpcy5wbHVnaW5zLmludGVybmFsKS5yZWR1Y2UoZnVuY3Rpb24gKHJlZ2lzdHJ5LCBwbHVnaW4pIHtcbiAgICAgIGZvciAodmFyIG5hbWUgaW4gcGx1Z2luKSB7XG4gICAgICAgIGlmIChuYW1lIGluIHJlZ2lzdHJ5KSB7XG4gICAgICAgICAgcmVnaXN0cnlbbmFtZV0ucHVzaChwbHVnaW5bbmFtZV0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIiA/IHdhcm5pbmcoZmFsc2UsIFwiW0pTU10gVW5rbm93biBob29rIFxcXCJcIiArIG5hbWUgKyBcIlxcXCIuXCIpIDogdm9pZCAwO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZWdpc3RyeTtcbiAgICB9LCB7XG4gICAgICBvbkNyZWF0ZVJ1bGU6IFtdLFxuICAgICAgb25Qcm9jZXNzUnVsZTogW10sXG4gICAgICBvblByb2Nlc3NTdHlsZTogW10sXG4gICAgICBvblByb2Nlc3NTaGVldDogW10sXG4gICAgICBvbkNoYW5nZVZhbHVlOiBbXSxcbiAgICAgIG9uVXBkYXRlOiBbXVxuICAgIH0pO1xuICB9O1xuXG4gIHJldHVybiBQbHVnaW5zUmVnaXN0cnk7XG59KCk7XG5cbi8qKlxuICogU2hlZXRzIHJlZ2lzdHJ5IHRvIGFjY2VzcyBhbGwgaW5zdGFuY2VzIGluIG9uZSBwbGFjZS5cbiAqL1xuXG52YXIgU2hlZXRzUmVnaXN0cnkgPVxuLyojX19QVVJFX18qL1xuZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBTaGVldHNSZWdpc3RyeSgpIHtcbiAgICB0aGlzLnJlZ2lzdHJ5ID0gW107XG4gIH1cblxuICB2YXIgX3Byb3RvID0gU2hlZXRzUmVnaXN0cnkucHJvdG90eXBlO1xuXG4gIC8qKlxuICAgKiBSZWdpc3RlciBhIFN0eWxlIFNoZWV0LlxuICAgKi9cbiAgX3Byb3RvLmFkZCA9IGZ1bmN0aW9uIGFkZChzaGVldCkge1xuICAgIHZhciByZWdpc3RyeSA9IHRoaXMucmVnaXN0cnk7XG4gICAgdmFyIGluZGV4ID0gc2hlZXQub3B0aW9ucy5pbmRleDtcbiAgICBpZiAocmVnaXN0cnkuaW5kZXhPZihzaGVldCkgIT09IC0xKSByZXR1cm47XG5cbiAgICBpZiAocmVnaXN0cnkubGVuZ3RoID09PSAwIHx8IGluZGV4ID49IHRoaXMuaW5kZXgpIHtcbiAgICAgIHJlZ2lzdHJ5LnB1c2goc2hlZXQpO1xuICAgICAgcmV0dXJuO1xuICAgIH0gLy8gRmluZCBhIHBvc2l0aW9uLlxuXG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlZ2lzdHJ5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAocmVnaXN0cnlbaV0ub3B0aW9ucy5pbmRleCA+IGluZGV4KSB7XG4gICAgICAgIHJlZ2lzdHJ5LnNwbGljZShpLCAwLCBzaGVldCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFJlc2V0IHRoZSByZWdpc3RyeS5cbiAgICovXG4gIDtcblxuICBfcHJvdG8ucmVzZXQgPSBmdW5jdGlvbiByZXNldCgpIHtcbiAgICB0aGlzLnJlZ2lzdHJ5ID0gW107XG4gIH1cbiAgLyoqXG4gICAqIFJlbW92ZSBhIFN0eWxlIFNoZWV0LlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5yZW1vdmUgPSBmdW5jdGlvbiByZW1vdmUoc2hlZXQpIHtcbiAgICB2YXIgaW5kZXggPSB0aGlzLnJlZ2lzdHJ5LmluZGV4T2Yoc2hlZXQpO1xuICAgIHRoaXMucmVnaXN0cnkuc3BsaWNlKGluZGV4LCAxKTtcbiAgfVxuICAvKipcbiAgICogQ29udmVydCBhbGwgYXR0YWNoZWQgc2hlZXRzIHRvIGEgQ1NTIHN0cmluZy5cbiAgICovXG4gIDtcblxuICBfcHJvdG8udG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZyhfdGVtcCkge1xuICAgIHZhciBfcmVmID0gX3RlbXAgPT09IHZvaWQgMCA/IHt9IDogX3RlbXAsXG4gICAgICAgIGF0dGFjaGVkID0gX3JlZi5hdHRhY2hlZCxcbiAgICAgICAgb3B0aW9ucyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKF9yZWYsIFtcImF0dGFjaGVkXCJdKTtcblxuICAgIHZhciBfZ2V0V2hpdGVzcGFjZVN5bWJvbHMgPSBnZXRXaGl0ZXNwYWNlU3ltYm9scyhvcHRpb25zKSxcbiAgICAgICAgbGluZWJyZWFrID0gX2dldFdoaXRlc3BhY2VTeW1ib2xzLmxpbmVicmVhaztcblxuICAgIHZhciBjc3MgPSAnJztcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5yZWdpc3RyeS5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHNoZWV0ID0gdGhpcy5yZWdpc3RyeVtpXTtcblxuICAgICAgaWYgKGF0dGFjaGVkICE9IG51bGwgJiYgc2hlZXQuYXR0YWNoZWQgIT09IGF0dGFjaGVkKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAoY3NzKSBjc3MgKz0gbGluZWJyZWFrO1xuICAgICAgY3NzICs9IHNoZWV0LnRvU3RyaW5nKG9wdGlvbnMpO1xuICAgIH1cblxuICAgIHJldHVybiBjc3M7XG4gIH07XG5cbiAgX2NyZWF0ZUNsYXNzKFNoZWV0c1JlZ2lzdHJ5LCBbe1xuICAgIGtleTogXCJpbmRleFwiLFxuXG4gICAgLyoqXG4gICAgICogQ3VycmVudCBoaWdoZXN0IGluZGV4IG51bWJlci5cbiAgICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLnJlZ2lzdHJ5Lmxlbmd0aCA9PT0gMCA/IDAgOiB0aGlzLnJlZ2lzdHJ5W3RoaXMucmVnaXN0cnkubGVuZ3RoIC0gMV0ub3B0aW9ucy5pbmRleDtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gU2hlZXRzUmVnaXN0cnk7XG59KCk7XG5cbi8qKlxuICogVGhpcyBpcyBhIGdsb2JhbCBzaGVldHMgcmVnaXN0cnkuIE9ubHkgRG9tUmVuZGVyZXIgd2lsbCBhZGQgc2hlZXRzIHRvIGl0LlxuICogT24gdGhlIHNlcnZlciBvbmUgc2hvdWxkIHVzZSBhbiBvd24gU2hlZXRzUmVnaXN0cnkgaW5zdGFuY2UgYW5kIGFkZCB0aGVcbiAqIHNoZWV0cyB0byBpdCwgYmVjYXVzZSB5b3UgbmVlZCB0byBtYWtlIHN1cmUgdG8gY3JlYXRlIGEgbmV3IHJlZ2lzdHJ5IGZvclxuICogZWFjaCByZXF1ZXN0IGluIG9yZGVyIHRvIG5vdCBsZWFrIHNoZWV0cyBhY3Jvc3MgcmVxdWVzdHMuXG4gKi9cblxudmFyIHNoZWV0cyA9IG5ldyBTaGVldHNSZWdpc3RyeSgpO1xuXG4vKiBlc2xpbnQtZGlzYWJsZSAqL1xuXG4vKipcbiAqIE5vdyB0aGF0IGBnbG9iYWxUaGlzYCBpcyBhdmFpbGFibGUgb24gbW9zdCBwbGF0Zm9ybXNcbiAqIChodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9nbG9iYWxUaGlzI2Jyb3dzZXJfY29tcGF0aWJpbGl0eSlcbiAqIHdlIGNoZWNrIGZvciBgZ2xvYmFsVGhpc2AgZmlyc3QuIGBnbG9iYWxUaGlzYCBpcyBuZWNlc3NhcnkgZm9yIGpzc1xuICogdG8gcnVuIGluIEFnb3JpYydzIHNlY3VyZSB2ZXJzaW9uIG9mIEphdmFTY3JpcHQgKFNFUykuIFVuZGVyIFNFUyxcbiAqIGBnbG9iYWxUaGlzYCBleGlzdHMsIGJ1dCBgd2luZG93YCwgYHNlbGZgLCBhbmQgYEZ1bmN0aW9uKCdyZXR1cm5cbiAqIHRoaXMnKSgpYCBhcmUgYWxsIHVuZGVmaW5lZCBmb3Igc2VjdXJpdHkgcmVhc29ucy5cbiAqXG4gKiBodHRwczovL2dpdGh1Yi5jb20vemxvaXJvY2svY29yZS1qcy9pc3N1ZXMvODYjaXNzdWVjb21tZW50LTExNTc1OTAyOFxuICovXG52YXIgZ2xvYmFsVGhpcyQxID0gdHlwZW9mIGdsb2JhbFRoaXMgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsVGhpcyA6IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5NYXRoID09PSBNYXRoID8gd2luZG93IDogdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnICYmIHNlbGYuTWF0aCA9PT0gTWF0aCA/IHNlbGYgOiBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXG52YXIgbnMgPSAnMmYxYWNjNmMzYTYwNmIwODJlNWVlZjVlNTQ0MTRmZmInO1xuaWYgKGdsb2JhbFRoaXMkMVtuc10gPT0gbnVsbCkgZ2xvYmFsVGhpcyQxW25zXSA9IDA7IC8vIEJ1bmRsZSBtYXkgY29udGFpbiBtdWx0aXBsZSBKU1MgdmVyc2lvbnMgYXQgdGhlIHNhbWUgdGltZS4gSW4gb3JkZXIgdG8gaWRlbnRpZnlcbi8vIHRoZSBjdXJyZW50IHZlcnNpb24gd2l0aCBqdXN0IG9uZSBzaG9ydCBudW1iZXIgYW5kIHVzZSBpdCBmb3IgY2xhc3NlcyBnZW5lcmF0aW9uXG4vLyB3ZSB1c2UgYSBjb3VudGVyLiBBbHNvIGl0IGlzIG1vcmUgYWNjdXJhdGUsIGJlY2F1c2UgdXNlciBjYW4gbWFudWFsbHkgcmVldmFsdWF0ZVxuLy8gdGhlIG1vZHVsZS5cblxudmFyIG1vZHVsZUlkID0gZ2xvYmFsVGhpcyQxW25zXSsrO1xuXG52YXIgbWF4UnVsZXMgPSAxZTEwO1xuLyoqXG4gKiBSZXR1cm5zIGEgZnVuY3Rpb24gd2hpY2ggZ2VuZXJhdGVzIHVuaXF1ZSBjbGFzcyBuYW1lcyBiYXNlZCBvbiBjb3VudGVycy5cbiAqIFdoZW4gbmV3IGdlbmVyYXRvciBmdW5jdGlvbiBpcyBjcmVhdGVkLCBydWxlIGNvdW50ZXIgaXMgcmVzZXRlZC5cbiAqIFdlIG5lZWQgdG8gcmVzZXQgdGhlIHJ1bGUgY291bnRlciBmb3IgU1NSIGZvciBlYWNoIHJlcXVlc3QuXG4gKi9cblxudmFyIGNyZWF0ZUdlbmVyYXRlSWQgPSBmdW5jdGlvbiBjcmVhdGVHZW5lcmF0ZUlkKG9wdGlvbnMpIHtcbiAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkge1xuICAgIG9wdGlvbnMgPSB7fTtcbiAgfVxuXG4gIHZhciBydWxlQ291bnRlciA9IDA7XG5cbiAgdmFyIGdlbmVyYXRlSWQgPSBmdW5jdGlvbiBnZW5lcmF0ZUlkKHJ1bGUsIHNoZWV0KSB7XG4gICAgcnVsZUNvdW50ZXIgKz0gMTtcblxuICAgIGlmIChydWxlQ291bnRlciA+IG1heFJ1bGVzKSB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIgPyB3YXJuaW5nKGZhbHNlLCBcIltKU1NdIFlvdSBtaWdodCBoYXZlIGEgbWVtb3J5IGxlYWsuIFJ1bGUgY291bnRlciBpcyBhdCBcIiArIHJ1bGVDb3VudGVyICsgXCIuXCIpIDogdm9pZCAwO1xuICAgIH1cblxuICAgIHZhciBqc3NJZCA9ICcnO1xuICAgIHZhciBwcmVmaXggPSAnJztcblxuICAgIGlmIChzaGVldCkge1xuICAgICAgaWYgKHNoZWV0Lm9wdGlvbnMuY2xhc3NOYW1lUHJlZml4KSB7XG4gICAgICAgIHByZWZpeCA9IHNoZWV0Lm9wdGlvbnMuY2xhc3NOYW1lUHJlZml4O1xuICAgICAgfVxuXG4gICAgICBpZiAoc2hlZXQub3B0aW9ucy5qc3MuaWQgIT0gbnVsbCkge1xuICAgICAgICBqc3NJZCA9IFN0cmluZyhzaGVldC5vcHRpb25zLmpzcy5pZCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMubWluaWZ5KSB7XG4gICAgICAvLyBVc2luZyBcImNcIiBiZWNhdXNlIGEgbnVtYmVyIGNhbid0IGJlIHRoZSBmaXJzdCBjaGFyIGluIGEgY2xhc3MgbmFtZS5cbiAgICAgIHJldHVybiBcIlwiICsgKHByZWZpeCB8fCAnYycpICsgbW9kdWxlSWQgKyBqc3NJZCArIHJ1bGVDb3VudGVyO1xuICAgIH1cblxuICAgIHJldHVybiBwcmVmaXggKyBydWxlLmtleSArIFwiLVwiICsgbW9kdWxlSWQgKyAoanNzSWQgPyBcIi1cIiArIGpzc0lkIDogJycpICsgXCItXCIgKyBydWxlQ291bnRlcjtcbiAgfTtcblxuICByZXR1cm4gZ2VuZXJhdGVJZDtcbn07XG5cbi8qKlxuICogQ2FjaGUgdGhlIHZhbHVlIGZyb20gdGhlIGZpcnN0IHRpbWUgYSBmdW5jdGlvbiBpcyBjYWxsZWQuXG4gKi9cblxudmFyIG1lbW9pemUgPSBmdW5jdGlvbiBtZW1vaXplKGZuKSB7XG4gIHZhciB2YWx1ZTtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIXZhbHVlKSB2YWx1ZSA9IGZuKCk7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9O1xufTtcbi8qKlxuICogR2V0IGEgc3R5bGUgcHJvcGVydHkgdmFsdWUuXG4gKi9cblxuXG52YXIgZ2V0UHJvcGVydHlWYWx1ZSA9IGZ1bmN0aW9uIGdldFByb3BlcnR5VmFsdWUoY3NzUnVsZSwgcHJvcCkge1xuICB0cnkge1xuICAgIC8vIFN1cHBvcnQgQ1NTVE9NLlxuICAgIGlmIChjc3NSdWxlLmF0dHJpYnV0ZVN0eWxlTWFwKSB7XG4gICAgICByZXR1cm4gY3NzUnVsZS5hdHRyaWJ1dGVTdHlsZU1hcC5nZXQocHJvcCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNzc1J1bGUuc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZShwcm9wKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgLy8gSUUgbWF5IHRocm93IGlmIHByb3BlcnR5IGlzIHVua25vd24uXG4gICAgcmV0dXJuICcnO1xuICB9XG59O1xuLyoqXG4gKiBTZXQgYSBzdHlsZSBwcm9wZXJ0eS5cbiAqL1xuXG5cbnZhciBzZXRQcm9wZXJ0eSA9IGZ1bmN0aW9uIHNldFByb3BlcnR5KGNzc1J1bGUsIHByb3AsIHZhbHVlKSB7XG4gIHRyeSB7XG4gICAgdmFyIGNzc1ZhbHVlID0gdmFsdWU7XG5cbiAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgIGNzc1ZhbHVlID0gdG9Dc3NWYWx1ZSh2YWx1ZSk7XG4gICAgfSAvLyBTdXBwb3J0IENTU1RPTS5cblxuXG4gICAgaWYgKGNzc1J1bGUuYXR0cmlidXRlU3R5bGVNYXApIHtcbiAgICAgIGNzc1J1bGUuYXR0cmlidXRlU3R5bGVNYXAuc2V0KHByb3AsIGNzc1ZhbHVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGluZGV4T2ZJbXBvcnRhbnRGbGFnID0gY3NzVmFsdWUgPyBjc3NWYWx1ZS5pbmRleE9mKCchaW1wb3J0YW50JykgOiAtMTtcbiAgICAgIHZhciBjc3NWYWx1ZVdpdGhvdXRJbXBvcnRhbnRGbGFnID0gaW5kZXhPZkltcG9ydGFudEZsYWcgPiAtMSA/IGNzc1ZhbHVlLnN1YnN0cigwLCBpbmRleE9mSW1wb3J0YW50RmxhZyAtIDEpIDogY3NzVmFsdWU7XG4gICAgICBjc3NSdWxlLnN0eWxlLnNldFByb3BlcnR5KHByb3AsIGNzc1ZhbHVlV2l0aG91dEltcG9ydGFudEZsYWcsIGluZGV4T2ZJbXBvcnRhbnRGbGFnID4gLTEgPyAnaW1wb3J0YW50JyA6ICcnKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIC8vIElFIG1heSB0aHJvdyBpZiBwcm9wZXJ0eSBpcyB1bmtub3duLlxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufTtcbi8qKlxuICogUmVtb3ZlIGEgc3R5bGUgcHJvcGVydHkuXG4gKi9cblxuXG52YXIgcmVtb3ZlUHJvcGVydHkgPSBmdW5jdGlvbiByZW1vdmVQcm9wZXJ0eShjc3NSdWxlLCBwcm9wKSB7XG4gIHRyeSB7XG4gICAgLy8gU3VwcG9ydCBDU1NUT00uXG4gICAgaWYgKGNzc1J1bGUuYXR0cmlidXRlU3R5bGVNYXApIHtcbiAgICAgIGNzc1J1bGUuYXR0cmlidXRlU3R5bGVNYXAuZGVsZXRlKHByb3ApO1xuICAgIH0gZWxzZSB7XG4gICAgICBjc3NSdWxlLnN0eWxlLnJlbW92ZVByb3BlcnR5KHByb3ApO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiID8gd2FybmluZyhmYWxzZSwgXCJbSlNTXSBET01FeGNlcHRpb24gXFxcIlwiICsgZXJyLm1lc3NhZ2UgKyBcIlxcXCIgd2FzIHRocm93bi4gVHJpZWQgdG8gcmVtb3ZlIHByb3BlcnR5IFxcXCJcIiArIHByb3AgKyBcIlxcXCIuXCIpIDogdm9pZCAwO1xuICB9XG59O1xuLyoqXG4gKiBTZXQgdGhlIHNlbGVjdG9yLlxuICovXG5cblxudmFyIHNldFNlbGVjdG9yID0gZnVuY3Rpb24gc2V0U2VsZWN0b3IoY3NzUnVsZSwgc2VsZWN0b3JUZXh0KSB7XG4gIGNzc1J1bGUuc2VsZWN0b3JUZXh0ID0gc2VsZWN0b3JUZXh0OyAvLyBSZXR1cm4gZmFsc2UgaWYgc2V0dGVyIHdhcyBub3Qgc3VjY2Vzc2Z1bC5cbiAgLy8gQ3VycmVudGx5IHdvcmtzIGluIGNocm9tZSBvbmx5LlxuXG4gIHJldHVybiBjc3NSdWxlLnNlbGVjdG9yVGV4dCA9PT0gc2VsZWN0b3JUZXh0O1xufTtcbi8qKlxuICogR2V0cyB0aGUgYGhlYWRgIGVsZW1lbnQgdXBvbiB0aGUgZmlyc3QgY2FsbCBhbmQgY2FjaGVzIGl0LlxuICogV2UgYXNzdW1lIGl0IGNhbid0IGJlIG51bGwuXG4gKi9cblxuXG52YXIgZ2V0SGVhZCA9IG1lbW9pemUoZnVuY3Rpb24gKCkge1xuICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaGVhZCcpO1xufSk7XG4vKipcbiAqIEZpbmQgYXR0YWNoZWQgc2hlZXQgd2l0aCBhbiBpbmRleCBoaWdoZXIgdGhhbiB0aGUgcGFzc2VkIG9uZS5cbiAqL1xuXG5mdW5jdGlvbiBmaW5kSGlnaGVyU2hlZXQocmVnaXN0cnksIG9wdGlvbnMpIHtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCByZWdpc3RyeS5sZW5ndGg7IGkrKykge1xuICAgIHZhciBzaGVldCA9IHJlZ2lzdHJ5W2ldO1xuXG4gICAgaWYgKHNoZWV0LmF0dGFjaGVkICYmIHNoZWV0Lm9wdGlvbnMuaW5kZXggPiBvcHRpb25zLmluZGV4ICYmIHNoZWV0Lm9wdGlvbnMuaW5zZXJ0aW9uUG9pbnQgPT09IG9wdGlvbnMuaW5zZXJ0aW9uUG9pbnQpIHtcbiAgICAgIHJldHVybiBzaGVldDtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn1cbi8qKlxuICogRmluZCBhdHRhY2hlZCBzaGVldCB3aXRoIHRoZSBoaWdoZXN0IGluZGV4LlxuICovXG5cblxuZnVuY3Rpb24gZmluZEhpZ2hlc3RTaGVldChyZWdpc3RyeSwgb3B0aW9ucykge1xuICBmb3IgKHZhciBpID0gcmVnaXN0cnkubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICB2YXIgc2hlZXQgPSByZWdpc3RyeVtpXTtcblxuICAgIGlmIChzaGVldC5hdHRhY2hlZCAmJiBzaGVldC5vcHRpb25zLmluc2VydGlvblBvaW50ID09PSBvcHRpb25zLmluc2VydGlvblBvaW50KSB7XG4gICAgICByZXR1cm4gc2hlZXQ7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59XG4vKipcbiAqIEZpbmQgYSBjb21tZW50IHdpdGggXCJqc3NcIiBpbnNpZGUuXG4gKi9cblxuXG5mdW5jdGlvbiBmaW5kQ29tbWVudE5vZGUodGV4dCkge1xuICB2YXIgaGVhZCA9IGdldEhlYWQoKTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGhlYWQuY2hpbGROb2Rlcy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBub2RlID0gaGVhZC5jaGlsZE5vZGVzW2ldO1xuXG4gICAgaWYgKG5vZGUubm9kZVR5cGUgPT09IDggJiYgbm9kZS5ub2RlVmFsdWUudHJpbSgpID09PSB0ZXh0KSB7XG4gICAgICByZXR1cm4gbm9kZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn1cbi8qKlxuICogRmluZCBhIG5vZGUgYmVmb3JlIHdoaWNoIHdlIGNhbiBpbnNlcnQgdGhlIHNoZWV0LlxuICovXG5cblxuZnVuY3Rpb24gZmluZFByZXZOb2RlKG9wdGlvbnMpIHtcbiAgdmFyIHJlZ2lzdHJ5ID0gc2hlZXRzLnJlZ2lzdHJ5O1xuXG4gIGlmIChyZWdpc3RyeS5sZW5ndGggPiAwKSB7XG4gICAgLy8gVHJ5IHRvIGluc2VydCBiZWZvcmUgdGhlIG5leHQgaGlnaGVyIHNoZWV0LlxuICAgIHZhciBzaGVldCA9IGZpbmRIaWdoZXJTaGVldChyZWdpc3RyeSwgb3B0aW9ucyk7XG5cbiAgICBpZiAoc2hlZXQgJiYgc2hlZXQucmVuZGVyZXIpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHBhcmVudDogc2hlZXQucmVuZGVyZXIuZWxlbWVudC5wYXJlbnROb2RlLFxuICAgICAgICBub2RlOiBzaGVldC5yZW5kZXJlci5lbGVtZW50XG4gICAgICB9O1xuICAgIH0gLy8gT3RoZXJ3aXNlIGluc2VydCBhZnRlciB0aGUgbGFzdCBhdHRhY2hlZC5cblxuXG4gICAgc2hlZXQgPSBmaW5kSGlnaGVzdFNoZWV0KHJlZ2lzdHJ5LCBvcHRpb25zKTtcblxuICAgIGlmIChzaGVldCAmJiBzaGVldC5yZW5kZXJlcikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcGFyZW50OiBzaGVldC5yZW5kZXJlci5lbGVtZW50LnBhcmVudE5vZGUsXG4gICAgICAgIG5vZGU6IHNoZWV0LnJlbmRlcmVyLmVsZW1lbnQubmV4dFNpYmxpbmdcbiAgICAgIH07XG4gICAgfVxuICB9IC8vIFRyeSB0byBmaW5kIGEgY29tbWVudCBwbGFjZWhvbGRlciBpZiByZWdpc3RyeSBpcyBlbXB0eS5cblxuXG4gIHZhciBpbnNlcnRpb25Qb2ludCA9IG9wdGlvbnMuaW5zZXJ0aW9uUG9pbnQ7XG5cbiAgaWYgKGluc2VydGlvblBvaW50ICYmIHR5cGVvZiBpbnNlcnRpb25Qb2ludCA9PT0gJ3N0cmluZycpIHtcbiAgICB2YXIgY29tbWVudCA9IGZpbmRDb21tZW50Tm9kZShpbnNlcnRpb25Qb2ludCk7XG5cbiAgICBpZiAoY29tbWVudCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcGFyZW50OiBjb21tZW50LnBhcmVudE5vZGUsXG4gICAgICAgIG5vZGU6IGNvbW1lbnQubmV4dFNpYmxpbmdcbiAgICAgIH07XG4gICAgfSAvLyBJZiB1c2VyIHNwZWNpZmllcyBhbiBpbnNlcnRpb24gcG9pbnQgYW5kIGl0IGNhbid0IGJlIGZvdW5kIGluIHRoZSBkb2N1bWVudCAtXG4gICAgLy8gYmFkIHNwZWNpZmljaXR5IGlzc3VlcyBtYXkgYXBwZWFyLlxuXG5cbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIgPyB3YXJuaW5nKGZhbHNlLCBcIltKU1NdIEluc2VydGlvbiBwb2ludCBcXFwiXCIgKyBpbnNlcnRpb25Qb2ludCArIFwiXFxcIiBub3QgZm91bmQuXCIpIDogdm9pZCAwO1xuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufVxuLyoqXG4gKiBJbnNlcnQgc3R5bGUgZWxlbWVudCBpbnRvIHRoZSBET00uXG4gKi9cblxuXG5mdW5jdGlvbiBpbnNlcnRTdHlsZShzdHlsZSwgb3B0aW9ucykge1xuICB2YXIgaW5zZXJ0aW9uUG9pbnQgPSBvcHRpb25zLmluc2VydGlvblBvaW50O1xuICB2YXIgbmV4dE5vZGUgPSBmaW5kUHJldk5vZGUob3B0aW9ucyk7XG5cbiAgaWYgKG5leHROb2RlICE9PSBmYWxzZSAmJiBuZXh0Tm9kZS5wYXJlbnQpIHtcbiAgICBuZXh0Tm9kZS5wYXJlbnQuaW5zZXJ0QmVmb3JlKHN0eWxlLCBuZXh0Tm9kZS5ub2RlKTtcbiAgICByZXR1cm47XG4gIH0gLy8gV29ya3Mgd2l0aCBpZnJhbWVzIGFuZCBhbnkgbm9kZSB0eXBlcy5cblxuXG4gIGlmIChpbnNlcnRpb25Qb2ludCAmJiB0eXBlb2YgaW5zZXJ0aW9uUG9pbnQubm9kZVR5cGUgPT09ICdudW1iZXInKSB7XG4gICAgdmFyIGluc2VydGlvblBvaW50RWxlbWVudCA9IGluc2VydGlvblBvaW50O1xuICAgIHZhciBwYXJlbnROb2RlID0gaW5zZXJ0aW9uUG9pbnRFbGVtZW50LnBhcmVudE5vZGU7XG4gICAgaWYgKHBhcmVudE5vZGUpIHBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHN0eWxlLCBpbnNlcnRpb25Qb2ludEVsZW1lbnQubmV4dFNpYmxpbmcpO2Vsc2UgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiID8gd2FybmluZyhmYWxzZSwgJ1tKU1NdIEluc2VydGlvbiBwb2ludCBpcyBub3QgaW4gdGhlIERPTS4nKSA6IHZvaWQgMDtcbiAgICByZXR1cm47XG4gIH1cblxuICBnZXRIZWFkKCkuYXBwZW5kQ2hpbGQoc3R5bGUpO1xufVxuLyoqXG4gKiBSZWFkIGpzcyBub25jZSBzZXR0aW5nIGZyb20gdGhlIHBhZ2UgaWYgdGhlIHVzZXIgaGFzIHNldCBpdC5cbiAqL1xuXG5cbnZhciBnZXROb25jZSA9IG1lbW9pemUoZnVuY3Rpb24gKCkge1xuICB2YXIgbm9kZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ21ldGFbcHJvcGVydHk9XCJjc3Atbm9uY2VcIl0nKTtcbiAgcmV0dXJuIG5vZGUgPyBub2RlLmdldEF0dHJpYnV0ZSgnY29udGVudCcpIDogbnVsbDtcbn0pO1xuXG52YXIgX2luc2VydFJ1bGUgPSBmdW5jdGlvbiBpbnNlcnRSdWxlKGNvbnRhaW5lciwgcnVsZSwgaW5kZXgpIHtcbiAgdHJ5IHtcbiAgICBpZiAoJ2luc2VydFJ1bGUnIGluIGNvbnRhaW5lcikge1xuICAgICAgY29udGFpbmVyLmluc2VydFJ1bGUocnVsZSwgaW5kZXgpO1xuICAgIH0gLy8gS2V5ZnJhbWVzIHJ1bGUuXG4gICAgZWxzZSBpZiAoJ2FwcGVuZFJ1bGUnIGluIGNvbnRhaW5lcikge1xuICAgICAgICBjb250YWluZXIuYXBwZW5kUnVsZShydWxlKTtcbiAgICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiID8gd2FybmluZyhmYWxzZSwgXCJbSlNTXSBcIiArIGVyci5tZXNzYWdlKSA6IHZvaWQgMDtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICByZXR1cm4gY29udGFpbmVyLmNzc1J1bGVzW2luZGV4XTtcbn07XG5cbnZhciBnZXRWYWxpZFJ1bGVJbnNlcnRpb25JbmRleCA9IGZ1bmN0aW9uIGdldFZhbGlkUnVsZUluc2VydGlvbkluZGV4KGNvbnRhaW5lciwgaW5kZXgpIHtcbiAgdmFyIG1heEluZGV4ID0gY29udGFpbmVyLmNzc1J1bGVzLmxlbmd0aDsgLy8gSW4gY2FzZSBwcmV2aW91cyBpbnNlcnRpb24gZmFpbHMsIHBhc3NlZCBpbmRleCBtaWdodCBiZSB3cm9uZ1xuXG4gIGlmIChpbmRleCA9PT0gdW5kZWZpbmVkIHx8IGluZGV4ID4gbWF4SW5kZXgpIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICByZXR1cm4gbWF4SW5kZXg7XG4gIH1cblxuICByZXR1cm4gaW5kZXg7XG59O1xuXG52YXIgY3JlYXRlU3R5bGUgPSBmdW5jdGlvbiBjcmVhdGVTdHlsZSgpIHtcbiAgdmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTsgLy8gV2l0aG91dCBpdCwgSUUgd2lsbCBoYXZlIGEgYnJva2VuIHNvdXJjZSBvcmRlciBzcGVjaWZpY2l0eSBpZiB3ZVxuICAvLyBpbnNlcnQgcnVsZXMgYWZ0ZXIgd2UgaW5zZXJ0IHRoZSBzdHlsZSB0YWcuXG4gIC8vIEl0IHNlZW1zIHRvIGtpY2stb2ZmIHRoZSBzb3VyY2Ugb3JkZXIgc3BlY2lmaWNpdHkgYWxnb3JpdGhtLlxuXG4gIGVsLnRleHRDb250ZW50ID0gJ1xcbic7XG4gIHJldHVybiBlbDtcbn07XG5cbnZhciBEb21SZW5kZXJlciA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoKSB7XG4gIC8vIFdpbGwgYmUgZW1wdHkgaWYgbGluazogdHJ1ZSBvcHRpb24gaXMgbm90IHNldCwgYmVjYXVzZVxuICAvLyBpdCBpcyBvbmx5IGZvciB1c2UgdG9nZXRoZXIgd2l0aCBpbnNlcnRSdWxlIEFQSS5cbiAgZnVuY3Rpb24gRG9tUmVuZGVyZXIoc2hlZXQpIHtcbiAgICB0aGlzLmdldFByb3BlcnR5VmFsdWUgPSBnZXRQcm9wZXJ0eVZhbHVlO1xuICAgIHRoaXMuc2V0UHJvcGVydHkgPSBzZXRQcm9wZXJ0eTtcbiAgICB0aGlzLnJlbW92ZVByb3BlcnR5ID0gcmVtb3ZlUHJvcGVydHk7XG4gICAgdGhpcy5zZXRTZWxlY3RvciA9IHNldFNlbGVjdG9yO1xuICAgIHRoaXMuaGFzSW5zZXJ0ZWRSdWxlcyA9IGZhbHNlO1xuICAgIHRoaXMuY3NzUnVsZXMgPSBbXTtcbiAgICAvLyBUaGVyZSBpcyBubyBzaGVldCB3aGVuIHRoZSByZW5kZXJlciBpcyB1c2VkIGZyb20gYSBzdGFuZGFsb25lIFN0eWxlUnVsZS5cbiAgICBpZiAoc2hlZXQpIHNoZWV0cy5hZGQoc2hlZXQpO1xuICAgIHRoaXMuc2hlZXQgPSBzaGVldDtcblxuICAgIHZhciBfcmVmID0gdGhpcy5zaGVldCA/IHRoaXMuc2hlZXQub3B0aW9ucyA6IHt9LFxuICAgICAgICBtZWRpYSA9IF9yZWYubWVkaWEsXG4gICAgICAgIG1ldGEgPSBfcmVmLm1ldGEsXG4gICAgICAgIGVsZW1lbnQgPSBfcmVmLmVsZW1lbnQ7XG5cbiAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50IHx8IGNyZWF0ZVN0eWxlKCk7XG4gICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS1qc3MnLCAnJyk7XG4gICAgaWYgKG1lZGlhKSB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKCdtZWRpYScsIG1lZGlhKTtcbiAgICBpZiAobWV0YSkgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS1tZXRhJywgbWV0YSk7XG4gICAgdmFyIG5vbmNlID0gZ2V0Tm9uY2UoKTtcbiAgICBpZiAobm9uY2UpIHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ25vbmNlJywgbm9uY2UpO1xuICB9XG4gIC8qKlxuICAgKiBJbnNlcnQgc3R5bGUgZWxlbWVudCBpbnRvIHJlbmRlciB0cmVlLlxuICAgKi9cblxuXG4gIHZhciBfcHJvdG8gPSBEb21SZW5kZXJlci5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLmF0dGFjaCA9IGZ1bmN0aW9uIGF0dGFjaCgpIHtcbiAgICAvLyBJbiB0aGUgY2FzZSB0aGUgZWxlbWVudCBub2RlIGlzIGV4dGVybmFsIGFuZCBpdCBpcyBhbHJlYWR5IGluIHRoZSBET00uXG4gICAgaWYgKHRoaXMuZWxlbWVudC5wYXJlbnROb2RlIHx8ICF0aGlzLnNoZWV0KSByZXR1cm47XG4gICAgaW5zZXJ0U3R5bGUodGhpcy5lbGVtZW50LCB0aGlzLnNoZWV0Lm9wdGlvbnMpOyAvLyBXaGVuIHJ1bGVzIGFyZSBpbnNlcnRlZCB1c2luZyBgaW5zZXJ0UnVsZWAgQVBJLCBhZnRlciBgc2hlZXQuZGV0YWNoKCkuYXR0YWNoKClgXG4gICAgLy8gbW9zdCBicm93c2VycyBjcmVhdGUgYSBuZXcgQ1NTU3R5bGVTaGVldCwgZXhjZXB0IG9mIGFsbCBJRXMuXG5cbiAgICB2YXIgZGVwbG95ZWQgPSBCb29sZWFuKHRoaXMuc2hlZXQgJiYgdGhpcy5zaGVldC5kZXBsb3llZCk7XG5cbiAgICBpZiAodGhpcy5oYXNJbnNlcnRlZFJ1bGVzICYmIGRlcGxveWVkKSB7XG4gICAgICB0aGlzLmhhc0luc2VydGVkUnVsZXMgPSBmYWxzZTtcbiAgICAgIHRoaXMuZGVwbG95KCk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBSZW1vdmUgc3R5bGUgZWxlbWVudCBmcm9tIHJlbmRlciB0cmVlLlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5kZXRhY2ggPSBmdW5jdGlvbiBkZXRhY2goKSB7XG4gICAgaWYgKCF0aGlzLnNoZWV0KSByZXR1cm47XG4gICAgdmFyIHBhcmVudE5vZGUgPSB0aGlzLmVsZW1lbnQucGFyZW50Tm9kZTtcbiAgICBpZiAocGFyZW50Tm9kZSkgcGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLmVsZW1lbnQpOyAvLyBJbiB0aGUgbW9zdCBicm93c2VycywgcnVsZXMgaW5zZXJ0ZWQgdXNpbmcgaW5zZXJ0UnVsZSgpIEFQSSB3aWxsIGJlIGxvc3Qgd2hlbiBzdHlsZSBlbGVtZW50IGlzIHJlbW92ZWQuXG4gICAgLy8gVGhvdWdoIElFIHdpbGwga2VlcCB0aGVtIGFuZCB3ZSBuZWVkIGEgY29uc2lzdGVudCBiZWhhdmlvci5cblxuICAgIGlmICh0aGlzLnNoZWV0Lm9wdGlvbnMubGluaykge1xuICAgICAgdGhpcy5jc3NSdWxlcyA9IFtdO1xuICAgICAgdGhpcy5lbGVtZW50LnRleHRDb250ZW50ID0gJ1xcbic7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBJbmplY3QgQ1NTIHN0cmluZyBpbnRvIGVsZW1lbnQuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmRlcGxveSA9IGZ1bmN0aW9uIGRlcGxveSgpIHtcbiAgICB2YXIgc2hlZXQgPSB0aGlzLnNoZWV0O1xuICAgIGlmICghc2hlZXQpIHJldHVybjtcblxuICAgIGlmIChzaGVldC5vcHRpb25zLmxpbmspIHtcbiAgICAgIHRoaXMuaW5zZXJ0UnVsZXMoc2hlZXQucnVsZXMpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuZWxlbWVudC50ZXh0Q29udGVudCA9IFwiXFxuXCIgKyBzaGVldC50b1N0cmluZygpICsgXCJcXG5cIjtcbiAgfVxuICAvKipcbiAgICogSW5zZXJ0IFJ1bGVMaXN0IGludG8gYW4gZWxlbWVudC5cbiAgICovXG4gIDtcblxuICBfcHJvdG8uaW5zZXJ0UnVsZXMgPSBmdW5jdGlvbiBpbnNlcnRSdWxlcyhydWxlcywgbmF0aXZlUGFyZW50KSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBydWxlcy5pbmRleC5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5pbnNlcnRSdWxlKHJ1bGVzLmluZGV4W2ldLCBpLCBuYXRpdmVQYXJlbnQpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogSW5zZXJ0IGEgcnVsZSBpbnRvIGVsZW1lbnQuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmluc2VydFJ1bGUgPSBmdW5jdGlvbiBpbnNlcnRSdWxlKHJ1bGUsIGluZGV4LCBuYXRpdmVQYXJlbnQpIHtcbiAgICBpZiAobmF0aXZlUGFyZW50ID09PSB2b2lkIDApIHtcbiAgICAgIG5hdGl2ZVBhcmVudCA9IHRoaXMuZWxlbWVudC5zaGVldDtcbiAgICB9XG5cbiAgICBpZiAocnVsZS5ydWxlcykge1xuICAgICAgdmFyIHBhcmVudCA9IHJ1bGU7XG4gICAgICB2YXIgbGF0ZXN0TmF0aXZlUGFyZW50ID0gbmF0aXZlUGFyZW50O1xuXG4gICAgICBpZiAocnVsZS50eXBlID09PSAnY29uZGl0aW9uYWwnIHx8IHJ1bGUudHlwZSA9PT0gJ2tleWZyYW1lcycpIHtcbiAgICAgICAgdmFyIF9pbnNlcnRpb25JbmRleCA9IGdldFZhbGlkUnVsZUluc2VydGlvbkluZGV4KG5hdGl2ZVBhcmVudCwgaW5kZXgpOyAvLyBXZSBuZWVkIHRvIHJlbmRlciB0aGUgY29udGFpbmVyIHdpdGhvdXQgY2hpbGRyZW4gZmlyc3QuXG5cblxuICAgICAgICBsYXRlc3ROYXRpdmVQYXJlbnQgPSBfaW5zZXJ0UnVsZShuYXRpdmVQYXJlbnQsIHBhcmVudC50b1N0cmluZyh7XG4gICAgICAgICAgY2hpbGRyZW46IGZhbHNlXG4gICAgICAgIH0pLCBfaW5zZXJ0aW9uSW5kZXgpO1xuXG4gICAgICAgIGlmIChsYXRlc3ROYXRpdmVQYXJlbnQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5yZWZDc3NSdWxlKHJ1bGUsIF9pbnNlcnRpb25JbmRleCwgbGF0ZXN0TmF0aXZlUGFyZW50KTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5pbnNlcnRSdWxlcyhwYXJlbnQucnVsZXMsIGxhdGVzdE5hdGl2ZVBhcmVudCk7XG4gICAgICByZXR1cm4gbGF0ZXN0TmF0aXZlUGFyZW50O1xuICAgIH1cblxuICAgIHZhciBydWxlU3RyID0gcnVsZS50b1N0cmluZygpO1xuICAgIGlmICghcnVsZVN0cikgcmV0dXJuIGZhbHNlO1xuICAgIHZhciBpbnNlcnRpb25JbmRleCA9IGdldFZhbGlkUnVsZUluc2VydGlvbkluZGV4KG5hdGl2ZVBhcmVudCwgaW5kZXgpO1xuXG4gICAgdmFyIG5hdGl2ZVJ1bGUgPSBfaW5zZXJ0UnVsZShuYXRpdmVQYXJlbnQsIHJ1bGVTdHIsIGluc2VydGlvbkluZGV4KTtcblxuICAgIGlmIChuYXRpdmVSdWxlID09PSBmYWxzZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHRoaXMuaGFzSW5zZXJ0ZWRSdWxlcyA9IHRydWU7XG4gICAgdGhpcy5yZWZDc3NSdWxlKHJ1bGUsIGluc2VydGlvbkluZGV4LCBuYXRpdmVSdWxlKTtcbiAgICByZXR1cm4gbmF0aXZlUnVsZTtcbiAgfTtcblxuICBfcHJvdG8ucmVmQ3NzUnVsZSA9IGZ1bmN0aW9uIHJlZkNzc1J1bGUocnVsZSwgaW5kZXgsIGNzc1J1bGUpIHtcbiAgICBydWxlLnJlbmRlcmFibGUgPSBjc3NSdWxlOyAvLyBXZSBvbmx5IHdhbnQgdG8gcmVmZXJlbmNlIHRoZSB0b3AgbGV2ZWwgcnVsZXMsIGRlbGV0ZVJ1bGUgQVBJIGRvZXNuJ3Qgc3VwcG9ydCByZW1vdmluZyBuZXN0ZWQgcnVsZXNcbiAgICAvLyBsaWtlIHJ1bGVzIGluc2lkZSBtZWRpYSBxdWVyaWVzIG9yIGtleWZyYW1lc1xuXG4gICAgaWYgKHJ1bGUub3B0aW9ucy5wYXJlbnQgaW5zdGFuY2VvZiBTdHlsZVNoZWV0KSB7XG4gICAgICB0aGlzLmNzc1J1bGVzLnNwbGljZShpbmRleCwgMCwgY3NzUnVsZSk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBEZWxldGUgYSBydWxlLlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5kZWxldGVSdWxlID0gZnVuY3Rpb24gZGVsZXRlUnVsZShjc3NSdWxlKSB7XG4gICAgdmFyIHNoZWV0ID0gdGhpcy5lbGVtZW50LnNoZWV0O1xuICAgIHZhciBpbmRleCA9IHRoaXMuaW5kZXhPZihjc3NSdWxlKTtcbiAgICBpZiAoaW5kZXggPT09IC0xKSByZXR1cm4gZmFsc2U7XG4gICAgc2hlZXQuZGVsZXRlUnVsZShpbmRleCk7XG4gICAgdGhpcy5jc3NSdWxlcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgaW5kZXggb2YgYSBDU1MgUnVsZS5cbiAgICovXG4gIDtcblxuICBfcHJvdG8uaW5kZXhPZiA9IGZ1bmN0aW9uIGluZGV4T2YoY3NzUnVsZSkge1xuICAgIHJldHVybiB0aGlzLmNzc1J1bGVzLmluZGV4T2YoY3NzUnVsZSk7XG4gIH1cbiAgLyoqXG4gICAqIEdlbmVyYXRlIGEgbmV3IENTUyBydWxlIGFuZCByZXBsYWNlIHRoZSBleGlzdGluZyBvbmUuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnJlcGxhY2VSdWxlID0gZnVuY3Rpb24gcmVwbGFjZVJ1bGUoY3NzUnVsZSwgcnVsZSkge1xuICAgIHZhciBpbmRleCA9IHRoaXMuaW5kZXhPZihjc3NSdWxlKTtcbiAgICBpZiAoaW5kZXggPT09IC0xKSByZXR1cm4gZmFsc2U7XG4gICAgdGhpcy5lbGVtZW50LnNoZWV0LmRlbGV0ZVJ1bGUoaW5kZXgpO1xuICAgIHRoaXMuY3NzUnVsZXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICByZXR1cm4gdGhpcy5pbnNlcnRSdWxlKHJ1bGUsIGluZGV4KTtcbiAgfVxuICAvKipcbiAgICogR2V0IGFsbCBydWxlcyBlbGVtZW50cy5cbiAgICovXG4gIDtcblxuICBfcHJvdG8uZ2V0UnVsZXMgPSBmdW5jdGlvbiBnZXRSdWxlcygpIHtcbiAgICByZXR1cm4gdGhpcy5lbGVtZW50LnNoZWV0LmNzc1J1bGVzO1xuICB9O1xuXG4gIHJldHVybiBEb21SZW5kZXJlcjtcbn0oKTtcblxudmFyIGluc3RhbmNlQ291bnRlciA9IDA7XG5cbnZhciBKc3MgPVxuLyojX19QVVJFX18qL1xuZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBKc3Mob3B0aW9ucykge1xuICAgIHRoaXMuaWQgPSBpbnN0YW5jZUNvdW50ZXIrKztcbiAgICB0aGlzLnZlcnNpb24gPSBcIjEwLjEwLjBcIjtcbiAgICB0aGlzLnBsdWdpbnMgPSBuZXcgUGx1Z2luc1JlZ2lzdHJ5KCk7XG4gICAgdGhpcy5vcHRpb25zID0ge1xuICAgICAgaWQ6IHtcbiAgICAgICAgbWluaWZ5OiBmYWxzZVxuICAgICAgfSxcbiAgICAgIGNyZWF0ZUdlbmVyYXRlSWQ6IGNyZWF0ZUdlbmVyYXRlSWQsXG4gICAgICBSZW5kZXJlcjogaXNJbkJyb3dzZXIgPyBEb21SZW5kZXJlciA6IG51bGwsXG4gICAgICBwbHVnaW5zOiBbXVxuICAgIH07XG4gICAgdGhpcy5nZW5lcmF0ZUlkID0gY3JlYXRlR2VuZXJhdGVJZCh7XG4gICAgICBtaW5pZnk6IGZhbHNlXG4gICAgfSk7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBsdWdpbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMucGx1Z2lucy51c2UocGx1Z2luc1tpXSwge1xuICAgICAgICBxdWV1ZTogJ2ludGVybmFsJ1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgdGhpcy5zZXR1cChvcHRpb25zKTtcbiAgfVxuICAvKipcbiAgICogUHJlcGFyZXMgdmFyaW91cyBvcHRpb25zLCBhcHBsaWVzIHBsdWdpbnMuXG4gICAqIFNob3VsZCBub3QgYmUgdXNlZCB0d2ljZSBvbiB0aGUgc2FtZSBpbnN0YW5jZSwgYmVjYXVzZSB0aGVyZSBpcyBubyBwbHVnaW5zXG4gICAqIGRlZHVwbGljYXRpb24gbG9naWMuXG4gICAqL1xuXG5cbiAgdmFyIF9wcm90byA9IEpzcy5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLnNldHVwID0gZnVuY3Rpb24gc2V0dXAob3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHtcbiAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy5jcmVhdGVHZW5lcmF0ZUlkKSB7XG4gICAgICB0aGlzLm9wdGlvbnMuY3JlYXRlR2VuZXJhdGVJZCA9IG9wdGlvbnMuY3JlYXRlR2VuZXJhdGVJZDtcbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy5pZCkge1xuICAgICAgdGhpcy5vcHRpb25zLmlkID0gX2V4dGVuZHMoe30sIHRoaXMub3B0aW9ucy5pZCwgb3B0aW9ucy5pZCk7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMuY3JlYXRlR2VuZXJhdGVJZCB8fCBvcHRpb25zLmlkKSB7XG4gICAgICB0aGlzLmdlbmVyYXRlSWQgPSB0aGlzLm9wdGlvbnMuY3JlYXRlR2VuZXJhdGVJZCh0aGlzLm9wdGlvbnMuaWQpO1xuICAgIH1cblxuICAgIGlmIChvcHRpb25zLmluc2VydGlvblBvaW50ICE9IG51bGwpIHRoaXMub3B0aW9ucy5pbnNlcnRpb25Qb2ludCA9IG9wdGlvbnMuaW5zZXJ0aW9uUG9pbnQ7XG5cbiAgICBpZiAoJ1JlbmRlcmVyJyBpbiBvcHRpb25zKSB7XG4gICAgICB0aGlzLm9wdGlvbnMuUmVuZGVyZXIgPSBvcHRpb25zLlJlbmRlcmVyO1xuICAgIH0gLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1zcHJlYWRcblxuXG4gICAgaWYgKG9wdGlvbnMucGx1Z2lucykgdGhpcy51c2UuYXBwbHkodGhpcywgb3B0aW9ucy5wbHVnaW5zKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIGEgU3R5bGUgU2hlZXQuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmNyZWF0ZVN0eWxlU2hlZXQgPSBmdW5jdGlvbiBjcmVhdGVTdHlsZVNoZWV0KHN0eWxlcywgb3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHtcbiAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICB9XG5cbiAgICB2YXIgX29wdGlvbnMgPSBvcHRpb25zLFxuICAgICAgICBpbmRleCA9IF9vcHRpb25zLmluZGV4O1xuXG4gICAgaWYgKHR5cGVvZiBpbmRleCAhPT0gJ251bWJlcicpIHtcbiAgICAgIGluZGV4ID0gc2hlZXRzLmluZGV4ID09PSAwID8gMCA6IHNoZWV0cy5pbmRleCArIDE7XG4gICAgfVxuXG4gICAgdmFyIHNoZWV0ID0gbmV3IFN0eWxlU2hlZXQoc3R5bGVzLCBfZXh0ZW5kcyh7fSwgb3B0aW9ucywge1xuICAgICAganNzOiB0aGlzLFxuICAgICAgZ2VuZXJhdGVJZDogb3B0aW9ucy5nZW5lcmF0ZUlkIHx8IHRoaXMuZ2VuZXJhdGVJZCxcbiAgICAgIGluc2VydGlvblBvaW50OiB0aGlzLm9wdGlvbnMuaW5zZXJ0aW9uUG9pbnQsXG4gICAgICBSZW5kZXJlcjogdGhpcy5vcHRpb25zLlJlbmRlcmVyLFxuICAgICAgaW5kZXg6IGluZGV4XG4gICAgfSkpO1xuICAgIHRoaXMucGx1Z2lucy5vblByb2Nlc3NTaGVldChzaGVldCk7XG4gICAgcmV0dXJuIHNoZWV0O1xuICB9XG4gIC8qKlxuICAgKiBEZXRhY2ggdGhlIFN0eWxlIFNoZWV0IGFuZCByZW1vdmUgaXQgZnJvbSB0aGUgcmVnaXN0cnkuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnJlbW92ZVN0eWxlU2hlZXQgPSBmdW5jdGlvbiByZW1vdmVTdHlsZVNoZWV0KHNoZWV0KSB7XG4gICAgc2hlZXQuZGV0YWNoKCk7XG4gICAgc2hlZXRzLnJlbW92ZShzaGVldCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZSBhIHJ1bGUgd2l0aG91dCBhIFN0eWxlIFNoZWV0LlxuICAgKiBbRGVwcmVjYXRlZF0gd2lsbCBiZSByZW1vdmVkIGluIHRoZSBuZXh0IG1ham9yIHZlcnNpb24uXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmNyZWF0ZVJ1bGUgPSBmdW5jdGlvbiBjcmVhdGVSdWxlJDEobmFtZSwgc3R5bGUsIG9wdGlvbnMpIHtcbiAgICBpZiAoc3R5bGUgPT09IHZvaWQgMCkge1xuICAgICAgc3R5bGUgPSB7fTtcbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7XG4gICAgICBvcHRpb25zID0ge307XG4gICAgfVxuXG4gICAgLy8gRW5hYmxlIHJ1bGUgd2l0aG91dCBuYW1lIGZvciBpbmxpbmUgc3R5bGVzLlxuICAgIGlmICh0eXBlb2YgbmFtZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgIHJldHVybiB0aGlzLmNyZWF0ZVJ1bGUodW5kZWZpbmVkLCBuYW1lLCBzdHlsZSk7XG4gICAgfVxuXG4gICAgdmFyIHJ1bGVPcHRpb25zID0gX2V4dGVuZHMoe30sIG9wdGlvbnMsIHtcbiAgICAgIG5hbWU6IG5hbWUsXG4gICAgICBqc3M6IHRoaXMsXG4gICAgICBSZW5kZXJlcjogdGhpcy5vcHRpb25zLlJlbmRlcmVyXG4gICAgfSk7XG5cbiAgICBpZiAoIXJ1bGVPcHRpb25zLmdlbmVyYXRlSWQpIHJ1bGVPcHRpb25zLmdlbmVyYXRlSWQgPSB0aGlzLmdlbmVyYXRlSWQ7XG4gICAgaWYgKCFydWxlT3B0aW9ucy5jbGFzc2VzKSBydWxlT3B0aW9ucy5jbGFzc2VzID0ge307XG4gICAgaWYgKCFydWxlT3B0aW9ucy5rZXlmcmFtZXMpIHJ1bGVPcHRpb25zLmtleWZyYW1lcyA9IHt9O1xuXG4gICAgdmFyIHJ1bGUgPSBjcmVhdGVSdWxlKG5hbWUsIHN0eWxlLCBydWxlT3B0aW9ucyk7XG5cbiAgICBpZiAocnVsZSkgdGhpcy5wbHVnaW5zLm9uUHJvY2Vzc1J1bGUocnVsZSk7XG4gICAgcmV0dXJuIHJ1bGU7XG4gIH1cbiAgLyoqXG4gICAqIFJlZ2lzdGVyIHBsdWdpbi4gUGFzc2VkIGZ1bmN0aW9uIHdpbGwgYmUgaW52b2tlZCB3aXRoIGEgcnVsZSBpbnN0YW5jZS5cbiAgICovXG4gIDtcblxuICBfcHJvdG8udXNlID0gZnVuY3Rpb24gdXNlKCkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgcGx1Z2lucyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIHBsdWdpbnNbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgcGx1Z2lucy5mb3JFYWNoKGZ1bmN0aW9uIChwbHVnaW4pIHtcbiAgICAgIF90aGlzLnBsdWdpbnMudXNlKHBsdWdpbik7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgcmV0dXJuIEpzcztcbn0oKTtcblxudmFyIGNyZWF0ZUpzcyA9IGZ1bmN0aW9uIGNyZWF0ZUpzcyhvcHRpb25zKSB7XG4gIHJldHVybiBuZXcgSnNzKG9wdGlvbnMpO1xufTtcblxuLyoqXG4gKiBTaGVldHNNYW5hZ2VyIGlzIGxpa2UgYSBXZWFrTWFwIHdoaWNoIGlzIGRlc2lnbmVkIHRvIGNvdW50IFN0eWxlU2hlZXRcbiAqIGluc3RhbmNlcyBhbmQgYXR0YWNoL2RldGFjaCBhdXRvbWF0aWNhbGx5LlxuICogVXNlZCBpbiByZWFjdC1qc3MuXG4gKi9cblxudmFyIFNoZWV0c01hbmFnZXIgPVxuLyojX19QVVJFX18qL1xuZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBTaGVldHNNYW5hZ2VyKCkge1xuICAgIHRoaXMubGVuZ3RoID0gMDtcbiAgICB0aGlzLnNoZWV0cyA9IG5ldyBXZWFrTWFwKCk7XG4gIH1cblxuICB2YXIgX3Byb3RvID0gU2hlZXRzTWFuYWdlci5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLmdldCA9IGZ1bmN0aW9uIGdldChrZXkpIHtcbiAgICB2YXIgZW50cnkgPSB0aGlzLnNoZWV0cy5nZXQoa2V5KTtcbiAgICByZXR1cm4gZW50cnkgJiYgZW50cnkuc2hlZXQ7XG4gIH07XG5cbiAgX3Byb3RvLmFkZCA9IGZ1bmN0aW9uIGFkZChrZXksIHNoZWV0KSB7XG4gICAgaWYgKHRoaXMuc2hlZXRzLmhhcyhrZXkpKSByZXR1cm47XG4gICAgdGhpcy5sZW5ndGgrKztcbiAgICB0aGlzLnNoZWV0cy5zZXQoa2V5LCB7XG4gICAgICBzaGVldDogc2hlZXQsXG4gICAgICByZWZzOiAwXG4gICAgfSk7XG4gIH07XG5cbiAgX3Byb3RvLm1hbmFnZSA9IGZ1bmN0aW9uIG1hbmFnZShrZXkpIHtcbiAgICB2YXIgZW50cnkgPSB0aGlzLnNoZWV0cy5nZXQoa2V5KTtcblxuICAgIGlmIChlbnRyeSkge1xuICAgICAgaWYgKGVudHJ5LnJlZnMgPT09IDApIHtcbiAgICAgICAgZW50cnkuc2hlZXQuYXR0YWNoKCk7XG4gICAgICB9XG5cbiAgICAgIGVudHJ5LnJlZnMrKztcbiAgICAgIHJldHVybiBlbnRyeS5zaGVldDtcbiAgICB9XG5cbiAgICB3YXJuaW5nKGZhbHNlLCBcIltKU1NdIFNoZWV0c01hbmFnZXI6IGNhbid0IGZpbmQgc2hlZXQgdG8gbWFuYWdlXCIpO1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH07XG5cbiAgX3Byb3RvLnVubWFuYWdlID0gZnVuY3Rpb24gdW5tYW5hZ2Uoa2V5KSB7XG4gICAgdmFyIGVudHJ5ID0gdGhpcy5zaGVldHMuZ2V0KGtleSk7XG5cbiAgICBpZiAoZW50cnkpIHtcbiAgICAgIGlmIChlbnRyeS5yZWZzID4gMCkge1xuICAgICAgICBlbnRyeS5yZWZzLS07XG4gICAgICAgIGlmIChlbnRyeS5yZWZzID09PSAwKSBlbnRyeS5zaGVldC5kZXRhY2goKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgd2FybmluZyhmYWxzZSwgXCJTaGVldHNNYW5hZ2VyOiBjYW4ndCBmaW5kIHNoZWV0IHRvIHVubWFuYWdlXCIpO1xuICAgIH1cbiAgfTtcblxuICBfY3JlYXRlQ2xhc3MoU2hlZXRzTWFuYWdlciwgW3tcbiAgICBrZXk6IFwic2l6ZVwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMubGVuZ3RoO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBTaGVldHNNYW5hZ2VyO1xufSgpO1xuXG4vKipcbiogRXhwb3J0IGEgY29uc3RhbnQgaW5kaWNhdGluZyBpZiB0aGlzIGJyb3dzZXIgaGFzIENTU1RPTSBzdXBwb3J0LlxuKiBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS93ZWIvdXBkYXRlcy8yMDE4LzAzL2Nzc29tXG4qL1xudmFyIGhhc0NTU1RPTVN1cHBvcnQgPSB0eXBlb2YgQ1NTID09PSAnb2JqZWN0JyAmJiBDU1MgIT0gbnVsbCAmJiAnbnVtYmVyJyBpbiBDU1M7XG5cbi8qKlxuICogRXh0cmFjdHMgYSBzdHlsZXMgb2JqZWN0IHdpdGggb25seSBwcm9wcyB0aGF0IGNvbnRhaW4gZnVuY3Rpb24gdmFsdWVzLlxuICovXG5mdW5jdGlvbiBnZXREeW5hbWljU3R5bGVzKHN0eWxlcykge1xuICB2YXIgdG8gPSBudWxsO1xuXG4gIGZvciAodmFyIGtleSBpbiBzdHlsZXMpIHtcbiAgICB2YXIgdmFsdWUgPSBzdHlsZXNba2V5XTtcbiAgICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcblxuICAgIGlmICh0eXBlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBpZiAoIXRvKSB0byA9IHt9O1xuICAgICAgdG9ba2V5XSA9IHZhbHVlO1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgIT09IG51bGwgJiYgIUFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICB2YXIgZXh0cmFjdGVkID0gZ2V0RHluYW1pY1N0eWxlcyh2YWx1ZSk7XG5cbiAgICAgIGlmIChleHRyYWN0ZWQpIHtcbiAgICAgICAgaWYgKCF0bykgdG8gPSB7fTtcbiAgICAgICAgdG9ba2V5XSA9IGV4dHJhY3RlZDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gdG87XG59XG5cbi8qKlxuICogQSBiZXR0ZXIgYWJzdHJhY3Rpb24gb3ZlciBDU1MuXG4gKlxuICogQGNvcHlyaWdodCBPbGVnIElzb25lbiAoU2xvYm9kc2tvaSkgLyBJc29uZW4gMjAxNC1wcmVzZW50XG4gKiBAd2Vic2l0ZSBodHRwczovL2dpdGh1Yi5jb20vY3NzaW5qcy9qc3NcbiAqIEBsaWNlbnNlIE1JVFxuICovXG52YXIgaW5kZXggPSBjcmVhdGVKc3MoKTtcblxuZXhwb3J0IGRlZmF1bHQgaW5kZXg7XG5leHBvcnQgeyBSdWxlTGlzdCwgU2hlZXRzTWFuYWdlciwgU2hlZXRzUmVnaXN0cnksIGNyZWF0ZUpzcyBhcyBjcmVhdGUsIGNyZWF0ZUdlbmVyYXRlSWQsIGNyZWF0ZVJ1bGUsIGdldER5bmFtaWNTdHlsZXMsIGhhc0NTU1RPTVN1cHBvcnQsIHNoZWV0cywgdG9Dc3NWYWx1ZSB9O1xuIiwiLyogZXNsaW50LWVudiBub2RlICovXG4ndXNlIHN0cmljdCc7XG5cbi8vIFNEUCBoZWxwZXJzLlxuY29uc3QgU0RQVXRpbHMgPSB7fTtcblxuLy8gR2VuZXJhdGUgYW4gYWxwaGFudW1lcmljIGlkZW50aWZpZXIgZm9yIGNuYW1lIG9yIG1pZHMuXG4vLyBUT0RPOiB1c2UgVVVJRHMgaW5zdGVhZD8gaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vamVkLzk4Mjg4M1xuU0RQVXRpbHMuZ2VuZXJhdGVJZGVudGlmaWVyID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMiwgMTIpO1xufTtcblxuLy8gVGhlIFJUQ1AgQ05BTUUgdXNlZCBieSBhbGwgcGVlcmNvbm5lY3Rpb25zIGZyb20gdGhlIHNhbWUgSlMuXG5TRFBVdGlscy5sb2NhbENOYW1lID0gU0RQVXRpbHMuZ2VuZXJhdGVJZGVudGlmaWVyKCk7XG5cbi8vIFNwbGl0cyBTRFAgaW50byBsaW5lcywgZGVhbGluZyB3aXRoIGJvdGggQ1JMRiBhbmQgTEYuXG5TRFBVdGlscy5zcGxpdExpbmVzID0gZnVuY3Rpb24oYmxvYikge1xuICByZXR1cm4gYmxvYi50cmltKCkuc3BsaXQoJ1xcbicpLm1hcChsaW5lID0+IGxpbmUudHJpbSgpKTtcbn07XG4vLyBTcGxpdHMgU0RQIGludG8gc2Vzc2lvbnBhcnQgYW5kIG1lZGlhc2VjdGlvbnMuIEVuc3VyZXMgQ1JMRi5cblNEUFV0aWxzLnNwbGl0U2VjdGlvbnMgPSBmdW5jdGlvbihibG9iKSB7XG4gIGNvbnN0IHBhcnRzID0gYmxvYi5zcGxpdCgnXFxubT0nKTtcbiAgcmV0dXJuIHBhcnRzLm1hcCgocGFydCwgaW5kZXgpID0+IChpbmRleCA+IDAgP1xuICAgICdtPScgKyBwYXJ0IDogcGFydCkudHJpbSgpICsgJ1xcclxcbicpO1xufTtcblxuLy8gUmV0dXJucyB0aGUgc2Vzc2lvbiBkZXNjcmlwdGlvbi5cblNEUFV0aWxzLmdldERlc2NyaXB0aW9uID0gZnVuY3Rpb24oYmxvYikge1xuICBjb25zdCBzZWN0aW9ucyA9IFNEUFV0aWxzLnNwbGl0U2VjdGlvbnMoYmxvYik7XG4gIHJldHVybiBzZWN0aW9ucyAmJiBzZWN0aW9uc1swXTtcbn07XG5cbi8vIFJldHVybnMgdGhlIGluZGl2aWR1YWwgbWVkaWEgc2VjdGlvbnMuXG5TRFBVdGlscy5nZXRNZWRpYVNlY3Rpb25zID0gZnVuY3Rpb24oYmxvYikge1xuICBjb25zdCBzZWN0aW9ucyA9IFNEUFV0aWxzLnNwbGl0U2VjdGlvbnMoYmxvYik7XG4gIHNlY3Rpb25zLnNoaWZ0KCk7XG4gIHJldHVybiBzZWN0aW9ucztcbn07XG5cbi8vIFJldHVybnMgbGluZXMgdGhhdCBzdGFydCB3aXRoIGEgY2VydGFpbiBwcmVmaXguXG5TRFBVdGlscy5tYXRjaFByZWZpeCA9IGZ1bmN0aW9uKGJsb2IsIHByZWZpeCkge1xuICByZXR1cm4gU0RQVXRpbHMuc3BsaXRMaW5lcyhibG9iKS5maWx0ZXIobGluZSA9PiBsaW5lLmluZGV4T2YocHJlZml4KSA9PT0gMCk7XG59O1xuXG4vLyBQYXJzZXMgYW4gSUNFIGNhbmRpZGF0ZSBsaW5lLiBTYW1wbGUgaW5wdXQ6XG4vLyBjYW5kaWRhdGU6NzAyNzg2MzUwIDIgdWRwIDQxODE5OTAyIDguOC44LjggNjA3NjkgdHlwIHJlbGF5IHJhZGRyIDguOC44Ljhcbi8vIHJwb3J0IDU1OTk2XCJcbi8vIElucHV0IGNhbiBiZSBwcmVmaXhlZCB3aXRoIGE9LlxuU0RQVXRpbHMucGFyc2VDYW5kaWRhdGUgPSBmdW5jdGlvbihsaW5lKSB7XG4gIGxldCBwYXJ0cztcbiAgLy8gUGFyc2UgYm90aCB2YXJpYW50cy5cbiAgaWYgKGxpbmUuaW5kZXhPZignYT1jYW5kaWRhdGU6JykgPT09IDApIHtcbiAgICBwYXJ0cyA9IGxpbmUuc3Vic3RyaW5nKDEyKS5zcGxpdCgnICcpO1xuICB9IGVsc2Uge1xuICAgIHBhcnRzID0gbGluZS5zdWJzdHJpbmcoMTApLnNwbGl0KCcgJyk7XG4gIH1cblxuICBjb25zdCBjYW5kaWRhdGUgPSB7XG4gICAgZm91bmRhdGlvbjogcGFydHNbMF0sXG4gICAgY29tcG9uZW50OiB7MTogJ3J0cCcsIDI6ICdydGNwJ31bcGFydHNbMV1dIHx8IHBhcnRzWzFdLFxuICAgIHByb3RvY29sOiBwYXJ0c1syXS50b0xvd2VyQ2FzZSgpLFxuICAgIHByaW9yaXR5OiBwYXJzZUludChwYXJ0c1szXSwgMTApLFxuICAgIGlwOiBwYXJ0c1s0XSxcbiAgICBhZGRyZXNzOiBwYXJ0c1s0XSwgLy8gYWRkcmVzcyBpcyBhbiBhbGlhcyBmb3IgaXAuXG4gICAgcG9ydDogcGFyc2VJbnQocGFydHNbNV0sIDEwKSxcbiAgICAvLyBza2lwIHBhcnRzWzZdID09ICd0eXAnXG4gICAgdHlwZTogcGFydHNbN10sXG4gIH07XG5cbiAgZm9yIChsZXQgaSA9IDg7IGkgPCBwYXJ0cy5sZW5ndGg7IGkgKz0gMikge1xuICAgIHN3aXRjaCAocGFydHNbaV0pIHtcbiAgICAgIGNhc2UgJ3JhZGRyJzpcbiAgICAgICAgY2FuZGlkYXRlLnJlbGF0ZWRBZGRyZXNzID0gcGFydHNbaSArIDFdO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3Jwb3J0JzpcbiAgICAgICAgY2FuZGlkYXRlLnJlbGF0ZWRQb3J0ID0gcGFyc2VJbnQocGFydHNbaSArIDFdLCAxMCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAndGNwdHlwZSc6XG4gICAgICAgIGNhbmRpZGF0ZS50Y3BUeXBlID0gcGFydHNbaSArIDFdO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3VmcmFnJzpcbiAgICAgICAgY2FuZGlkYXRlLnVmcmFnID0gcGFydHNbaSArIDFdOyAvLyBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eS5cbiAgICAgICAgY2FuZGlkYXRlLnVzZXJuYW1lRnJhZ21lbnQgPSBwYXJ0c1tpICsgMV07XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDogLy8gZXh0ZW5zaW9uIGhhbmRsaW5nLCBpbiBwYXJ0aWN1bGFyIHVmcmFnLiBEb24ndCBvdmVyd3JpdGUuXG4gICAgICAgIGlmIChjYW5kaWRhdGVbcGFydHNbaV1dID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBjYW5kaWRhdGVbcGFydHNbaV1dID0gcGFydHNbaSArIDFdO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICByZXR1cm4gY2FuZGlkYXRlO1xufTtcblxuLy8gVHJhbnNsYXRlcyBhIGNhbmRpZGF0ZSBvYmplY3QgaW50byBTRFAgY2FuZGlkYXRlIGF0dHJpYnV0ZS5cbi8vIFRoaXMgZG9lcyBub3QgaW5jbHVkZSB0aGUgYT0gcHJlZml4IVxuU0RQVXRpbHMud3JpdGVDYW5kaWRhdGUgPSBmdW5jdGlvbihjYW5kaWRhdGUpIHtcbiAgY29uc3Qgc2RwID0gW107XG4gIHNkcC5wdXNoKGNhbmRpZGF0ZS5mb3VuZGF0aW9uKTtcblxuICBjb25zdCBjb21wb25lbnQgPSBjYW5kaWRhdGUuY29tcG9uZW50O1xuICBpZiAoY29tcG9uZW50ID09PSAncnRwJykge1xuICAgIHNkcC5wdXNoKDEpO1xuICB9IGVsc2UgaWYgKGNvbXBvbmVudCA9PT0gJ3J0Y3AnKSB7XG4gICAgc2RwLnB1c2goMik7XG4gIH0gZWxzZSB7XG4gICAgc2RwLnB1c2goY29tcG9uZW50KTtcbiAgfVxuICBzZHAucHVzaChjYW5kaWRhdGUucHJvdG9jb2wudG9VcHBlckNhc2UoKSk7XG4gIHNkcC5wdXNoKGNhbmRpZGF0ZS5wcmlvcml0eSk7XG4gIHNkcC5wdXNoKGNhbmRpZGF0ZS5hZGRyZXNzIHx8IGNhbmRpZGF0ZS5pcCk7XG4gIHNkcC5wdXNoKGNhbmRpZGF0ZS5wb3J0KTtcblxuICBjb25zdCB0eXBlID0gY2FuZGlkYXRlLnR5cGU7XG4gIHNkcC5wdXNoKCd0eXAnKTtcbiAgc2RwLnB1c2godHlwZSk7XG4gIGlmICh0eXBlICE9PSAnaG9zdCcgJiYgY2FuZGlkYXRlLnJlbGF0ZWRBZGRyZXNzICYmXG4gICAgICBjYW5kaWRhdGUucmVsYXRlZFBvcnQpIHtcbiAgICBzZHAucHVzaCgncmFkZHInKTtcbiAgICBzZHAucHVzaChjYW5kaWRhdGUucmVsYXRlZEFkZHJlc3MpO1xuICAgIHNkcC5wdXNoKCdycG9ydCcpO1xuICAgIHNkcC5wdXNoKGNhbmRpZGF0ZS5yZWxhdGVkUG9ydCk7XG4gIH1cbiAgaWYgKGNhbmRpZGF0ZS50Y3BUeXBlICYmIGNhbmRpZGF0ZS5wcm90b2NvbC50b0xvd2VyQ2FzZSgpID09PSAndGNwJykge1xuICAgIHNkcC5wdXNoKCd0Y3B0eXBlJyk7XG4gICAgc2RwLnB1c2goY2FuZGlkYXRlLnRjcFR5cGUpO1xuICB9XG4gIGlmIChjYW5kaWRhdGUudXNlcm5hbWVGcmFnbWVudCB8fCBjYW5kaWRhdGUudWZyYWcpIHtcbiAgICBzZHAucHVzaCgndWZyYWcnKTtcbiAgICBzZHAucHVzaChjYW5kaWRhdGUudXNlcm5hbWVGcmFnbWVudCB8fCBjYW5kaWRhdGUudWZyYWcpO1xuICB9XG4gIHJldHVybiAnY2FuZGlkYXRlOicgKyBzZHAuam9pbignICcpO1xufTtcblxuLy8gUGFyc2VzIGFuIGljZS1vcHRpb25zIGxpbmUsIHJldHVybnMgYW4gYXJyYXkgb2Ygb3B0aW9uIHRhZ3MuXG4vLyBTYW1wbGUgaW5wdXQ6XG4vLyBhPWljZS1vcHRpb25zOmZvbyBiYXJcblNEUFV0aWxzLnBhcnNlSWNlT3B0aW9ucyA9IGZ1bmN0aW9uKGxpbmUpIHtcbiAgcmV0dXJuIGxpbmUuc3Vic3RyaW5nKDE0KS5zcGxpdCgnICcpO1xufTtcblxuLy8gUGFyc2VzIGEgcnRwbWFwIGxpbmUsIHJldHVybnMgUlRDUnRwQ29kZGVjUGFyYW1ldGVycy4gU2FtcGxlIGlucHV0OlxuLy8gYT1ydHBtYXA6MTExIG9wdXMvNDgwMDAvMlxuU0RQVXRpbHMucGFyc2VSdHBNYXAgPSBmdW5jdGlvbihsaW5lKSB7XG4gIGxldCBwYXJ0cyA9IGxpbmUuc3Vic3RyaW5nKDkpLnNwbGl0KCcgJyk7XG4gIGNvbnN0IHBhcnNlZCA9IHtcbiAgICBwYXlsb2FkVHlwZTogcGFyc2VJbnQocGFydHMuc2hpZnQoKSwgMTApLCAvLyB3YXM6IGlkXG4gIH07XG5cbiAgcGFydHMgPSBwYXJ0c1swXS5zcGxpdCgnLycpO1xuXG4gIHBhcnNlZC5uYW1lID0gcGFydHNbMF07XG4gIHBhcnNlZC5jbG9ja1JhdGUgPSBwYXJzZUludChwYXJ0c1sxXSwgMTApOyAvLyB3YXM6IGNsb2NrcmF0ZVxuICBwYXJzZWQuY2hhbm5lbHMgPSBwYXJ0cy5sZW5ndGggPT09IDMgPyBwYXJzZUludChwYXJ0c1syXSwgMTApIDogMTtcbiAgLy8gbGVnYWN5IGFsaWFzLCBnb3QgcmVuYW1lZCBiYWNrIHRvIGNoYW5uZWxzIGluIE9SVEMuXG4gIHBhcnNlZC5udW1DaGFubmVscyA9IHBhcnNlZC5jaGFubmVscztcbiAgcmV0dXJuIHBhcnNlZDtcbn07XG5cbi8vIEdlbmVyYXRlcyBhIHJ0cG1hcCBsaW5lIGZyb20gUlRDUnRwQ29kZWNDYXBhYmlsaXR5IG9yXG4vLyBSVENSdHBDb2RlY1BhcmFtZXRlcnMuXG5TRFBVdGlscy53cml0ZVJ0cE1hcCA9IGZ1bmN0aW9uKGNvZGVjKSB7XG4gIGxldCBwdCA9IGNvZGVjLnBheWxvYWRUeXBlO1xuICBpZiAoY29kZWMucHJlZmVycmVkUGF5bG9hZFR5cGUgIT09IHVuZGVmaW5lZCkge1xuICAgIHB0ID0gY29kZWMucHJlZmVycmVkUGF5bG9hZFR5cGU7XG4gIH1cbiAgY29uc3QgY2hhbm5lbHMgPSBjb2RlYy5jaGFubmVscyB8fCBjb2RlYy5udW1DaGFubmVscyB8fCAxO1xuICByZXR1cm4gJ2E9cnRwbWFwOicgKyBwdCArICcgJyArIGNvZGVjLm5hbWUgKyAnLycgKyBjb2RlYy5jbG9ja1JhdGUgK1xuICAgICAgKGNoYW5uZWxzICE9PSAxID8gJy8nICsgY2hhbm5lbHMgOiAnJykgKyAnXFxyXFxuJztcbn07XG5cbi8vIFBhcnNlcyBhIGV4dG1hcCBsaW5lIChoZWFkZXJleHRlbnNpb24gZnJvbSBSRkMgNTI4NSkuIFNhbXBsZSBpbnB1dDpcbi8vIGE9ZXh0bWFwOjIgdXJuOmlldGY6cGFyYW1zOnJ0cC1oZHJleHQ6dG9mZnNldFxuLy8gYT1leHRtYXA6Mi9zZW5kb25seSB1cm46aWV0ZjpwYXJhbXM6cnRwLWhkcmV4dDp0b2Zmc2V0XG5TRFBVdGlscy5wYXJzZUV4dG1hcCA9IGZ1bmN0aW9uKGxpbmUpIHtcbiAgY29uc3QgcGFydHMgPSBsaW5lLnN1YnN0cmluZyg5KS5zcGxpdCgnICcpO1xuICByZXR1cm4ge1xuICAgIGlkOiBwYXJzZUludChwYXJ0c1swXSwgMTApLFxuICAgIGRpcmVjdGlvbjogcGFydHNbMF0uaW5kZXhPZignLycpID4gMCA/IHBhcnRzWzBdLnNwbGl0KCcvJylbMV0gOiAnc2VuZHJlY3YnLFxuICAgIHVyaTogcGFydHNbMV0sXG4gICAgYXR0cmlidXRlczogcGFydHMuc2xpY2UoMikuam9pbignICcpLFxuICB9O1xufTtcblxuLy8gR2VuZXJhdGVzIGFuIGV4dG1hcCBsaW5lIGZyb20gUlRDUnRwSGVhZGVyRXh0ZW5zaW9uUGFyYW1ldGVycyBvclxuLy8gUlRDUnRwSGVhZGVyRXh0ZW5zaW9uLlxuU0RQVXRpbHMud3JpdGVFeHRtYXAgPSBmdW5jdGlvbihoZWFkZXJFeHRlbnNpb24pIHtcbiAgcmV0dXJuICdhPWV4dG1hcDonICsgKGhlYWRlckV4dGVuc2lvbi5pZCB8fCBoZWFkZXJFeHRlbnNpb24ucHJlZmVycmVkSWQpICtcbiAgICAgIChoZWFkZXJFeHRlbnNpb24uZGlyZWN0aW9uICYmIGhlYWRlckV4dGVuc2lvbi5kaXJlY3Rpb24gIT09ICdzZW5kcmVjdidcbiAgICAgICAgPyAnLycgKyBoZWFkZXJFeHRlbnNpb24uZGlyZWN0aW9uXG4gICAgICAgIDogJycpICtcbiAgICAgICcgJyArIGhlYWRlckV4dGVuc2lvbi51cmkgK1xuICAgICAgKGhlYWRlckV4dGVuc2lvbi5hdHRyaWJ1dGVzID8gJyAnICsgaGVhZGVyRXh0ZW5zaW9uLmF0dHJpYnV0ZXMgOiAnJykgK1xuICAgICAgJ1xcclxcbic7XG59O1xuXG4vLyBQYXJzZXMgYSBmbXRwIGxpbmUsIHJldHVybnMgZGljdGlvbmFyeS4gU2FtcGxlIGlucHV0OlxuLy8gYT1mbXRwOjk2IHZicj1vbjtjbmc9b25cbi8vIEFsc28gZGVhbHMgd2l0aCB2YnI9b247IGNuZz1vblxuU0RQVXRpbHMucGFyc2VGbXRwID0gZnVuY3Rpb24obGluZSkge1xuICBjb25zdCBwYXJzZWQgPSB7fTtcbiAgbGV0IGt2O1xuICBjb25zdCBwYXJ0cyA9IGxpbmUuc3Vic3RyaW5nKGxpbmUuaW5kZXhPZignICcpICsgMSkuc3BsaXQoJzsnKTtcbiAgZm9yIChsZXQgaiA9IDA7IGogPCBwYXJ0cy5sZW5ndGg7IGorKykge1xuICAgIGt2ID0gcGFydHNbal0udHJpbSgpLnNwbGl0KCc9Jyk7XG4gICAgcGFyc2VkW2t2WzBdLnRyaW0oKV0gPSBrdlsxXTtcbiAgfVxuICByZXR1cm4gcGFyc2VkO1xufTtcblxuLy8gR2VuZXJhdGVzIGEgZm10cCBsaW5lIGZyb20gUlRDUnRwQ29kZWNDYXBhYmlsaXR5IG9yIFJUQ1J0cENvZGVjUGFyYW1ldGVycy5cblNEUFV0aWxzLndyaXRlRm10cCA9IGZ1bmN0aW9uKGNvZGVjKSB7XG4gIGxldCBsaW5lID0gJyc7XG4gIGxldCBwdCA9IGNvZGVjLnBheWxvYWRUeXBlO1xuICBpZiAoY29kZWMucHJlZmVycmVkUGF5bG9hZFR5cGUgIT09IHVuZGVmaW5lZCkge1xuICAgIHB0ID0gY29kZWMucHJlZmVycmVkUGF5bG9hZFR5cGU7XG4gIH1cbiAgaWYgKGNvZGVjLnBhcmFtZXRlcnMgJiYgT2JqZWN0LmtleXMoY29kZWMucGFyYW1ldGVycykubGVuZ3RoKSB7XG4gICAgY29uc3QgcGFyYW1zID0gW107XG4gICAgT2JqZWN0LmtleXMoY29kZWMucGFyYW1ldGVycykuZm9yRWFjaChwYXJhbSA9PiB7XG4gICAgICBpZiAoY29kZWMucGFyYW1ldGVyc1twYXJhbV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBwYXJhbXMucHVzaChwYXJhbSArICc9JyArIGNvZGVjLnBhcmFtZXRlcnNbcGFyYW1dKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhcmFtcy5wdXNoKHBhcmFtKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBsaW5lICs9ICdhPWZtdHA6JyArIHB0ICsgJyAnICsgcGFyYW1zLmpvaW4oJzsnKSArICdcXHJcXG4nO1xuICB9XG4gIHJldHVybiBsaW5lO1xufTtcblxuLy8gUGFyc2VzIGEgcnRjcC1mYiBsaW5lLCByZXR1cm5zIFJUQ1BSdGNwRmVlZGJhY2sgb2JqZWN0LiBTYW1wbGUgaW5wdXQ6XG4vLyBhPXJ0Y3AtZmI6OTggbmFjayBycHNpXG5TRFBVdGlscy5wYXJzZVJ0Y3BGYiA9IGZ1bmN0aW9uKGxpbmUpIHtcbiAgY29uc3QgcGFydHMgPSBsaW5lLnN1YnN0cmluZyhsaW5lLmluZGV4T2YoJyAnKSArIDEpLnNwbGl0KCcgJyk7XG4gIHJldHVybiB7XG4gICAgdHlwZTogcGFydHMuc2hpZnQoKSxcbiAgICBwYXJhbWV0ZXI6IHBhcnRzLmpvaW4oJyAnKSxcbiAgfTtcbn07XG5cbi8vIEdlbmVyYXRlIGE9cnRjcC1mYiBsaW5lcyBmcm9tIFJUQ1J0cENvZGVjQ2FwYWJpbGl0eSBvciBSVENSdHBDb2RlY1BhcmFtZXRlcnMuXG5TRFBVdGlscy53cml0ZVJ0Y3BGYiA9IGZ1bmN0aW9uKGNvZGVjKSB7XG4gIGxldCBsaW5lcyA9ICcnO1xuICBsZXQgcHQgPSBjb2RlYy5wYXlsb2FkVHlwZTtcbiAgaWYgKGNvZGVjLnByZWZlcnJlZFBheWxvYWRUeXBlICE9PSB1bmRlZmluZWQpIHtcbiAgICBwdCA9IGNvZGVjLnByZWZlcnJlZFBheWxvYWRUeXBlO1xuICB9XG4gIGlmIChjb2RlYy5ydGNwRmVlZGJhY2sgJiYgY29kZWMucnRjcEZlZWRiYWNrLmxlbmd0aCkge1xuICAgIC8vIEZJWE1FOiBzcGVjaWFsIGhhbmRsaW5nIGZvciB0cnItaW50P1xuICAgIGNvZGVjLnJ0Y3BGZWVkYmFjay5mb3JFYWNoKGZiID0+IHtcbiAgICAgIGxpbmVzICs9ICdhPXJ0Y3AtZmI6JyArIHB0ICsgJyAnICsgZmIudHlwZSArXG4gICAgICAoZmIucGFyYW1ldGVyICYmIGZiLnBhcmFtZXRlci5sZW5ndGggPyAnICcgKyBmYi5wYXJhbWV0ZXIgOiAnJykgK1xuICAgICAgICAgICdcXHJcXG4nO1xuICAgIH0pO1xuICB9XG4gIHJldHVybiBsaW5lcztcbn07XG5cbi8vIFBhcnNlcyBhIFJGQyA1NTc2IHNzcmMgbWVkaWEgYXR0cmlidXRlLiBTYW1wbGUgaW5wdXQ6XG4vLyBhPXNzcmM6MzczNTkyODU1OSBjbmFtZTpzb21ldGhpbmdcblNEUFV0aWxzLnBhcnNlU3NyY01lZGlhID0gZnVuY3Rpb24obGluZSkge1xuICBjb25zdCBzcCA9IGxpbmUuaW5kZXhPZignICcpO1xuICBjb25zdCBwYXJ0cyA9IHtcbiAgICBzc3JjOiBwYXJzZUludChsaW5lLnN1YnN0cmluZyg3LCBzcCksIDEwKSxcbiAgfTtcbiAgY29uc3QgY29sb24gPSBsaW5lLmluZGV4T2YoJzonLCBzcCk7XG4gIGlmIChjb2xvbiA+IC0xKSB7XG4gICAgcGFydHMuYXR0cmlidXRlID0gbGluZS5zdWJzdHJpbmcoc3AgKyAxLCBjb2xvbik7XG4gICAgcGFydHMudmFsdWUgPSBsaW5lLnN1YnN0cmluZyhjb2xvbiArIDEpO1xuICB9IGVsc2Uge1xuICAgIHBhcnRzLmF0dHJpYnV0ZSA9IGxpbmUuc3Vic3RyaW5nKHNwICsgMSk7XG4gIH1cbiAgcmV0dXJuIHBhcnRzO1xufTtcblxuLy8gUGFyc2UgYSBzc3JjLWdyb3VwIGxpbmUgKHNlZSBSRkMgNTU3NikuIFNhbXBsZSBpbnB1dDpcbi8vIGE9c3NyYy1ncm91cDpzZW1hbnRpY3MgMTIgMzRcblNEUFV0aWxzLnBhcnNlU3NyY0dyb3VwID0gZnVuY3Rpb24obGluZSkge1xuICBjb25zdCBwYXJ0cyA9IGxpbmUuc3Vic3RyaW5nKDEzKS5zcGxpdCgnICcpO1xuICByZXR1cm4ge1xuICAgIHNlbWFudGljczogcGFydHMuc2hpZnQoKSxcbiAgICBzc3JjczogcGFydHMubWFwKHNzcmMgPT4gcGFyc2VJbnQoc3NyYywgMTApKSxcbiAgfTtcbn07XG5cbi8vIEV4dHJhY3RzIHRoZSBNSUQgKFJGQyA1ODg4KSBmcm9tIGEgbWVkaWEgc2VjdGlvbi5cbi8vIFJldHVybnMgdGhlIE1JRCBvciB1bmRlZmluZWQgaWYgbm8gbWlkIGxpbmUgd2FzIGZvdW5kLlxuU0RQVXRpbHMuZ2V0TWlkID0gZnVuY3Rpb24obWVkaWFTZWN0aW9uKSB7XG4gIGNvbnN0IG1pZCA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiwgJ2E9bWlkOicpWzBdO1xuICBpZiAobWlkKSB7XG4gICAgcmV0dXJuIG1pZC5zdWJzdHJpbmcoNik7XG4gIH1cbn07XG5cbi8vIFBhcnNlcyBhIGZpbmdlcnByaW50IGxpbmUgZm9yIERUTFMtU1JUUC5cblNEUFV0aWxzLnBhcnNlRmluZ2VycHJpbnQgPSBmdW5jdGlvbihsaW5lKSB7XG4gIGNvbnN0IHBhcnRzID0gbGluZS5zdWJzdHJpbmcoMTQpLnNwbGl0KCcgJyk7XG4gIHJldHVybiB7XG4gICAgYWxnb3JpdGhtOiBwYXJ0c1swXS50b0xvd2VyQ2FzZSgpLCAvLyBhbGdvcml0aG0gaXMgY2FzZS1zZW5zaXRpdmUgaW4gRWRnZS5cbiAgICB2YWx1ZTogcGFydHNbMV0udG9VcHBlckNhc2UoKSwgLy8gdGhlIGRlZmluaXRpb24gaXMgdXBwZXItY2FzZSBpbiBSRkMgNDU3Mi5cbiAgfTtcbn07XG5cbi8vIEV4dHJhY3RzIERUTFMgcGFyYW1ldGVycyBmcm9tIFNEUCBtZWRpYSBzZWN0aW9uIG9yIHNlc3Npb25wYXJ0LlxuLy8gRklYTUU6IGZvciBjb25zaXN0ZW5jeSB3aXRoIG90aGVyIGZ1bmN0aW9ucyB0aGlzIHNob3VsZCBvbmx5XG4vLyAgIGdldCB0aGUgZmluZ2VycHJpbnQgbGluZSBhcyBpbnB1dC4gU2VlIGFsc28gZ2V0SWNlUGFyYW1ldGVycy5cblNEUFV0aWxzLmdldER0bHNQYXJhbWV0ZXJzID0gZnVuY3Rpb24obWVkaWFTZWN0aW9uLCBzZXNzaW9ucGFydCkge1xuICBjb25zdCBsaW5lcyA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiArIHNlc3Npb25wYXJ0LFxuICAgICdhPWZpbmdlcnByaW50OicpO1xuICAvLyBOb3RlOiBhPXNldHVwIGxpbmUgaXMgaWdub3JlZCBzaW5jZSB3ZSB1c2UgdGhlICdhdXRvJyByb2xlIGluIEVkZ2UuXG4gIHJldHVybiB7XG4gICAgcm9sZTogJ2F1dG8nLFxuICAgIGZpbmdlcnByaW50czogbGluZXMubWFwKFNEUFV0aWxzLnBhcnNlRmluZ2VycHJpbnQpLFxuICB9O1xufTtcblxuLy8gU2VyaWFsaXplcyBEVExTIHBhcmFtZXRlcnMgdG8gU0RQLlxuU0RQVXRpbHMud3JpdGVEdGxzUGFyYW1ldGVycyA9IGZ1bmN0aW9uKHBhcmFtcywgc2V0dXBUeXBlKSB7XG4gIGxldCBzZHAgPSAnYT1zZXR1cDonICsgc2V0dXBUeXBlICsgJ1xcclxcbic7XG4gIHBhcmFtcy5maW5nZXJwcmludHMuZm9yRWFjaChmcCA9PiB7XG4gICAgc2RwICs9ICdhPWZpbmdlcnByaW50OicgKyBmcC5hbGdvcml0aG0gKyAnICcgKyBmcC52YWx1ZSArICdcXHJcXG4nO1xuICB9KTtcbiAgcmV0dXJuIHNkcDtcbn07XG5cbi8vIFBhcnNlcyBhPWNyeXB0byBsaW5lcyBpbnRvXG4vLyAgIGh0dHBzOi8vcmF3Z2l0LmNvbS9hYm9iYS9lZGdlcnRjL21hc3Rlci9tc29ydGMtcnM0Lmh0bWwjZGljdGlvbmFyeS1ydGNzcnRwc2Rlc3BhcmFtZXRlcnMtbWVtYmVyc1xuU0RQVXRpbHMucGFyc2VDcnlwdG9MaW5lID0gZnVuY3Rpb24obGluZSkge1xuICBjb25zdCBwYXJ0cyA9IGxpbmUuc3Vic3RyaW5nKDkpLnNwbGl0KCcgJyk7XG4gIHJldHVybiB7XG4gICAgdGFnOiBwYXJzZUludChwYXJ0c1swXSwgMTApLFxuICAgIGNyeXB0b1N1aXRlOiBwYXJ0c1sxXSxcbiAgICBrZXlQYXJhbXM6IHBhcnRzWzJdLFxuICAgIHNlc3Npb25QYXJhbXM6IHBhcnRzLnNsaWNlKDMpLFxuICB9O1xufTtcblxuU0RQVXRpbHMud3JpdGVDcnlwdG9MaW5lID0gZnVuY3Rpb24ocGFyYW1ldGVycykge1xuICByZXR1cm4gJ2E9Y3J5cHRvOicgKyBwYXJhbWV0ZXJzLnRhZyArICcgJyArXG4gICAgcGFyYW1ldGVycy5jcnlwdG9TdWl0ZSArICcgJyArXG4gICAgKHR5cGVvZiBwYXJhbWV0ZXJzLmtleVBhcmFtcyA9PT0gJ29iamVjdCdcbiAgICAgID8gU0RQVXRpbHMud3JpdGVDcnlwdG9LZXlQYXJhbXMocGFyYW1ldGVycy5rZXlQYXJhbXMpXG4gICAgICA6IHBhcmFtZXRlcnMua2V5UGFyYW1zKSArXG4gICAgKHBhcmFtZXRlcnMuc2Vzc2lvblBhcmFtcyA/ICcgJyArIHBhcmFtZXRlcnMuc2Vzc2lvblBhcmFtcy5qb2luKCcgJykgOiAnJykgK1xuICAgICdcXHJcXG4nO1xufTtcblxuLy8gUGFyc2VzIHRoZSBjcnlwdG8ga2V5IHBhcmFtZXRlcnMgaW50b1xuLy8gICBodHRwczovL3Jhd2dpdC5jb20vYWJvYmEvZWRnZXJ0Yy9tYXN0ZXIvbXNvcnRjLXJzNC5odG1sI3J0Y3NydHBrZXlwYXJhbSpcblNEUFV0aWxzLnBhcnNlQ3J5cHRvS2V5UGFyYW1zID0gZnVuY3Rpb24oa2V5UGFyYW1zKSB7XG4gIGlmIChrZXlQYXJhbXMuaW5kZXhPZignaW5saW5lOicpICE9PSAwKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgY29uc3QgcGFydHMgPSBrZXlQYXJhbXMuc3Vic3RyaW5nKDcpLnNwbGl0KCd8Jyk7XG4gIHJldHVybiB7XG4gICAga2V5TWV0aG9kOiAnaW5saW5lJyxcbiAgICBrZXlTYWx0OiBwYXJ0c1swXSxcbiAgICBsaWZlVGltZTogcGFydHNbMV0sXG4gICAgbWtpVmFsdWU6IHBhcnRzWzJdID8gcGFydHNbMl0uc3BsaXQoJzonKVswXSA6IHVuZGVmaW5lZCxcbiAgICBta2lMZW5ndGg6IHBhcnRzWzJdID8gcGFydHNbMl0uc3BsaXQoJzonKVsxXSA6IHVuZGVmaW5lZCxcbiAgfTtcbn07XG5cblNEUFV0aWxzLndyaXRlQ3J5cHRvS2V5UGFyYW1zID0gZnVuY3Rpb24oa2V5UGFyYW1zKSB7XG4gIHJldHVybiBrZXlQYXJhbXMua2V5TWV0aG9kICsgJzonXG4gICAgKyBrZXlQYXJhbXMua2V5U2FsdCArXG4gICAgKGtleVBhcmFtcy5saWZlVGltZSA/ICd8JyArIGtleVBhcmFtcy5saWZlVGltZSA6ICcnKSArXG4gICAgKGtleVBhcmFtcy5ta2lWYWx1ZSAmJiBrZXlQYXJhbXMubWtpTGVuZ3RoXG4gICAgICA/ICd8JyArIGtleVBhcmFtcy5ta2lWYWx1ZSArICc6JyArIGtleVBhcmFtcy5ta2lMZW5ndGhcbiAgICAgIDogJycpO1xufTtcblxuLy8gRXh0cmFjdHMgYWxsIFNERVMgcGFyYW1ldGVycy5cblNEUFV0aWxzLmdldENyeXB0b1BhcmFtZXRlcnMgPSBmdW5jdGlvbihtZWRpYVNlY3Rpb24sIHNlc3Npb25wYXJ0KSB7XG4gIGNvbnN0IGxpbmVzID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uICsgc2Vzc2lvbnBhcnQsXG4gICAgJ2E9Y3J5cHRvOicpO1xuICByZXR1cm4gbGluZXMubWFwKFNEUFV0aWxzLnBhcnNlQ3J5cHRvTGluZSk7XG59O1xuXG4vLyBQYXJzZXMgSUNFIGluZm9ybWF0aW9uIGZyb20gU0RQIG1lZGlhIHNlY3Rpb24gb3Igc2Vzc2lvbnBhcnQuXG4vLyBGSVhNRTogZm9yIGNvbnNpc3RlbmN5IHdpdGggb3RoZXIgZnVuY3Rpb25zIHRoaXMgc2hvdWxkIG9ubHlcbi8vICAgZ2V0IHRoZSBpY2UtdWZyYWcgYW5kIGljZS1wd2QgbGluZXMgYXMgaW5wdXQuXG5TRFBVdGlscy5nZXRJY2VQYXJhbWV0ZXJzID0gZnVuY3Rpb24obWVkaWFTZWN0aW9uLCBzZXNzaW9ucGFydCkge1xuICBjb25zdCB1ZnJhZyA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiArIHNlc3Npb25wYXJ0LFxuICAgICdhPWljZS11ZnJhZzonKVswXTtcbiAgY29uc3QgcHdkID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uICsgc2Vzc2lvbnBhcnQsXG4gICAgJ2E9aWNlLXB3ZDonKVswXTtcbiAgaWYgKCEodWZyYWcgJiYgcHdkKSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHJldHVybiB7XG4gICAgdXNlcm5hbWVGcmFnbWVudDogdWZyYWcuc3Vic3RyaW5nKDEyKSxcbiAgICBwYXNzd29yZDogcHdkLnN1YnN0cmluZygxMCksXG4gIH07XG59O1xuXG4vLyBTZXJpYWxpemVzIElDRSBwYXJhbWV0ZXJzIHRvIFNEUC5cblNEUFV0aWxzLndyaXRlSWNlUGFyYW1ldGVycyA9IGZ1bmN0aW9uKHBhcmFtcykge1xuICBsZXQgc2RwID0gJ2E9aWNlLXVmcmFnOicgKyBwYXJhbXMudXNlcm5hbWVGcmFnbWVudCArICdcXHJcXG4nICtcbiAgICAgICdhPWljZS1wd2Q6JyArIHBhcmFtcy5wYXNzd29yZCArICdcXHJcXG4nO1xuICBpZiAocGFyYW1zLmljZUxpdGUpIHtcbiAgICBzZHAgKz0gJ2E9aWNlLWxpdGVcXHJcXG4nO1xuICB9XG4gIHJldHVybiBzZHA7XG59O1xuXG4vLyBQYXJzZXMgdGhlIFNEUCBtZWRpYSBzZWN0aW9uIGFuZCByZXR1cm5zIFJUQ1J0cFBhcmFtZXRlcnMuXG5TRFBVdGlscy5wYXJzZVJ0cFBhcmFtZXRlcnMgPSBmdW5jdGlvbihtZWRpYVNlY3Rpb24pIHtcbiAgY29uc3QgZGVzY3JpcHRpb24gPSB7XG4gICAgY29kZWNzOiBbXSxcbiAgICBoZWFkZXJFeHRlbnNpb25zOiBbXSxcbiAgICBmZWNNZWNoYW5pc21zOiBbXSxcbiAgICBydGNwOiBbXSxcbiAgfTtcbiAgY29uc3QgbGluZXMgPSBTRFBVdGlscy5zcGxpdExpbmVzKG1lZGlhU2VjdGlvbik7XG4gIGNvbnN0IG1saW5lID0gbGluZXNbMF0uc3BsaXQoJyAnKTtcbiAgZGVzY3JpcHRpb24ucHJvZmlsZSA9IG1saW5lWzJdO1xuICBmb3IgKGxldCBpID0gMzsgaSA8IG1saW5lLmxlbmd0aDsgaSsrKSB7IC8vIGZpbmQgYWxsIGNvZGVjcyBmcm9tIG1saW5lWzMuLl1cbiAgICBjb25zdCBwdCA9IG1saW5lW2ldO1xuICAgIGNvbnN0IHJ0cG1hcGxpbmUgPSBTRFBVdGlscy5tYXRjaFByZWZpeChcbiAgICAgIG1lZGlhU2VjdGlvbiwgJ2E9cnRwbWFwOicgKyBwdCArICcgJylbMF07XG4gICAgaWYgKHJ0cG1hcGxpbmUpIHtcbiAgICAgIGNvbnN0IGNvZGVjID0gU0RQVXRpbHMucGFyc2VSdHBNYXAocnRwbWFwbGluZSk7XG4gICAgICBjb25zdCBmbXRwcyA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KFxuICAgICAgICBtZWRpYVNlY3Rpb24sICdhPWZtdHA6JyArIHB0ICsgJyAnKTtcbiAgICAgIC8vIE9ubHkgdGhlIGZpcnN0IGE9Zm10cDo8cHQ+IGlzIGNvbnNpZGVyZWQuXG4gICAgICBjb2RlYy5wYXJhbWV0ZXJzID0gZm10cHMubGVuZ3RoID8gU0RQVXRpbHMucGFyc2VGbXRwKGZtdHBzWzBdKSA6IHt9O1xuICAgICAgY29kZWMucnRjcEZlZWRiYWNrID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgoXG4gICAgICAgIG1lZGlhU2VjdGlvbiwgJ2E9cnRjcC1mYjonICsgcHQgKyAnICcpXG4gICAgICAgIC5tYXAoU0RQVXRpbHMucGFyc2VSdGNwRmIpO1xuICAgICAgZGVzY3JpcHRpb24uY29kZWNzLnB1c2goY29kZWMpO1xuICAgICAgLy8gcGFyc2UgRkVDIG1lY2hhbmlzbXMgZnJvbSBydHBtYXAgbGluZXMuXG4gICAgICBzd2l0Y2ggKGNvZGVjLm5hbWUudG9VcHBlckNhc2UoKSkge1xuICAgICAgICBjYXNlICdSRUQnOlxuICAgICAgICBjYXNlICdVTFBGRUMnOlxuICAgICAgICAgIGRlc2NyaXB0aW9uLmZlY01lY2hhbmlzbXMucHVzaChjb2RlYy5uYW1lLnRvVXBwZXJDYXNlKCkpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OiAvLyBvbmx5IFJFRCBhbmQgVUxQRkVDIGFyZSByZWNvZ25pemVkIGFzIEZFQyBtZWNoYW5pc21zLlxuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdhPWV4dG1hcDonKS5mb3JFYWNoKGxpbmUgPT4ge1xuICAgIGRlc2NyaXB0aW9uLmhlYWRlckV4dGVuc2lvbnMucHVzaChTRFBVdGlscy5wYXJzZUV4dG1hcChsaW5lKSk7XG4gIH0pO1xuICBjb25zdCB3aWxkY2FyZFJ0Y3BGYiA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiwgJ2E9cnRjcC1mYjoqICcpXG4gICAgLm1hcChTRFBVdGlscy5wYXJzZVJ0Y3BGYik7XG4gIGRlc2NyaXB0aW9uLmNvZGVjcy5mb3JFYWNoKGNvZGVjID0+IHtcbiAgICB3aWxkY2FyZFJ0Y3BGYi5mb3JFYWNoKGZiPT4ge1xuICAgICAgY29uc3QgZHVwbGljYXRlID0gY29kZWMucnRjcEZlZWRiYWNrLmZpbmQoZXhpc3RpbmdGZWVkYmFjayA9PiB7XG4gICAgICAgIHJldHVybiBleGlzdGluZ0ZlZWRiYWNrLnR5cGUgPT09IGZiLnR5cGUgJiZcbiAgICAgICAgICBleGlzdGluZ0ZlZWRiYWNrLnBhcmFtZXRlciA9PT0gZmIucGFyYW1ldGVyO1xuICAgICAgfSk7XG4gICAgICBpZiAoIWR1cGxpY2F0ZSkge1xuICAgICAgICBjb2RlYy5ydGNwRmVlZGJhY2sucHVzaChmYik7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuICAvLyBGSVhNRTogcGFyc2UgcnRjcC5cbiAgcmV0dXJuIGRlc2NyaXB0aW9uO1xufTtcblxuLy8gR2VuZXJhdGVzIHBhcnRzIG9mIHRoZSBTRFAgbWVkaWEgc2VjdGlvbiBkZXNjcmliaW5nIHRoZSBjYXBhYmlsaXRpZXMgL1xuLy8gcGFyYW1ldGVycy5cblNEUFV0aWxzLndyaXRlUnRwRGVzY3JpcHRpb24gPSBmdW5jdGlvbihraW5kLCBjYXBzKSB7XG4gIGxldCBzZHAgPSAnJztcblxuICAvLyBCdWlsZCB0aGUgbWxpbmUuXG4gIHNkcCArPSAnbT0nICsga2luZCArICcgJztcbiAgc2RwICs9IGNhcHMuY29kZWNzLmxlbmd0aCA+IDAgPyAnOScgOiAnMCc7IC8vIHJlamVjdCBpZiBubyBjb2RlY3MuXG4gIHNkcCArPSAnICcgKyAoY2Fwcy5wcm9maWxlIHx8ICdVRFAvVExTL1JUUC9TQVZQRicpICsgJyAnO1xuICBzZHAgKz0gY2Fwcy5jb2RlY3MubWFwKGNvZGVjID0+IHtcbiAgICBpZiAoY29kZWMucHJlZmVycmVkUGF5bG9hZFR5cGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGNvZGVjLnByZWZlcnJlZFBheWxvYWRUeXBlO1xuICAgIH1cbiAgICByZXR1cm4gY29kZWMucGF5bG9hZFR5cGU7XG4gIH0pLmpvaW4oJyAnKSArICdcXHJcXG4nO1xuXG4gIHNkcCArPSAnYz1JTiBJUDQgMC4wLjAuMFxcclxcbic7XG4gIHNkcCArPSAnYT1ydGNwOjkgSU4gSVA0IDAuMC4wLjBcXHJcXG4nO1xuXG4gIC8vIEFkZCBhPXJ0cG1hcCBsaW5lcyBmb3IgZWFjaCBjb2RlYy4gQWxzbyBmbXRwIGFuZCBydGNwLWZiLlxuICBjYXBzLmNvZGVjcy5mb3JFYWNoKGNvZGVjID0+IHtcbiAgICBzZHAgKz0gU0RQVXRpbHMud3JpdGVSdHBNYXAoY29kZWMpO1xuICAgIHNkcCArPSBTRFBVdGlscy53cml0ZUZtdHAoY29kZWMpO1xuICAgIHNkcCArPSBTRFBVdGlscy53cml0ZVJ0Y3BGYihjb2RlYyk7XG4gIH0pO1xuICBsZXQgbWF4cHRpbWUgPSAwO1xuICBjYXBzLmNvZGVjcy5mb3JFYWNoKGNvZGVjID0+IHtcbiAgICBpZiAoY29kZWMubWF4cHRpbWUgPiBtYXhwdGltZSkge1xuICAgICAgbWF4cHRpbWUgPSBjb2RlYy5tYXhwdGltZTtcbiAgICB9XG4gIH0pO1xuICBpZiAobWF4cHRpbWUgPiAwKSB7XG4gICAgc2RwICs9ICdhPW1heHB0aW1lOicgKyBtYXhwdGltZSArICdcXHJcXG4nO1xuICB9XG5cbiAgaWYgKGNhcHMuaGVhZGVyRXh0ZW5zaW9ucykge1xuICAgIGNhcHMuaGVhZGVyRXh0ZW5zaW9ucy5mb3JFYWNoKGV4dGVuc2lvbiA9PiB7XG4gICAgICBzZHAgKz0gU0RQVXRpbHMud3JpdGVFeHRtYXAoZXh0ZW5zaW9uKTtcbiAgICB9KTtcbiAgfVxuICAvLyBGSVhNRTogd3JpdGUgZmVjTWVjaGFuaXNtcy5cbiAgcmV0dXJuIHNkcDtcbn07XG5cbi8vIFBhcnNlcyB0aGUgU0RQIG1lZGlhIHNlY3Rpb24gYW5kIHJldHVybnMgYW4gYXJyYXkgb2Zcbi8vIFJUQ1J0cEVuY29kaW5nUGFyYW1ldGVycy5cblNEUFV0aWxzLnBhcnNlUnRwRW5jb2RpbmdQYXJhbWV0ZXJzID0gZnVuY3Rpb24obWVkaWFTZWN0aW9uKSB7XG4gIGNvbnN0IGVuY29kaW5nUGFyYW1ldGVycyA9IFtdO1xuICBjb25zdCBkZXNjcmlwdGlvbiA9IFNEUFV0aWxzLnBhcnNlUnRwUGFyYW1ldGVycyhtZWRpYVNlY3Rpb24pO1xuICBjb25zdCBoYXNSZWQgPSBkZXNjcmlwdGlvbi5mZWNNZWNoYW5pc21zLmluZGV4T2YoJ1JFRCcpICE9PSAtMTtcbiAgY29uc3QgaGFzVWxwZmVjID0gZGVzY3JpcHRpb24uZmVjTWVjaGFuaXNtcy5pbmRleE9mKCdVTFBGRUMnKSAhPT0gLTE7XG5cbiAgLy8gZmlsdGVyIGE9c3NyYzouLi4gY25hbWU6LCBpZ25vcmUgUGxhbkItbXNpZFxuICBjb25zdCBzc3JjcyA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiwgJ2E9c3NyYzonKVxuICAgIC5tYXAobGluZSA9PiBTRFBVdGlscy5wYXJzZVNzcmNNZWRpYShsaW5lKSlcbiAgICAuZmlsdGVyKHBhcnRzID0+IHBhcnRzLmF0dHJpYnV0ZSA9PT0gJ2NuYW1lJyk7XG4gIGNvbnN0IHByaW1hcnlTc3JjID0gc3NyY3MubGVuZ3RoID4gMCAmJiBzc3Jjc1swXS5zc3JjO1xuICBsZXQgc2Vjb25kYXJ5U3NyYztcblxuICBjb25zdCBmbG93cyA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiwgJ2E9c3NyYy1ncm91cDpGSUQnKVxuICAgIC5tYXAobGluZSA9PiB7XG4gICAgICBjb25zdCBwYXJ0cyA9IGxpbmUuc3Vic3RyaW5nKDE3KS5zcGxpdCgnICcpO1xuICAgICAgcmV0dXJuIHBhcnRzLm1hcChwYXJ0ID0+IHBhcnNlSW50KHBhcnQsIDEwKSk7XG4gICAgfSk7XG4gIGlmIChmbG93cy5sZW5ndGggPiAwICYmIGZsb3dzWzBdLmxlbmd0aCA+IDEgJiYgZmxvd3NbMF1bMF0gPT09IHByaW1hcnlTc3JjKSB7XG4gICAgc2Vjb25kYXJ5U3NyYyA9IGZsb3dzWzBdWzFdO1xuICB9XG5cbiAgZGVzY3JpcHRpb24uY29kZWNzLmZvckVhY2goY29kZWMgPT4ge1xuICAgIGlmIChjb2RlYy5uYW1lLnRvVXBwZXJDYXNlKCkgPT09ICdSVFgnICYmIGNvZGVjLnBhcmFtZXRlcnMuYXB0KSB7XG4gICAgICBsZXQgZW5jUGFyYW0gPSB7XG4gICAgICAgIHNzcmM6IHByaW1hcnlTc3JjLFxuICAgICAgICBjb2RlY1BheWxvYWRUeXBlOiBwYXJzZUludChjb2RlYy5wYXJhbWV0ZXJzLmFwdCwgMTApLFxuICAgICAgfTtcbiAgICAgIGlmIChwcmltYXJ5U3NyYyAmJiBzZWNvbmRhcnlTc3JjKSB7XG4gICAgICAgIGVuY1BhcmFtLnJ0eCA9IHtzc3JjOiBzZWNvbmRhcnlTc3JjfTtcbiAgICAgIH1cbiAgICAgIGVuY29kaW5nUGFyYW1ldGVycy5wdXNoKGVuY1BhcmFtKTtcbiAgICAgIGlmIChoYXNSZWQpIHtcbiAgICAgICAgZW5jUGFyYW0gPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGVuY1BhcmFtKSk7XG4gICAgICAgIGVuY1BhcmFtLmZlYyA9IHtcbiAgICAgICAgICBzc3JjOiBwcmltYXJ5U3NyYyxcbiAgICAgICAgICBtZWNoYW5pc206IGhhc1VscGZlYyA/ICdyZWQrdWxwZmVjJyA6ICdyZWQnLFxuICAgICAgICB9O1xuICAgICAgICBlbmNvZGluZ1BhcmFtZXRlcnMucHVzaChlbmNQYXJhbSk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbiAgaWYgKGVuY29kaW5nUGFyYW1ldGVycy5sZW5ndGggPT09IDAgJiYgcHJpbWFyeVNzcmMpIHtcbiAgICBlbmNvZGluZ1BhcmFtZXRlcnMucHVzaCh7XG4gICAgICBzc3JjOiBwcmltYXJ5U3NyYyxcbiAgICB9KTtcbiAgfVxuXG4gIC8vIHdlIHN1cHBvcnQgYm90aCBiPUFTIGFuZCBiPVRJQVMgYnV0IGludGVycHJldCBBUyBhcyBUSUFTLlxuICBsZXQgYmFuZHdpZHRoID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uLCAnYj0nKTtcbiAgaWYgKGJhbmR3aWR0aC5sZW5ndGgpIHtcbiAgICBpZiAoYmFuZHdpZHRoWzBdLmluZGV4T2YoJ2I9VElBUzonKSA9PT0gMCkge1xuICAgICAgYmFuZHdpZHRoID0gcGFyc2VJbnQoYmFuZHdpZHRoWzBdLnN1YnN0cmluZyg3KSwgMTApO1xuICAgIH0gZWxzZSBpZiAoYmFuZHdpZHRoWzBdLmluZGV4T2YoJ2I9QVM6JykgPT09IDApIHtcbiAgICAgIC8vIHVzZSBmb3JtdWxhIGZyb20gSlNFUCB0byBjb252ZXJ0IGI9QVMgdG8gVElBUyB2YWx1ZS5cbiAgICAgIGJhbmR3aWR0aCA9IHBhcnNlSW50KGJhbmR3aWR0aFswXS5zdWJzdHJpbmcoNSksIDEwKSAqIDEwMDAgKiAwLjk1XG4gICAgICAgICAgLSAoNTAgKiA0MCAqIDgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBiYW5kd2lkdGggPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGVuY29kaW5nUGFyYW1ldGVycy5mb3JFYWNoKHBhcmFtcyA9PiB7XG4gICAgICBwYXJhbXMubWF4Qml0cmF0ZSA9IGJhbmR3aWR0aDtcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gZW5jb2RpbmdQYXJhbWV0ZXJzO1xufTtcblxuLy8gcGFyc2VzIGh0dHA6Ly9kcmFmdC5vcnRjLm9yZy8jcnRjcnRjcHBhcmFtZXRlcnMqXG5TRFBVdGlscy5wYXJzZVJ0Y3BQYXJhbWV0ZXJzID0gZnVuY3Rpb24obWVkaWFTZWN0aW9uKSB7XG4gIGNvbnN0IHJ0Y3BQYXJhbWV0ZXJzID0ge307XG5cbiAgLy8gR2V0cyB0aGUgZmlyc3QgU1NSQy4gTm90ZSB0aGF0IHdpdGggUlRYIHRoZXJlIG1pZ2h0IGJlIG11bHRpcGxlXG4gIC8vIFNTUkNzLlxuICBjb25zdCByZW1vdGVTc3JjID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uLCAnYT1zc3JjOicpXG4gICAgLm1hcChsaW5lID0+IFNEUFV0aWxzLnBhcnNlU3NyY01lZGlhKGxpbmUpKVxuICAgIC5maWx0ZXIob2JqID0+IG9iai5hdHRyaWJ1dGUgPT09ICdjbmFtZScpWzBdO1xuICBpZiAocmVtb3RlU3NyYykge1xuICAgIHJ0Y3BQYXJhbWV0ZXJzLmNuYW1lID0gcmVtb3RlU3NyYy52YWx1ZTtcbiAgICBydGNwUGFyYW1ldGVycy5zc3JjID0gcmVtb3RlU3NyYy5zc3JjO1xuICB9XG5cbiAgLy8gRWRnZSB1c2VzIHRoZSBjb21wb3VuZCBhdHRyaWJ1dGUgaW5zdGVhZCBvZiByZWR1Y2VkU2l6ZVxuICAvLyBjb21wb3VuZCBpcyAhcmVkdWNlZFNpemVcbiAgY29uc3QgcnNpemUgPSBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdhPXJ0Y3AtcnNpemUnKTtcbiAgcnRjcFBhcmFtZXRlcnMucmVkdWNlZFNpemUgPSByc2l6ZS5sZW5ndGggPiAwO1xuICBydGNwUGFyYW1ldGVycy5jb21wb3VuZCA9IHJzaXplLmxlbmd0aCA9PT0gMDtcblxuICAvLyBwYXJzZXMgdGhlIHJ0Y3AtbXV4IGF0dHLRlmJ1dGUuXG4gIC8vIE5vdGUgdGhhdCBFZGdlIGRvZXMgbm90IHN1cHBvcnQgdW5tdXhlZCBSVENQLlxuICBjb25zdCBtdXggPSBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdhPXJ0Y3AtbXV4Jyk7XG4gIHJ0Y3BQYXJhbWV0ZXJzLm11eCA9IG11eC5sZW5ndGggPiAwO1xuXG4gIHJldHVybiBydGNwUGFyYW1ldGVycztcbn07XG5cblNEUFV0aWxzLndyaXRlUnRjcFBhcmFtZXRlcnMgPSBmdW5jdGlvbihydGNwUGFyYW1ldGVycykge1xuICBsZXQgc2RwID0gJyc7XG4gIGlmIChydGNwUGFyYW1ldGVycy5yZWR1Y2VkU2l6ZSkge1xuICAgIHNkcCArPSAnYT1ydGNwLXJzaXplXFxyXFxuJztcbiAgfVxuICBpZiAocnRjcFBhcmFtZXRlcnMubXV4KSB7XG4gICAgc2RwICs9ICdhPXJ0Y3AtbXV4XFxyXFxuJztcbiAgfVxuICBpZiAocnRjcFBhcmFtZXRlcnMuc3NyYyAhPT0gdW5kZWZpbmVkICYmIHJ0Y3BQYXJhbWV0ZXJzLmNuYW1lKSB7XG4gICAgc2RwICs9ICdhPXNzcmM6JyArIHJ0Y3BQYXJhbWV0ZXJzLnNzcmMgK1xuICAgICAgJyBjbmFtZTonICsgcnRjcFBhcmFtZXRlcnMuY25hbWUgKyAnXFxyXFxuJztcbiAgfVxuICByZXR1cm4gc2RwO1xufTtcblxuXG4vLyBwYXJzZXMgZWl0aGVyIGE9bXNpZDogb3IgYT1zc3JjOi4uLiBtc2lkIGxpbmVzIGFuZCByZXR1cm5zXG4vLyB0aGUgaWQgb2YgdGhlIE1lZGlhU3RyZWFtIGFuZCBNZWRpYVN0cmVhbVRyYWNrLlxuU0RQVXRpbHMucGFyc2VNc2lkID0gZnVuY3Rpb24obWVkaWFTZWN0aW9uKSB7XG4gIGxldCBwYXJ0cztcbiAgY29uc3Qgc3BlYyA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiwgJ2E9bXNpZDonKTtcbiAgaWYgKHNwZWMubGVuZ3RoID09PSAxKSB7XG4gICAgcGFydHMgPSBzcGVjWzBdLnN1YnN0cmluZyg3KS5zcGxpdCgnICcpO1xuICAgIHJldHVybiB7c3RyZWFtOiBwYXJ0c1swXSwgdHJhY2s6IHBhcnRzWzFdfTtcbiAgfVxuICBjb25zdCBwbGFuQiA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiwgJ2E9c3NyYzonKVxuICAgIC5tYXAobGluZSA9PiBTRFBVdGlscy5wYXJzZVNzcmNNZWRpYShsaW5lKSlcbiAgICAuZmlsdGVyKG1zaWRQYXJ0cyA9PiBtc2lkUGFydHMuYXR0cmlidXRlID09PSAnbXNpZCcpO1xuICBpZiAocGxhbkIubGVuZ3RoID4gMCkge1xuICAgIHBhcnRzID0gcGxhbkJbMF0udmFsdWUuc3BsaXQoJyAnKTtcbiAgICByZXR1cm4ge3N0cmVhbTogcGFydHNbMF0sIHRyYWNrOiBwYXJ0c1sxXX07XG4gIH1cbn07XG5cbi8vIFNDVFBcbi8vIHBhcnNlcyBkcmFmdC1pZXRmLW1tdXNpYy1zY3RwLXNkcC0yNiBmaXJzdCBhbmQgZmFsbHMgYmFja1xuLy8gdG8gZHJhZnQtaWV0Zi1tbXVzaWMtc2N0cC1zZHAtMDVcblNEUFV0aWxzLnBhcnNlU2N0cERlc2NyaXB0aW9uID0gZnVuY3Rpb24obWVkaWFTZWN0aW9uKSB7XG4gIGNvbnN0IG1saW5lID0gU0RQVXRpbHMucGFyc2VNTGluZShtZWRpYVNlY3Rpb24pO1xuICBjb25zdCBtYXhTaXplTGluZSA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiwgJ2E9bWF4LW1lc3NhZ2Utc2l6ZTonKTtcbiAgbGV0IG1heE1lc3NhZ2VTaXplO1xuICBpZiAobWF4U2l6ZUxpbmUubGVuZ3RoID4gMCkge1xuICAgIG1heE1lc3NhZ2VTaXplID0gcGFyc2VJbnQobWF4U2l6ZUxpbmVbMF0uc3Vic3RyaW5nKDE5KSwgMTApO1xuICB9XG4gIGlmIChpc05hTihtYXhNZXNzYWdlU2l6ZSkpIHtcbiAgICBtYXhNZXNzYWdlU2l6ZSA9IDY1NTM2O1xuICB9XG4gIGNvbnN0IHNjdHBQb3J0ID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uLCAnYT1zY3RwLXBvcnQ6Jyk7XG4gIGlmIChzY3RwUG9ydC5sZW5ndGggPiAwKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHBvcnQ6IHBhcnNlSW50KHNjdHBQb3J0WzBdLnN1YnN0cmluZygxMiksIDEwKSxcbiAgICAgIHByb3RvY29sOiBtbGluZS5mbXQsXG4gICAgICBtYXhNZXNzYWdlU2l6ZSxcbiAgICB9O1xuICB9XG4gIGNvbnN0IHNjdHBNYXBMaW5lcyA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiwgJ2E9c2N0cG1hcDonKTtcbiAgaWYgKHNjdHBNYXBMaW5lcy5sZW5ndGggPiAwKSB7XG4gICAgY29uc3QgcGFydHMgPSBzY3RwTWFwTGluZXNbMF1cbiAgICAgIC5zdWJzdHJpbmcoMTApXG4gICAgICAuc3BsaXQoJyAnKTtcbiAgICByZXR1cm4ge1xuICAgICAgcG9ydDogcGFyc2VJbnQocGFydHNbMF0sIDEwKSxcbiAgICAgIHByb3RvY29sOiBwYXJ0c1sxXSxcbiAgICAgIG1heE1lc3NhZ2VTaXplLFxuICAgIH07XG4gIH1cbn07XG5cbi8vIFNDVFBcbi8vIG91dHB1dHMgdGhlIGRyYWZ0LWlldGYtbW11c2ljLXNjdHAtc2RwLTI2IHZlcnNpb24gdGhhdCBhbGwgYnJvd3NlcnNcbi8vIHN1cHBvcnQgYnkgbm93IHJlY2VpdmluZyBpbiB0aGlzIGZvcm1hdCwgdW5sZXNzIHdlIG9yaWdpbmFsbHkgcGFyc2VkXG4vLyBhcyB0aGUgZHJhZnQtaWV0Zi1tbXVzaWMtc2N0cC1zZHAtMDUgZm9ybWF0IChpbmRpY2F0ZWQgYnkgdGhlIG0tbGluZVxuLy8gcHJvdG9jb2wgb2YgRFRMUy9TQ1RQIC0tIHdpdGhvdXQgVURQLyBvciBUQ1AvKVxuU0RQVXRpbHMud3JpdGVTY3RwRGVzY3JpcHRpb24gPSBmdW5jdGlvbihtZWRpYSwgc2N0cCkge1xuICBsZXQgb3V0cHV0ID0gW107XG4gIGlmIChtZWRpYS5wcm90b2NvbCAhPT0gJ0RUTFMvU0NUUCcpIHtcbiAgICBvdXRwdXQgPSBbXG4gICAgICAnbT0nICsgbWVkaWEua2luZCArICcgOSAnICsgbWVkaWEucHJvdG9jb2wgKyAnICcgKyBzY3RwLnByb3RvY29sICsgJ1xcclxcbicsXG4gICAgICAnYz1JTiBJUDQgMC4wLjAuMFxcclxcbicsXG4gICAgICAnYT1zY3RwLXBvcnQ6JyArIHNjdHAucG9ydCArICdcXHJcXG4nLFxuICAgIF07XG4gIH0gZWxzZSB7XG4gICAgb3V0cHV0ID0gW1xuICAgICAgJ209JyArIG1lZGlhLmtpbmQgKyAnIDkgJyArIG1lZGlhLnByb3RvY29sICsgJyAnICsgc2N0cC5wb3J0ICsgJ1xcclxcbicsXG4gICAgICAnYz1JTiBJUDQgMC4wLjAuMFxcclxcbicsXG4gICAgICAnYT1zY3RwbWFwOicgKyBzY3RwLnBvcnQgKyAnICcgKyBzY3RwLnByb3RvY29sICsgJyA2NTUzNVxcclxcbicsXG4gICAgXTtcbiAgfVxuICBpZiAoc2N0cC5tYXhNZXNzYWdlU2l6ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgb3V0cHV0LnB1c2goJ2E9bWF4LW1lc3NhZ2Utc2l6ZTonICsgc2N0cC5tYXhNZXNzYWdlU2l6ZSArICdcXHJcXG4nKTtcbiAgfVxuICByZXR1cm4gb3V0cHV0LmpvaW4oJycpO1xufTtcblxuLy8gR2VuZXJhdGUgYSBzZXNzaW9uIElEIGZvciBTRFAuXG4vLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvZHJhZnQtaWV0Zi1ydGN3ZWItanNlcC0yMCNzZWN0aW9uLTUuMi4xXG4vLyByZWNvbW1lbmRzIHVzaW5nIGEgY3J5cHRvZ3JhcGhpY2FsbHkgcmFuZG9tICt2ZSA2NC1iaXQgdmFsdWVcbi8vIGJ1dCByaWdodCBub3cgdGhpcyBzaG91bGQgYmUgYWNjZXB0YWJsZSBhbmQgd2l0aGluIHRoZSByaWdodCByYW5nZVxuU0RQVXRpbHMuZ2VuZXJhdGVTZXNzaW9uSWQgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoKS5zdWJzdHIoMiwgMjIpO1xufTtcblxuLy8gV3JpdGUgYm9pbGVyIHBsYXRlIGZvciBzdGFydCBvZiBTRFBcbi8vIHNlc3NJZCBhcmd1bWVudCBpcyBvcHRpb25hbCAtIGlmIG5vdCBzdXBwbGllZCBpdCB3aWxsXG4vLyBiZSBnZW5lcmF0ZWQgcmFuZG9tbHlcbi8vIHNlc3NWZXJzaW9uIGlzIG9wdGlvbmFsIGFuZCBkZWZhdWx0cyB0byAyXG4vLyBzZXNzVXNlciBpcyBvcHRpb25hbCBhbmQgZGVmYXVsdHMgdG8gJ3RoaXNpc2FkYXB0ZXJvcnRjJ1xuU0RQVXRpbHMud3JpdGVTZXNzaW9uQm9pbGVycGxhdGUgPSBmdW5jdGlvbihzZXNzSWQsIHNlc3NWZXIsIHNlc3NVc2VyKSB7XG4gIGxldCBzZXNzaW9uSWQ7XG4gIGNvbnN0IHZlcnNpb24gPSBzZXNzVmVyICE9PSB1bmRlZmluZWQgPyBzZXNzVmVyIDogMjtcbiAgaWYgKHNlc3NJZCkge1xuICAgIHNlc3Npb25JZCA9IHNlc3NJZDtcbiAgfSBlbHNlIHtcbiAgICBzZXNzaW9uSWQgPSBTRFBVdGlscy5nZW5lcmF0ZVNlc3Npb25JZCgpO1xuICB9XG4gIGNvbnN0IHVzZXIgPSBzZXNzVXNlciB8fCAndGhpc2lzYWRhcHRlcm9ydGMnO1xuICAvLyBGSVhNRTogc2Vzcy1pZCBzaG91bGQgYmUgYW4gTlRQIHRpbWVzdGFtcC5cbiAgcmV0dXJuICd2PTBcXHJcXG4nICtcbiAgICAgICdvPScgKyB1c2VyICsgJyAnICsgc2Vzc2lvbklkICsgJyAnICsgdmVyc2lvbiArXG4gICAgICAgICcgSU4gSVA0IDEyNy4wLjAuMVxcclxcbicgK1xuICAgICAgJ3M9LVxcclxcbicgK1xuICAgICAgJ3Q9MCAwXFxyXFxuJztcbn07XG5cbi8vIEdldHMgdGhlIGRpcmVjdGlvbiBmcm9tIHRoZSBtZWRpYVNlY3Rpb24gb3IgdGhlIHNlc3Npb25wYXJ0LlxuU0RQVXRpbHMuZ2V0RGlyZWN0aW9uID0gZnVuY3Rpb24obWVkaWFTZWN0aW9uLCBzZXNzaW9ucGFydCkge1xuICAvLyBMb29rIGZvciBzZW5kcmVjdiwgc2VuZG9ubHksIHJlY3Zvbmx5LCBpbmFjdGl2ZSwgZGVmYXVsdCB0byBzZW5kcmVjdi5cbiAgY29uc3QgbGluZXMgPSBTRFBVdGlscy5zcGxpdExpbmVzKG1lZGlhU2VjdGlvbik7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHtcbiAgICBzd2l0Y2ggKGxpbmVzW2ldKSB7XG4gICAgICBjYXNlICdhPXNlbmRyZWN2JzpcbiAgICAgIGNhc2UgJ2E9c2VuZG9ubHknOlxuICAgICAgY2FzZSAnYT1yZWN2b25seSc6XG4gICAgICBjYXNlICdhPWluYWN0aXZlJzpcbiAgICAgICAgcmV0dXJuIGxpbmVzW2ldLnN1YnN0cmluZygyKTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIC8vIEZJWE1FOiBXaGF0IHNob3VsZCBoYXBwZW4gaGVyZT9cbiAgICB9XG4gIH1cbiAgaWYgKHNlc3Npb25wYXJ0KSB7XG4gICAgcmV0dXJuIFNEUFV0aWxzLmdldERpcmVjdGlvbihzZXNzaW9ucGFydCk7XG4gIH1cbiAgcmV0dXJuICdzZW5kcmVjdic7XG59O1xuXG5TRFBVdGlscy5nZXRLaW5kID0gZnVuY3Rpb24obWVkaWFTZWN0aW9uKSB7XG4gIGNvbnN0IGxpbmVzID0gU0RQVXRpbHMuc3BsaXRMaW5lcyhtZWRpYVNlY3Rpb24pO1xuICBjb25zdCBtbGluZSA9IGxpbmVzWzBdLnNwbGl0KCcgJyk7XG4gIHJldHVybiBtbGluZVswXS5zdWJzdHJpbmcoMik7XG59O1xuXG5TRFBVdGlscy5pc1JlamVjdGVkID0gZnVuY3Rpb24obWVkaWFTZWN0aW9uKSB7XG4gIHJldHVybiBtZWRpYVNlY3Rpb24uc3BsaXQoJyAnLCAyKVsxXSA9PT0gJzAnO1xufTtcblxuU0RQVXRpbHMucGFyc2VNTGluZSA9IGZ1bmN0aW9uKG1lZGlhU2VjdGlvbikge1xuICBjb25zdCBsaW5lcyA9IFNEUFV0aWxzLnNwbGl0TGluZXMobWVkaWFTZWN0aW9uKTtcbiAgY29uc3QgcGFydHMgPSBsaW5lc1swXS5zdWJzdHJpbmcoMikuc3BsaXQoJyAnKTtcbiAgcmV0dXJuIHtcbiAgICBraW5kOiBwYXJ0c1swXSxcbiAgICBwb3J0OiBwYXJzZUludChwYXJ0c1sxXSwgMTApLFxuICAgIHByb3RvY29sOiBwYXJ0c1syXSxcbiAgICBmbXQ6IHBhcnRzLnNsaWNlKDMpLmpvaW4oJyAnKSxcbiAgfTtcbn07XG5cblNEUFV0aWxzLnBhcnNlT0xpbmUgPSBmdW5jdGlvbihtZWRpYVNlY3Rpb24pIHtcbiAgY29uc3QgbGluZSA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiwgJ289JylbMF07XG4gIGNvbnN0IHBhcnRzID0gbGluZS5zdWJzdHJpbmcoMikuc3BsaXQoJyAnKTtcbiAgcmV0dXJuIHtcbiAgICB1c2VybmFtZTogcGFydHNbMF0sXG4gICAgc2Vzc2lvbklkOiBwYXJ0c1sxXSxcbiAgICBzZXNzaW9uVmVyc2lvbjogcGFyc2VJbnQocGFydHNbMl0sIDEwKSxcbiAgICBuZXRUeXBlOiBwYXJ0c1szXSxcbiAgICBhZGRyZXNzVHlwZTogcGFydHNbNF0sXG4gICAgYWRkcmVzczogcGFydHNbNV0sXG4gIH07XG59O1xuXG4vLyBhIHZlcnkgbmFpdmUgaW50ZXJwcmV0YXRpb24gb2YgYSB2YWxpZCBTRFAuXG5TRFBVdGlscy5pc1ZhbGlkU0RQID0gZnVuY3Rpb24oYmxvYikge1xuICBpZiAodHlwZW9mIGJsb2IgIT09ICdzdHJpbmcnIHx8IGJsb2IubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGNvbnN0IGxpbmVzID0gU0RQVXRpbHMuc3BsaXRMaW5lcyhibG9iKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykge1xuICAgIGlmIChsaW5lc1tpXS5sZW5ndGggPCAyIHx8IGxpbmVzW2ldLmNoYXJBdCgxKSAhPT0gJz0nKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8vIFRPRE86IGNoZWNrIHRoZSBtb2RpZmllciBhIGJpdCBtb3JlLlxuICB9XG4gIHJldHVybiB0cnVlO1xufTtcblxuLy8gRXhwb3NlIHB1YmxpYyBtZXRob2RzLlxuaWYgKHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKSB7XG4gIG1vZHVsZS5leHBvcnRzID0gU0RQVXRpbHM7XG59XG4iLCJ2YXIgaXNQcm9kdWN0aW9uID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJztcbmZ1bmN0aW9uIHdhcm5pbmcoY29uZGl0aW9uLCBtZXNzYWdlKSB7XG4gIGlmICghaXNQcm9kdWN0aW9uKSB7XG4gICAgaWYgKGNvbmRpdGlvbikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciB0ZXh0ID0gXCJXYXJuaW5nOiBcIiArIG1lc3NhZ2U7XG5cbiAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBjb25zb2xlLndhcm4odGV4dCk7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIHRocm93IEVycm9yKHRleHQpO1xuICAgIH0gY2F0Y2ggKHgpIHt9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgd2FybmluZztcbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZikge1xuICBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7XG4gICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO1xuICB9XG4gIHJldHVybiBzZWxmO1xufSIsImltcG9ydCB0b1Byb3BlcnR5S2V5IGZyb20gXCIuL3RvUHJvcGVydHlLZXkuanNcIjtcbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07XG4gICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO1xuICAgIGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtcbiAgICBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIHRvUHJvcGVydHlLZXkoZGVzY3JpcHRvci5rZXkpLCBkZXNjcmlwdG9yKTtcbiAgfVxufVxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykge1xuICBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTtcbiAgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpO1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29uc3RydWN0b3IsIFwicHJvdG90eXBlXCIsIHtcbiAgICB3cml0YWJsZTogZmFsc2VcbiAgfSk7XG4gIHJldHVybiBDb25zdHJ1Y3Rvcjtcbn0iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfZXh0ZW5kcygpIHtcbiAgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduID8gT2JqZWN0LmFzc2lnbi5iaW5kKCkgOiBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07XG4gICAgICBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7XG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7XG4gICAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9O1xuICByZXR1cm4gX2V4dGVuZHMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn0iLCJpbXBvcnQgc2V0UHJvdG90eXBlT2YgZnJvbSBcIi4vc2V0UHJvdG90eXBlT2YuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIF9pbmhlcml0c0xvb3NlKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7XG4gIHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcy5wcm90b3R5cGUpO1xuICBzdWJDbGFzcy5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBzdWJDbGFzcztcbiAgc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpO1xufSIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKHNvdXJjZSwgZXhjbHVkZWQpIHtcbiAgaWYgKHNvdXJjZSA9PSBudWxsKSByZXR1cm4ge307XG4gIHZhciB0YXJnZXQgPSB7fTtcbiAgdmFyIHNvdXJjZUtleXMgPSBPYmplY3Qua2V5cyhzb3VyY2UpO1xuICB2YXIga2V5LCBpO1xuICBmb3IgKGkgPSAwOyBpIDwgc291cmNlS2V5cy5sZW5ndGg7IGkrKykge1xuICAgIGtleSA9IHNvdXJjZUtleXNbaV07XG4gICAgaWYgKGV4Y2x1ZGVkLmluZGV4T2Yoa2V5KSA+PSAwKSBjb250aW51ZTtcbiAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuICB9XG4gIHJldHVybiB0YXJnZXQ7XG59IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHtcbiAgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mLmJpbmQoKSA6IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7XG4gICAgby5fX3Byb3RvX18gPSBwO1xuICAgIHJldHVybiBvO1xuICB9O1xuICByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApO1xufSIsImltcG9ydCBfdHlwZW9mIGZyb20gXCIuL3R5cGVvZi5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX3RvUHJpbWl0aXZlKGlucHV0LCBoaW50KSB7XG4gIGlmIChfdHlwZW9mKGlucHV0KSAhPT0gXCJvYmplY3RcIiB8fCBpbnB1dCA9PT0gbnVsbCkgcmV0dXJuIGlucHV0O1xuICB2YXIgcHJpbSA9IGlucHV0W1N5bWJvbC50b1ByaW1pdGl2ZV07XG4gIGlmIChwcmltICE9PSB1bmRlZmluZWQpIHtcbiAgICB2YXIgcmVzID0gcHJpbS5jYWxsKGlucHV0LCBoaW50IHx8IFwiZGVmYXVsdFwiKTtcbiAgICBpZiAoX3R5cGVvZihyZXMpICE9PSBcIm9iamVjdFwiKSByZXR1cm4gcmVzO1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJAQHRvUHJpbWl0aXZlIG11c3QgcmV0dXJuIGEgcHJpbWl0aXZlIHZhbHVlLlwiKTtcbiAgfVxuICByZXR1cm4gKGhpbnQgPT09IFwic3RyaW5nXCIgPyBTdHJpbmcgOiBOdW1iZXIpKGlucHV0KTtcbn0iLCJpbXBvcnQgX3R5cGVvZiBmcm9tIFwiLi90eXBlb2YuanNcIjtcbmltcG9ydCB0b1ByaW1pdGl2ZSBmcm9tIFwiLi90b1ByaW1pdGl2ZS5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX3RvUHJvcGVydHlLZXkoYXJnKSB7XG4gIHZhciBrZXkgPSB0b1ByaW1pdGl2ZShhcmcsIFwic3RyaW5nXCIpO1xuICByZXR1cm4gX3R5cGVvZihrZXkpID09PSBcInN5bWJvbFwiID8ga2V5IDogU3RyaW5nKGtleSk7XG59IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX3R5cGVvZihvYmopIHtcbiAgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiO1xuXG4gIHJldHVybiBfdHlwZW9mID0gXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgXCJzeW1ib2xcIiA9PSB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID8gZnVuY3Rpb24gKG9iaikge1xuICAgIHJldHVybiB0eXBlb2Ygb2JqO1xuICB9IDogZnVuY3Rpb24gKG9iaikge1xuICAgIHJldHVybiBvYmogJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7XG4gIH0sIF90eXBlb2Yob2JqKTtcbn0iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbl9fd2VicGFja19yZXF1aXJlX18ubiA9IChtb2R1bGUpID0+IHtcblx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG5cdFx0KCkgPT4gKG1vZHVsZVsnZGVmYXVsdCddKSA6XG5cdFx0KCkgPT4gKG1vZHVsZSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsIHsgYTogZ2V0dGVyIH0pO1xuXHRyZXR1cm4gZ2V0dGVyO1xufTsiLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiLy8gQ29weXJpZ2h0IEVwaWMgR2FtZXMsIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbmltcG9ydCB7IENvbmZpZywgUGl4ZWxTdHJlYW1pbmcgfSBmcm9tICdAZXBpY2dhbWVzLXBzL2xpYi1waXhlbHN0cmVhbWluZ2Zyb250ZW5kLXVlNS4yJztcbmltcG9ydCB7IEFwcGxpY2F0aW9uLCBQaXhlbFN0cmVhbWluZ0FwcGxpY2F0aW9uU3R5bGUgfSBmcm9tICdAZXBpY2dhbWVzLXBzL2xpYi1waXhlbHN0cmVhbWluZ2Zyb250ZW5kLXVpLXVlNS4yJztcbnZhciBQaXhlbFN0cmVhbWluZ0FwcGxpY2F0aW9uU3R5bGVzID0gbmV3IFBpeGVsU3RyZWFtaW5nQXBwbGljYXRpb25TdHlsZSgpO1xuUGl4ZWxTdHJlYW1pbmdBcHBsaWNhdGlvblN0eWxlcy5hcHBseVN0eWxlU2hlZXQoKTtcbmRvY3VtZW50LmJvZHkub25sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgIC8vIEV4YW1wbGUgb2YgaG93IHRvIHNldCB0aGUgbG9nZ2VyIGxldmVsXG4gICAgLy8gTG9nZ2VyLlNldExvZ2dlclZlcmJvc2l0eSgxMCk7XG4gICAgLy8gQ3JlYXRlIGEgY29uZmlnIG9iamVjdFxuICAgIHZhciBjb25maWcgPSBuZXcgQ29uZmlnKHsgdXNlVXJsUGFyYW1zOiB0cnVlIH0pO1xuICAgIC8vIENyZWF0ZSBhIE5hdGl2ZSBET00gZGVsZWdhdGUgaW5zdGFuY2UgdGhhdCBpbXBsZW1lbnRzIHRoZSBEZWxlZ2F0ZSBpbnRlcmZhY2UgY2xhc3NcbiAgICB2YXIgc3RyZWFtID0gbmV3IFBpeGVsU3RyZWFtaW5nKGNvbmZpZyk7XG4gICAgdmFyIGFwcGxpY2F0aW9uID0gbmV3IEFwcGxpY2F0aW9uKHtcbiAgICAgICAgc3RyZWFtOiBzdHJlYW0sXG4gICAgICAgIG9uQ29sb3JNb2RlQ2hhbmdlZDogZnVuY3Rpb24gKGlzTGlnaHRNb2RlKSB7IHJldHVybiBQaXhlbFN0cmVhbWluZ0FwcGxpY2F0aW9uU3R5bGVzLnNldENvbG9yTW9kZShpc0xpZ2h0TW9kZSk7IH1cbiAgICB9KTtcbiAgICAvLyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNlbnRyZWJveFwiKS5hcHBlbmRDaGlsZChhcHBsaWNhdGlvbi5yb290RWxlbWVudCk7XG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhcHBsaWNhdGlvbi5yb290RWxlbWVudCk7XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9